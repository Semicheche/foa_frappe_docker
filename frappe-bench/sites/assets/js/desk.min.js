var Rollup=function(exports){"use strict";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}!function(e){var t=/xyz/.test(function(){})?/\b_super\b/:/.*/;function r(){}r.extend=function(e){var a=this.prototype,n=Object.create(a);for(var i in e)n[i]="function"==typeof e[i]&&"function"==typeof a[i]&&t.test(e[i])?function(e,t){return function(){var r=this._super;this._super=a[e];var n=t.apply(this,arguments);return this._super=r,n}}(i,e[i]):e[i];var o="function"==typeof n.init?n.hasOwnProperty("init")?n.init:function(){a.init.apply(this,arguments)}:function(){};return o.prototype=n,n.constructor=o,o.extend=r.extend,o},e.Class=r}(commonjsGlobal);var _class={};function format(e,t){return null==e?e:(this.unkeyed_index=0,e.replace(/\{(\w*)\}/g,function(e,r){if(""===r&&(r=this.unkeyed_index,this.unkeyed_index++),r==+r)return void 0!==t[r]?t[r]:e}.bind(this)))}String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),a=r.length>>>0;if(0===a)return!1;for(var n=0|t,i=Math.max(n>=0?n:a-Math.abs(n),0);i<a;){if(r[i]===e)return!0;i++}return!1}}),"function"!=typeof String.prototype.trimLeft&&(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}),"function"!=typeof String.prototype.trimRight&&(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){var t=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),a=1;a<arguments.length;a++){var n=t[a];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},writable:!0,configurable:!0}),window.frappe||(window.frappe={}),frappe.provide=function(e){for(var t=e.split("."),r=window,a=0;a<t.length;a++){var n=t[a];r[n]||(r[n]={}),r=r[n]}return r},frappe.provide("locals"),frappe.provide("frappe.flags"),frappe.provide("frappe.settings"),frappe.provide("frappe.utils"),frappe.provide("frappe.ui"),frappe.provide("frappe.modules"),frappe.provide("frappe.templates"),frappe.provide("frappe.test_data"),frappe.require=function(e,t){"string"==typeof e&&(e=[e]),frappe.assets.execute(e,t)},frappe.assets={check:function(){if(window._version_number!=localStorage.getItem("_version_number")&&(frappe.assets.clear_local_storage(),console.log("Cleared App Cache.")),localStorage._last_load){var e=new Date-new Date(localStorage._last_load);(e<1e4||e>864e5)&&frappe.assets.clear_local_storage()}else frappe.assets.clear_local_storage();frappe.assets.init_local_storage()},init_local_storage:function(){localStorage._last_load=new Date,localStorage._version_number=window._version_number,frappe.boot&&(localStorage.metadata_version=frappe.boot.metadata_version)},clear_local_storage:function(){for(var e in $.each(["_last_load","_version_number","metadata_version","page_info","last_visited"],function(e,t){localStorage.removeItem(t)}),localStorage)0!==e.indexOf("desk_assets:")&&0!==e.indexOf("_page:")&&0!==e.indexOf("_doctype:")&&0!==e.indexOf("preferred_breadcrumbs:")||localStorage.removeItem(e);console.log("localStorage cleared")},executed_:[],execute:function(e,t){for(var r=[],a=0,n=e.length;a<n;a++)frappe.assets.exists(e[a])||r.push(e[a]);r.length?frappe.assets.fetch(r,function(){frappe.assets.eval_assets(e,t)}):frappe.assets.eval_assets(e,t)},eval_assets:function(e,t){for(var r=0,a=e.length;r<a;r++){var n=e[r];-1===frappe.assets.executed_.indexOf(n)&&(frappe.assets.handler[frappe.assets.extn(n)](frappe.assets.get(n),n),frappe.assets.executed_.push(n))}t&&t()},exists:function(e){return-1!==frappe.assets.executed_.indexOf(e)||!frappe.boot.developer_mode&&!!frappe.assets.get(e)},fetch:function(e,t){frappe.call({type:"GET",method:"frappe.client.get_js",args:{items:e},callback:function(r){$.each(e,function(e,t){frappe.assets.add(t,r.message[e])}),t()},freeze:!0})},add:function(e,t){if("localStorage"in window)try{frappe.assets.set(e,t)}catch(r){frappe.assets.clear_local_storage(),frappe.assets.set(e,t)}},get:function(e){return localStorage.getItem("desk_assets:"+e)},set:function(e,t){localStorage.setItem("desk_assets:"+e,t)},extn:function(e){return-1!=e.indexOf("?")&&(e=e.split("?").slice(-1)[0]),e.split(".").slice(-1)[0]},handler:{js:function(e,t){frappe.dom.eval(e)},css:function(e,t){frappe.dom.set_style(e)}}},jQuery&&(jQuery.format=format),frappe.provide("frappe.form.formatters"),frappe.form.link_formatters={},frappe.form.formatters={_right:function(e,t){return t&&(t.inline||t.only_value)?e:"<div style='text-align: right'>"+e+"</div>"},Data:function(e){return null==e?"":e},Select:function(e){return __(frappe.form.formatters.Data(e))},Float:function(e,t,r,a){var n=t.precision||cint(frappe.boot.sysdefaults.float_precision)||null;if(t.options&&t.options.trim())return t.precision=n,frappe.form.formatters.Currency(e,t,r,a);if(!(r||{}).always_show_decimals&&!is_null(e)){var i=cstr(e).split(".");null!=i[1]&&0!==cint(i[1])||(n=0)}return frappe.form.formatters._right(null==e||""===e?"":format_number(e,null,n),r)},Int:function(e,t,r){return frappe.form.formatters._right(null==e?"":cint(e),r)},Percent:function(e,t,r){return frappe.form.formatters._right(flt(e,2)+"%",r)},Currency:function(e,t,r,a){var n=frappe.meta.get_field_currency(t,a),i=t.precision||cint(frappe.boot.sysdefaults.currency_precision)||2;if(i>2){var o=cstr(e).split("."),s=o.length>1?o[1]:"";if(s.length<3||s.length<i){var l=frappe.model.get_value(":Currency",n,"fraction_units")||100;i=cstr(l).length-1}}return e=null==e||""==e?"":format_currency(e,n,i),r&&r.only_value?e:frappe.form.formatters._right(e,r)},Check:function(e){return e?'<i class="octicon octicon-check" style="margin-right: 3px;"></i>':'<i class="fa fa-square disabled-check"></i>'},Link:function(e,t,r,a){var n=t._options||t.options,i=e;return e&&e.match&&e.match(/^['"].*['"]$/)&&e.replace(/^.(.*).$/,"$1"),r&&(r.for_print||r.only_value)?e:(frappe.form.link_formatters[n]&&a&&n!==a.doctype&&(e=frappe.form.link_formatters[n](e,a)),e?"'"==e[0]&&"'"==e[e.length-1]?e.substring(1,e.length-1):t&&t.link_onclick?repl('<a onclick="%(onclick)s">%(value)s</a>',{onclick:t.link_onclick.replace(/"/g,"&quot;"),value:e}):t&&n?repl('<a class="grey" href="#Form/%(doctype)s/%(name)s" data-doctype="%(doctype)s">%(label)s</a>',{doctype:encodeURIComponent(n),name:encodeURIComponent(i),label:__(r&&r.label||e)}):e:"")},Date:function(e){return e&&"Invalid date"===(e=frappe.datetime.str_to_user(e))&&(e=null),e||""},DateRange:function(e){return $.isArray(e)?__("{0} to {1}",[frappe.datetime.str_to_user(e[0]),frappe.datetime.str_to_user(e[1])]):e||""},Datetime:function(e){if(e){var t=moment(frappe.datetime.convert_to_user_tz(e));return frappe.boot.sysdefaults.time_zone&&(t=t.tz(frappe.boot.sysdefaults.time_zone)),t.format(frappe.boot.sysdefaults.date_format.toUpperCase()+", h:mm a z")}return""},Text:function(e){if(e){for(var t=["<p","<div","<br","<table"],r=!1,a=0;a<t.length;a++)if(e.match(t[a])){r=!0;break}r||(e=replace_newlines(e))}return frappe.form.formatters.Data(e)},LikedBy:function(e){var t="";return $.each(JSON.parse(e||"[]"),function(e,r){r&&(t+=frappe.avatar(r))}),t},Tag:function(e){var t="";return $.each((e||"").split(","),function(e,r){r&&(t+='<span class="label label-info" \t\t\t\tstyle="margin-right: 7px; cursor: pointer;"\t\t\t\tdata-field="_user_tags" data-label="'+r+'">'+r+"</span>")}),t},Comment:function(e){var t="";return $.each(JSON.parse(e||"[]"),function(e,r){r&&(t+='<span class="label label-warning" \t\t\t\tstyle="margin-right: 7px;"\t\t\t\tdata-field="_comments" data-label="'+r.name+'">'+r.comment+"</span>")}),t},Assign:function(e){var t="";return $.each(JSON.parse(e||"[]"),function(e,r){r&&(t+='<span class="label label-warning" \t\t\t\tstyle="margin-right: 7px;"\t\t\t\tdata-field="_assign">'+r+"</span>")}),t},SmallText:function(e){return frappe.form.formatters.Text(e)},TextEditor:function(e){return frappe.form.formatters.Text(e)},Code:function(e){return"<pre>"+(null==e?"":$("<div>").text(e).html())+"</pre>"},WorkflowState:function(e){var t=frappe.get_doc("Workflow State",e);return t?repl("<span class='label label-%(style)s' \t\t\t\tdata-workflow-state='%(value)s'\t\t\t\tstyle='padding-bottom: 4px; cursor: pointer;'>\t\t\t\t<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>",{value:e,style:t.style.toLowerCase(),icon:t.icon}):"<span class='label'>"+e+"</span>"},Email:function(e){return $("<div></div>").text(e).html()},FileSize:function(e){return e>1048576?e=flt(flt(e)/1048576,1)+"M":e>1024&&(e=flt(flt(e)/1024,1)+"K"),e}},frappe.form.get_formatter=function(e){return e||(e="Data"),frappe.form.formatters[e.replace(/ /g,"")]||frappe.form.formatters.Data},frappe.format=function(e,t,r,a){t||(t={fieldtype:"Data"});var n=t.fieldtype||"Data";"Dynamic Link"===n&&(n="Link",t._options=a?a[t.options]:null);var i=(t.formatter||frappe.form.get_formatter(n))(e,t,r,a);return"string"==typeof i&&(i=frappe.dom.remove_script_and_style(i)),i},frappe.get_format_helper=function(e){var t={get_formatted:function(t){var r=frappe.meta.get_docfield(e.doctype,t);return r||console.log("fieldname not found: "+t),frappe.format(e[t],r,{inline:1},e)}};return $.extend(t,e),t},frappe.templates.modal='<div class="modal fade" style="overflow: auto;" tabindex="-1">  <div class="modal-dialog">   <div class="modal-content">    <div class="modal-header">                 <div class="row">                     <div class="col-xs-7">       <span class="indicator hidden"></span>                         <h4 class="modal-title" style="font-weight: bold;">{%= title %}</h4>                     </div>                     <div class="col-xs-5">                         <div class="text-right buttons">                 <button type="button" class="btn btn-default btn-sm btn-modal-close"                                 data-dismiss="modal">         <i class="octicon octicon-x visible-xs" style="padding: 1px 0px;"></i>         <span class="hidden-xs">{%= __("Close") %}</span></button>                 <button type="button" class="btn btn-primary btn-sm hide">                                 {%= __("Confirm") %}</button>                         </div>                     </div>                 </div>    </div>    <div class="modal-body ui-front">{%= content %}    </div>   </div>  </div> </div> ',frappe.provide("frappe.dom"),frappe.dom={id_count:0,freeze_count:0,by_id:function(e){return document.getElementById(e)},get_unique_id:function(){var e="unique-"+frappe.dom.id_count;return frappe.dom.id_count++,e},set_unique_id:function(e){var t=$(e);if(t.attr("id"))return t.attr("id");var r="unique-"+frappe.dom.id_count;return t.attr("id",r),frappe.dom.id_count++,r},eval:function(e){if(e){var t=document.createElement("script");t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}},remove_script_and_style:function(e){var t=["script","style","noscript","title","meta","base","head"];if(!new RegExp(t.map(function(e){return"<"+e+">.*<\\/"+e+">"}).join("|")).test(e))return e;var r=document.createElement("div");r.innerHTML=e;var a=!1;t.forEach(function(e){var t=r.getElementsByTagName(e);for(i=t.length;i--;)a=!0,t[i].parentNode.removeChild(t[i])});for(var n=r.getElementsByTagName("link"),i=n.length;i--;)"stylesheet"==n[i].getAttribute("rel")&&(a=!0,n[i].parentNode.removeChild(n[i]));return a?r.innerHTML:e},is_element_in_viewport:function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0},set_style:function(e,t){if(e){var r=document.createElement("style");if(r.type="text/css",t){var a=document.getElementById(t);a&&a.parentNode.removeChild(a),r.id=t}return r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(r),r}},add:function(e,t,r,a,n,i){e&&e.substr&&(e=frappe.dom.by_id(e));var o=document.createElement(t);return e&&e.appendChild(o),r&&("img"==t.toLowerCase()?o.src=r:o.className=r),a&&frappe.dom.css(o,a),n&&(o.innerHTML=n),i&&(o.onclick=i),o},css:function(e,t){return e&&t&&$.extend(e.style,t),e},activate:function(e,t,r,a){void 0===a&&(a="active"),e.find("."+r+"."+a).removeClass(a),t.addClass(a)},freeze:function(e,t){if($("#freeze").length)$("#freeze").addClass("in");else{var r=$('<div id="freeze" class="modal-backdrop fade"></div>').on("click",function(){if(cur_frm&&cur_frm.cur_grid)return cur_frm.cur_grid.toggle_view(),!1}).appendTo("#body_div");r.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>',{msg:e||""})),setTimeout(function(){r.addClass("in")},1)}t&&$("#freeze").addClass(t),frappe.dom.freeze_count++},unfreeze:function(){if(frappe.dom.freeze_count&&(frappe.dom.freeze_count--,!frappe.dom.freeze_count))$("#freeze").removeClass("in").remove()},save_selection:function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount){for(var t=[],r=0,a=e.rangeCount;r<a;++r)t.push(e.getRangeAt(r));return t}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restore_selection:function(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges();for(var r=0,a=e.length;r<a;++r)t.addRange(e[r])}else document.selection&&e.select&&e.select()},is_touchscreen:function(){return"ontouchstart"in window}},frappe.ellipsis=function(e,t){return t||(t=20),(e=cstr(e)).length>t&&(e=e.substr(0,t)+"..."),e},frappe.run_serially=function(e){var t=Promise.resolve();return e.forEach(function(e){e&&(t=t.then?t.then(e):Promise.resolve())}),t},frappe.load_image=function(e,t,r,a){void 0===a&&(a=function(){});var n=new Image;n.onload=function(){t(this)},n.onerror=r,a(n),n.src=e},frappe.timeout=function(e){return new Promise(function(t){setTimeout(function(){return t()},1e3*e)})},frappe.scrub=function(e){return e.replace(/ /g,"_").toLowerCase()},frappe.get_modal=function(e,t){return $(frappe.render_template("modal",{title:e,content:t})).appendTo(document.body)},frappe.is_online=function(){return 1==frappe.boot.developer_mode||(!("onLine"in navigator)||navigator.onLine)},$(window).on("online",function(){frappe.show_alert({indicator:"green",message:__("You are connected to internet.")})}),$(window).on("offline",function(){frappe.show_alert({indicator:"orange",message:__("Connection lost. Some features might not work.")})}),function(e){e.fn.add_options=function(t){for(var r=0,a=t.length;r<a;r++){var n=t[r];if(is_null(n))var i=null,o=null;else{var s=is_null(n.value),l=is_null(n.label);if(s&&l)i=n,o=__(n);else i=s?"":n.value,o=l?__(i):__(n.label)}e("<option>").html(cstr(o)).attr("value",i).appendTo(this)}return this.selectedIndex=0,e(this)},e.fn.set_working=function(){this.prop("disabled",!0)},e.fn.done_working=function(){this.prop("disabled",!1)}}(jQuery),function(e){function t(t){e(t).keydown(function(e){if(9==e.which)return function(e,t){if(e.focus(),"number"==typeof e.selectionStart){var r=e.value,a=e.selectionStart;e.value=r.slice(0,a)+t+r.slice(e.selectionEnd),e.selectionEnd=e.selectionStart=a+t.length}else if(void 0!==document.selection){var n=document.selection.createRange();n.text=t,n.collapse(!1),n.select()}}(this,"\t"),!1}),e(t).keypress(function(e){if(9==e.which)return!1})}e.fn.allowTabs=function(){return this.jquery&&this.each(function(){if(1==this.nodeType){var e=this.nodeName.toLowerCase();("textarea"==e||"input"==e&&"text"==this.type)&&t(this)}}),this}}(jQuery),frappe.provide("frappe.messages"),frappe.messages.waiting=function(e,t){return $(frappe.messages.get_waiting_message(t)).appendTo(e)},frappe.messages.get_waiting_message=function(e){return repl('<div class="msg-box" style="width: 63%; margin: 30px auto;">\t\t<p class="text-center">%(msg)s</p></div>',{msg:e})},frappe.throw=function(e){throw"string"==typeof e&&(e={message:e,title:__("Error")}),e.indicator||(e.indicator="red"),frappe.msgprint(e),new Error(e.message)},frappe.confirm=function(e,t,r){var a=new frappe.ui.Dialog({title:__("Confirm"),fields:[{fieldtype:"HTML",options:'<p class="frappe-confirm-message">'+e+"</p>"}],primary_action_label:__("Yes"),primary_action:function(){t&&t(),a.hide()},secondary_action_label:__("No")});return a.show(),a.confirm_dialog=!0,r&&(a.onhide=function(){a.primary_action_fulfilled||r()}),a},frappe.prompt=function(e,t,r,a){"string"==typeof e&&(e=[{label:e,fieldname:"value",fieldtype:"Data",reqd:1}]),$.isArray(e)||(e=[e]);var n=new frappe.ui.Dialog({fields:e,title:r||__("Enter Value")});return n.set_primary_action(a||__("Submit"),function(){var e=n.get_values();e&&(n.hide(),t(e))}),n.show(),n};var msg_dialog$1=null;function close_grid_and_dialog(){var e=$(".grid-row-open");return e.length?(e.data("grid_row").toggle_view(!1),!1):cur_dialog&&!cur_dialog.no_cancel_flag?(cur_dialog.cancel(),!1):void 0}function fmt_money(e,t){return format_currency(e,t)}function toTitle(e){var t=e.split(" "),r=[];for(var a in t)r[a]=t[a].charAt(0).toUpperCase()+t[a].slice(1);return r.join(" ")}function is_null$1(e){if(null==e||""===cstr$1(e).trim())return!0}function set_value_in(e,t,r,a,n){$(e).html(frappe.format(t,{fieldtype:r,options:a},null,n))}function copy_dict$1(e){var t={};for(var r in e)t[r]=e[r];return t}function replace_newlines$1(e){return e?e.replace(/\n/g,"<br>"):""}function validate_email(e){return frappe.utils.validate_type(e,"email")}function validate_spl_chars(e){return frappe.utils.validate_type(e,"alphanum")}function cstr$1(e){return null==e?"":e+""}function nth(e){var t="th";return"1"==((e=cint(e))+"").substr(-1)&&(t="st"),"2"==(e+"").substr(-1)&&(t="nd"),"3"==(e+"").substr(-1)&&(t="rd"),e+t}function esc_quotes(e){return null==e&&(e=""),e.replace(/'/,"'")}function has_words$1(e,t){if(!t)return!0;if(!e)return!1;for(var r=0,a=e.length;r<a;r++)if(-1!=t.indexOf(e[r]))return!0;return!1}function has_common$1(e,t){if(!e||!t)return!1;for(var r=0,a=e.length;r<a;r++)if(in_list(t,e[r]))return!0;return!1}function add_lists(e,t){return[].concat(e).concat(t)}function docstring(e){return JSON.stringify(e)}function remove_from_list(e,t){return-1!==e.indexOf(t)&&e.splice(e.indexOf(t),1),e}function $c$1(e,t,r,a,n,i,o){return console.warn("This function '$c' has been deprecated and will be removed soon."),frappe.request.call({type:"POST",args:$.extend(t,{cmd:e}),success:r,error:a,btn:o,freeze:i,show_spinner:!n})}function $c_obj(e,t,r,a,n,i,o){console.warn("This function '$c_obj' has been deprecated and will be removed soon."),r&&"string"!=typeof r&&(r=JSON.stringify(r));var s={cmd:"runserverobj",args:r,method:t};return"string"==typeof e?s.doctype=e:s.docs=e,frappe.request.call({type:"POST",args:s,success:a,btn:o,freeze:i,show_spinner:!n})}function $c_obj_csv(e,t,r){console.warn("This function '$c_obj_csv' has been deprecated and will be removed soon.");var a={cmd:"runserverobj",as_csv:1};a.method=t,a.arg=r,e.substr?a.doctype=e:a.docs=e,open_url_post(frappe.request.url,a)}function _open_url_post(e,t,r){var a=document.createElement("form");for(var n in a.action=e,a.method="POST",a.style.display="none",r&&(a.target="_blank"),t.csrf_token=frappe.csrf_token,t){var i=document.createElement("textarea");i.name=n;var o=t[n];"string"!=typeof o&&(o=JSON.stringify(o)),i.value=o,a.appendChild(i)}return document.body.appendChild(a),a.submit(),a}function prettyDate(e,t){if(e||(e=new Date),"moment"in window){var r;if(r=frappe.sys_defaults&&frappe.sys_defaults.time_zone?moment.tz(e,frappe.sys_defaults.time_zone).locale(frappe.boot.lang).fromNow(t):moment(e).locale(frappe.boot.lang).fromNow(t),t){if(r===moment().locale(frappe.boot.lang).fromNow(t))r=__("now");else{var a=r.split(" ");a.length>1&&("a"!==a[0]&&"an"!==a[0]||(a[0]=1),r="mo"===a[1].substr(0,2)?a[0]+" M":a[0]+" "+a[1].substr(0,1))}r=r.substr(0,5)}return r}if(!e)return"";var n=e;"string"==typeof e&&(n=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ").replace(/\.[0-9]*/,"")));var i=((new Date).getTime()-n.getTime())/1e3,o=Math.floor(i/86400);return isNaN(o)||o<0?"":0==o&&(i<60&&__("just now")||i<120&&__("1 minute ago")||i<3600&&__("{0} minutes ago",[Math.floor(i/60)])||i<7200&&__("1 hour ago")||i<86400&&[Math.floor(i/3600)])||1==o&&__("Yesterday")||o<7&&__("{0} days ago",o)||o<31&&__("{0} weeks ago",[Math.ceil(o/7)])||o<365&&__("{0} months ago",[Math.ceil(o/30)])||__("> {0} year(s) ago",[Math.floor(o/365)])}frappe.msgprint=function(e,t){if(e){if($.isPlainObject(e))var r=e;else if("string"==typeof e&&"{"===e.substr(0,1))r=JSON.parse(e);else r={message:e,title:t};if(r.indicator||(r.indicator="blue"),r.message instanceof Array)r.message.forEach(function(e){frappe.msgprint(e)});else{if(!r.alert){msg_dialog$1||((msg_dialog$1=new frappe.ui.Dialog({title:__("Message"),onhide:function(){msg_dialog$1.custom_onhide&&msg_dialog$1.custom_onhide(),msg_dialog$1.msg_area.empty()}})).msg_area=$('<div class="msgprint">').appendTo(msg_dialog$1.body),msg_dialog$1.loading_indicator=$('<div class="loading-indicator text-center" \t\t\t\tstyle="margin: 15px;">\t\t\t\t<img src="/assets/frappe/images/ui/ajax-loader.gif"></div>').appendTo(msg_dialog$1.body),msg_dialog$1.clear=function(){msg_dialog$1.msg_area.empty()},msg_dialog$1.indicator=msg_dialog$1.header.find(".indicator")),null==r.message&&(r.message=""),-1==r.message.search(/<br>|<p>|<li>/)&&(e=replace_newlines(r.message));var a=!1;return r.clear?msg_dialog$1.msg_area.empty():a=msg_dialog$1.msg_area.html(),!r.title&&a||msg_dialog$1.set_title(r.title||__("Message")),r.indicator?msg_dialog$1.indicator.removeClass().addClass("indicator "+r.indicator):msg_dialog$1.indicator.removeClass().addClass("hidden"),a&&msg_dialog$1.msg_area.append("<hr>"),msg_dialog$1.msg_area.append(r.message),msg_dialog$1.loading_indicator.addClass("hide"),msg_dialog$1.show_loading=function(){msg_dialog$1.loading_indicator.removeClass("hide")},msg_dialog$1.$wrapper.css("z-index",2e3),msg_dialog$1.show(),msg_dialog$1}frappe.show_alert(r)}}},Object.defineProperty(window,"msgprint",{get:function(){return console.warn("Please use `frappe.msgprint` instead of `msgprint`. It will be deprecated soon."),frappe.msgprint}}),frappe.hide_msgprint=function(e){msg_dialog$1&&msg_dialog$1.msg_area&&msg_dialog$1.msg_area.empty(),msg_dialog$1&&msg_dialog$1.$wrapper.is(":visible")&&(e&&msg_dialog$1.$wrapper.removeClass("fade"),msg_dialog$1.hide(),e&&msg_dialog$1.$wrapper.addClass("fade"))},frappe.update_msgprint=function(e){!msg_dialog$1||msg_dialog$1&&!msg_dialog$1.$wrapper.is(":visible")?frappe.msgprint(e):msg_dialog$1.msg_area.html(e)},frappe.verify_password=function(e){frappe.prompt({fieldname:"password",label:__("Enter your password"),fieldtype:"Password",reqd:1},function(t){frappe.call({method:"frappe.core.doctype.user.user.verify_password",args:{password:t.password},callback:function(t){t.exc||e()}})},__("Verify Password"),__("Verify"))},frappe.show_progress=function(e,t,r,a){if(void 0===r&&(r=100),frappe.cur_progress&&frappe.cur_progress.title===e&&frappe.cur_progress.is_visible)var n=frappe.cur_progress;else(n=new frappe.ui.Dialog({title:e})).progress=$('<div>\n\t\t\t<div class="progress">\n\t\t\t\t<div class="progress-bar"></div>\n\t\t\t</div>\n\t\t\t<p class="description text-muted small"></p>\n\t\t</div').appendTo(n.body),n.progress_bar=n.progress.css({"margin-top":"10px"}).find(".progress-bar"),n.$wrapper.removeClass("fade"),n.show(),frappe.cur_progress=n;return a&&n.progress.find(".description").text(a),n.percent=cint(100*flt(t)/r),n.progress_bar.css({width:n.percent+"%"}),n},frappe.hide_progress=function(){frappe.cur_progress&&(frappe.cur_progress.hide(),frappe.cur_progress=null)},frappe.show_alert=function(e,t){var r;void 0===t&&(t=7),"string"==typeof e&&(e={message:e}),$("#dialog-container").length||$('<div id="dialog-container"><div id="alert-container"></div></div>').appendTo("body"),r=e.indicator?$('<span class="indicator '+e.indicator+'"></span>').append(e.message):e.message;var a=$('\n\t\t<div class="alert desk-alert">\n\t\t\t<span class="alert-message"></span><a class="close">&times;</a>\n\t\t</div>');return a.find(".alert-message").append(r),a.hide().appendTo("#alert-container").fadeIn(300),a.find(".close").click(function(){return $(this).parent().remove(),!1}),a.delay(1e3*t).fadeOut(300),a},Object.defineProperty(window,"show_alert",{get:function(){return console.warn("Please use `frappe.show_alert` instead of `show_alert`. It will be deprecated soon."),frappe.show_alert}}),frappe.provide("frappe.ui.keys.handlers"),frappe.ui.keys.setup=function(){$(window).on("keydown",function(e){var t=frappe.ui.keys.get_key(e);if(frappe.ui.keys.handlers[t]){for(var r=null,a=0,n=frappe.ui.keys.handlers[t].length;a<n;a++){var i=frappe.ui.keys.handlers[t][a].apply(this,[e]);!1===i&&(r=i)}return r}})},frappe.ui.keys.get_key=function(e){var t=e.keyCode||e.which,r=frappe.ui.keys.key_map[t]||String.fromCharCode(t);return(e.ctrlKey||e.metaKey)&&(r="ctrl+"+r),e.shiftKey&&(r="shift+"+r),r.toLowerCase()},frappe.ui.keys.on=function(e,t){frappe.ui.keys.handlers[e]||(frappe.ui.keys.handlers[e]=[]),frappe.ui.keys.handlers[e].push(t)},frappe.ui.keys.on("ctrl+s",function(e){return frappe.app.trigger_primary_action(),e.preventDefault(),!1}),frappe.ui.keys.on("ctrl+g",function(e){return $("#navbar-search").focus(),e.preventDefault(),!1}),frappe.ui.keys.on("ctrl+b",function(e){var t=frappe.get_route();if("Form"===t[0]||"List"===t[0])return frappe.new_doc(t[1],!0),e.preventDefault(),!1}),frappe.ui.keys.on("escape",function(e){close_grid_and_dialog()}),frappe.ui.keys.on("esc",function(e){close_grid_and_dialog()}),frappe.ui.keys.on("enter",function(e){window.cur_dialog&&cur_dialog.confirm_dialog&&cur_dialog.get_primary_btn().trigger("click")}),frappe.ui.keys.on("ctrl+down",function(e){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_next()})}),frappe.ui.keys.on("ctrl+up",function(e){var t=frappe.ui.form.get_open_grid_form();t&&t.toggle_view(!1,function(){t.open_prev()})}),frappe.ui.keys.on("shift+ctrl+r",function(e){frappe.ui.toolbar.clear_cache()}),frappe.ui.keys.key_map={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",91:"meta",18:"alt",27:"escape",37:"left",39:"right",38:"up",40:"down",32:"space"},frappe.ui.keyCode={ESCAPE:27,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,TAB:9,SPACE:32},frappe.provide("frappe.ui"),frappe.ui.color_map={red:["#ffc4c4","#ff8989","#ff4d4d","#a83333"],brown:["#ffe8cd","#ffd19c","#ffb868","#a87945"],orange:["#ffd2c2","#ffa685","#ff7846","#a85b5b"],peach:["#ffd7d7","#ffb1b1","#ff8989","#a84f2e"],yellow:["#fffacd","#fff168","#fff69c","#a89f45"],yellowgreen:["#ebf8cc","#d9f399","#c5ec63","#7b933d"],green:["#cef6d1","#9deca2","#6be273","#428b46"],cyan:["#d2f8ed","#a4f3dd","#77ecca","#49937e"],skyblue:["#d2f1ff","#a6e4ff","#78d6ff","#4f8ea8"],blue:["#d2d2ff","#a3a3ff","#7575ff","#4d4da8"],purple:["#dac7ff","#b592ff","#8e58ff","#5e3aa8"],pink:["#f8d4f8","#f3aaf0","#ec7dea","#934f92"],white:["#d1d8dd","#fafbfc","#ffffff",""],black:["#8D99A6","#6c7680","#36414c","#212a33"]},frappe.ui.color={get:function(e,t){return e&&t?this.get_color_shade(e,t):e?this.get_color_shade(e,"default"):frappe.ui.color_map},get_color:function(e){var t=Object.keys(frappe.ui.color_map);if(t.includes(e))return frappe.ui.color_map[e];console.warn("'color_name' can be one of "+t+" and not "+e)},get_color_shade:function(e,t){var r={default:2,light:1,"extra-light":0,dark:3};if(Object.keys(r).includes(t))return frappe.ui.color_map[e][r[t]];console.warn("'shade' can be one of "+Object.keys(r)+" and not "+t)},all:function(){return Object.values(frappe.ui.color_map).reduce(function(e,t){return e.concat(t)},[])},names:function(){return Object.keys(frappe.ui.color_map)},is_standard:function(e){return!!e&&(e.startsWith("#")?this.all().includes(e):this.names().includes(e))},get_color_name:function(e){for(var t in frappe.ui.color_map){if(frappe.ui.color_map[t].includes(e))return t}},get_contrast_color:function(e){if(this.validate_hex(e)){if(!this.is_standard(e))return this.brightness(e)<128?this.lighten(e,.5):this.lighten(e,-.5);var t=this.get_color_name(e);return this.get_color(t).indexOf(e)<=1?this.get(t,"dark"):this.get(t,"extra-light")}},validate_hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},lighten:function(e,t){var r=parseInt(e.slice(1),16),a=t<0?0:255,n=t<0?-1*t:t,i=r>>16,o=r>>8&255,s=255&r;return"#"+(16777216+65536*(Math.round((a-i)*n)+i)+256*(Math.round((a-o)*n)+o)+(Math.round((a-s)*n)+s)).toString(16).slice(1)},hex_to_rgb:function(e){return e.startsWith("#")&&(e=e.substring(1)),{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},brightness:function(e){var t=this.hex_to_rgb(e);return(299*t.r+587*t.g+114*t.b)/1e3}},frappe.provide("frappe.ui"),frappe.ui.Sidebar=function(){function e(e){var t=e.wrapper,r=e.css_class;this.wrapper=t,this.css_class=r,this.items={},this.make_dom()}return e.prototype.make_dom=function(){this.wrapper.html('\n\t\t\t<div class="'+this.css_class+' overlay-sidebar hidden-xs hidden-sm">\n\t\t\t</div>\n\t\t'),this.$sidebar=this.wrapper.find("."+this.css_class)},e.prototype.add_item=function(e,t,r){var a,n;if(void 0===r&&(r=!1),a=t||0!==this.wrapper.find(".sidebar-menu").length?this.get_section(t):this.get_section(),e instanceof jQuery)n=$("<li>"),e.appendTo(n);else{var i="<li class="+(r?"h6":"")+">\n\t\t\t\t<a "+(e.href?'href="'+e.href+'"':"")+">"+e.label+"</a>\n\t\t\t</li>";n=$(i).click(function(){return e.on_click&&e.on_click()})}a.append(n),e.name&&(this.items[e.name]=n)},e.prototype.remove_item=function(e){this.items[e]&&this.items[e].remove()},e.prototype.get_section=function(e){void 0===e&&(e="");var t=$(this.wrapper.find('[data-section-heading="'+e+'"]'));return t.length?t:(t=$('\n\t\t\t<ul class="list-unstyled sidebar-menu" data-section-heading="'+(e||"default")+'">\n\t\t\t\t'+(e?'<li class="h6">'+e+"</li>":"")+"\n\t\t\t</ul>\n\t\t"),this.$sidebar.append(t),t)},e}(),frappe.provide("frappe.request"),frappe.request.url="/",frappe.request.ajax_count=0,frappe.request.waiting_for_ajax=[],frappe.call=function(e){if(frappe.is_online()){"string"==typeof arguments[0]&&(e={method:arguments[0],args:arguments[1],callback:arguments[2]}),e.quiet&&(e.no_spinner=!0);var t=$.extend({},e.args);e.module&&e.page?t.cmd=e.module+".page."+e.page+"."+e.page+"."+e.method:e.doc?$.extend(t,{cmd:"runserverobj",docs:frappe.get_doc(e.doc.doctype,e.doc.name),method:e.method,args:e.args}):e.method&&(t.cmd=e.method);return frappe.request.call({type:e.type||"POST",args:t,success:function(t,r){if(t.task_id)frappe.socketio.subscribe(t.task_id,e),e.queued&&e.queued(t);else if(e.callback)return e.callback(t,r)},error:e.error,always:e.always,btn:e.btn,freeze:e.freeze,freeze_message:e.freeze_message,async:e.async,url:e.url||frappe.request.url})}frappe.show_alert({indicator:"orange",message:__("You are not connected to Internet. Retry after sometime.")},3)},frappe.request.call=function(e){frappe.request.prepare(e);var t={200:function(t,r){e.success_callback&&e.success_callback(t,r.responseText)},401:function(e){frappe.app.session_expired_dialog&&frappe.app.session_expired_dialog.display?frappe.app.redirect_to_login():frappe.app.handle_session_expired()},404:function(e){frappe.msgprint({title:__("Not found"),indicator:"red",message:__("The resource you are looking for is not available")})},403:function(e){if("Guest"===frappe.get_cookie("sid"))frappe.app.handle_session_expired();else if(e.responseJSON&&e.responseJSON._error_message)frappe.msgprint({title:__("Not permitted"),indicator:"red",message:e.responseJSON._error_message}),e.responseJSON._server_messages=null;else if(e.responseJSON&&e.responseJSON._server_messages){if(-1!==JSON.parse(e.responseJSON._server_messages).indexOf(__("Not permitted")))return}else frappe.msgprint({title:__("Not permitted"),indicator:"red",message:__("You do not have enough permissions to access this resource. Please contact your manager to get access.")})},508:function(e){frappe.utils.play_sound("error"),frappe.msgprint({title:__("Please try again"),indicator:"red",message:__("Another transaction is blocking this one. Please try again in a few seconds.")})},413:function(e,t){frappe.msgprint({indicator:"red",title:__("File too big"),message:__("File size exceeded the maximum allowed size of {0} MB",[(frappe.boot.max_file_size||5242880)/1048576])})},417:function(t){var r=t.responseJSON;if(!r)try{r=JSON.parse(t.responseText)}catch(e){r=t.responseText}e.error_callback&&e.error_callback(r)},501:function(t,r){"string"==typeof t&&(t=JSON.parse(t)),e.error_callback&&e.error_callback(t,r.responseText)},500:function(t){frappe.utils.play_sound("error"),frappe.msgprint({message:__("Server Error: Please check your server logs or contact tech support."),title:__("Something went wrong"),indicator:"red"});try{e.error_callback&&e.error_callback(),frappe.request.report_error(t,e)}catch(r){frappe.request.report_error(t,e)}},504:function(t){frappe.msgprint(__("Request Timed Out")),e.error_callback&&e.error_callback()}},r={url:e.url||frappe.request.url,data:e.args,type:e.type,dataType:e.dataType||"json",async:e.async,headers:{"X-Frappe-CSRF-Token":frappe.csrf_token},cache:!1};return frappe.last_request=r.data,$.ajax(r).done(function(e,r,a){try{"string"==typeof e&&(e=JSON.parse(e)),(e.docs||e.docinfo)&&frappe.model.sync(e),e.__messages&&$.extend(frappe._messages,e.__messages);var n=t[a.statusCode().status];n&&n(e,a)}catch(e){console.log("Unable to handle success response"),console.trace(e)}}).always(function(t,r,a){try{"string"==typeof t&&(t=JSON.parse(t)),t.responseText&&(t=JSON.parse(t.responseText))}catch(e){t=null}frappe.request.cleanup(e,t),e.always&&e.always(t)}).fail(function(r,a){try{var n=t[r.statusCode().status];n?n(r):e.error_callback&&e.error_callback(r)}catch(e){console.log("Unable to handle failed response"),console.trace(e)}})},frappe.request.prepare=function(e){for(var t in $("body").attr("data-ajax-state","triggered"),e.btn&&$(e.btn).prop("disabled",!0),e.freeze&&frappe.dom.freeze(e.freeze_message),e.args)e.args[t]&&($.isPlainObject(e.args[t])||$.isArray(e.args[t]))&&(e.args[t]=JSON.stringify(e.args[t]));if(!e.args.cmd&&!e.url)throw console.log(e),"Incomplete Request";e.success_callback=e.success,e.error_callback=e.error,delete e.success,delete e.error},frappe.request.cleanup=function(e,t){if(e.btn&&$(e.btn).prop("disabled",!1),$("body").attr("data-ajax-state","complete"),e.freeze&&frappe.dom.unfreeze(),t){if(t.session_expired||"Guest"===frappe.get_cookie("sid"))return void frappe.app.handle_session_expired();t._server_messages&&!e.silent&&(t._server_messages=JSON.parse(t._server_messages),frappe.hide_msgprint(),frappe.msgprint(t._server_messages)),t.exc&&(t.exc=JSON.parse(t.exc),t.exc instanceof Array?$.each(t.exc,function(e,t){t&&console.log(t)}):console.log(t.exc)),t._debug_messages&&(e.args&&(console.log("======== arguments ========"),console.log(e.args),console.log("========")),$.each(JSON.parse(t._debug_messages),function(e,t){console.log(t)}),console.log("======== response ========"),delete t._debug_messages,console.log(t),console.log("========"))}frappe.last_response=t},frappe.after_server_call=function(){return frappe.request.ajax_count?new Promise(function(e){frappe.request.waiting_for_ajax.push(function(){e()})}):null},frappe.after_ajax=function(e){return new Promise(function(t){frappe.request.ajax_count?frappe.request.waiting_for_ajax.push(function(){e&&e(),t()}):(e&&e(),t())})},frappe.request.report_error=function(e,t){var r=JSON.parse(e.responseText);if(r.exc){var a=(JSON.parse(r.exc)||[]).join("\n");delete r.exc}else a="";if(a){var n=(frappe.boot.error_report_email||[]).join(", "),i='<div>\t\t\t<pre style="max-height: 300px; margin-top: 7px;">'+a.replace(/</g,"&lt;").replace(/>/g,"&gt;")+'</pre><p class="text-right"><a class="btn btn-primary btn-sm report-btn">'+__("Report this issue")+"</a></p></div>";t=frappe.request.cleanup_request_opts(t),window.msg_dialog=frappe.msgprint({message:i,indicator:"red"}),msg_dialog.msg_area.find(".report-btn").toggle(!!n).on("click",function(){var e=["<h5>Please type some additional information that could help us reproduce this issue:</h5>",'<div style="min-height: 100px; border: 1px solid #bbb; \t\t\t\t\t\tborder-radius: 5px; padding: 15px; margin-bottom: 15px;"></div>',"<hr>","<h5>App Versions</h5>","<pre>"+JSON.stringify(frappe.boot.versions,null,"\t")+"</pre>","<h5>Route</h5>","<pre>"+frappe.get_route_str()+"</pre>","<hr>","<h5>Error Report</h5>","<pre>"+a+"</pre>","<hr>","<h5>Request Data</h5>","<pre>"+JSON.stringify(t,null,"\t")+"</pre>","<hr>","<h5>Response JSON</h5>","<pre>"+JSON.stringify(r,null,"\t")+"</pre>"].join("\n");new frappe.views.CommunicationComposer({subject:"Error Report ["+frappe.datetime.nowdate()+"]",recipients:n,message:e,doc:{doctype:"User",name:frappe.session.user}}).dialog.$wrapper.css("z-index",cint(msg_dialog.$wrapper.css("z-index"))+1)})}},frappe.request.cleanup_request_opts=function(e){var t=(e.args||{}).doc;return t&&(t=JSON.parse(t),$.each(Object.keys(t),function(e,r){-1!==r.indexOf("password")&&t[r]&&(t[r]="*****")}),e.args.doc=JSON.stringify(t)),e},$(document).ajaxSend(function(){frappe.request.ajax_count++}),$(document).ajaxComplete(function(){frappe.request.ajax_count--,frappe.request.ajax_count||($.each(frappe.request.waiting_for_ajax||[],function(e,t){t()}),frappe.request.waiting_for_ajax=[])}),frappe.socketio={open_tasks:{},open_docs:[],emit_queue:[],init:function(port){void 0===port&&(port=3e3),frappe.boot.disable_async||frappe.socketio.socket||("https:"==window.location.protocol?frappe.socketio.socket=io.connect(frappe.socketio.get_host(port),{secure:!0}):"http:"==window.location.protocol?frappe.socketio.socket=io.connect(frappe.socketio.get_host(port)):"file:"==window.location.protocol&&(frappe.socketio.socket=io.connect(window.localStorage.server)),frappe.socketio.socket?(frappe.socketio.socket.on("msgprint",function(e){frappe.msgprint(e)}),frappe.socketio.socket.on("eval_js",function(message){eval(message)}),frappe.socketio.socket.on("progress",function(e){e.progress&&(e.percent=flt(e.progress[0])/e.progress[1]*100),e.percent&&(100==e.percent?frappe.hide_progress():frappe.show_progress(e.title||__("Progress"),e.percent,100,e.description))}),frappe.socketio.setup_listeners(),frappe.socketio.setup_reconnect(),frappe.socketio.uploader=new frappe.socketio.SocketIOUploader,$(document).on("form-load form-rename",function(e,t){if(!t.is_new()){for(var r=0,a=frappe.socketio.open_docs.length;r<a;r++){var n=frappe.socketio.open_docs[r];if(t.doctype==n.doctype&&t.docname==n.name)return!1}frappe.socketio.doc_subscribe(t.doctype,t.docname)}}),$(document).on("form-refresh",function(e,t){t.is_new()||frappe.socketio.doc_open(t.doctype,t.docname)}),$(document).on("form-unload",function(e,t){t.is_new()||frappe.socketio.doc_close(t.doctype,t.docname)}),window.onbeforeunload=function(){cur_frm&&!cur_frm.is_new()&&cur_frm.doc&&frappe.socketio.doc_close(cur_frm.doctype,cur_frm.docname)}):console.log("Unable to connect to "+frappe.socketio.get_host(port)))},get_host:function(e){void 0===e&&(e=3e3);var t=window.location.origin;if(window.dev_server){var r=t.split(":");e=frappe.boot.socketio_port||e.toString()||"3000",r.length>2&&(t=r[0]+":"+r[1]),t=t+":"+e}return t},subscribe:function(e,t){frappe.socketio.socket.emit("task_subscribe",e),frappe.socketio.socket.emit("progress_subscribe",e),frappe.socketio.open_tasks[e]=t},task_subscribe:function(e){frappe.socketio.socket.emit("task_subscribe",e)},task_unsubscribe:function(e){frappe.socketio.socket.emit("task_unsubscribe",e)},doc_subscribe:function(e,t){frappe.flags.doc_subscribe?console.log("throttled"):(frappe.flags.doc_subscribe=!0,setTimeout(function(){frappe.flags.doc_subscribe=!1},1e3),frappe.socketio.socket.emit("doc_subscribe",e,t),frappe.socketio.open_docs.push({doctype:e,docname:t}))},doc_unsubscribe:function(e,t){frappe.socketio.socket.emit("doc_unsubscribe",e,t),frappe.socketio.open_docs=$.filter(frappe.socketio.open_docs,function(r){return r.doctype===e&&r.name===t?null:r})},doc_open:function(e,t){(!frappe.socketio.last_doc||frappe.socketio.last_doc[0]!=e&&frappe.socketio.last_doc[0]!=t)&&frappe.socketio.socket.emit("doc_open",e,t),frappe.socketio.last_doc=[e,t]},doc_close:function(e,t){frappe.socketio.socket.emit("doc_close",e,t)},setup_listeners:function(){frappe.socketio.socket.on("task_status_change",function(e){frappe.socketio.process_response(e,e.status.toLowerCase())}),frappe.socketio.socket.on("task_progress",function(e){frappe.socketio.process_response(e,"progress")})},setup_reconnect:function(){frappe.socketio.socket.on("connect",function(){setTimeout(function(){$.each(frappe.socketio.open_tasks,function(e,t){frappe.socketio.subscribe(e,t)}),$.each(frappe.socketio.open_docs,function(e){locals[e.doctype]&&locals[e.doctype][e.name]&&frappe.socketio.doc_subscribe(e.doctype,e.name)}),cur_frm&&cur_frm.doc&&frappe.socketio.doc_open(cur_frm.doc.doctype,cur_frm.doc.name)},5e3)})},process_response:function(e,t){if(e){var r=frappe.socketio.open_tasks[e.task_id];r[t]&&r[t](e),"success"===t&&r.callback&&r.callback(e),frappe.request.cleanup(r,e),r.always&&r.always(e),e.status_code&&e.status_code>400&&r.error&&r.error(e)}}},frappe.provide("frappe.realtime"),frappe.realtime.on=function(e,t){frappe.socketio.socket&&frappe.socketio.socket.on(e,t)},frappe.realtime.off=function(e,t){frappe.socketio.socket&&frappe.socketio.socket.off(e,t)},frappe.realtime.publish=function(e,t){frappe.socketio.socket&&frappe.socketio.socket.emit(e,t)},frappe.socketio.SocketIOUploader=function(){function e(){var e=this;frappe.socketio.socket.on("upload-request-slice",function(t){var r=t.currentSlice*e.chunk_size,a=e.file.slice(r,r+Math.min(e.chunk_size,e.file.size-r));e.on_progress&&e.on_progress(r/e.file.size*100),e.reader.readAsArrayBuffer(a),e.started=!0,e.keep_alive()}),frappe.socketio.socket.on("upload-end",function(t){e.reader=null,e.file=null,"/public"===t.file_url.substr(0,7)&&(t.file_url=t.file_url.substr(7)),e.callback(t)}),frappe.socketio.socket.on("upload-error",function(t){e.disconnect(!1),frappe.msgprint({title:__("Upload Failed"),message:t.error,indicator:"red"})}),frappe.socketio.socket.on("disconnect",function(){e.disconnect()})}return e.prototype.start=function(e){var t=this;void 0===e&&(e={});var r=e.file;void 0===r&&(r=null);var a=e.is_private;void 0===a&&(a=0);var n=e.filename;void 0===n&&(n="");var i=e.callback;void 0===i&&(i=null);var o=e.on_progress;void 0===o&&(o=null);var s=e.chunk_size;void 0===s&&(s=24576);var l=e.fallback;if(void 0===l&&(l=null),this.reader&&frappe.throw(__("File Upload in Progress. Please try again in a few moments.")),!frappe.socketio.socket.connected){if(l)return void l();frappe.throw(__("Socketio is not connected. Cannot upload"))}this.reader=new FileReader,this.file=r,this.chunk_size=s,this.callback=i,this.on_progress=o,this.fallback=l,this.started=!1,this.reader.onload=function(){frappe.socketio.socket.emit("upload-accept-slice",{is_private:a,name:n,type:t.file.type,size:t.file.size,data:t.reader.result}),t.keep_alive()};var p=r.slice(0,this.chunk_size);this.reader.readAsArrayBuffer(p)},e.prototype.keep_alive=function(){var e=this;this.next_check&&clearTimeout(this.next_check),this.next_check=setTimeout(function(){e.started||(e.fallback?e.fallback():e.disconnect()),e.disconnect()},3e3)},e.prototype.disconnect=function(e){void 0===e&&(e=!0),this.reader&&(this.reader=null,this.file=null,frappe.hide_progress(),e&&frappe.msgprint({title:__("File Upload"),message:__("File Upload Disconnected. Please try again."),indicator:"red"}))},e}(),frappe.re_route={"#login":""},frappe.route_titles={},frappe.route_flags={},frappe.route_history=[],frappe.view_factory={},frappe.view_factories=[],frappe.route_options=null,frappe.route=function(){if(void 0!==frappe.re_route[window.location.hash]){var e=frappe.get_route_str(frappe.re_route[window.location.hash]),t=frappe.get_route_str(frappe._cur_route);if(decodeURIComponent(e)===decodeURIComponent(t))return void window.history.back();window.location.hash=frappe.re_route[window.location.hash]}frappe._cur_route=window.location.hash;var r=frappe.get_route();!1!==r&&(frappe.route_history.push(r),r[0]&&r[1]&&frappe.views[r[0]+"Factory"]?(frappe.view_factory[r[0]]||(frappe.view_factory[r[0]]=new frappe.views[r[0]+"Factory"]),frappe.view_factory[r[0]].show()):frappe.views.pageview.show(r[0]),frappe.route_titles[window.location.hash]?frappe.utils.set_title(frappe.route_titles[window.location.hash]):setTimeout(function(){frappe.route_titles[frappe.get_route_str()]=frappe._original_title||document.title},1e3),window.mixpanel&&window.mixpanel.track(r.slice(0,2).join(" ")))},frappe.get_route=function(e){e=frappe.get_raw_route_str(e).split("/");var t=(e=$.map(e,frappe._decode_str))[e.length-1].split("?");if(e[e.length-1]=t[0],t.length>1){var r=frappe.utils.get_query_params(t[1]);frappe.route_options=$.extend(frappe.route_options||{},r)}return e&&"Module"===e[0]?(frappe.set_route("modules",e[1]),!1):e},frappe.get_prev_route=function(){return frappe.route_history&&frappe.route_history.length>1?frappe.route_history[frappe.route_history.length-2]:[]},frappe._decode_str=function(e){try{return decodeURIComponent(e)}catch(t){if(t instanceof URIError)return e;throw t}},frappe.get_raw_route_str=function(e){return e||(e=window.location.hash),"#"==e.substr(0,1)&&(e=e.substr(1)),"!"==e.substr(0,1)&&(e=e.substr(1)),e},frappe.get_route_str=function(e){var t=frappe.get_raw_route_str();return $.map(t.split("/"),frappe._decode_str).join("/")},frappe.set_route=function(){var e=arguments;return new Promise(function(t){var r=e;1===r.length&&$.isArray(r[0])&&(r=r[0]);var a=$.map(r,function(e){return $.isPlainObject(e)?(frappe.route_options=e,null):((e=String(e))&&e.match(/[%'"]/)&&(e=encodeURIComponent(e)),e)}).join("/");window.location.hash=a,frappe.app.set_favicon&&frappe.app.set_favicon(),setTimeout(function(){frappe.after_ajax(function(){t()})},100)})},frappe.set_re_route=function(){var e=window.location.hash;frappe.set_route.apply(null,arguments),frappe.re_route[e]=window.location.hash},frappe._cur_route=null,$(window).on("hashchange",function(){frappe.route_titles[frappe._cur_route]=frappe._original_title||document.title,window.location.hash!=frappe._cur_route&&(window.cur_dialog&&cur_dialog.hide_on_page_refresh&&cur_dialog.hide(),frappe.route())}),frappe.defaults={get_user_default:function(e){var t=frappe.boot.user.defaults,r=t[e];return!r&&frappe.defaults.is_a_user_permission_key(e)&&(r=t[frappe.model.scrub(e)]),$.isArray(r)&&(r=r[0]),r},get_user_defaults:function(e){var t=frappe.boot.user.defaults,r=t[e];return frappe.defaults.is_a_user_permission_key(e)&&(r=r&&$.isArray(r)&&1===r.length?r[0]:t[e]||t[frappe.model.scrub(e)]),$.isArray(r)||(r=[r]),r},get_global_default:function(e){var t=frappe.sys_defaults[e];return $.isArray(t)&&(t=t[0]),t},get_global_defaults:function(e){var t=frappe.sys_defaults[e];return $.isArray(t)||(t=[t]),t},set_default:function(e,t,r){return"string"!=typeof t&&(t=JSON.stringify(t)),frappe.boot.user.defaults[e]=t,frappe.call({method:"frappe.client.set_default",args:{key:e,value:t},callback:r||function(e){}})},set_user_default_local:function(e,t){frappe.boot.user.defaults[e]=t},get_default:function(e){var t=frappe.boot.user.defaults,r=t[e];if(frappe.defaults.is_a_user_permission_key(e)&&(r=r&&$.isArray(r)&&1===r.length?r[0]:t[frappe.model.scrub(e)]),r)try{return JSON.parse(r)}catch(e){return r}},is_a_user_permission_key:function(e){return-1===e.indexOf(":")&&e!==frappe.model.scrub(e)},get_user_permissions:function(){return frappe.boot.user_permissions}},frappe.RoleEditor=Class.extend({init:function(e,t,r){var a=this;this.frm=t,this.wrapper=e,this.disable=r,$(e).html('<div class="help">'+__("Loading")+"...</div>"),frappe.call({method:"frappe.core.doctype.user.user.get_all_roles",callback:function(e){a.roles=e.message,a.show_roles(),a.frm.doc&&a.frm.roles_editor.show()}})},show_roles:function(){var e=this;if($(this.wrapper).empty(),"User"!=e.frm.doctype){var t=$('<p><button class="btn btn-default btn-add btn-sm" style="margin-right: 5px;"></button>\t\t\t\t<button class="btn btn-sm btn-default btn-remove"></button></p>').appendTo($(this.wrapper));t.find(".btn-add").html(__("Add all roles")).on("click",function(){$(e.wrapper).find('input[type="checkbox"]').each(function(e,t){$(t).is(":checked")||(t.checked=!0)})}),t.find(".btn-remove").html(__("Clear all roles")).on("click",function(){$(e.wrapper).find('input[type="checkbox"]').each(function(e,t){$(t).is(":checked")&&(t.checked=!1)})})}$.each(this.roles,function(t,r){$(e.wrapper).append(repl('<div class="user-role" \t\t\t\tdata-user-role="%(role_value)s">\t\t\t\t<input type="checkbox" style="margin-top:0px;" class="box"> \t\t\t\t<a href="#" class="grey role">%(role_display)s</a>\t\t\t</div>',{role_value:r,role_display:__(r)}))}),$(this.wrapper).find('input[type="checkbox"]').change(function(){e.set_roles_in_table(),e.frm.dirty()}),$(this.wrapper).find(".user-role a").click(function(){return e.show_permissions($(this).parent().attr("data-user-role")),!1})},show:function(){var e=this;$(".box").attr("disabled",this.disable),$(this.wrapper).find('input[type="checkbox"]').each(function(e,t){t.checked=!1}),$.each(e.frm.doc.roles||[],function(t,r){var a=$(e.wrapper).find('[data-user-role="'+r.role+'"] input[type="checkbox"]').get(0);a&&(a.checked=!0)}),this.set_enable_disable()},set_enable_disable:function(){$(".box").attr("disabled",!!this.disable)},set_roles_in_table:function(){var e=this.get_roles(),t={},r=[],a=this;$.each(a.frm.doc.roles||[],function(e,a){t[a.role]=a.name,r.push(a.role)}),$.each(e.unchecked_roles,function(e,a){-1!=r.indexOf(a)&&frappe.model.clear_doc("Has Role",t[a])}),$.each(e.checked_roles,function(e,t){-1==r.indexOf(t)&&(frappe.model.add_child(a.frm.doc,"Has Role","roles").role=t)}),refresh_field("roles")},get_roles:function(){var e=[],t=[];return $(this.wrapper).find("[data-user-role]").each(function(){$(this).find('input[type="checkbox"]:checked').length?e.push($(this).attr("data-user-role")):t.push($(this).attr("data-user-role"))}),{checked_roles:e,unchecked_roles:t}},show_permissions:function(e){var t=this;return this.perm_dialog||this.make_perm_dialog(),$(this.perm_dialog.body).empty(),frappe.call({method:"frappe.core.doctype.user.user.get_perm_info",args:{role:e},callback:function(e){var r=$(t.perm_dialog.body);r.append('<table class="user-perm"><thead><tr><th style="text-align: left">'+__("Document Type")+"</th><th>"+__("Level")+"</th><th>"+__("Read")+"</th><th>"+__("Write")+"</th><th>"+__("Create")+"</th><th>"+__("Delete")+"</th><th>"+__("Submit")+"</th><th>"+__("Cancel")+"</th><th>"+__("Amend")+"</th><th>"+__("Set User Permissions")+"</th></tr></thead><tbody></tbody></table>");for(var a=0,n=e.message.length;a<n;a++){var i=e.message[a];for(var o in i)"parent"!=o&&"permlevel"!=o&&(i[o]?i[o]='<i class="fa fa-check"></i>':i[o]="");r.find("tbody").append(repl('<tr>\t\t\t\t\t\t<td style="text-align: left">%(parent)s</td>\t\t\t\t\t\t<td>%(permlevel)s</td>\t\t\t\t\t\t<td>%(read)s</td>\t\t\t\t\t\t<td>%(write)s</td>\t\t\t\t\t\t<td>%(create)s</td>\t\t\t\t\t\t<td>%(delete)s</td>\t\t\t\t\t\t<td>%(submit)s</td>\t\t\t\t\t\t<td>%(cancel)s</td>\t\t\t\t\t\t<td>%(amend)s</td>\t\t\t\t\t\t<td>%(set_user_permissions)s</td>\t\t\t\t\t\t</tr>',i))}t.perm_dialog.show()}})},make_perm_dialog:function(){this.perm_dialog=new frappe.ui.Dialog({title:__("Role Permissions")}),this.perm_dialog.$wrapper.find(".modal-dialog").css("width","800px")}}),frappe.template={compiled:{},debug:{}},frappe.template.compile=function(e,t){var r=t||e;if(!frappe.template.compiled[r]){-1!==e.indexOf("'")&&e.replace(/'/g,"\\'");var a="var _p=[],print=function(){_p.push.apply(_p,arguments)};with(obj){\n_p.push('"+(e=(e=(e=(e=(e=(e=(e=e.replace(/{{/g,"{%=").replace(/}}/g,"%}")).replace(/{%\s?if\s?\s?not\s?([^\(][^%{]+)\s?%}/g,"{% if (! $1) { %}")).replace(/{%\s?if\s?([^\(][^%{]+)\s?%}/g,"{% if ($1) { %}")).replace(/{%\s?for\s([a-z._]+)\sin\s([a-z._]+)\s?%}/g,function(e,t,r,a,n){var i=frappe.utils.get_random(3),o=frappe.utils.get_random(3);return"{% for (var "+i+"=0, "+o+"="+r+".length; "+i+"<"+o+"; "+i+"++) { var "+t+" = "+r+"["+i+"]; "+t+"._index = "+i+"; %}"})).replace(/{%\s?endif\s?%}/g,"{% }; %}")).replace(/{%\s?else\s?%}/g,"{% } else { %}")).replace(/{%\s?endfor\s?%}/g,"{% }; %}")).replace(/[\r\t\n]/g," ").split("{%").join("\t").replace(/((^|%})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%}/g,"',$1,'").split("\t").join("');\n").split("%}").join("\n_p.push('").split("\r").join("\\'")+"');}return _p.join('');";frappe.template.debug[t]=a;try{frappe.template.compiled[r]=new Function("obj",a)}catch(e){console.log("Error in Template:"),console.log(a),e.lineNumber&&(console.log("Error in Line "+e.lineNumber+", Col "+e.columnNumber+":"),console.log(a.split("\n")[e.lineNumber-1]))}}return frappe.template.compiled[r]},frappe.render=function(e,t,r){return frappe.template.compile(e,r)(t)},frappe.render_template=function(e,t){if(-1!==e.indexOf(" "))var r=e;else r=frappe.templates[e];return void 0===t&&(t={}),frappe.render(r,t,e)},frappe.render_grid=function(e){e.grid&&(e.columns=e.grid.getColumns(),e.report?e.data=frappe.slickgrid_tools.get_filtered_items(e.report.dataView):e.grid&&(e.data=e.grid.getData().getItems())),e.columns&&e.columns.length>10?e.landscape=!0:e.landscape=!1,e.content||(e.content=frappe.render_template(e.template||"print_grid",e)),e.base_url=frappe.urllib.get_base_url(),e.print_css=frappe.boot.print_css;var t=frappe.render_template("print_template",e),r=window.open();r||frappe.msgprint(__("Please enable pop-ups in your browser")),r.document.write(t),r.document.close()},frappe.render_tree=function(e){e.base_url=frappe.urllib.get_base_url(),e.landscape=!1,e.print_css=frappe.boot.print_css;var t=frappe.render_template("print_tree",e),r=window.open();r||frappe.msgprint(__("Please enable pop-ups in your browser")),r.document.write(t),r.document.close()},frappe.render_pdf=function(e,t){void 0===t&&(t={});var r=new FormData;r.append("html",e),t.orientation&&r.append("orientation",t.orientation);var a=new Blob([],{type:"text/xml"});r.append("blob",a);var n=new XMLHttpRequest;n.open("POST","/api/method/frappe.utils.print_format.report_to_pdf"),n.setRequestHeader("X-Frappe-CSRF-Token",frappe.csrf_token),n.responseType="arraybuffer",n.onload=function(e){if(200===this.status){var t=new Blob([e.currentTarget.response],{type:"application/pdf"}),r=URL.createObjectURL(t);window.open(r)}},n.send(r)},frappe.provide("frappe.desk.form"),frappe.provide("frappe.desk.report"),frappe.provide("frappe.utils"),frappe.provide("frappe.model"),frappe.provide("frappe.user"),frappe.provide("frappe.session"),frappe.provide("locals"),frappe.provide("locals.DocType"),frappe.provide("frappe.listview_settings"),frappe.provide("frappe.listview_parent_route"),frappe.settings.no_history=1,window.NEWLINE="\n",window.TAB=9,window.UP_ARROW=38,window.DOWN_ARROW=40,window._f={},window._p={},window._r={},window.frms={},window.cur_frm=null,frappe.utils.full_name=function(e,t){return e+(t?" ":"")+(t||"")},Object.assign(window,{fmt_money:fmt_money,toTitle:toTitle,is_null:is_null$1,set_value_in:set_value_in,copy_dict:copy_dict$1,replace_newlines:replace_newlines$1,validate_email:validate_email,validate_spl_chars:validate_spl_chars,cstr:cstr$1,nth:nth,esc_quotes:esc_quotes,has_words:has_words$1,has_common:has_common$1,add_lists:add_lists,docstring:docstring,remove_from_list:remove_from_list}),frappe.urllib={get_arg:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?"":decodeURIComponent(t[1])},get_dict:function(){var e={},t=window.location.href.split("?")[1];if(!t)return e;if(-1!=t.indexOf("#")&&(t=t.split("#")[0]),!t)return e;t=t.split("&");for(var r=0;r<t.length;r++){var a=t[r].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e},get_base_url:function(){var e=frappe.base_url||window.location.origin;return"/"==e.substr(e.length-1,1)&&(e=e.substr(0,e.length-1)),e},get_full_url:function(e){return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:"/"===e.substr(0,1)?frappe.urllib.get_base_url()+e:frappe.urllib.get_base_url()+"/"+e}},window.get_url_arg=frappe.urllib.get_arg,window.get_url_dict=frappe.urllib.get_dict,window.open_url_post=function(e,t,r){if(window.cordova){var a=e+"api/method/"+t.cmd+frappe.utils.make_query_string(t,!1);window.location.href=a}else _open_url_post(e,t,r)},Object.assign(window,{$c:$c$1,$c_obj:$c_obj,$c_obj_csv:$c_obj_csv}),frappe.templates.page='<div class="page-head">  <div class="container">   <div class="row">    <div class="col-md-7 col-sm-8 col-xs-6 page-title">          <h1>      <div class="title-image hide hidden-md hidden-lg">      </div>      <div class="ellipsis title-text"></div>      <span class="indicator hide"></span>     </h1>    </div>    <div class="text-right col-md-5 col-sm-4 col-xs-6 page-actions">          <span class="checked-items-status text-ellipsis text-muted small hide hidden-xs hidden-sm" style="margin-right: 20px;">## items selected</span>     <h6 class="ellipsis sub-heading hide text-muted"></h6>     <span class="page-icon-group hide hidden-xs hidden-sm"></span>           <div class="btn-group menu-btn-group hide">      <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">       <span class="hidden-xs">        <span class="menu-btn-group-label">{%= __("Menu") %}</span>        <span class="caret"></span>       </span>       <span class="visible-xs">        <i class="octicon octicon-triangle-down"></i>       </span>      </button>      <ul class="dropdown-menu" role="menu"></ul>     </div>     <button class="btn btn-secondary btn-default btn-sm hide"></button>     <div class="btn-group actions-btn-group hide">      <button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">       <span class="hidden-xs">        {%= __("Actions") %}        <span class="caret"></span>       </span>       <span class="visible-xs octicon octicon-check"></span>      </button>      <ul class="dropdown-menu" role="menu">      </ul>     </div>     <button class="btn btn-primary btn-sm hide primary-action"></button>    </div>   </div>  </div> </div> <div class="container page-body">  <div class="page-toolbar hide">   <div class="container">   </div>  </div>  <div class="page-wrapper">   <div class="page-content">    <div class="workflow-button-area btn-group pull-right hide"></div>    <div class="clearfix"></div>   </div>  </div> </div>',frappe.ui.make_app_page=function(e){return e.parent.page=new frappe.ui.Page(e),e.parent.page},frappe.ui.pages={},frappe.ui.Page=Class.extend({init:function(e){$.extend(this,e),this.set_document_title=!0,this.buttons={},this.fields_dict={},this.views={},this.make(),frappe.ui.pages[frappe.get_route_str()]=this},make:function(){this.wrapper=$(this.parent),this.add_main_section()},get_empty_state:function(e,t,r){return $('<div class="page-card-container">\n\t\t\t<div class="page-card">\n\t\t\t\t<div class="page-card-head">\n\t\t\t\t\t<span class="indicator blue">\n\t\t\t\t\t\t'+e+"</span>\n\t\t\t\t</div>\n\t\t\t\t<p>"+t+'</p>\n\t\t\t\t<div>\n\t\t\t\t\t<button class="btn btn-primary btn-sm">'+r+"</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>")},load_lib:function(e){frappe.require(this.required_libs,e)},add_main_section:function(){$(frappe.render_template("page",{})).appendTo(this.wrapper),this.single_column?this.add_view("main",'<div class="row layout-main">\t\t\t\t\t<div class="col-md-12 layout-main-section-wrapper">\t\t\t\t\t\t<div class="layout-main-section"></div>\t\t\t\t\t\t<div class="layout-footer hide"></div>\t\t\t\t\t</div>\t\t\t\t</div>'):this.add_view("main",'<div class="row layout-main">\t\t\t\t<div class="col-md-2 layout-side-section"></div>\t\t\t\t<div class="col-md-10 layout-main-section-wrapper">\t\t\t\t\t<div class="layout-main-section"></div>\t\t\t\t\t<div class="layout-footer hide"></div>\t\t\t\t</div>\t\t\t</div>'),this.setup_page()},setup_page:function(){this.$title_area=this.wrapper.find("h1"),this.$sub_title_area=this.wrapper.find("h6"),void 0!==this.set_document_title&&(this.set_document_title=this.set_document_title),this.title&&this.set_title(this.title),this.icon&&this.get_main_icon(this.icon),this.body=this.main=this.wrapper.find(".layout-main-section"),this.sidebar=this.wrapper.find(".layout-side-section"),this.footer=this.wrapper.find(".layout-footer"),this.indicator=this.wrapper.find(".indicator"),this.page_actions=this.wrapper.find(".page-actions"),this.btn_primary=this.page_actions.find(".primary-action"),this.btn_secondary=this.page_actions.find(".btn-secondary"),this.menu=this.page_actions.find(".menu-btn-group .dropdown-menu"),this.menu_btn_group=this.page_actions.find(".menu-btn-group"),this.actions=this.page_actions.find(".actions-btn-group .dropdown-menu"),this.actions_btn_group=this.page_actions.find(".actions-btn-group"),this.page_form=$('<div class="page-form row hide"></div>').prependTo(this.main),this.inner_toolbar=$('<div class="form-inner-toolbar hide"></div>').prependTo(this.main),this.icon_group=this.page_actions.find(".page-icon-group"),this.make_page&&this.make_page()},set_indicator:function(e,t){this.clear_indicator().removeClass("hide").html("<span class='hidden-xs'>"+e+"</span>").addClass(t)},add_action_icon:function(e,t){return $('<a class="text-muted no-decoration"><i class="'+e+'"></i></a>').appendTo(this.icon_group.removeClass("hide")).click(t)},clear_indicator:function(){return this.indicator.removeClass().addClass("indicator hide")},get_icon_label:function(e,t){return'<i class="visible-xs '+e+'"></i><span class="hidden-xs">'+t+"</span>"},set_action:function(e,t){var r=this;t.icon&&(t.label=this.get_icon_label(t.icon,t.label)),this.clear_action_of(e),e.removeClass("hide").prop("disabled",!1).html(t.label).on("click",function(){var a=t.click.apply(this);r.btn_disable_enable(e,a)}),t.working_label&&e.attr("data-working-label",t.working_label)},set_primary_action:function(e,t,r,a){return this.set_action(this.btn_primary,{label:e,click:t,icon:r,working_label:a}),this.btn_primary},set_secondary_action:function(e,t,r,a){return this.set_action(this.btn_secondary,{label:e,click:t,icon:r,working_label:a}),this.btn_secondary},clear_action_of:function(e){e.addClass("hide").unbind("click").removeAttr("data-working-label")},clear_primary_action:function(){this.clear_action_of(this.btn_primary)},clear_secondary_action:function(){this.clear_action_of(this.btn_secondary)},clear_actions:function(){this.clear_primary_action(),this.clear_secondary_action()},clear_icons:function(){this.icon_group.addClass("hide").empty()},add_menu_item:function(e,t,r){return this.add_dropdown_item(e,t,r,this.menu)},clear_menu:function(){this.clear_btn_group(this.menu)},show_menu:function(){this.menu_btn_group.removeClass("hide")},hide_menu:function(){this.menu_btn_group.addClass("hide")},show_icon_group:function(){this.icon_group.removeClass("hide")},hide_icon_group:function(){this.icon_group.addClass("hide")},show_actions_menu:function(){this.actions_btn_group.removeClass("hide")},hide_actions_menu:function(){this.actions_btn_group.addClass("hide")},add_action_item:function(e,t,r){return this.add_dropdown_item(e,t,r,this.actions)},add_actions_menu_item:function(e,t,r){return this.add_dropdown_item(e,t,r,this.actions,!1)},clear_actions_menu:function(){this.clear_btn_group(this.actions)},add_dropdown_item:function(e,t,r,a,n){void 0===n&&(n=!0);n&&a.parent().removeClass("hide");var i=$('<li><a class="grey-link">'+e+"</a><li>"),o=i.find("a").on("click",t);if(!this.is_in_group_button_dropdown(a,"li > a.grey-link",e))return!0===r?i.appendTo(a):(this.divider=a.find(".divider"),this.divider.length||(this.divider=$('<li class="divider user-action"></li>').prependTo(a)),i.addClass("user-action").insertBefore(this.divider)),o},is_in_group_button_dropdown:function(e,t,r){return t||(t="li"),!(!r||!e)&&$(e).find(t+":contains('"+r+"')").filter(function(){return $(this).text()===r}).length>0},clear_btn_group:function(e){e.empty(),e.parent().addClass("hide")},add_divider:function(){return $('<li class="divider"></li>').appendTo(this.menu)},get_or_add_inner_group_button:function(e){var t=this.inner_toolbar.find('.btn-group[data-label="'+e+'"]');return t.length||(t=$('<div class="btn-group" data-label="'+e+'" style="margin-left: 10px;">\t\t\t\t<button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\t\t\t\t'+e+' <span class="caret"></span></button>\t\t\t\t<ul class="dropdown-menu" style="margin-top: -8px;"></ul></div>').appendTo(this.inner_toolbar)),t},get_inner_group_button:function(e){return this.inner_toolbar.find('.btn-group[data-label="'+e+'"]')},set_inner_btn_group_as_primary:function(e){this.get_or_add_inner_group_button(e).find("button").removeClass("btn-default").addClass("btn-primary")},btn_disable_enable:function(e,t){t&&t.then?(e.prop("disabled",!0),t.then(function(){e.prop("disabled",!1)})):t&&t.always&&(e.prop("disabled",!0),t.always(function(){e.prop("disabled",!1)}))},add_inner_button:function(e,t,r){var a=this,n=function(){var e=$(this),r=t();a.btn_disable_enable(e,r)};if(!r)return $('<button class="btn btn-default btn-xs" style="margin-left: 10px;">'+__(e)+"</btn>").on("click",n).appendTo(this.inner_toolbar.removeClass("hide"));var i=this.get_or_add_inner_group_button(r);return $(this.inner_toolbar).removeClass("hide"),this.is_in_group_button_dropdown(i.find(".dropdown-menu"),"li",e)?void 0:$("<li><a>"+e+"</a></li>").on("click",n).appendTo(i.find(".dropdown-menu"))},remove_inner_button:function(e,t){if("string"==typeof e&&(e=[e]),e=e.map(function(e){return __(e)}),t){var r=this.get_inner_group_button(__(t));r.length&&r.find(".dropdown-menu li a").filter(function(t,r){return e.includes($(r).text())}).remove(),0===r.find(".dropdown-menu li a").length&&r.remove()}else this.inner_toolbar.find("button").filter(function(t,r){return e.includes($(r).text())}).remove()},clear_inner_toolbar:function(){this.inner_toolbar.empty().addClass("hide")},add_sidebar_item:function(e,t,r,a){var n=this.sidebar.find(".sidebar-menu.standard-actions"),i=$("<li>"),o=$("<a>").html(e).on("click",t).appendTo(i);return r?i.insertAfter(n.find(r)):a?i.prependTo(n):i.appendTo(n),o},clear_user_actions:function(){this.menu.find(".user-action").remove()},get_title_area:function(){return this.$title_area},set_title:function(e,t,r,a){void 0===t&&(t=""),void 0===r&&(r=!0),void 0===a&&(a=""),e||(e=""),r&&(e=strip_html(e)),this.title=e,frappe.utils.set_title(a||e),t&&(e='<span class="'+t+' text-muted" style="font-size: inherit;"></span> '+e),this.$title_area.find(".title-text").html(e)},set_title_sub:function(e){this.$sub_title_area.html(e).toggleClass("hide",!e)},get_main_icon:function(e){return this.$title_area.find(".title-icon").html('<i class="'+e+' fa-fw"></i> ').toggle(!0)},add_help_button:function(e){},add_button:function(e,t,r,a){},add_dropdown_button:function(e,t,r,a){frappe.ui.toolbar.add_dropdown_button(e,t,r,a)},add_label:function(e){return this.show_form(),$("<label class='col-md-1 page-only-label'>"+e+" </label>").appendTo(this.page_form)},add_select:function(e,t){return this.add_field({label:e,fieldtype:"Select"}).$wrapper.find("select").empty().add_options(t)},add_data:function(e){return this.add_field({label:e,fieldtype:"Data"}).$wrapper.find("input").attr("placeholder",e)},add_date:function(e,t){return this.add_field({label:e,fieldtype:"Date",default:t}).$wrapper.find("input").attr("placeholder",e)},add_check:function(e){return $("<div class='checkbox'><label><input type='checkbox'>"+e+"</label></div>").appendTo(this.page_form).find("input")},add_break:function(){this.page_form.append('<div class="clearfix invisible-xs"></div>')},add_field:function(e){this.show_form();var t=frappe.ui.form.make_control({df:e,parent:this.page_form,only_input:"Check"!=e.fieldtype});if(t.refresh(),$(t.wrapper).addClass("col-md-2").attr("title",__(e.label)).tooltip(),"HTML"!=e.fieldtype)return t.$input||t.make_input(),t.$input.addClass("input-sm").attr("placeholder",__(e.label)),"Check"===e.fieldtype&&$(t.wrapper).find(":first-child").removeClass("col-md-offset-4 col-md-8"),"Button"==e.fieldtype&&($(t.wrapper).find(".page-control-label").html("&nbsp;"),t.$input.addClass("btn-sm").css({width:"100%","margin-top":"-1px"})),e.default&&t.set_input(e.default),this.fields_dict[e.fieldname||e.label]=t,t},clear_fields:function(){this.page_form.empty()},show_form:function(){this.page_form.removeClass("hide")},hide_form:function(){this.page_form.addClass("hide")},get_form_values:function(){var e={};return this.page_form.fields_dict.forEach(function(t,r){e[r]=t.get_value()}),e},add_view:function(e,t){var r=t;return"string"==typeof t&&(r=$(t)),this.views[e]=r.appendTo($(this.wrapper).find(".page-content")),this.current_view?this.views[e].toggle(!1):this.current_view=this.views[e],this.views[e]},set_view:function(e){this.current_view_name!==e&&(this.current_view&&this.current_view.toggle(!1),this.current_view=this.views[e],this.previous_view_name=this.current_view_name,this.current_view_name=e,this.views[e].toggle(!0),this.wrapper.trigger("view-change"))}}),frappe.provide("frappe.ui"),frappe.ui.Slide=function(){function e(e){void 0===e&&(e=null),$.extend(this,e),this.setup()}return e.prototype.setup=function(){this.$wrapper=$('<div class="slide-wrapper hidden"></div>').attr({"data-slide-id":this.id,"data-slide-name":this.name}).appendTo(this.parent)},e.prototype.make=function(){this.before_load&&this.before_load(this),this.$body=$('<div class="slide-body">\n\t\t\t<div class="content text-center">\n\t\t\t\t<p class="title lead">'+this.title+'</p>\n\t\t\t</div>\n\t\t\t<div class="form-wrapper">\n\t\t\t\t<div class="form"></div>\n\t\t\t\t<div class="add-more text-center" style="margin-top: 5px;">\n\t\t\t\t\t<a class="form-more-btn hide btn btn-default btn-xs">'+__("Add More")+"</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>").appendTo(this.$wrapper),this.$content=this.$body.find(".content"),this.$form=this.$body.find(".form"),this.$primary_btn=this.slides_footer.find(".primary"),this.help&&this.$content.append($('<p class="slide-help">'+this.help+"</p>")),this.image_src&&this.$content.append($('<img src="'+this.image_src+'" style="margin: 20px;">')),this.reqd_fields=[],this.refresh(),this.made=!0},e.prototype.refresh=function(){this.render_parent_dots(),this.done?this.setup_done_state():this.setup_form()},e.prototype.setup_form=function(){this.form=new frappe.ui.FieldGroup({fields:this.get_atomic_fields(),body:this.$form[0],no_submit_on_enter:!0}),this.form.make(),this.add_more&&this.bind_more_button(),this.set_reqd_fields(),this.onload&&this.onload(this),this.set_reqd_fields()},e.prototype.get_atomic_fields=function(){var e=this,t=JSON.parse(JSON.stringify(this.fields));return this.add_more&&(this.count=1,t=t.map(function(t,r){return t.fieldname&&(t.fieldname+="_1"),1===r&&e.mandatory_entry&&(t.reqd=1),t.static||t.label&&(t.label+=" 1"),t})),t},e.prototype.set_reqd_fields=function(){var e=this,t=this.form.fields_dict;this.reqd_fields=[],Object.keys(t).map(function(r){t[r].df.reqd&&e.reqd_fields.push(t[r])})},e.prototype.set_values=function(){return this.values=this.form.get_values(),null!==this.values&&!(this.validate&&!this.validate())},e.prototype.bind_more_button=function(){var e=this;this.$more=this.$body.find(".form-more-btn"),this.$more.removeClass("hide").on("click",function(){e.count++;var t=JSON.parse(JSON.stringify(e.fields));e.form.add_fields(t.map(function(t){return t.fieldname&&(t.fieldname+="_"+e.count),t.static||t.label&&(t.label+=" "+e.count),t})),e.count===e.max_count&&e.$more.addClass("hide")})},e.prototype.resetup_primary_button=function(){this.unbind_primary_action(),this.bind_fields_to_action_btn(),this.reset_action_button_state(),this.bind_primary_action()},e.prototype.bind_fields_to_action_btn=function(){var e=this;this.reqd_fields.map(function(t){t.$wrapper.on("change input",function(){e.reset_action_button_state()})})},e.prototype.reset_action_button_state=function(){this.reqd_fields.filter(function(e){return!e.get_value()}).length?this.slides_footer.find(".action").addClass("disabled"):this.slides_footer.find(".action").removeClass("disabled")},e.prototype.unbind_primary_action=function(){this.slides_footer.find(".primary").off()},e.prototype.bind_primary_action=function(){var e=this;this.slides_footer.find(".primary").on("click",function(){e.primary_action()})},e.prototype.before_show=function(){},e.prototype.show_slide=function(){this.$wrapper.removeClass("hidden"),this.before_show(),this.resetup_primary_button(),this.done?this.$primary_btn.hide():(this.$body.find(".form-control").first().focus(),this.$primary_btn.show())},e.prototype.hide_slide=function(){this.$wrapper.addClass("hidden")},e.prototype.get_input=function(e){return this.form.get_input(e)},e.prototype.get_field=function(e){return this.form.get_field(e)},e.prototype.get_value=function(e){return this.form.get_value(e)},e.prototype.destroy=function(){this.$body.remove()},e.prototype.primary_action=function(){},e}(),frappe.ui.Slides=function(){function e(e){var t=e.parent;void 0===t&&(t=null);var r=e.slides;void 0===r&&(r=[]);var a=e.slide_class;void 0===a&&(a=null);var n=e.unidirectional;void 0===n&&(n=0);var i=e.done_state;void 0===i&&(i=0);var o=e.before_load;void 0===o&&(o=null);var s=e.on_update;void 0===s&&(s=null),this.parent=t,this.slides=r,this.slide_class=a,this.unidirectional=n,this.done_state=i,this.before_load=o,this.on_update=s,this.slide_dict={},this.made_slide_ids=[],this.values={},this.make()}return e.prototype.make=function(){this.container=$("<div>").addClass("slides-wrapper").attr({tabindex:-1}).appendTo(this.parent),this.$slide_progress=$("<div>").addClass("slides-progress text-center text-extra-muted").appendTo(this.container),this.$body=$("<div>").addClass("slide-container").appendTo(this.container),this.$footer=$("<div>").addClass("footer").appendTo(this.container),this.render_progress_dots(),this.make_prev_next_buttons(),this.before_load&&this.before_load(this.$footer),this.setup(),this.show_slide(0)},e.prototype.setup=function(){var e=this;this.slides.map(function(t,r){e.slide_dict[r]?e.made_slide_ids.includes(r+"")&&(e.slide_dict[r].destroy(),e.slide_dict[r].make()):(e.slide_dict[r]=new e.slide_class($.extend(e.slides[r],{parent:e.$body,slides_footer:e.$footer,render_parent_dots:e.render_progress_dots.bind(e),id:r})),e.unidirectional||e.slide_dict[r].make())})},e.prototype.refresh=function(e){this.render_progress_dots(),this.show_hide_prev_next(e),this.$body.find(".form-control").first().focus()},e.prototype.render_progress_dots=function(){var e=this;this.$slide_progress.empty(),this.slides.map(function(t,r){var a=$('<i class="fa fa-fw fa-circle"> </i> ').attr({"data-step-id":r});e.done_state&&(e.slide_dict[r]&&e.slide_dict[r].done||t.done)&&a.addClass("text-success"),(e.unidirectional&&r<=e.current_id||r===e.current_id)&&a.addClass("active"),e.$slide_progress.append(a)}),this.completed=0,this.slides.map(function(t,r){e.slide_dict[r]?e.slide_dict[r].done&&e.completed++:t.done&&e.completed++}),this.on_update&&this.on_update(this.completed,this.slides.length),this.unidirectional||this.bind_progress_dots()},e.prototype.make_prev_next_buttons=function(){var e=this;$('<div class="row">\n\t\t\t<div class="col-sm-4">\n\t\t\t\t<a class="prev-btn btn btn-default btn-sm" tabindex="0">'+__("Previous")+'</a>\n\t\t\t</div>\n\t\t\t<div class="col-sm-8 text-right">\n\t\t\t\t<a class="next-btn btn btn-default btn-sm" tabindex="0">'+__("Next")+"</a>\n\t\t\t</div>\n\t\t</div>").appendTo(this.$footer),this.$prev_btn=this.$footer.find(".prev-btn").attr("tabIndex",0).on("click",function(){e.show_slide(e.current_id-1)}),this.$next_btn=this.$footer.find(".next-btn").attr("tabIndex",0).on("click",function(){(!e.unidirectional||e.unidirectional&&e.current_slide.set_values())&&e.show_slide(e.current_id+1)})},e.prototype.bind_progress_dots=function(){var e=this;this.$slide_progress.find(".fa-circle").addClass("link").on("click",function(){var t=$(this).attr("data-step-id");e.show_slide(t)})},e.prototype.before_show_slide=function(){return!0},e.prototype.show_slide=function(e){e=cint(e),!this.before_show_slide()||this.current_slide&&this.current_id===e||(this.update_values(),this.current_slide&&this.current_slide.hide_slide(),this.unidirectional&&!this.slide_dict[e].made&&this.slide_dict[e].make(),this.current_id=e,this.current_slide=this.slide_dict[e],this.current_slide.show_slide(),this.refresh(e))},e.prototype.destroy_slide=function(e){this.slide_dict[e]&&this.slide_dict[e].destroy(),this.slide_dict[e]=null},e.prototype.on_update=function(e,t){},e.prototype.show_hide_prev_next=function(e){0===e?this.$prev_btn.hide():this.$prev_btn.show(),e+1===this.slides.length?this.$next_btn.hide():this.$next_btn.show()},e.prototype.get_values=function(){var e={};return $.each(this.slide_dict,function(t,r){r.values&&$.extend(e,r.values)}),e},e.prototype.update_values=function(){this.values=$.extend(this.values,this.get_values())},e}(),frappe.find={page_primary_action:function(){return $(".page-actions:visible .btn-primary")},field:function(e,t){return new Promise(function(r){var a=$('[data-fieldname="'+e+'"] :input');t?(a.val(t).trigger("change"),frappe.after_ajax(function(){r(a)})):r(a)})}},frappe.ui.IconBar=Class.extend({init:function(e,t){this.parent=e,this.buttons={},this.make(t)},make:function(e){this.$wrapper=$('<div class="iconbar-wrapper hide"></div>').appendTo(this.parent);for(var t=0;t<e;t++)this.get_group(t+1)},get_group:function(e){var t=this.$wrapper.find(".iconbar-"+e+" ul");return t.length||(t=$('<div class="iconbar iconbar-'+e+' hide"><ul></ul></div>').appendTo(this.$wrapper).find("ul")),t},add_btn:function(e,t,r,a){var n=this.get_group(e),i=$('<li><i class="'+t+'"></i></li>').appendTo(n).on("click",function(){return a.apply(this),!1});return i.find("i").attr("title",r).tooltip(),this.$wrapper.find(".iconbar-"+e).removeClass("hide"),this.show(),i},hide:function(e){e?(this.$wrapper.find(".iconbar-"+e).addClass("hide"),this.check_if_all_hidden()):this.$wrapper.addClass("hide").trigger("hidden")},show:function(e){e?(this.$wrapper.find(".iconbar-"+e).removeClass("hide"),this.show()):this.$wrapper.hasClass("hide")&&this.$wrapper.removeClass("hide").trigger("shown")},clear:function(e){this.$wrapper.find(".iconbar-"+e).addClass("hide").find("ul").empty(),this.check_if_all_hidden()},check_if_all_hidden:function(){this.$wrapper.find(".iconbar:visible").length||this.hide()}}),frappe.provide("frappe.ui.form"),frappe.ui.form.Layout=Class.extend({init:function(e){this.views={},this.pages=[],this.sections=[],this.fields_list=[],this.fields_dict={},$.extend(this,e)},make:function(){!this.parent&&this.body&&(this.parent=this.body),this.wrapper=$('<div class="form-layout">').appendTo(this.parent),this.message=$('<div class="form-message text-muted small hidden"></div>').appendTo(this.wrapper),this.fields||(this.fields=this.get_doctype_fields()),this.setup_tabbing(),this.render()},show_empty_form_message:function(){this.wrapper.find(".frappe-control:visible").length||this.wrapper.find(".section-head.collapsed").length||this.show_message(__("This form does not have any input"))},get_doctype_fields:function(){var e=[{parent:this.frm.doctype,fieldtype:"Data",fieldname:"__newname",reqd:1,hidden:1,label:__("Name"),get_status:function(e){return e.frm&&e.frm.is_new()&&e.frm.meta.autoname&&["prompt","name"].includes(e.frm.meta.autoname.toLowerCase())?"Write":"None"}}];return e=e.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype]))},show_message:function(e){e?("<"!==e.substr(0,1)&&(e="<div>"+e+"</div>"),$(e).appendTo(this.message.removeClass("hidden"))):this.message.empty().addClass("hidden")},render:function(e){var t=this,r=e||this.fields;this.section=null,this.column=null,this.with_dashboard&&this.setup_dashboard_section(),this.no_opening_section()&&this.make_section(),$.each(r,function(e,r){switch(r.fieldtype){case"Fold":t.make_page(r);break;case"Section Break":t.make_section(r);break;case"Column Break":t.make_column(r);break;default:t.make_field(r)}})},no_opening_section:function(){return this.fields[0]&&"Section Break"!=this.fields[0].fieldtype||!this.fields.length},setup_dashboard_section:function(){this.no_opening_section()&&this.fields.unshift({fieldtype:"Section Break"}),this.fields.unshift({fieldtype:"Section Break",fieldname:"_form_dashboard",label:__("Dashboard"),cssClass:"form-dashboard",collapsible:1})},replace_field:function(e,t,r){if(t.fieldname=e,this.fields_dict[e]&&this.fields_dict[e].df){var a=this.init_field(t,r);this.fields_dict[e].$wrapper.remove(),this.fields_list.splice(this.fields_dict[e],1,a),this.fields_dict[e]=a,this.frm&&(a.perm=this.frm.perm),this.section.fields_list.splice(this.section.fields_dict[e],1,a),this.section.fields_dict[e]=a,this.refresh_fields([t])}},make_field:function(e,t,r){!this.section&&this.make_section(),!this.column&&this.make_column();var a=this.init_field(e,r);this.fields_list.push(a),this.fields_dict[e.fieldname]=a,this.frm&&(a.perm=this.frm.perm),this.section.fields_list.push(a),this.section.fields_dict[e.fieldname]=a},init_field:function(e,t){void 0===t&&(t=!1);var r=frappe.ui.form.make_control({df:e,doctype:this.doctype,parent:this.column.wrapper.get(0),frm:this.frm,render_input:t});return r.layout=this,r},make_page:function(e){var t=this,r=$('<div class="form-clickable-section text-center">\t\t\t\t<a class="btn-fold h6 text-muted">'+__("Show more details")+"</a>\t\t\t</div>").appendTo(this.wrapper);this.page=$('<div class="form-page second-page hide"></div>').appendTo(this.wrapper),this.fold_btn=r.find(".btn-fold").on("click",function(){var e=$(this).parent().next();e.hasClass("hide")?($(this).removeClass("btn-fold").html(__("Hide details")),e.removeClass("hide"),frappe.utils.scroll_to($(this),!0,30),t.folded=!1):($(this).addClass("btn-fold").html(__("Show more details")),e.addClass("hide"),t.folded=!0)}),this.section=null,this.folded=!0},unfold:function(){this.fold_btn.trigger("click")},make_section:function(e){this.section=new frappe.ui.form.Section(this,e),e&&(this.fields_dict[e.fieldname]=this.section,this.fields_list.push(this.section)),this.column=null},make_column:function(e){this.column=new frappe.ui.form.Column(this.section,e),e&&e.fieldname&&this.fields_list.push(this.column)},refresh:function(e){e&&(this.doc=e),this.frm&&this.wrapper.find(".empty-form-alert").remove(),this.attach_doc_and_docfields(!0),this.frm&&this.frm.wrapper&&$(this.frm.wrapper).trigger("refresh-fields"),this.refresh_dependency(),this.refresh_sections(),this.frm&&this.refresh_section_collapse()},refresh_sections:function(){var e=0;this.wrapper.find(".form-section:not(.hide-control)").each(function(){var t=$(this).removeClass("empty-section").removeClass("visible-section").removeClass("shaded-section");t.find(".frappe-control:not(.hide-control)").length||t.hasClass("form-dashboard")?(t.addClass("visible-section"),e%2&&t.addClass("shaded-section"),e++):t.addClass("empty-section")})},refresh_fields:function(e){var t=e.map(function(e){if(e.fieldname)return e.fieldname});this.fields_list.map(function(e){t.includes(e.df.fieldname)&&(e.refresh(),e.df.default&&e.set_input(e.df.default))})},add_fields:function(e){this.render(e),this.refresh_fields(e)},refresh_section_collapse:function(){if(this.doc)for(var e=0;e<this.sections.length;e++){var t=this.sections[e],r=t.df;if(r&&r.collapsible){var a=!0;r.collapsible_depends_on&&(a=!this.evaluate_depends_on_value(r.collapsible_depends_on)),a&&t.has_missing_mandatory()&&(a=!1),"_form_dashboard"===r.fieldname&&(a=!1),t.collapse(a)}}},attach_doc_and_docfields:function(e){for(var t=this,r=0,a=this.fields_list.length;r<a;r++){var n=this.fields_list[r];t.doc&&(n.doc=t.doc,n.doctype=t.doc.doctype,n.docname=t.doc.name,n.df=frappe.meta.get_docfield(t.doc.doctype,n.df.fieldname,t.frm?t.frm.doc.name:t.doc.name)||n.df,t.frm&&(n.perm=t.frm.perm)),e&&n.refresh&&n.refresh()}},refresh_section_count:function(){this.wrapper.find(".section-count-label:visible").each(function(e){$(this).html(e+1)})},setup_tabbing:function(){var e=this;this.wrapper.on("keydown",function(t){if(9==t.which){var r=$(t.target),a=r.attr("data-doctype"),n=r.attr("data-fieldname");if(a)return e.handle_tab(a,n,t.shiftKey)}})},handle_tab:function(e,t,r){var a=null,n=null,i=this.fields_list,o=!1;if(e!=this.doctype){if(!(a=this.get_open_grid_row())||!a.layout)return;i=a.layout.fields_list}for(var s=0,l=i.length;s<l;s++){if(i[s].df.fieldname==t){if(r){n?this.set_focus(n):$(this.primary_button).focus();break}if(s<l-1&&(o=this.focus_on_next_field(s,i)),o)break}this.is_visible(i[s])&&(n=i[s])}return o||(a?a.doc.idx==a.grid.grid_rows.length?a.toggle_view(!1,function(){a.grid.frm.layout.handle_tab(a.grid.df.parent,a.grid.df.fieldname)}):a.grid.grid_rows[a.doc.idx].toggle_view(!0):$(this.primary_button).focus()),!1},focus_on_next_field:function(e,t){for(var r=e+1,a=t.length;r<a;r++){var n=t[r];if(this.is_visible(n)){if("Table"===n.df.fieldtype)return n.grid.grid_rows&&n.grid.grid_rows.length||n.grid.add_new_row(),n.grid.grid_rows[0].show_form(),!0;if(!in_list(frappe.model.no_value_type,n.df.fieldtype))return this.set_focus(n),!0}}},is_visible:function(e){return"Write"===e.disp_status&&e.$wrapper&&e.$wrapper.is(":visible")},set_focus:function(e){"Table"==e.df.fieldtype?e.grid.grid_rows.length?e.grid.grid_rows[0].toggle_view(!0):e.grid.add_new_row(1):e.editor?e.editor.set_focus():e.$input&&e.$input.focus()},get_open_grid_row:function(){return $(".grid-row-open").data("grid_row")},refresh_dependency:function(){var e=!1;for(var t in this.fields_list){(a=this.fields_list[t]).dependencies_clear=!0,a.df.depends_on&&(e=!0)}if(e){for(var r=this.fields_list.length-1;r>=0;r--){var a;(a=this.fields_list[r]).guardian_has_value=!0,a.df.depends_on&&(a.guardian_has_value=this.evaluate_depends_on_value(a.df.depends_on),a.guardian_has_value?a.df.hidden_due_to_dependency&&(a.df.hidden_due_to_dependency=!1,a.refresh()):a.df.hidden_due_to_dependency||(a.df.hidden_due_to_dependency=!0,a.refresh()))}this.refresh_section_count()}},evaluate_depends_on_value:function(expression){var out=null,doc=this.doc;if(!doc&&this.get_values)var doc=this.get_values(!0);if(doc){var parent=this.frm?this.frm.doc:null;if("eval:"==expression.substr(0,5))try{out=eval(expression.substr(5))}catch(e){frappe.throw(__('Invalid "depends_on" expression'))}else if("fn:"==expression.substr(0,3)&&this.frm)out=this.frm.script_manager.trigger(expression.substr(3),this.doctype,this.docname);else{var value=doc[expression];out=$.isArray(value)?!!value.length:!!value}return out}}}),frappe.ui.form.Section=Class.extend({init:function(e,t){this.layout=e,this.df=t||{},this.fields_list=[],this.fields_dict={},this.make(),this.row={wrapper:this.wrapper},this.df.collapsible&&this.collapse(!0),this.refresh()},make:function(){this.layout.page||(this.layout.page=$('<div class="form-page"></div>').appendTo(this.layout.wrapper)),this.wrapper=$('<div class="row form-section">').appendTo(this.layout.page),this.layout.sections.push(this),this.df&&(this.df.label&&this.make_head(),this.df.description&&$('<div class="col-sm-12 small text-muted form-section-description">'+__(this.df.description)+"</div>").appendTo(this.wrapper),this.df.cssClass&&this.wrapper.addClass(this.df.cssClass)),this.body=$('<div class="section-body">').appendTo(this.wrapper)},make_head:function(){var e=this;this.df.collapsible?(this.head=$('<div class="section-head"><a class="h6 uppercase">'+__(this.df.label)+'</a><span class="octicon octicon-chevron-down collapse-indicator"></span></div>').appendTo(this.wrapper),this.collapse_link=this.head.on("click",function(){e.collapse()}),this.indicator=this.head.find(".collapse-indicator")):$('<div class="col-sm-12"><h6 class="form-section-heading uppercase">'+__(this.df.label)+"</h6></div>").appendTo(this.wrapper)},refresh:function(){if(this.df){var e=this.df.hidden||this.df.hidden_due_to_dependency;!e&&this.layout&&this.layout.frm&&!this.layout.frm.get_perm(this.df.permlevel||0,"read")&&(e=!0),this.wrapper.toggleClass("hide-control",!!e)}},collapse:function(e){this.head&&this.body&&(void 0===e&&(e=!this.body.hasClass("hide")),this.body.toggleClass("hide",e),this.head.toggleClass("collapsed",e),this.indicator.toggleClass("octicon-chevron-down",e),this.indicator.toggleClass("octicon-chevron-up",!e),this.fields_list.forEach(function(e){"Signature"==e.df.fieldtype&&e.refresh()}))},has_missing_mandatory:function(){for(var e=!1,t=0,r=this.fields_list.length;t<r;t++){var a=this.fields_list[t].df;if(a.reqd&&null==this.layout.doc[a.fieldname]){e=!0;break}}return e}}),frappe.ui.form.Column=Class.extend({init:function(e,t){t||(t={}),this.df=t,this.section=e,this.make(),this.resize_all_columns()},make:function(){this.wrapper=$('<div class="form-column">\t\t\t<form>\t\t\t</form>\t\t</div>').appendTo(this.section.body).find("form").on("submit",function(){return!1}),this.df.label&&$('<label class="control-label">'+__(this.df.label)+"</label>").appendTo(this.wrapper)},resize_all_columns:function(){var e=cint(12/this.section.wrapper.find(".form-column").length);this.section.wrapper.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-"+e)},refresh:function(){this.section.refresh()}}),frappe.provide("frappe.ui"),frappe.ui.FieldGroup=frappe.ui.form.Layout.extend({init:function(e){$.extend(this,e),this._super(),$.each(this.fields||[],function(e,t){!t.fieldname&&t.label&&(t.fieldname=t.label.replace(/ /g,"_").toLowerCase())}),this.values&&this.set_values(this.values)},make:function(){var e=this;this.fields&&(this._super(),this.refresh(),$.each(this.fields_list,function(t,r){r.df.default&&(r.set_input(r.df.default),e.refresh_dependency())}),this.no_submit_on_enter||this.catch_enter_as_submit(),$(this.body).find("input, select").on("change",function(){frappe.run_serially([function(){return frappe.timeout(.1)},function(){return e.refresh_dependency()}])}))},first_button:!1,focus_on_first_input:function(){this.no_focus||$.each(this.fields_list,function(e,t){if(!in_list(["Date","Datetime","Time","Check"],t.df.fieldtype)&&t.set_focus)return t.set_focus(),!1})},catch_enter_as_submit:function(){var e=this;$(this.body).find('input[type="text"], input[type="password"]').keypress(function(t){13==t.which&&e.has_primary_action&&(t.preventDefault(),e.get_primary_btn().trigger("click"))})},get_input:function(e){var t=this.fields_dict[e];return $(t.txt?t.txt:t.input)},get_field:function(e){return this.fields_dict[e]},get_values:function(e){var t={},r=[];for(var a in this.fields_dict){var n=this.fields_dict[a];if(n.get_value){var i=n.get_value();n.df.reqd&&is_null(i)&&r.push(__(n.df.label)),is_null(i)||(t[n.df.fieldname]=i)}}return r.length&&!e?(frappe.msgprint({title:__("Missing Values Required"),message:__("Following fields have missing values:")+"<br><br><ul><li>"+r.join("<li>")+"</ul>",indicator:"orange"}),null):t},get_value:function(e){var t=this.fields_dict[e];return t&&(t.get_value?t.get_value():null)},set_value:function(e,t){var r=this;return new Promise(function(a){var n=r.fields_dict[e];n?n.set_value(t).then(function(){n.set_input(t),r.refresh_dependency(),a()}):a()})},set_input:function(e,t){return this.set_value(e,t)},set_values:function(e){for(var t in e)this.fields_dict[t]&&this.set_value(t,e[t])},clear:function(){for(var e in this.fields_dict){var t=this.fields_dict[e];t&&t.set_input&&t.set_input(t.df.default||"")}},set_df_property:function(e,t,r){var a=this.get_field(e);a.df[t]=r,a.refresh()}}),frappe.ui.form.LinkSelector=Class.extend({init:function(e){$.extend(this,e);var t=this;"[Select]"!=this.doctype?frappe.model.with_doctype(this.doctype,function(e){t.make()}):this.make()},make:function(){var e=this;this.dialog=new frappe.ui.Dialog({title:__("Select {0}",["[Select]"==this.doctype?__("value"):__(this.doctype)]),fields:[{fieldtype:"Data",fieldname:"txt",label:__("Beginning with"),description:__("You can use wildcard %")},{fieldtype:"HTML",fieldname:"results"}],primary_action_label:__("Search"),primary_action:function(){e.search()}}),this.txt&&this.dialog.fields_dict.txt.set_input(this.txt),this.dialog.get_input("txt").on("keypress",function(t){13===t.which&&e.search()}),this.dialog.show(),this.search()},search:function(){var e={txt:this.dialog.fields_dict.txt.get_value(),searchfield:"name"},t=this;this.target.set_custom_query&&this.target.set_custom_query(e),this.target.is_grid&&this.target.fieldinfo[this.fieldname]&&this.target.fieldinfo[this.fieldname].get_query&&$.extend(e,this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc)),frappe.link_search(this.doctype,e,function(e){var r=t.dialog.fields_dict.results.$wrapper;r.empty(),e.values.length?$.each(e.values,function(e,a){$(repl('<div class="row link-select-row">\t\t\t\t\t\t<div class="col-xs-4">\t\t\t\t\t\t\t<b><a href="#">%(name)s</a></b></div>\t\t\t\t\t\t<div class="col-xs-8">\t\t\t\t\t\t\t<span class="text-muted">%(values)s</span></div>\t\t\t\t\t\t</div>',{name:a[0],values:a.splice(1).join(", ")})).appendTo(r).find("a").attr("data-value",a[0]).click(function(){var e=$(this).attr("data-value");return t.target.is_grid?t.set_in_grid(e):(t.target.doctype?t.target.parse_validate_and_set_in_model(e):(t.target.set_input(e),t.target.$input.trigger("change")),t.dialog.hide()),!1})}):$('<p><br><span class="text-muted">'+__("No Results")+"</span>"+(frappe.model.can_create(t.doctype)?'<br><br><a class="new-doc btn btn-default btn-sm">'+__("Make a new {0}",[__(t.doctype)])+"</a>":"")+"</p>").appendTo(r).find(".new-doc").click(function(){frappe.new_doc(t.doctype)})},this.dialog.get_primary_btn())},set_in_grid:function(e){var t=this,r=!1,a=null;if(this.qty_fieldname)frappe.prompt({fieldname:"qty",fieldtype:"Float",label:"Qty",default:1,reqd:1},function(n){$.each(t.target.frm.doc[t.target.df.fieldname]||[],function(a,i){if(i[t.fieldname]===e)return frappe.model.set_value(i.doctype,i.name,t.qty_fieldname,n.qty),frappe.show_alert(__("Added {0} ({1})",[e,i[t.qty_fieldname]])),r=!0,!1}),r||frappe.run_serially([function(){a=t.target.add_new_row()},function(){return frappe.timeout(.1)},function(){return frappe.model.set_value(a.doctype,a.name,t.fieldname,e)},function(){return frappe.timeout(.5)},function(){return frappe.model.set_value(a.doctype,a.name,t.qty_fieldname,n.qty)},function(){return frappe.show_alert(__("Added {0} ({1})",[e,n.qty]))}])},__("Set Quantity"),__("Set"));else{a=t.target.add_new_row();frappe.model.set_value(a.doctype,a.name,t.fieldname,e),frappe.show_alert(__("{0} added",[e]))}}}),frappe.link_search=function(e,t,r,a){t||(t={txt:""}),t.doctype=e,t.searchfield||(t.searchfield="name"),frappe.call({method:"frappe.desk.search.search_widget",type:"GET",args:t,callback:function(e){r&&r(e)},btn:a})},frappe.ui.form.MultiSelectDialog=Class.extend({init:function(e){$.extend(this,e);var t=this;"[Select]"!=this.doctype?frappe.model.with_doctype(this.doctype,function(e){t.make()}):this.make()},make:function(){var e=this;this.page_length=20;var t=[{fieldtype:"Data",label:__("Search Term"),fieldname:"search_term"},{fieldtype:"Column Break"}],r=0;this.date_field||(this.date_field="transaction_date"),Object.keys(this.setters).forEach(function(a){t.push({fieldtype:e.target.fields_dict[a].df.fieldtype,label:e.target.fields_dict[a].df.label,fieldname:a,options:e.target.fields_dict[a].df.options,default:e.setters[a]}),r++<Object.keys(e.setters).length&&t.push({fieldtype:"Column Break"})}),t=t.concat([{fieldname:"date_range",label:__("Date Range"),fieldtype:"DateRange"},{fieldtype:"Section Break"},{fieldtype:"HTML",fieldname:"results_area"},{fieldtype:"Button",fieldname:"make_new",label:__("Make a new "+e.doctype)}]);var a=this.doctype.endsWith("y")?this.doctype.slice(0,-1)+"ies":this.doctype+"s";this.dialog=new frappe.ui.Dialog({title:__("Select {0}",["[Select]"==this.doctype?__("value"):__(a)]),fields:t,primary_action_label:__("Get Items"),primary_action:function(){e.action(e.get_checked_values(),e.args)}}),this.$parent=$(this.dialog.body),this.$wrapper=this.dialog.fields_dict.results_area.$wrapper.append('<div class="results"\n\t\t\tstyle="border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;"></div>'),this.$results=this.$wrapper.find(".results"),this.$make_new_btn=this.dialog.fields_dict.make_new.$wrapper,this.$placeholder=$('<div class="multiselect-empty-state">\n\t\t\t\t\t<span class="text-center" style="margin-top: -40px;">\n\t\t\t\t\t\t<i class="fa fa-2x fa-tags text-extra-muted"></i>\n\t\t\t\t\t\t<p class="text-extra-muted">No '+this.doctype+' found</p>\n\t\t\t\t\t\t<button class="btn btn-default btn-xs text-muted" data-fieldtype="Button"\n\t\t\t\t\t\t\tdata-fieldname="make_new" placeholder="" value="">Make a new '+this.doctype+"</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>"),this.args={},this.bind_events(),this.get_results(),this.dialog.show()},bind_events:function(){var e=this,t=this;this.$results.on("click",".list-item-container",function(e){$(e.target).is(":checkbox")||$(e.target).is("a")||$(this).find(":checkbox").trigger("click")}),this.$results.on("click",".list-item--head :checkbox",function(t){e.$results.find(".list-item-container .list-row-check").prop("checked",$(t.target).is(":checked"))}),this.$parent.find(".input-with-feedback").on("change",function(t){e.get_results()}),this.$parent.find('[data-fieldname="date_range"]').on("blur",function(t){e.get_results()}),this.$parent.find('[data-fieldname="search_term"]').on("input",function(r){var a=$(e);clearTimeout(a.data("timeout")),a.data("timeout",setTimeout(function(){t.get_results()},300))}),this.$parent.on("click",'.btn[data-fieldname="make_new"]',function(r){frappe.route_options={},Object.keys(e.setters).forEach(function(e){frappe.route_options[e]=t.dialog.fields_dict[e].get_value()||void 0}),frappe.new_doc(e.doctype,!0)})},get_checked_values:function(){return this.$results.find(".list-item-container").map(function(){if($(this).find(".list-row-check:checkbox:checked").length>0)return $(this).attr("data-item-name")}).get()},make_list_row:function(e){void 0===e&&(e={});var t=this,r=0===Object.keys(e).length,a="";["name"].concat(Object.keys(this.setters)).concat("Date").forEach(function(n){a+='<div class="list-item__content ellipsis">\n\t\t\t\t'+(r?'<span class="ellipsis">'+__(frappe.model.unscrub(n))+"</span>":"name"!==n?'<span class="ellipsis">'+__(e[n])+"</span>":'<a href="#Form/'+t.doctype+"/"+e[n]+'" class="list-id ellipsis">\n\t\t\t\t\t\t\t'+__(e[n])+"</a>")+"\n\t\t\t</div>"});var n=$('<div class="list-item">\n\t\t\t<div class="list-item__content" style="flex: 0 0 10px;">\n\t\t\t\t<input type="checkbox" class="list-row-check" '+(e.checked?"checked":"")+">\n\t\t\t</div>\n\t\t\t"+a+"\n\t\t</div>");return r?n.addClass("list-item--head"):n=$('<div class="list-item-container" data-item-name="'+e.name+'"></div>').append(n),n},render_result_list:function(e,t){void 0===t&&(t=0);var r=this;if(this.$results.empty(),0===e.length)return this.$make_new_btn.addClass("hide"),void this.$results.append(r.$placeholder);if(this.$make_new_btn.removeClass("hide"),this.$results.append(this.make_list_row()),e.forEach(function(e){r.$results.append(r.make_list_row(e))}),t){var a=__("Only {0} entries shown. Please filter for more specific results.",[this.page_length]);r.$results.append($('<div class="text-muted small" style="text-align: center;\n\t\t\t\tmargin: 10px;">'+a+"</div>"))}},get_results:function(){var e=this,t=this.get_query?this.get_query().filters:{};Object.keys(this.setters).forEach(function(r){t[r]=e.dialog.fields_dict[r].get_value()||void 0,e.args[r]=t[r]});var r=this.dialog.fields_dict.date_range.get_value();r&&(t[this.date_field]=["between",r]);var a={doctype:e.doctype,txt:e.dialog.fields_dict.search_term.get_value(),filters:t,filter_fields:Object.keys(e.setters).concat([e.date_field]),page_length:this.page_length+1,query:this.get_query?this.get_query().query:"",as_dict:1};frappe.call({type:"GET",method:"frappe.desk.search.search_widget",no_spinner:!0,args:a,callback:function(t){var r=[],a=0;t.values.length&&(t.values.length>e.page_length&&(t.values.pop(),a=1),t.values.forEach(function(t){e.date_field in t&&(t.Date=t[e.date_field]),t.checked=0,t.parsed_date=Date.parse(t.Date),r.push(t)}),r.map(function(e){e.Date=frappe.format(e.Date,{fieldtype:"Date"})}),r.sort(function(e,t){return e.parsed_date-t.parsed_date}),r[0].checked=1),e.render_result_list(r,a)}})}}),frappe.provide("frappe.ui"),window.cur_dialog=null,frappe.ui.open_dialogs=[],frappe.ui.Dialog=frappe.ui.FieldGroup.extend({init:function(e){this.display=!1,this.is_dialog=!0,$.extend(this,{animate:!0,size:null},e),this._super(),this.make()},make:function(){this.$wrapper=frappe.get_modal("",""),this.wrapper=this.$wrapper.find(".modal-dialog").get(0),"small"==this.size?$(this.wrapper).addClass("modal-sm"):"large"==this.size&&$(this.wrapper).addClass("modal-lg"),this.make_head(),this.body=this.$wrapper.find(".modal-body").get(0),this.header=this.$wrapper.find(".modal-header"),this._super(),this.action=this.action||{primary:{},secondary:{}},!this.primary_action&&frappe.utils.is_empty(this.action.primary)||this.set_primary_action(this.primary_action_label||this.action.primary.label||__("Submit"),this.primary_action||this.action.primary.onsubmit),!this.secondary_action_label&&frappe.utils.is_empty(this.action.secondary)||this.get_close_btn().html(this.secondary_action_label||this.action.secondary.label);var e=this;this.$wrapper.on("hide.bs.modal",function(){e.display=!1,frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]===e&&(frappe.ui.open_dialogs.pop(),frappe.ui.open_dialogs.length?window.cur_dialog=frappe.ui.open_dialogs[frappe.ui.open_dialogs.length-1]:window.cur_dialog=null),e.onhide&&e.onhide(),e.on_hide&&e.on_hide()}).on("shown.bs.modal",function(){e.display=!0,window.cur_dialog=e,frappe.ui.open_dialogs.push(e),e.focus_on_first_input(),e.on_page_show&&e.on_page_show()}).on("scroll",function(){var e=$("input:focus");e.length&&["Date","Datetime","Time"].includes(e.attr("data-fieldtype"))&&e.blur()})},get_primary_btn:function(){return this.$wrapper.find(".modal-header .btn-primary")},set_primary_action:function(e,t){this.has_primary_action=!0;var r=this;return this.get_primary_btn().removeClass("hide").html(e).click(function(){r.primary_action_fulfilled=!0;var e=r.get_values();e&&t&&t.apply(r,[e])})},disable_primary_action:function(){this.get_primary_btn().addClass("disabled")},enable_primary_action:function(){this.get_primary_btn().removeClass("disabled")},make_head:function(){this.set_title(this.title)},set_title:function(e){this.$wrapper.find(".modal-title").html(e)},show:function(){this.animate?this.$wrapper.addClass("fade"):this.$wrapper.removeClass("fade"),this.$wrapper.modal("show"),this.primary_action_fulfilled=!1,this.is_visible=!0},hide:function(){this.$wrapper.modal("hide"),this.is_visible=!1},get_close_btn:function(){return this.$wrapper.find(".btn-modal-close")},no_cancel:function(){this.get_close_btn().toggle(!1)},cancel:function(){this.get_close_btn().trigger("click")}}),frappe._.get_data_uri=function(e){var t=$(e),r=t.width(),a=t.height(),n=$("<canvas/>");return n[0].width=r,n[0].height=a,n[0].getContext("2d").drawImage(t[0],0,0,r,a),n[0].toDataURL("image/png")},frappe.ui.Capture=function(){function e(e){void 0===e&&(e={}),this.options=frappe.ui.Capture.OPTIONS,this.set_options(e)}return e.prototype.set_options=function(e){return this.options=Object.assign({},frappe.ui.Capture.OPTIONS,e),this},e.prototype.render=function(){var e=this;return navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.dialog=new frappe.ui.Dialog({title:e.options.title,animate:e.options.animate,action:{secondary:{label:"<b>&times</b>"}}});var r=$(frappe.ui.Capture.TEMPLATE),a=r.find("video")[0];a.srcObject=t,a.play(),$(e.dialog.body).html(r),r.find(".fc-btf").hide(),r.find(".fc-bcp").click(function(){var e=frappe._.get_data_uri(a);r.find(".fc-p").attr("src",e),r.find(".fc-s").hide(),r.find(".fc-p").show(),r.find(".fc-btu").hide(),r.find(".fc-btf").show()}),r.find(".fc-br").click(function(){r.find(".fc-p").hide(),r.find(".fc-s").show(),r.find(".fc-btf").hide(),r.find(".fc-btu").show()}),r.find(".fc-bs").click(function(){var t=frappe._.get_data_uri(a);e.hide(),e.callback&&e.callback(t)})})},e.prototype.show=function(){var e=this;this.render().then(function(){e.dialog.show()}).catch(function(t){if(e.options.error){var r='<span class="indicator red"/> '+frappe.ui.Capture.ERR_MESSAGE;frappe.show_alert(r,3)}throw t})},e.prototype.hide=function(){this.dialog&&this.dialog.hide()},e.prototype.submit=function(e){this.callback=e},e}(),frappe.ui.Capture.OPTIONS={title:__("Camera"),animate:!1,error:!1},frappe.ui.Capture.ERR_MESSAGE=__("Unable to load camera."),frappe.ui.Capture.TEMPLATE='\n<div class="frappe-capture">\n\t<div class="panel panel-default">\n\t\t<img class="fc-p img-responsive"/>\n\t\t<div class="fc-s  embed-responsive embed-responsive-16by9">\n\t\t\t<video class="embed-responsive-item">'+frappe.ui.Capture.ERR_MESSAGE+'</video>\n\t\t</div>\n\t</div>\n\t<div>\n\t\t<div class="fc-btf">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<div class="pull-left">\n\t\t\t\t\t\t<button class="btn btn-default fc-br">\n\t\t\t\t\t\t\t<small>'+__("Retake")+'</small>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t<button class="btn btn-primary fc-bs">\n\t\t\t\t\t\t\t<small>'+__("Submit")+'</small>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="fc-btu">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t<button class="btn btn-default fc-bcp">\n\t\t\t\t\t\t\t<small>'+__("Take Photo")+"</small>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n",frappe.provide("frappe.ui"),frappe.ui.app_icon={get_html:function(e,t){var r=e.icon,a=e.color;r&&r.match(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g)&&(e.emoji=e.icon);var n="";if(e.reverse&&(n="color: #36414C;"),a||(a="#4aa3df"),!r||e.emoji)r='<span class="inner" '+(e.reverse?'style="'+n+'"':"")+">"+(e.emoji||e._label[0].toUpperCase())+"</span>";else{if("svg"===r.split(".").slice(-1)[0])return $.ajax({url:frappe.urllib.get_full_url(r),dataType:"text",async:!1,success:function(e){r=e}}),r='<object class="app-icon-svg">'+r+"</object>";r='<i class="'+r+'" title="'+e._label+'" style="'+n+'"></i>'}return'<div class="app-icon'+(t?" app-icon-small":"")+'" style="background-color: '+a+'" title="'+e._label+'">'+r+"</div>"}},frappe.ui.DropZone=function(){function e(e,t){this.options=Object.assign({},frappe.ui.DropZone.OPTIONS,t),this.$container=$(e),this.$wrapper=$(frappe.ui.DropZone.TEMPLATE),this.make()}return e.prototype.make=function(){var e=this,t=this.$wrapper.find(".panel-body"),r=t.find(".dropzone-title");r.html(this.options.title),t.on("dragover",function(e){e.preventDefault(),r.html("Drop")}),t.on("dragleave",function(t){t.preventDefault(),r.html(e.options.title)}),t.on("drop",function(t){t.preventDefault();var a=t.originalEvent.dataTransfer.files;e.options.drop(a),r.html(e.options.title)}),this.$container.html(this.$wrapper)},e}(),frappe.ui.DropZone.TEMPLATE='\n<div class="panel panel-default"\n\tstyle="\n\t\tborder: none !important;\n\t\tbox-shadow: none !important;\n\t\tmargin-bottom: 0 !important\n\t">\n\t<div class="panel-body">\n\t\t<div class="dropzone-title text-muted text-center">\n\t\t</div>\n\t</div>\n</div>\n',frappe.ui.DropZone.OPTIONS={title:"Drop Here"},frappe.provide("frappe.model"),$.extend(frappe.model,{no_value_type:["Section Break","Column Break","HTML","Table","Button","Image","Fold","Heading"],layout_fields:["Section Break","Column Break","Fold"],std_fields_list:["name","owner","creation","modified","modified_by","_user_tags","_comments","_assign","_liked_by","docstatus","parent","parenttype","parentfield","idx"],std_fields:[{fieldname:"name",fieldtype:"Link",label:__("ID")},{fieldname:"owner",fieldtype:"Data",label:__("Created By")},{fieldname:"idx",fieldtype:"Int",label:__("Index")},{fieldname:"creation",fieldtype:"Date",label:__("Created On")},{fieldname:"modified",fieldtype:"Date",label:__("Last Updated On")},{fieldname:"modified_by",fieldtype:"Data",label:__("Last Updated By")},{fieldname:"_user_tags",fieldtype:"Data",label:__("Tags")},{fieldname:"_liked_by",fieldtype:"Data",label:__("Liked By")},{fieldname:"_comments",fieldtype:"Text",label:__("Comments")},{fieldname:"_assign",fieldtype:"Text",label:__("Assigned To")},{fieldname:"docstatus",fieldtype:"Int",label:__("Document Status")}],numeric_fieldtypes:["Int","Float","Currency","Percent"],std_fields_table:[{fieldname:"parent",fieldtype:"Data",label:__("Parent")}],new_names:{},events:{},user_settings:{},init:function(){frappe.realtime.on("doc_update",function(e){frappe.views.ListView.trigger_list_update(e);var t=locals[e.doctype]&&locals[e.doctype][e.name];t&&("Form"===frappe.get_route()[0]&&cur_frm.doc.doctype===t.doctype&&cur_frm.doc.name===t.name?frappe.ui.form.is_saving||e.modified==cur_frm.doc.modified||(t.__needs_refresh=!0,cur_frm.show_if_needs_refresh()):t.__unsaved?t.__needs_refresh=!0:frappe.model.remove_from_locals(t.doctype,t.name))}),frappe.realtime.on("list_update",function(e){frappe.views.ListView.trigger_list_update(e)})},is_value_type:function(e){return"object"==typeof e&&(e=e.fieldtype),-1===frappe.model.no_value_type.indexOf(e)},is_non_std_field:function(e){return!frappe.model.std_fields_list.includes(e)},get_std_field:function(e){var t=$.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table),function(t){if(t.fieldname==e)return t});return t.length||frappe.msgprint(__("Unknown Column: {0}",[e])),t[0]},with_doctype:function(e,t,r){if(!locals.DocType[e]){var a=null;if(localStorage["_doctype:"+e]){var n=JSON.parse(localStorage["_doctype:"+e]);a=n.modified}return frappe.call({method:"frappe.desk.form.load.getdoctype",type:"GET",args:{doctype:e,with_parent:1,cached_timestamp:a},async:r,freeze:!0,callback:function(r){if(r.exc)throw frappe.msgprint(__("Unable to load: {0}",[__(e)])),"No doctype";"use_cache"==r.message?frappe.model.sync(n):localStorage["_doctype:"+e]=JSON.stringify(r.docs),frappe.model.init_doctype(e),r.user_settings&&(frappe.model.user_settings[e]=JSON.parse(r.user_settings),frappe.model.user_settings[e].updated_on=moment().toString()),t&&t(r)}})}t&&t()},init_doctype:function(doctype){var meta=locals.DocType[doctype];meta.__list_js&&eval(meta.__list_js),meta.__calendar_js&&eval(meta.__calendar_js),meta.__map_js&&eval(meta.__map_js),meta.__tree_js&&eval(meta.__tree_js),meta.__templates&&$.extend(frappe.templates,meta.__templates)},with_doc:function(e,t,r){return new Promise(function(a){if(t||(t=e),!(locals[e]&&locals[e][t]&&frappe.model.get_docinfo(e,t)))return frappe.call({method:"frappe.desk.form.load.getdoc",type:"GET",args:{doctype:e,name:t},freeze:!0,callback:function(n){r&&r(t,n),a(frappe.get_doc(e,t))}});r&&r(t),a(frappe.get_doc(e,t))})},get_docinfo:function(e,t){return frappe.model.docinfo[e]&&frappe.model.docinfo[e][t]||null},set_docinfo:function(e,t,r,a){frappe.model.docinfo[e]&&frappe.model.docinfo[e][t]&&(frappe.model.docinfo[e][t][r]=a)},get_shared:function(e,t){return frappe.model.get_docinfo(e,t).shared},get_server_module_name:function(e){var t=frappe.model.scrub(e),r=frappe.model.scrub(locals.DocType[e].module);return frappe.boot.module_app[r]+"."+r+".doctype."+t+"."+t},scrub:function(e){return e.replace(/ /g,"_").toLowerCase()},unscrub:function(e){return __(e||"").replace(/-|_/g," ").replace(/\w*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},can_create:function(e){return-1!==frappe.boot.user.can_create.indexOf(e)},can_read:function(e){return-1!==frappe.boot.user.can_read.indexOf(e)},can_write:function(e){return-1!==frappe.boot.user.can_write.indexOf(e)},can_get_report:function(e){return-1!==frappe.boot.user.can_get_report.indexOf(e)},can_delete:function(e){return!!e&&-1!==frappe.boot.user.can_delete.indexOf(e)},can_cancel:function(e){return!!e&&-1!==frappe.boot.user.can_cancel.indexOf(e)},is_submittable:function(e){return!!e&&(locals.DocType[e]&&locals.DocType[e].is_submittable)},is_table:function(e){return!!e&&(locals.DocType[e]&&locals.DocType[e].istable)},is_single:function(e){return!!e&&-1!=frappe.boot.single_types.indexOf(e)},can_import:function(e,t){return!!frappe.user_roles.includes("System Manager")||(t?1===t.perm[0].import:-1!==frappe.boot.user.can_import.indexOf(e))},can_export:function(e,t){return!!frappe.user_roles.includes("System Manager")||(t?1===t.perm[0].export:-1!==frappe.boot.user.can_export.indexOf(e))},can_print:function(e,t){return t?1===t.perm[0].print:-1!==frappe.boot.user.can_print.indexOf(e)},can_email:function(e,t){return t?1===t.perm[0].email:-1!==frappe.boot.user.can_email.indexOf(e)},can_share:function(e,t){return t?1===t.perm[0].share:-1!==frappe.boot.user.can_share.indexOf(e)},can_set_user_permissions:function(e,t){return!!frappe.user_roles.includes("System Manager")||(t?1===t.perm[0].set_user_permissions:-1!==frappe.boot.user.can_set_user_permissions.indexOf(e))},has_value:function(e,t,r){var a=locals[e]&&locals[e][t]&&locals[e][t][r],n=frappe.meta.get_docfield(e,r,t);if("Table"==n.fieldtype){var i=!1;$.each(locals[n.options]||{},function(r,a){if(a.parent==t&&a.parenttype==e&&a.parentfield==n.fieldname)return i=!0,!1})}else i=!is_null(a);return!!i},get_list:function(e,t){var r=locals[e]||locals[":"+e]||{};return $.isEmptyObject(r)?[]:frappe.utils.filter_dict(r,t)},get_value:function(e,t,r,a){if(!a){if("string"==typeof t&&locals[e]&&locals[e][t])return locals[e][t][r];var n=frappe.get_list(e,t);return n.length&&n[0]?n[0][r]:null}frappe.call({method:"frappe.client.get_value",args:{doctype:e,fieldname:r,filters:t},callback:function(e){e.exc||a(e.message)}})},set_value:function(e,t,r,a,n){var i;$.isPlainObject(e)?(i=e,a=r=t):i=locals[e]&&locals[e][t];var o=r,s=[];return $.isPlainObject(o)||((o={})[r]=a),$.each(o,function(e,t){i&&i[e]!==t?(i.__unedited&&(i[e]||t)&&(i.__unedited=!1),i[e]=t,s.push(function(){return frappe.model.trigger(e,t,i)})):"Link"==n&&i&&s.push(function(){return frappe.model.trigger(e,t,i)})}),frappe.run_serially(s)},on:function(e,t,r){frappe.provide("frappe.model.events."+e),frappe.model.events[e][t]||(frappe.model.events[e][t]=[]),frappe.model.events[e][t].push(r)},trigger:function(e,t,r){var a=[],n=function(a,n){$.each(a||[],function(a,i){if(i){var o=i(e,t,n||r);return o&&o.then?o:frappe.after_server_call()}})};return frappe.model.events[r.doctype]&&(a.push(function(){return n(frappe.model.events[r.doctype][e])}),a.push(function(){return n(frappe.model.events[r.doctype]["*"])})),frappe.run_serially(a)},get_doc:function(e,t){if(t||(t=e),$.isPlainObject(t)){var r=frappe.get_list(e,t);return r&&r.length?r[0]:null}return locals[e]?locals[e][t]:null},get_children:function(e,t,r,a){if($.isPlainObject(e)){var n=e;a=r,r=t}else n=frappe.get_doc(e,t);var i=n[r]||[];return a?frappe.utils.filter_dict(i,a):i},clear_table:function(e,t){for(var r=0,a=(e[t]||[]).length;r<a;r++){var n=e[t][r];delete locals[n.doctype][n.name]}e[t]=[]},remove_from_locals:function(e,t){this.clear_doc(e,t),frappe.views.formview[e]&&delete frappe.views.formview[e].frm.opendocs[t]},clear_doc:function(e,t){var r=locals[e]&&locals[e][t];if(r){var a=null;if(r.parenttype){a=r.parent;var n=r.parenttype,i=r.parentfield}if(delete locals[e][t],a){var o=locals[n][a],s=[],l=1;$.each(o[i],function(e,r){r.name!=t&&(s.push(r),r.idx=l,l++),o[i]=s})}}},get_no_copy_list:function(e){for(var t=["name","amended_from","amendment_date","cancel_reason"],r=frappe.get_doc("DocType",e).fields||[],a=0,n=r.length;a<n;a++){var i=r[a];cint(i.no_copy)&&t.push(i.fieldname)}return t},delete_doc:function(e,t,r){frappe.confirm(__("Permanently delete {0}?",[t]),function(){return frappe.call({method:"frappe.client.delete",args:{doctype:e,name:t},callback:function(a,n){a.exc||(frappe.utils.play_sound("delete"),frappe.model.clear_doc(e,t),r&&r(a,n))}})})},rename_doc:function(e,t,r){var a=new frappe.ui.Dialog({title:__("Rename {0}",[__(t)]),fields:[{label:__("New Name"),fieldname:"new_name",fieldtype:"Data",reqd:1,default:t},{label:__("Merge with existing"),fieldtype:"Check",fieldname:"merge"}]});a.set_primary_action(__("Rename"),function(){var n=a.get_values();if(n)return frappe.call({method:"frappe.model.rename_doc.rename_doc",args:{doctype:e,old:t,new:n.new_name,merge:n.merge},btn:a.get_primary_btn(),callback:function(i,o){i.exc||($(document).trigger("rename",[e,t,i.message||n.new_name]),locals[e]&&locals[e][t]&&delete locals[e][t],a.hide(),r&&r(i.message))}})}),a.show()},round_floats_in:function(e,t){t||(t=frappe.meta.get_fieldnames(e.doctype,e.parent,{fieldtype:["in",["Currency","Float"]]}));for(var r=0,a=t.length;r<a;r++){var n=t[r];e[n]=flt(e[n],precision(n,e))}},validate_missing:function(e,t){e[t]||frappe.throw(__("Please specify")+": "+__(frappe.meta.get_label(e.doctype,t,e.parent||e.name)))},get_all_docs:function(e){var t=[e];for(var r in e)if($.isArray(e[r]))for(var a=e[r],n=0,i=a.length;n<i;n++)t.push(a[n]);return t},get_full_column_name:function(e,t){return e.includes("`tab")?e:"`tab"+t+"`.`"+e+"`"},is_numeric_field:function(e){if(e)return"object"==typeof e&&(e=e.fieldtype),frappe.model.numeric_fieldtypes.includes(e)}}),frappe.get_doc=frappe.model.get_doc,frappe.get_children=frappe.model.get_children,frappe.get_list=frappe.model.get_list,frappe.db={get_list:function(e,t){return t||(t={}),t.doctype=e,t.fields||(t.fields=["name"]),t.limit||(t.limit=20),new Promise(function(e){frappe.call({method:"frappe.model.db_query.get_list",args:t,callback:function(t){e(t.message)}})})},exists:function(e,t){return new Promise(function(r){frappe.db.get_value(e,{name:t},"name").then(function(e){e.message&&e.message.name?r(!0):r(!1)})})},get_value:function(e,t,r,a){return frappe.call({method:"frappe.client.get_value",args:{doctype:e,fieldname:r,filters:t},callback:function(e){a&&a(e.message)}})},get_single_value:function(e,t){return new Promise(function(r){frappe.call("frappe.client.get_single_value",{doctype:e,field:t}).then(function(e){return r(e?e.message:null)})})},set_value:function(e,t,r,a,n){return frappe.call({method:"frappe.client.set_value",args:{doctype:e,name:t,fieldname:r,value:a},callback:function(e){n&&n(e.message)}})},get_doc:function(e,t,r){return void 0===r&&(r=null),new Promise(function(a,n){frappe.call({method:"frappe.client.get",args:{doctype:e,name:t,filters:r},callback:function(e){return a(e.message)}}).fail(n)})},insert:function(e){return new Promise(function(t){frappe.call("frappe.client.insert",{doc:e},function(e){return t(e.message)})})},delete_doc:function(e,t){return new Promise(function(r){frappe.call("frappe.client.delete",{doctype:e,name:t},function(e){return r(e.message)})})}},frappe.provide("frappe.meta.docfield_map"),frappe.provide("frappe.meta.docfield_copy"),frappe.provide("frappe.meta.docfield_list"),frappe.provide("frappe.meta.doctypes"),frappe.provide("frappe.meta.precision_map"),frappe.get_meta=function(e){return locals.DocType[e]},$.extend(frappe.meta,{sync:function(e){$.each(e.fields,function(e,t){frappe.meta.add_field(t)}),frappe.meta.sync_messages(e),e.__print_formats&&frappe.model.sync(e.__print_formats),e.__workflow_docs&&frappe.model.sync(e.__workflow_docs)},add_field:function(e){for(var t in frappe.provide("frappe.meta.docfield_map."+e.parent),frappe.meta.docfield_map[e.parent][e.fieldname||e.label]=e,frappe.meta.docfield_list[e.parent]||(frappe.meta.docfield_list[e.parent]=[]),frappe.meta.docfield_list[e.parent]){var r=frappe.meta.docfield_list[e.parent][t];if(e.fieldname==r.fieldname)return}frappe.meta.docfield_list[e.parent].push(e)},make_docfield_copy_for:function(e,t){var r=frappe.meta.docfield_copy;r[e]||(r[e]={}),r[e][t]||(r[e][t]={});for(var a=frappe.meta.docfield_list[e]||[],n=0,i=a.length;n<i;n++){var o=a[n];r[e][t][o.fieldname||o.label]=copy_dict(o)}},get_field:function(e,t,r){var a=frappe.meta.get_docfield(e,t,r);return a||frappe.model.std_fields.every(function(e){return e.fieldname!==t||(a=e,!1)}),a},get_docfield:function(e,t,r){var a=frappe.meta.get_docfield_copy(e,r);return a?a[t]:null},set_formatter:function(e,t,r,a){frappe.meta.get_docfield(e,t,r).formatter=a},set_indicator_formatter:function(e,t,r,a,n){frappe.meta.get_docfield(e,t,r).formatter=function(e,t,r,i){return repl('<span class="indicator %(color)s">%(name)s</span>',{color:n(),name:a()})}},get_docfields:function(e,t,r){var a=frappe.meta.get_docfield_copy(e,t),n=frappe.meta.sort_docfields(a);return r&&(n=frappe.utils.filter_dict(n,r)),n},get_linked_fields:function(e){return $.map(frappe.get_meta(e).fields,function(e){return"Link"==e.fieldtype?e.options:null})},get_fields_to_check_permissions:function(e){var t=$.map(frappe.meta.get_docfields(e,name),function(e){return"Link"===e.fieldtype&&1!==e.ignore_user_permissions?e:null});return t=t.concat({label:"Name",fieldname:name,options:e})},sort_docfields:function(e){return $.map(e,function(e){return e}).sort(function(e,t){return e.idx-t.idx})},get_docfield_copy:function(e,t){return t?(frappe.meta.docfield_copy[e]&&frappe.meta.docfield_copy[e][t]||frappe.meta.make_docfield_copy_for(e,t),frappe.meta.docfield_copy[e][t]):frappe.meta.docfield_map[e]},get_fieldnames:function(e,t,r){return $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[e],r),function(e){return e.fieldname})},has_field:function(e,t){return frappe.meta.docfield_map[e][t]},get_table_fields:function(e){return $.map(frappe.meta.docfield_list[e],function(e){return"Table"===e.fieldtype?e:null})},get_doctype_for_field:function(e,t){var r=null;return in_list(frappe.model.std_fields_list,t)?r=e:frappe.meta.has_field(e,t)?r=e:(frappe.meta.get_table_fields(e).every(function(e){return!frappe.meta.has_field(e.options,t)||(r=e.options,!1)}),r||console.log(__("Warning: Unable to find {0} in any table related to {1}",[t,__(e)]))),r},get_parentfield:function(e,t){var r=(frappe.get_doc("DocType",e).fields||[]).filter(function(e){return"Table"===e.fieldtype&&e.options===t});if(!r.length)throw"parentfield not found for "+e+", "+t;return r[0].fieldname},get_label:function(e,t,r){var a={owner:__("Owner"),creation:__("Created On"),modified:__("Last Modified On"),idx:__("Idx"),name:__("Name"),modified_by:__("Last Modified By")};if(a[t])return a[t];var n=this.get_docfield(e,t,r);return(n?n.label:"")||t},get_print_formats:function(e){var t=["Standard"],r=locals.DocType[e].default_print_format,a=frappe.get_list("Print Format",{doc_type:e}).sort(function(e,t){return e>t?1:-1});if($.each(a,function(e,r){!in_list(t,r.name)&&in_list(["Server","Client"],r.print_format_type)&&t.push(r.name)}),r&&"Standard"!=r){var n=t.indexOf(r);t.splice(n,1).sort(),t.unshift(r)}return t},sync_messages:function(e){e.__messages&&$.extend(frappe._messages,e.__messages)},get_field_currency:function(e,t){var r=frappe.boot.sysdefaults.currency;if(!t&&cur_frm&&(t=cur_frm.doc),e&&e.options)if(t&&-1!=e.options.indexOf(":")){var a=e.options.split(":");if(3==a.length){var n=t[a[1]];!n&&cur_frm&&(n=cur_frm.doc[a[1]]),r=frappe.model.get_value(a[0],n,a[2])||frappe.model.get_value(":"+a[0],n,a[2])||r}}else t&&t[e.options]?r=t[e.options]:cur_frm&&cur_frm.doc[e.options]&&(r=cur_frm.doc[e.options]);return r},get_field_precision:function(e,t){var r=null;if(e&&cint(e.precision))r=cint(e.precision);else if(e&&"Currency"===e.fieldtype){if(!(r=cint(frappe.defaults.get_default("currency_precision")))){var a=get_number_format();r=get_number_format_info(a).precision}}else r=cint(frappe.defaults.get_default("float_precision"))||3;return r}}),$.extend(frappe.model,{docinfo:{},sync:function(e){var t;if(e.docs||e.docinfo||(e={docs:e}),$.isPlainObject(e.docs)&&(e.docs=[e.docs]),e.docs)for(var r=0,a=e.docs.length;r<a;r++){var n=e.docs[r];locals[n.doctype]&&locals[n.doctype][n.name]?frappe.model.update_in_locals(n):frappe.model.add_to_locals(n),n.__last_sync_on=new Date,"DocType"===n.doctype&&frappe.meta.sync(n),n.localname&&(frappe.model.new_names[n.localname]=n.name,$(document).trigger("rename",[n.doctype,n.localname,n.name]),delete locals[n.doctype][n.localname],0===r&&(frappe.model.docinfo[n.doctype][n.name]=frappe.model.docinfo[n.doctype][n.localname],frappe.model.docinfo[n.doctype][n.localname]=void 0))}e.docinfo&&(e.docs?t=e.docs[0]:cur_frm&&(t=cur_frm.doc),t&&(frappe.model.docinfo[t.doctype]||(frappe.model.docinfo[t.doctype]={}),frappe.model.docinfo[t.doctype][t.name]=e.docinfo));return e.docs},add_to_locals:function(e){if(locals[e.doctype]||(locals[e.doctype]={}),!e.name&&e.__islocal&&(e.parentfield||frappe.model.clear_doc(e),e.name=frappe.model.get_new_name(e.doctype),e.parentfield||frappe.provide("frappe.model.docinfo."+e.doctype+"."+e.name)),locals[e.doctype][e.name]=e,!e.parentfield)for(var t in e){var r=e[t];if($.isArray(r))for(var a=0,n=r.length;a<n;a++){var i=r[a];"object"!=typeof i||i.parent||(i.parent=e.name),frappe.model.add_to_locals(i)}}},update_in_locals:function(e){var t=locals[e.doctype][e.name],r=function(e,t){Object.keys(t).map(function(r){null==e[r]&&delete t[r]})};for(var a in e){var n=frappe.meta.get_field(e.doctype,a);if(n&&"Table"===n.fieldtype){e[a]instanceof Array||(e[a]=[]),t[a]instanceof Array||(t[a]=[]);for(var i=0;i<e[a].length;i++){var o=e[a][i],s=t[a][i];s?(locals[o.doctype]||(locals[o.doctype]={}),o.name||(o.name=frappe.model.get_new_name(e.doctype)),locals[o.doctype][o.name]||(delete locals[o.doctype][s.name],locals[o.doctype][o.name]=s),Object.assign(s,o),r(o,s)):(t[a].push(o),o.parent||(o.parent=e.name),frappe.model.add_to_locals(o))}if(t[a].length>e[a].length){for(var l=e[a].length;l<t[a].length;l++){var p=t[a][l];locals[p.doctype]&&locals[p.doctype][p.name]&&delete locals[p.doctype][p.name]}t[a].length=e[a].length}}else t[a]=e[a]}r(e,t)}}),frappe.provide("frappe.model"),$.extend(frappe.model,{new_names:{},new_name_count:{},get_new_doc:function(e,t,r,a){frappe.provide("locals."+e);var n={docstatus:0,doctype:e,name:frappe.model.get_new_name(e),__islocal:1,__unsaved:1,owner:frappe.session.user};if(frappe.model.set_default_values(n,t),t?($.extend(n,{parent:t.name,parentfield:r,parenttype:t.doctype}),t[r]||(t[r]=[]),n.idx=t[r].length+1,t[r].push(n)):frappe.provide("frappe.model.docinfo."+e+"."+n.name),frappe.model.add_to_locals(n),a&&frappe.model.create_mandatory_children(n),t||(n.__run_link_triggers=1),frappe.route_options&&frappe.route_options.name_field){var i=frappe.get_meta(e);i.autoname&&-1!==i.autoname.indexOf("field:")?n[i.autoname.substr(6)]=frappe.route_options.name_field:i.title_field&&(n[i.title_field]=frappe.route_options.name_field),delete frappe.route_options.name_field}return frappe.route_options&&!n.parent&&($.each(frappe.route_options,function(t,r){var a=frappe.meta.has_field(e,t);a&&in_list(["Link","Data","Select","Dynamic Link"],a.fieldtype)&&!a.no_copy&&(n[t]=r)}),frappe.route_options=null),n},make_new_doc_and_get_name:function(e,t){return frappe.model.get_new_doc(e,null,null,t).name},get_new_name:function(e){var t=frappe.model.new_name_count;return t[e]||(t[e]=0),t[e]++,__("New")+" "+__(e)+" "+t[e]},set_default_values:function(e,t){for(var r=e.doctype,a=frappe.meta.docfield_list[r]||[],n=[],i=0;i<a.length;i++){var o=a[i];if(!in_list(frappe.model.no_value_type,o.fieldtype)&&null==e[o.fieldname]){var s=frappe.model.get_default_value(o,e,t);s?(in_list(["Int","Check"],o.fieldtype)?s=cint(s):in_list(["Currency","Float"],o.fieldtype)&&(s=flt(s)),e[o.fieldname]=s,n.push(o.fieldname)):"Select"==o.fieldtype&&o.options&&"string"==typeof o.options&&!in_list(["[Select]","Loading..."],o.options)&&(e[o.fieldname]=o.options.split("\n")[0])}}return n},create_mandatory_children:function(e){var t=frappe.get_meta(e.doctype);t&&t.istable||frappe.meta.docfield_list[e.doctype].forEach(function(t){"Table"===t.fieldtype&&t.reqd&&frappe.model.add_child(e,t.fieldname)})},get_default_value:function(e,t,r){var a="",n=frappe.defaults.get_user_permissions(),i=frappe.get_meta(t.doctype),o="Link"===e.fieldtype&&n&&1!=e.ignore_user_permissions&&n[e.options];if("Link"===e.fieldtype&&"User"!==e.options){if("Setup"===e.linked_document_type&&o&&1===n[e.options].length)return n[e.options][0];if(!e.ignore_user_permissions){var s=frappe.defaults.get_user_defaults(e.options);s&&1===s.length&&(a=s[0])}if(a||(a=frappe.defaults.get_user_default(e.fieldname)),!a&&e.remember_last_selected_value&&frappe.boot.user.last_selected_values&&(a=frappe.boot.user.last_selected_values[e.options]),a&&(!o||-1!==n[e.options].indexOf(a)))return a}if(e.default){if("__user"==e.default||"user"==e.default.toLowerCase())return frappe.session.user;if("user_fullname"==e.default)return frappe.session.user_fullname;if("Today"==e.default)return frappe.datetime.get_today();if("now"===(e.default||"").toLowerCase())return frappe.datetime.now_datetime();if(":"===e.default[0]){var l=frappe.model.get_default_from_boot_docs(e,t,r);if(!o||-1!==n[e.options].indexOf(l))return l}else if(e.fieldname===i.title_field)return"";var p=!o||-1!==n[e.options].indexOf(e.default);if("Link"!==e.fieldtype||"User"===e.options||p)return e.default}else if("Time"==e.fieldtype)return frappe.datetime.now_time()},get_default_from_boot_docs:function(e,t,r){if(frappe.get_list(e.default).length>0){var a=e.default.slice(1).toLowerCase().replace(" ","_"),n=r?r[a]:frappe.defaults.get_user_default(a),i=n?frappe.get_doc(e.default,n):null;if(i&&i[e.fieldname])return i[e.fieldname]}},add_child:function(e,t,r,a){2===arguments.length&&(r=t,t=frappe.meta.get_field(e.doctype,r).options),a=a?a-.1:(e[r]||[]).length+1;var n=frappe.model.get_new_doc(t,e,r);if(n.idx=a,a!==cint(a))for(var i=e[r].sort(function(e,t){return e.idx-t.idx}),o=0,s=i.length;o<s;o++){i[o].idx=o+1}return cur_frm&&cur_frm.doc==e&&cur_frm.dirty(),n},copy_doc:function(e,t,r,a){var n=["name","amended_from","amendment_date","cancel_reason"],i=frappe.model.get_new_doc(e.doctype,r,a);for(var o in e){var s=frappe.meta.get_docfield(e.doctype,o);if(s&&"__"!=o.substr(0,2)&&!in_list(n,o)&&(!s||t||1!=cint(s.no_copy))){var l=e[o]||[];if("Table"===s.fieldtype)for(var p=0,c=l.length;p<c;p++){var d=l[p];frappe.model.copy_doc(d,t,i,s.fieldname)}else i[o]=e[o]}}var u=frappe.session.user;return i.__islocal=1,i.docstatus=0,i.owner=u,i.creation="",i.modified_by=u,i.modified="",i},open_mapped_doc:function(e){return e.frm&&e.frm.doc.__unsaved?frappe.throw(__("You have unsaved changes in this form. Please save before you continue.")):!e.source_name&&e.frm?e.source_name=e.frm.doc.name:e.frm||(e.source_name=null),frappe.call({type:"POST",method:"frappe.model.mapper.make_mapped_doc",args:{method:e.method,source_name:e.source_name,selected_children:e.frm?e.frm.get_selected():null},freeze:!0,callback:function(t){t.exc||(frappe.model.sync(t.message),e.run_link_triggers&&(frappe.get_doc(t.message.doctype,t.message.name).__run_link_triggers=!0),frappe.set_route("Form",t.message.doctype,t.message.name))}})}}),frappe.create_routes={},frappe.new_doc=function(e,t,r){return new Promise(function(a){t&&$.isPlainObject(t)&&(frappe.route_options=t),frappe.model.with_doctype(e,function(){frappe.create_routes[e]?frappe.set_route(frappe.create_routes[e]).then(function(){return a()}):frappe.ui.form.make_quick_entry(e,null,r).then(function(){return a()})})})},frappe.provide("frappe.perm"),Object.assign(window,{READ:"read",WRITE:"write",CREATE:"create",DELETE:"delete",SUBMIT:"submit",CANCEL:"cancel",AMEND:"amend"}),$.extend(frappe.perm,{rights:["read","write","create","delete","submit","cancel","amend","report","import","export","print","email","share","set_user_permissions"],doctype_perm:{},has_perm:function(e,t,r,a){t||(t=0),frappe.perm.doctype_perm[e]||(frappe.perm.doctype_perm[e]=frappe.perm.get_perm(e));var n=frappe.perm.doctype_perm[e];if(!n||!n[t])return!1;var i=!!n[t][r];if(0===t&&i&&a){var o=frappe.model.get_docinfo(e,a.name);o&&!o.permissions[r]&&(i=!1)}return i},get_perm:function(e,t){var r=[{read:0}],a=frappe.get_doc("DocType",e),n=frappe.session.user;if(!a)return r;if(("Administrator"===n||frappe.user_roles.includes("Administrator"))&&(r[0].read=1),frappe.perm.build_role_permissions(r,a),t){var i=frappe.model.get_docinfo(e,t.name);if(i&&i.permissions&&Object.keys(i.permissions).forEach(function(e){r[0][e]=i.permissions[e]}),$.isEmptyObject(r[0].if_owner)||(t.owner===n?$.extend(r[0],r[0].if_owner):$.each(r[0].if_owner,function(e){r[0].if_owner[e]&&(r[0][e]=0)})),i&&i.shared)for(var o=0;o<i.shared.length;o++){var s=i.shared[o];s.user===n&&(r[0].read=r[0].read||s.read,r[0].write=r[0].write||s.write,r[0].share=r[0].share||s.share,s.read&&(r[0].email=-1!==frappe.boot.user.can_email.indexOf(e)?1:0,r[0].print=-1!==frappe.boot.user.can_print.indexOf(e)?1:0))}}return frappe.model.can_read(e)&&!r[0].read&&(r[0].read=1),r},build_role_permissions:function(e,t){$.each(t.permissions||[],function(t,r){if(frappe.user_roles.includes(r.role)){var a=cint(r.permlevel);e[a]||(e[a]={}),$.each(frappe.perm.rights,function(t,n){e[a][n]=e[a][n]||r[n]||0})}}),$.each(e[0],function(t,r){r||delete e[0][t]}),$.each(e,function(t,r){void 0===r&&(e[t]={})})},get_match_rules:function(e,t){var r=[];t||(t="read");var a=frappe.perm.get_perm(e),n=frappe.defaults.get_user_permissions();if(n&&!$.isEmptyObject(n)){var i={},o=frappe.meta.get_fields_to_check_permissions(e);$.each(o,function(e,t){n[t.options]&&(i[t.label]=n[t.options])}),$.isEmptyObject(i)||r.push(i)}return a[0].if_owner&&a[0].read&&r.push({Owner:frappe.session.user}),r},get_field_display_status:function(e,t,r,a){if(!r&&t&&(r=frappe.perm.get_perm(t.doctype,t)),!r)return e&&(cint(e.hidden)||cint(e.hidden_due_to_dependency))?"None":"Write";e.permlevel||(e.permlevel=0);var n=r[e.permlevel],i="None";if(n&&(n.write&&!e.disabled?i="Write":n.read&&(i="Read")),a&&console.log("By Permission:"+i),cint(e.hidden)&&(i="None"),a&&console.log("By Hidden:"+i),cint(e.hidden_due_to_dependency)&&(i="None"),a&&console.log("By Hidden Due To Dependency:"+i),!t)return i;"Write"===i&&cint(t.docstatus)>0&&(i="Read"),a&&console.log("By Submit:"+i);var o=cint(e.allow_on_submit);return"Read"===i&&o&&1===cint(t.docstatus)&&n.write&&(i="Write"),a&&console.log("By Allow on Submit:"+i),"Read"===i&&cur_frm&&cur_frm.state_fieldname&&(cint(cur_frm.read_only)||in_list(cur_frm.states.update_fields,e.fieldname)||e.fieldname==cur_frm.state_fieldname)&&(i="Read"),a&&console.log("By Workflow:"+i),"Write"===i&&cint(e.read_only)&&(i="Read"),a&&console.log("By Read Only:"+i),"Write"===i&&e.set_only_once&&!t.__islocal&&(i="Read"),a&&console.log("By Set Only Once:"+i),i},is_visible:function(e,t,r){return"string"==typeof e&&(e=frappe.meta.get_docfield(t.doctype,e,t.parent||t.name)),"None"!==frappe.perm.get_field_display_status(e,t,r)}}),frappe.provide("frappe.workflow"),frappe.workflow={state_fields:{},workflows:{},setup:function(e){var t=frappe.get_list("Workflow",{document_type:e});t.length?(frappe.workflow.workflows[e]=t[0],frappe.workflow.state_fields[e]=t[0].workflow_state_field):frappe.workflow.state_fields[e]=null},get_state_fieldname:function(e){return void 0===frappe.workflow.state_fields[e]&&frappe.workflow.setup(e),frappe.workflow.state_fields[e]},get_default_state:function(e,t){frappe.workflow.setup(e);var r=null;return $.each(frappe.workflow.workflows[e].states,function(e,a){if(cint(a.doc_status)===cint(t))return r=a.state,!1}),r},get_transitions:function(e,t){return frappe.workflow.setup(e),frappe.get_children(frappe.workflow.workflows[e],"transitions",{state:t})},get_document_state:function(e,t){return frappe.workflow.setup(e),frappe.get_children(frappe.workflow.workflows[e],"states",{state:t})[0]},get_next_state:function(e,t,r){return frappe.get_children(frappe.workflow.workflows[e],"transitions",{state:t,action:r})[0].next_state},is_read_only:function(e,t){var r=frappe.workflow.get_state_fieldname(e);if(r){var a=locals[e][t];if(!a)return!1;if(a.__islocal)return!1;var n=a[r]||frappe.workflow.get_default_state(e,a.docstatus),i=n?frappe.workflow.get_document_state(e,n)&&frappe.workflow.get_document_state(e,n).allow_edit:null;if(!frappe.user_roles.includes(i))return!0}return!1},get_update_fields:function(e){return $.unique($.map(frappe.workflow.workflows[e].states||[],function(e){return e.update_field}))}},frappe.provide("frappe.model.user_settings"),$.extend(frappe.model.user_settings,{get:function(e){return frappe.call("frappe.model.utils.user_settings.get",{doctype:e}).then(function(e){return JSON.parse(e.message||"{}")})},save:function(e,t,r){var a=frappe.model.user_settings[e]||{},n=$.extend(!0,{},a);return $.isPlainObject(r)?(n[t]=n[t]||{},$.extend(n[t],r)):n[t]=r,JSON.stringify(a)!==JSON.stringify(n)?this.update(e,n):Promise.resolve()},remove:function(e,t){var r=frappe.model.user_settings[e]||{};return delete r[t],this.update(e,r)},update:function(e,t){return frappe.call({method:"frappe.model.utils.user_settings.save",args:{doctype:e,user_settings:t},callback:function(t){frappe.model.user_settings[e]=t.message}})}}),frappe.get_user_settings=function(e,t){var r=frappe.model.user_settings[e]||{};return t&&(r=r[t]||{}),r},function(e){function t(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,r,a,n,i,o){return t(function(e,t){return e<<t|e>>>32-t}(t(t(r,e),t(n,o)),i),a)}function a(e,t,a,n,i,o,s){return r(t&a|~t&n,e,t,i,o,s)}function n(e,t,a,n,i,o,s){return r(t&n|a&~n,e,t,i,o,s)}function i(e,t,a,n,i,o,s){return r(t^a^n,e,t,i,o,s)}function o(e,t,a,n,i,o,s){return r(a^(t|~n),e,t,i,o,s)}function s(e,r){e[r>>5]|=128<<r%32,e[14+(r+64>>>9<<4)]=r;var s,l,p,c,d,u=1732584193,f=-271733879,g=-1732584194,_=271733878;for(s=0;s<e.length;s+=16)l=u,p=f,c=g,d=_,f=o(f=o(f=o(f=o(f=i(f=i(f=i(f=i(f=n(f=n(f=n(f=n(f=a(f=a(f=a(f=a(f,g=a(g,_=a(_,u=a(u,f,g,_,e[s],7,-680876936),f,g,e[s+1],12,-389564586),u,f,e[s+2],17,606105819),_,u,e[s+3],22,-1044525330),g=a(g,_=a(_,u=a(u,f,g,_,e[s+4],7,-176418897),f,g,e[s+5],12,1200080426),u,f,e[s+6],17,-1473231341),_,u,e[s+7],22,-45705983),g=a(g,_=a(_,u=a(u,f,g,_,e[s+8],7,1770035416),f,g,e[s+9],12,-1958414417),u,f,e[s+10],17,-42063),_,u,e[s+11],22,-1990404162),g=a(g,_=a(_,u=a(u,f,g,_,e[s+12],7,1804603682),f,g,e[s+13],12,-40341101),u,f,e[s+14],17,-1502002290),_,u,e[s+15],22,1236535329),g=n(g,_=n(_,u=n(u,f,g,_,e[s+1],5,-165796510),f,g,e[s+6],9,-1069501632),u,f,e[s+11],14,643717713),_,u,e[s],20,-373897302),g=n(g,_=n(_,u=n(u,f,g,_,e[s+5],5,-701558691),f,g,e[s+10],9,38016083),u,f,e[s+15],14,-660478335),_,u,e[s+4],20,-405537848),g=n(g,_=n(_,u=n(u,f,g,_,e[s+9],5,568446438),f,g,e[s+14],9,-1019803690),u,f,e[s+3],14,-187363961),_,u,e[s+8],20,1163531501),g=n(g,_=n(_,u=n(u,f,g,_,e[s+13],5,-1444681467),f,g,e[s+2],9,-51403784),u,f,e[s+7],14,1735328473),_,u,e[s+12],20,-1926607734),g=i(g,_=i(_,u=i(u,f,g,_,e[s+5],4,-378558),f,g,e[s+8],11,-2022574463),u,f,e[s+11],16,1839030562),_,u,e[s+14],23,-35309556),g=i(g,_=i(_,u=i(u,f,g,_,e[s+1],4,-1530992060),f,g,e[s+4],11,1272893353),u,f,e[s+7],16,-155497632),_,u,e[s+10],23,-1094730640),g=i(g,_=i(_,u=i(u,f,g,_,e[s+13],4,681279174),f,g,e[s],11,-358537222),u,f,e[s+3],16,-722521979),_,u,e[s+6],23,76029189),g=i(g,_=i(_,u=i(u,f,g,_,e[s+9],4,-640364487),f,g,e[s+12],11,-421815835),u,f,e[s+15],16,530742520),_,u,e[s+2],23,-995338651),g=o(g,_=o(_,u=o(u,f,g,_,e[s],6,-198630844),f,g,e[s+7],10,1126891415),u,f,e[s+14],15,-1416354905),_,u,e[s+5],21,-57434055),g=o(g,_=o(_,u=o(u,f,g,_,e[s+12],6,1700485571),f,g,e[s+3],10,-1894986606),u,f,e[s+10],15,-1051523),_,u,e[s+1],21,-2054922799),g=o(g,_=o(_,u=o(u,f,g,_,e[s+8],6,1873313359),f,g,e[s+15],10,-30611744),u,f,e[s+6],15,-1560198380),_,u,e[s+13],21,1309151649),g=o(g,_=o(_,u=o(u,f,g,_,e[s+4],6,-145523070),f,g,e[s+11],10,-1120210379),u,f,e[s+2],15,718787259),_,u,e[s+9],21,-343485551),u=t(u,l),f=t(f,p),g=t(g,c),_=t(_,d);return[u,f,g,_]}function l(e){var t,r="";for(t=0;t<32*e.length;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function p(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;for(t=0;t<8*e.length;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function c(e){var t,r,a="0123456789abcdef",n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+=a.charAt(t>>>4&15)+a.charAt(15&t);return n}function d(e){return unescape(encodeURIComponent(e))}function u(e){return function(e){return l(s(p(e),8*e.length))}(d(e))}function f(e,t){return function(e,t){var r,a,n=p(e),i=[],o=[];for(i[15]=o[15]=void 0,n.length>16&&(n=s(n,8*e.length)),r=0;16>r;r+=1)i[r]=909522486^n[r],o[r]=1549556828^n[r];return a=s(i.concat(p(t)),512+8*t.length),l(s(o.concat(a),640))}(d(e),d(t))}function g(e,t,r){return t?r?f(t,e):function(e,t){return c(f(e,t))}(t,e):r?u(e):function(e){return c(u(e))}(e)}"function"==typeof define&&define.amd?define(function(){return g}):e.md5=g}(window),frappe.user_info=function(e){if(e||(e=frappe.session.user),"bot"===e.toLowerCase())return{fullname:__("Bot"),image:"/assets/frappe/images/ui/bot.png",abbr:"B"};if(frappe.boot.user_info&&frappe.boot.user_info[e])t=frappe.boot.user_info[e];else var t={fullname:frappe.utils.capitalize(e.split("@")[0])||"Unknown"};return t.abbr=frappe.get_abbr(t.fullname),t.color=frappe.get_palette(t.fullname),t},frappe.ui.set_user_background=function(e,t,r){if(t||(t="#page-desktop"),r||(r="Fill Screen"),e){window.cordova&&-1===e.indexOf("http")&&(e=frappe.base_url+e);var a=repl('background: url("%(src)s") center center;',{src:e})}else a="background-color: #4B4C9D;";frappe.dom.set_style(repl("%(selector)s { \t\t%(background)s \t\tbackground-attachment: fixed; \t\t%(style)s \t}",{selector:t,background:a,style:"Fill Screen"===r?"background-size: cover;":""}))},frappe.provide("frappe.user"),$.extend(frappe.user,{name:"Guest",full_name:function(e){return e===frappe.session.user?__("You"):frappe.user_info(e).fullname},image:function(e){return frappe.user_info(e).image},abbr:function(e){return frappe.user_info(e).abbr},has_role:function(e){for(var t in"string"==typeof e&&(e=[e]),e)if(-1!=(frappe.boot?frappe.boot.user.roles:["Guest"]).indexOf(e[t]))return!0},get_desktop_items:function(){return $.map(frappe.boot.desktop_icons,function(e){var t=e.module_name,r=frappe.modules[t]&&frappe.modules[t].type;if(-1===frappe.boot.user.allow_modules.indexOf(t))return null;var a=null;return"module"===r?(-1!=frappe.boot.user.allow_modules.indexOf(t)||frappe.modules[t].is_help)&&(a=t):"page"===r?-1!=frappe.boot.allowed_pages.indexOf(frappe.modules[t].link)&&(a=t):"list"===r?frappe.model.can_read(frappe.modules[t]._doctype)&&(a=t):"view"===r?a=t:"setup"===r?(frappe.user.has_role("System Manager")||frappe.user.has_role("Administrator"))&&(a=t):a=t,a})},is_module:function(e){for(var t=frappe.get_desktop_icons(),r=0;r<t.length;r++)if(e===t[r].module_name)return!0;return!1},is_report_manager:function(){return frappe.user.has_role(["Administrator","System Manager","Report Manager"])},get_formatted_email:function(e){var t=frappe.user.full_name(e);if(t){var r="";return-1!==t.search(/[\[\]\\()<>@,:;".]/)&&(r='"'),repl("%(quote)s%(fullname)s%(quote)s <%(email)s>",{fullname:t,email:e,quote:r})}return e},get_emails:function(){return Object.keys(frappe.boot.user_info).map(function(e){return frappe.boot.user_info[e].email})},toString:function(){return this.name}}),frappe.session_alive=!0,$(document).bind("mousemove",function(){!1===frappe.session_alive&&$(document).trigger("session_alive"),frappe.session_alive=!0,frappe.session_alive_timeout&&clearTimeout(frappe.session_alive_timeout),frappe.session_alive_timeout=setTimeout("frappe.session_alive=false;",3e4)}),frappe.avatar=function(e,t,r){if(e)var a=frappe.user_info(e);else a={image:frappe.get_cookie("user_image"),fullname:frappe.get_cookie("full_name"),abbr:frappe.get_abbr(frappe.get_cookie("full_name")),color:frappe.get_palette(frappe.get_cookie("full_name"))};if(r||(r=a.fullname),t||(t="avatar-small"),a.image)return'<span class="avatar '+t+'" title="'+r+'">\n\t\t\t\t<span class="avatar-frame" style=\'background-image: url("'+(window.cordova&&-1===a.image.indexOf("http")?frappe.base_url+a.image:a.image)+'")\'\n\t\t\t\t\ttitle="'+r+'"></span>\n\t\t\t</span>';var n=a.abbr;return"avatar-small"!==t&&"avatar-xs"!=t||(n=n.substr(0,1)),'<span class="avatar '+t+'" title="'+r+'">\n\t\t\t<div class="standard-image" style="background-color: '+a.color+';">\n\t\t\t\t'+n+"</div>\n\t\t</span>"},frappe.ui.scroll=function(e,t,r){var a=$(".navbar").height()+$(".page-head").height(),n=$(e).offset().top-a-cint(r);t?$("html, body").animate({scrollTop:n}):$(window).scrollTop(n)},frappe.get_palette=function(e){return"#fafbfc"},frappe.get_abbr=function(e,t){if(!e)return"";var r="";return $.each(e.split(" "),function(e,a){return!(r.length>=(t||2))&&(!a.trim().length||void(r+=a.trim()[0]))}),r||"?"},frappe.gravatars={},frappe.get_gravatar=function(e,t){void 0===t&&(t=0);var r=t?"s="+t:"d=retro";return frappe.gravatars[e]||(frappe.gravatars[e]="https://secure.gravatar.com/avatar/"+md5(e)+"?"+r),frappe.gravatars[e]},window.repl=function(e,t){if(null==e)return"";for(var r in t)e=e.split("%("+r+")s").join(t[r]);return e},window.replace_all=function(e,t,r){return e.split(t).join(r)},window.strip_html=function(e){return e.replace(/<[^>]*>/g,"")},window.strip=function(e,t){if(e){e=lstrip(e,t);return e=rstrip(e,t)}},window.lstrip=function(e,t){t||(t=["\n","\t"," "]);for(var r=e.substr(0,1);in_list(t,r);){r=(e=e.substr(1)).substr(0,1)}return e},window.rstrip=function(e,t){t||(t=["\n","\t"," "]);for(var r=e.substr(e.length-1);in_list(t,r);){r=(e=e.substr(0,e.length-1)).substr(e.length-1)}return e},frappe.get_cookie=function(e){return frappe.get_cookies()[e]},frappe.get_cookies=function(){var e=document.cookie,t=0,r={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(e=RegExp.$1,t=1),0===t?e.split(/[,;]/).map(function(e){var t=e.split(/=/,2),a=decodeURIComponent(t[0].trimLeft()),n=t.length>1?decodeURIComponent(t[1].trimRight()):null;n&&'"'===n.charAt(0)&&(n=n.substr(1,n.length-2)),r[a]=n}):e.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(e,t){var a=e,n='"'===t.charAt(0)?t.substr(1,-1).replace(/\\(.)/g,"$1"):t;r[a]=n}),r},frappe.palette=[["#FFC4C4",0],["#FFE8CD",0],["#FFD2C2",0],["#FF8989",0],["#FFD19C",0],["#FFA685",0],["#FF4D4D",1],["#FFB868",0],["#FF7846",1],["#A83333",1],["#A87945",1],["#A84F2E",1],["#D2D2FF",0],["#F8D4F8",0],["#DAC7FF",0],["#A3A3FF",0],["#F3AAF0",0],["#B592FF",0],["#7575FF",0],["#EC7DEA",0],["#8E58FF",1],["#4D4DA8",1],["#934F92",1],["#5E3AA8",1],["#EBF8CC",0],["#FFD7D7",0],["#D2F8ED",0],["#D9F399",0],["#FFB1B1",0],["#A4F3DD",0],["#C5EC63",0],["#FF8989",1],["#77ECCA",0],["#7B933D",1],["#A85B5B",1],["#49937E",1],["#FFFACD",0],["#D2F1FF",0],["#CEF6D1",0],["#FFF69C",0],["#A6E4FF",0],["#9DECA2",0],["#FFF168",0],["#78D6FF",0],["#6BE273",0],["#A89F45",1],["#4F8EA8",1],["#428B46",1]],frappe.is_mobile=function(){return $(document).width()<768},frappe.utils.xss_sanitise=function(e,t){var r=e,a={"<":"&lt",">":"&gt",'"':"&quot","'":"&#x27","/":"&#x2F"};if((t=Object.assign({},{strategies:["html","js"]},t)).strategies.includes("html"))for(var n in a){var i=a[n],o=new RegExp(n,"g");r=r.replace(o,i)}return t.strategies.includes("js")&&(r=r.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")),r},window.comment_when=function(e,t){return'<span class="frappe-timestamp '+(t?" mini":"")+'" data-timestamp="'+e+'" title="'+(frappe.datetime.str_to_user?frappe.datetime.str_to_user(e):e)+'">'+prettyDate(e,t)+"</span>"},frappe.provide("frappe.datetime"),frappe.datetime.refresh_when=function(){jQuery&&$(".frappe-timestamp").each(function(){$(this).html(prettyDate($(this).attr("data-timestamp"),$(this).hasClass("mini")))})},setInterval(function(){frappe.datetime.refresh_when()},6e4),frappe.provide("frappe.utils"),frappe.utils={get_random:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},get_file_link:function(e){return e=cstr(e),frappe.utils.is_url(e)?e:-1===e.indexOf("/")?"files/"+e:e},is_html:function(e){return!!e&&(-1!=e.indexOf("<br>")||-1!=e.indexOf("<p")||-1!=e.indexOf("<img")||-1!=e.indexOf("<div"))},is_xs:function(){return $(document).width()<768},is_sm:function(){return $(document).width()<991&&$(document).width()>=768},is_md:function(){return $(document).width()<1199&&$(document).width()>=991},is_json:function(e){try{JSON.parse(e)}catch(e){return!1}return!0},strip_whitespace:function(e){return(e||"").replace(/<p>\s*<\/p>/g,"").replace(/<br>(\s*<br>\s*)+/g,"<br><br>")},encode_tags:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;"};return e.replace(/[&<>]/g,function(e){return t[e]||e})},strip_original_content:function(e){var t=[],r=[],a=-1===e.indexOf("<br>")?"\n":"<br>";return $.each(e.split(a),function(e,a){var n=strip(a);!n||">"!==n.substr(0,1)&&"&gt;"!==n.substr(0,4)?(t.concat(r),t.push(a),r=[]):r.push(a)}),t.join(a)},escape_html:function(e){return $("<div></div>").text(e||"").html()},is_url:function(e){return"http://"==e.toLowerCase().substr(0,7)||"https://"==e.toLowerCase().substr(0,8)},toggle_blockquote:function(e){if(!e)return e;var t=$("<div></div>").html(e);return t.find("blockquote").parent("blockquote").addClass("hidden").before('<p><a class="text-muted btn btn-default toggle-blockquote" style="padding: 2px 7px 0px; line-height: 1;"> \t\t\t\t\t• • • \t\t\t\t</a></p>'),t.html()},scroll_to:function(e,t,r){var a=0;if(e&&"number"==typeof e)a=e;else if(e){var n=$(".navbar").height()+$(".page-head").height();a=$(e).offset().top-n-cint(r)}a<0&&(a=0),a!=$("html, body").scrollTop()&&(!1!==t?$("html, body").animate({scrollTop:a}):$(window).scrollTop(a))},filter_dict:function(e,t){var r=[];return"string"==typeof t?[e[t]]:($.each(e,function(e,a){for(var n in t)if($.isArray(t[n])){if("in"==t[n][0]){if(-1==t[n][1].indexOf(a[n]))return}else if("not in"==t[n][0]){if(-1!=t[n][1].indexOf(a[n]))return}else if("<"==t[n][0]){if(!(a[n]<t[n]))return}else if("<="==t[n][0]){if(!(a[n]<=t[n]))return}else if(">"==t[n][0]){if(!(a[n]>t[n]))return}else if(">="==t[n][0]&&!(a[n]>=t[n]))return}else if(a[n]!=t[n])return;r.push(a)}),r)},comma_or:function(e){return frappe.utils.comma_sep(e," "+__("or")+" ")},comma_and:function(e){return frappe.utils.comma_sep(e," "+__("and")+" ")},comma_sep:function(e,t){return e instanceof Array?0==e.length?"":1==e.length?e[0]:e.slice(0,e.length-1).join(", ")+t+e.slice(-1)[0]:e},set_intro:function(e,t,r,a,n){e.intro_area||(e.intro_area=$('<div class="intro-area">').prependTo(t)),r?(a||e.intro_area.empty(),n?e.intro_area.html('<div class="indicator '+n+'">'+r+"</div>"):e.intro_area.html('<p class="text-muted">'+r+"</div>")):(e.intro_area.remove(),e.intro_area=null)},set_footnote:function(e,t,r){return e||(e=$('<div class="text-muted footnote-area level">').appendTo(t)),r?e.html(r):(e.remove(),e=null),e},get_args_dict_from_url:function(e){var t={};return $.each(decodeURIComponent(e).split("&"),function(e,r){r=r.split("="),t[r[0]]=r[1]}),t},get_url_from_dict:function(e){return $.map(e,function(e,t){return null!==e?encodeURIComponent(t)+"="+encodeURIComponent(e):null}).join("&")||""},validate_type:function(e,t){var r;switch(t){case"number":r=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":r=/^\d+$/;break;case"alphanum":r=/^\w+$/;break;case"email":r=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":r=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":r=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return""!==e&&r.test(e)},guess_style:function(e,t,r){var a=t||"default",n="darkgrey";return e&&(has_words(["Pending","Review","Medium","Not Approved"],e)?(a="warning",n="orange"):has_words(["Open","Urgent","High"],e)?(a="danger",n="red"):has_words(["Closed","Finished","Converted","Completed","Confirmed","Approved","Yes","Active","Available","Paid"],e)?(a="success",n="green"):has_words(["Submitted"],e)&&(a="info",n="blue")),r?n:a},guess_colour:function(e){return frappe.utils.guess_style(e,null,!0)},sort:function(e,t,r,a){if(!e||e.length<2)return e||[];var n={string:function(e,r){return cstr(e[t]).localeCompare(cstr(r[t]))},number:function(e,r){return flt(e[t])-flt(r[t])}};return r||(r="string"==typeof e[0][t]?"string":"number"),e.sort(n[r]),a&&e.reverse(),e},unique:function(e){for(var t={},r=[],a=0,n=e.length;a<n;a++)t.hasOwnProperty(e[a])||(t[e[a]]=null,r.push(e[a]));return r},remove_nulls:function(e){for(var t=[],r=0,a=e.length;r<a;r++)is_null(e[r])||t.push(e[r]);return t},all:function(e){for(var t=0,r=e.length;t<r;t++)if(!e[t])return!1;return!0},dict:function(e,t){var r=[];return $.each(t,function(t,a){var n={};$.each(e,function(e,t){n[t]=a[e]}),r.push(n)}),r},sum:function(e){return e.reduce(function(e,t){return flt(e)+flt(t)},0)},arrays_equal:function(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if($.isArray(e[r])){if(!frappe.utils.arrays_equal(e[r],t[r]))return!1}else if(e[r]!==t[r])return!1;return!0},intersection:function(e,t){var r=0,a=0,n=new Array;for(e=[].concat(e).sort(),t=[].concat(t).sort();r<e.length&&a<t.length;)e[r]<t[a]?r++:e[r]>t[a]?a++:(n.push(e[r]),r++,a++);return n},resize_image:function(e,t,r,a){var n=new Image;r||(r=600),a||(a=400),n.src=e.result,n.onload=function(){var e=n.width,i=n.height;e>i?e>r&&(i*=r/e,e=r):i>a&&(e*=a/i,i=a);var o=document.createElement("canvas");o.width=e,o.height=i,o.getContext("2d").drawImage(this,0,0,e,i);var s=o.toDataURL("image/jpeg");setTimeout(function(){t(s)},10)}},csv_to_array:function(e,t){t=t||",";for(var r=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),a=[[]],n=null;n=r.exec(e);){var i,o=n[1];o.length&&o!==t&&a.push([]),i=n[2]?n[2].replace(new RegExp('""',"g"),'"'):n[3],a[a.length-1].push(i)}return a},warn_page_name_change:function(e){frappe.msgprint(__("Note: Changing the Page Name will break previous URL to this page."))},notify:function(e,t,r,a){console.log("push notifications are evil and deprecated")},set_title:function(e){frappe._original_title=e,frappe._title_prefix&&(e=frappe._title_prefix+" "+e.replace(/<[^>]*>/g,"")),document.title=e},set_title_prefix:function(e){frappe._title_prefix=e,frappe.utils.set_title(frappe._original_title)},is_image_file:function(e){return!!e&&(e=e.split("?")[0],/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(e))},play_sound:function(e){try{if(frappe.boot.user.mute_sounds)return;var t=$("#sound-"+e)[0];t.volume=t.getAttribute("volume"),t.play()}catch(t){console.log("Cannot play sound",e,t)}},split_emails:function(e){var t=[];return e?(e.split(/[,\n](?=(?:[^"]|"[^"]*")*$)/g).forEach(function(e){(e=e.trim())&&t.push(e)}),t):t},supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch(e){return!1}}(),throttle:function(e,t,r){var a,n,i,o=null,s=0;r||(r={});var l=function(){s=!1===r.leading?0:Date.now(),o=null,i=e.apply(a,n),o||(a=n=null)};return function(){var p=Date.now();s||!1!==r.leading||(s=p);var c=t-(p-s);return a=this,n=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=p,i=e.apply(a,n),o||(a=n=null)):o||!1===r.trailing||(o=setTimeout(l,c)),i}},debounce:function(e,t,r){var a;return function(){var n=this,i=arguments,o=r&&!a;clearTimeout(a),a=setTimeout(function(){a=null,r||e.apply(n,i)},t),o&&e.apply(n,i)}},get_form_link:function(e,t,r){void 0===r&&(r=!1);var a=["#Form",e,t].join("/");return r?'<a href="'+a+'">'+t+"</a>":a}},Array.prototype.uniqBy||Object.defineProperty(Array.prototype,"uniqBy",{value:function(e){var t={};return this.filter(function(r){var a=e(r);return!t.hasOwnProperty(a)&&(t[a]=!0)})}}),frappe.click_button=function(e,t){var r="";"string"==typeof t&&(r=t+" ",t=0);var a=$(r+'.btn:contains("'+e+'"):visible');if(!a.length)throw"did not find any button containing "+e;return a.get(t||0).click(),frappe.timeout(.5)},frappe.click_link=function(e,t){var r=$('a:contains("'+e+'"):visible');if(!r.length)throw"did not find any link containing "+e;return r.get(t||0).click(),frappe.timeout(.5)},frappe.click_element=function(e,t){var r=$(""+e);if(!r.length)throw"did not find any link containing "+e;return r.get(t||0).click(),frappe.timeout(.5)},frappe.set_control=function(e,t){var r=$('.form-control[data-fieldname="'+e+'"]:visible');if(!r.length)throw"did not find any control with fieldname "+e;return r.val(t).trigger("change"),frappe.timeout(.5)},frappe.click_check=function(e,t){var r=$('.checkbox:contains("'+e+'") input');if(!r.length)throw"did not find any checkbox with label "+e;return r.get(t||0).click(),frappe.timeout(.5)};var showdown=createCommonjsModule(function(e){(function(){function t(e){var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,description:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,description:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,description:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},completeHTMLDocument:{defaultValue:!1,description:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,description:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,description:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var r={};for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a].defaultValue);return r}var r={},a={},n={},i=t(!0),o="vanilla",s={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:t(!0),allOn:function(){var e=t(!0),r={};for(var a in e)e.hasOwnProperty(a)&&(r[a]=!0);return r}()};function l(e,t){var a=t?"Error in "+t+" extension->":"Error in unnamed extension",n={valid:!0,error:""};r.helper.isArray(e)||(e=[e]);for(var i=0;i<e.length;++i){var o=a+" sub-extension "+i+": ",s=e[i];if("object"!=typeof s)return n.valid=!1,n.error=o+"must be an object, but "+typeof s+" given",n;if(!r.helper.isString(s.type))return n.valid=!1,n.error=o+'property "type" must be a string, but '+typeof s.type+" given",n;var l=s.type=s.type.toLowerCase();if("language"===l&&(l=s.type="lang"),"html"===l&&(l=s.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return n.valid=!1,n.error=o+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',n;if("listener"===l){if(r.helper.isUndefined(s.listeners))return n.valid=!1,n.error=o+'. Extensions of type "listener" must have a property called "listeners"',n}else if(r.helper.isUndefined(s.filter)&&r.helper.isUndefined(s.regex))return n.valid=!1,n.error=o+l+' extensions must define either a "regex" property or a "filter" method',n;if(s.listeners){if("object"!=typeof s.listeners)return n.valid=!1,n.error=o+'"listeners" property must be an object but '+typeof s.listeners+" given",n;for(var p in s.listeners)if(s.listeners.hasOwnProperty(p)&&"function"!=typeof s.listeners[p])return n.valid=!1,n.error=o+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+p+" must be a function but "+typeof s.listeners[p]+" given",n}if(s.filter){if("function"!=typeof s.filter)return n.valid=!1,n.error=o+'"filter" must be a function, but '+typeof s.filter+" given",n}else if(s.regex){if(r.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!(s.regex instanceof RegExp))return n.valid=!1,n.error=o+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",n;if(r.helper.isUndefined(s.replace))return n.valid=!1,n.error=o+'"regex" extensions must implement a replace string or function',n}}return n}function p(e,t){return"¨E"+t.charCodeAt(0)+"E"}r.helper={},r.extensions={},r.setOption=function(e,t){return i[e]=t,this},r.getOption=function(e){return i[e]},r.getOptions=function(){return i},r.resetOptions=function(){i=t(!0)},r.setFlavor=function(e){if(!s.hasOwnProperty(e))throw Error(e+" flavor was not found");r.resetOptions();var t=s[e];for(var a in o=e,t)t.hasOwnProperty(a)&&(i[a]=t[a])},r.getFlavor=function(){return o},r.getFlavorOptions=function(e){if(s.hasOwnProperty(e))return s[e]},r.getDefaultOptions=function(e){return t(e)},r.subParser=function(e,t){if(r.helper.isString(e)){if(void 0===t){if(a.hasOwnProperty(e))return a[e];throw Error("SubParser named "+e+" not registered!")}a[e]=t}},r.extension=function(e,t){if(!r.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=r.helper.stdExtName(e),r.helper.isUndefined(t)){if(!n.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return n[e]}"function"==typeof t&&(t=t()),r.helper.isArray(t)||(t=[t]);var a=l(t,e);if(!a.valid)throw Error(a.error);n[e]=t},r.getAllExtensions=function(){return n},r.removeExtension=function(e){delete n[e]},r.resetExtensions=function(){n={}},r.validateExtension=function(e){var t=l(e,null);return!!t.valid||(console.warn(t.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(e){return"string"==typeof e||e instanceof String},r.helper.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},r.helper.isArray=function(e){return Array.isArray(e)},r.helper.isUndefined=function(e){return void 0===e},r.helper.forEach=function(e,t){if(r.helper.isUndefined(e))throw new Error("obj param is required");if(r.helper.isUndefined(t))throw new Error("callback param is required");if(!r.helper.isFunction(t))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(t);else if(r.helper.isArray(e))for(var a=0;a<e.length;a++)t(e[a],a,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)}},r.helper.stdExtName=function(e){return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},r.helper.escapeCharactersCallback=p,r.helper.escapeCharacters=function(e,t,r){var a="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";r&&(a="\\\\"+a);var n=new RegExp(a,"g");return e=e.replace(n,p)};var c=function(e,t,r,a){var n,i,o,s,l,p=a||"",c=p.indexOf("g")>-1,d=new RegExp(t+"|"+r,"g"+p.replace(/g/g,"")),u=new RegExp(t,p.replace(/g/g,"")),f=[];do{for(n=0;o=d.exec(e);)if(u.test(o[0]))n++||(s=(i=d.lastIndex)-o[0].length);else if(n&&!--n){l=o.index+o[0].length;var g={left:{start:s,end:i},match:{start:i,end:o.index},right:{start:o.index,end:l},wholeMatch:{start:s,end:l}};if(f.push(g),!c)return f}}while(n&&(d.lastIndex=i));return f};r.helper.matchRecursiveRegExp=function(e,t,r,a){for(var n=c(e,t,r,a),i=[],o=0;o<n.length;++o)i.push([e.slice(n[o].wholeMatch.start,n[o].wholeMatch.end),e.slice(n[o].match.start,n[o].match.end),e.slice(n[o].left.start,n[o].left.end),e.slice(n[o].right.start,n[o].right.end)]);return i},r.helper.replaceRecursiveRegExp=function(e,t,a,n,i){if(!r.helper.isFunction(t)){var o=t;t=function(){return o}}var s=c(e,a,n,i),l=e,p=s.length;if(p>0){var d=[];0!==s[0].wholeMatch.start&&d.push(e.slice(0,s[0].wholeMatch.start));for(var u=0;u<p;++u)d.push(t(e.slice(s[u].wholeMatch.start,s[u].wholeMatch.end),e.slice(s[u].match.start,s[u].match.end),e.slice(s[u].left.start,s[u].left.end),e.slice(s[u].right.start,s[u].right.end))),u<p-1&&d.push(e.slice(s[u].wholeMatch.end,s[u+1].wholeMatch.start));s[p-1].wholeMatch.end<e.length&&d.push(e.slice(s[p-1].wholeMatch.end)),l=d.join("")}return l},r.helper.regexIndexOf=function(e,t,a){if(!r.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(t instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var n=e.substring(a||0).search(t);return n>=0?n+(a||0):n},r.helper.splitAtIndex=function(e,t){if(!r.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,t),e.substring(t)]},r.helper.encodeEmailAddress=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var r=Math.random();e=r>.9?t[2](e):r>.45?t[1](e):t[0](e)}return e})},"undefined"==typeof console&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img width="20" height="20" align="absmiddle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAOwUlEQVR42uVbCVyO6RbPmn0sw9gZS0aZO4y5GTEUE2ObxjZjrbHEJVy3sWS5pkaWxjLEkCVDSbSgFLdESaWSLIVUSIi4kvb9f895vi/zbbR+yZ339/tbnu99n/ec/3Oe85xznufV0CjDBaAdwZqwnzCJ0FXjHV70/i8J5oQDhCFV8cJdq1atwqxZs+Ds7Iz4+HhqwgXCLELNKlK6G2Ej4e6lS5ewZcsWzJgxA+fOnWNZFqvzxT1v3boF/qcsBg0ahP3796OwsJAFWKYuIqjfPoS9cXFxWL58Obp06SInh5aWFr//jjoJWLlu3TolAorRuXNn7Ny5k4W4Spgj81xrgj5hLmED4RDhlNRygglBhADCSakpWxFMCHoETUJTwrYHDx7A1NT0je9nPHz4kN/fXl0EeI0aNeqtAjB69+4NPz8/FsSdlXvy5An8/f1hZ2cHCwsLGBsbY/To0cJy9PT0MGDAAAwePBhGRkbClNesWYODBw8iODgYOTk53M/d9evXo27duiW++8iRI3z/ZHURENOjR48ShSjGuHHjhHJ16tQp9TOKaNWqlZKpvw1MHluQOpSvk5eXh5YtW5ZbmarAvHnzmIBd6iCgXnZ2Npo1a1atCWAfwY5SHQTUKCoqQocOHao1AebmHBJgi7p8QBDP6epMwKFDvMDAWF0ELLS1ta3WBNy9e5cJMFIXAdvt7e2rNQHDhw9nAv5D+KKylV9y8+bNCi1pVYWZM2cyCfaVTcDdsqzH7xpBQRxcwqyylLdi5/K+KM/Q0dFhAqIri4Bn1T0AUgVpdmhYUeVHnD59+r1TnjF27Fgm4HhFCThoYmLyXhLQoEGD4mRKsyIE3OrZs+d7SQCDCyZcNSqv8k1evXoFTU3NUr+wzUcfYqRBf8yb/C2WzfoBFoTF08fBdMIITDD8CsP1+kL30x7Q6dYZH7drjfZ0f4fWLdG1Q1t81qMLBvTRwejB/TBl1BDMnzQGS2dMxKo5k7Fs9iSY/jAaBvR8Pc26pZaH02quLZSXgO6xsbGlelGnli1wZKcVMqN8gKcRwItrf+K/VB95doXaLwOJIVSzOU/+2Re5kV7IuuyJrIhTyLt6mmztLBBPNZLHoUAy9fE8UvJ8ikxfj8PwJPQErJeYlkquTZs2MQFLykuANgc/Jb2kn3Z3ZMaQUrmxwO1zyAo7gfRAJ6RfOIyMEFdkXj5F8BTK5lzxQv610yi8QcFatI8gQoCIK7x+hojwRnaE5H4JTiEj9Pjr/rJDqcZyn9b4ovu45LYbdWvXeqtsXMHiSlZ5CegRExPz1hd83PYj5POo0QinXyLFg48hnZTOiQ1Dzr1IZEaeQRoJn0HKZIR7lA2kfHrQUerXHTlx4ZL+rnjjFRGRGeYB5MUj2GnbW+XbuJFrp1heXgI6JCYmvvUFN1x3Aek3SWkapRAXMeJFGS8ge2Xfuog0toaykED3Mpk8+shOk+sv68Y50V9WuKewBKt5094o39atW/mRf5WXgIYZGRlo3Lixys4nj6A6Z1YMcqRCpwU4ouDlUyHk/QA/hNttR25Wlvh/ZthJUsil9ATQ/axkYbqEzDgfL0Ts/x35+aLyTES7IY36Q6w/+Q4/tP6wuUoZ9+7dy7ebVmQZjO/atavKzn32rAdeXkd6KCkXdAxZ13yFcLFnvPD73zrDVrsdTs6eggKSuSjjORHkUGoC0i86Iyc6QPQX7eqMnTodYNuzHU4vnosiaitMSUSavwMy6d3IvEUrzViVMrq5uXEX4ytCgL++vr5Sx7Vr1cIDX0dKkQJfj37Rs3jw1sBxkwlwGD4Ax3+ciN1faCHW76xQRFgAOcjSEMBkIe0x8nLzcez7kTg8Rh/uxuOxR/cTJISFSfq7eATpZCk8CAfXLVFJwIULXHnHoIoQYLtw4UKljps2aogXQcQuef/XAiMDKY+S4DhyEFwpDnCj9f+Afl8EbbWRTANaAdihlYoAMn8aZzyNuYODX/eD29TvRH/7v+qN8H27JdOAyWQfQQ74xPafVRLAPox9WUlK6hIGEgx4f00Kg2JcvHhRqeP6FIwknXemyen/2gLIIeC/CYk49M0AuE4xgtu0sThg8AUCN62TEuBdRgJo2Y+Kxh9D/k59SQiwH9QHobt3SAk4KSGA4oWjm1YqyVi8U6Soj4yOrHM/jTAyKVby/PnzIoNi8L+L4eXlpXoFcLcTgc1rAlISkJeXDxeK2A6P1hdTwI6mQPTJE+WbAlnJyE7PhNO3Q3BkrKGYWtxfHMkkmQLO0ilwA7+vXqAkn66urtBLUZ9iHfm30NBQaPAf165dA0d9vP2UlJSEp0+f4vHjx3j06JH4e+rUqUovcNmyGkiNEkLwklXsBG+ecMUOnfbYod1emG5uboFKJ8jPFVD0l0dBUHqoPDHpQeQEb0qc4FUHe3KAbYUT9JgzDbwOFL5MfN0fXkXhJ5PxSvLt2LFD1Ah5u4z1YJ14l4qnBe8v3rhxAzz4PAVG8nLHivIP0dHRiIiIQGRkpEgmrl69ClW1QBMjQ7LDW8hmU+RRI69ckJIkhL7jfRJBm62R+TJVYq6h0jhBRslsivqenT2MF/7OyI70VmkFhWnPJaS6OyPkt43IycqR9EfWlH7JDQUUTuNhCHR7Ke9YcRp/5coVoQPrcvnyZURFRYmBZlLS0kR8MVLD29sbnp6e8PHxQUBAgCgn8YO8E3z79m3BGKeVc+bMkXuBZt06SA12F/F5Go0gR4C8HBalPZMPXKL8lQKhPAqF+f97KXFyNx6HQsoPsshJ/kmAp2TKkJLISpXvjyxNhMYcDVLOEO+lPDi8B5mamipkZx1YF9YpJCRErAy+vr5CZ9ZdWABhDGEYYTBhAOFz3g4nfMJelNCbkNCpUye5F034mvxIPi1/FM+zQCw0k5B9O0iEr5kRXkqhMJOVf9NXIHjtT7hmaymSoBzKETimkAuFpaF1dkwI9RcmIYaXv3BJXoGCuyIgk5WpefPmKCgoYK46SmX/RKoL69Sfl0WuFEl1HlmWJXE5z6WmTZvKJxxmxkIQ3AuU5APk6NICj4hRT6eITTEEzqWk55HHPjz3cxJhNF5cxeNT9kj2cRDTQjEkzpDtjyyCic5l5fEA7uSHFEefR5pPsahrb2B9QkICFHeJ51HunkdLIg0VLY0BFKdLwllVHp4dHyvst3QuEiiju21vA/+VZkiluIKt4I3RIfWXQ4QgKUxkni47LJWUP3PmjHo2RxVI+CebmKJP6EiFDVurxUgmExe5PHlnPAkn8w4QqW62NCVmYopozid5H0CI9RKE21ggJeAYEeMnfitOnRn5XCfgeJ+VTosWQU8MOc6ZE0cqnUm4fv165SrPBVHCfMI4TowUfmOfsIcdJh92kBWmUcP6GDt8EDZbzIffH5tx3/ewSFjw5LKk0MEFEkZenDBjgew7Yiog5brkt+QrknvJmhIp4Apw/A1bVpjhG/0v5d7Vrl07bNu2TelUSqUoz8uI3Z49OEtBAy+TdP1CqKtwHzvQUxxgTJs2TeX5gdq1a0ObSmCjh+jB+NuvRamL1+3ls77HCip1rTSdJP5eNnMizKndjMLoH42G4bthX+FzHS3UVVEC69evH3799VeKMXJZrlWKclUGAZ5jxoxB02ZNsNlxH74aagBHZyex986HlVTczyGmI58h4CjL2toa48ePFxsUPEotWrQoc0GT0/C2bduiY8eO4ISMcxLeoOFYhS6qm2EpoZG65jmbv+dPSyRZlt5QfVjvtX19AOFNL+aDFNI4m0eFc9Ho5ORkaGtrl5kAVp6DMOk88efEjLe++ZhclZwHTJHEHbs4YOCmLj2645fdvwnTK42zoXtaEHwNDQ3LXdZm5yad3/2r+gQmDsRnIF5KAldX6zdsgG/GG8F44Vzcu3eP2y1K6GPr2rVrK1zbnz59Or/LoaoJCPZ4kCZsjw9GECL79OmDj9q2wb+320C3/5fgPQO6Vrzh+fpcDqxXr16lbHBwgkZXm6okYJr0ECMrX5vraiJ1lArEjrEnzWuOqemiYj9spGd2ee478XkiPsJakmJ83qA05/8qXNurJFLiunXrhpo1a6LxB02wyHIFZpovgOHwYfjZ0hK2lH5u2rwZ5suWYv5ycyUlmjRpgl69eimlrFy3kwuoyOvXr19frm3RokVMwPZ3TYC57E6xVq+e6KzVDSaL/oEp82Zh8IhhWLjGAp/p9oX5ujVKBNjY2MDV1VWuzd3dXaTesm2biUQuZ8u28elSPmKr8a4vdog8GnJpcT1N1KHUuBbt0jSgWuGbzJh3mVhh2TYHBwdxjFa2jVcZnvPVlQBOLXdZWlqW2ZFxNYYVlm07fPgwAgMD5dr4OD5HeHLFFxM+O42DGtXhIkFaMQlcUjIzM0P37t1Ro0YNpZPjPJcVK7SOjo5ybU5OTqIAo0gAh97VlgAZIj4l8Pn4WFaO64ocuXG6zJtDbMqySnC7IgF8uptLVrJtq1evFuWqak+A4j4i4TNpltiJ8LPiNFFFwNGjRyWFyfedAFUny/joekkEuLi4KK0CfykCeFnkiu1flgBeFtl3/D8SsMbKykpOifv37ysRcPz4cVHKUiSA8wwNdR9/VTMBSh9Y8S4Nf2qnSICiBbDzVCRg9uzZTMC+94kAv6FDh8opwRsVHPjItnl4eEDxHNLKlStFXV+2javQ/M1SpZe+1KA4L4G7WDG57fSm/OUbXiqG0ewAFYOeYcN4fwZhvLkp2y4tftrxcltdlf/w+fPn4qNGxTCYU2m6nrRu3VqunT/EoiuZvw6TTZHpyuNNmEaNGsndP3fu3OJAq1N1JOAHDmyKheVtNP4OkE2crULRAW7fvl20EyyLy24a8p+/7WISFixYIMLt4t82bNhQYjXqXREgPq3j74mlX3AmSL8E1eOPIBXnuVT5OsVZpuLnOMeOHeN7vifwiYhYzhC5IpwlOXj1QXWdBmy/XWU/X+UqMZfKBw4cKAobHPlJlZe9h6tOu+7cuSN2dg0MDMSSyZUpmXvaSD+crq/xvl0k9BTCRa7qEPq+5T4t6ffF52WVV+f1P6zyLG30bsU4AAAAAElFTkSuQmCC">',showdown:'<img width="20" height="20" align="absmiddle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAECtaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzA2NyA3OS4xNTc3NDcsIDIwMTUvMDMvMzAtMjM6NDA6NDIgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIgogICAgICAgICAgICB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cyk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTUtMDEtMTVUMjE6MDE6MTlaPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNy0xMC0yNFQxMzozMTozMCswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTctMTAtMjRUMTM6MzE6MzArMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8cGhvdG9zaG9wOklDQ1Byb2ZpbGU+c1JHQiBJRUM2MTk2Ni0yLjE8L3Bob3Rvc2hvcDpJQ0NQcm9maWxlPgogICAgICAgICA8cGhvdG9zaG9wOlRleHRMYXllcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHBob3Rvc2hvcDpMYXllck5hbWU+UyAtPC9waG90b3Nob3A6TGF5ZXJOYW1lPgogICAgICAgICAgICAgICAgICA8cGhvdG9zaG9wOkxheWVyVGV4dD5TIC08L3Bob3Rvc2hvcDpMYXllclRleHQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpCYWc+CiAgICAgICAgIDwvcGhvdG9zaG9wOlRleHRMYXllcnM+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6N2NkMzQxNzctOWYyZi0yNDRiLWEyYjQtMzU1MzJkY2Y1MWJiPC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD5hZG9iZTpkb2NpZDpwaG90b3Nob3A6M2E1YzgxYmYtYjhiNy0xMWU3LTk0NDktYTQ2MzdlZjJkNjMzPC94bXBNTTpEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06T3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6NjBDNUFFNjVGNjlDRTQxMTk0NUE4NTVFM0JDQTdFRUI8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NjBDNUFFNjVGNjlDRTQxMTk0NUE4NTVFM0JDQTdFRUI8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTUtMDEtMTVUMjE6MDE6MTlaPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6ODZjNjBkMGQtOGY0Yy01ZTRlLWEwMjQtODI4ZWQyNTIwZDc3PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE3LTEwLTI0VDEzOjMxOjMwKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjdjZDM0MTc3LTlmMmYtMjQ0Yi1hMmI0LTM1NTMyZGNmNTFiYjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0xMC0yNFQxMzozMTozMCswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXBNTTpEZXJpdmVkRnJvbSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgIDxzdFJlZjppbnN0YW5jZUlEPnhtcC5paWQ6ODZjNjBkMGQtOGY0Yy01ZTRlLWEwMjQtODI4ZWQyNTIwZDc3PC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjYwQzVBRTY1RjY5Q0U0MTE5NDVBODU1RTNCQ0E3RUVCPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6NjBDNUFFNjVGNjlDRTQxMTk0NUE4NTVFM0JDQTdFRUI8L3N0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6WFJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOlhSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpZUmVzb2x1dGlvbj43MjAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+MTwvZXhpZjpDb2xvclNwYWNlPgogICAgICAgICA8ZXhpZjpQaXhlbFhEaW1lbnNpb24+NjQ8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NjQ8L2V4aWY6UGl4ZWxZRGltZW5zaW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pse7bzcAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA1JJREFUeNrsm1+OmlAUhz+aeS9dwZggJn1AnRUMO6jpBgZXULuC2hWUWUGZBTSxKyiuoA4mfUBMnB04K5g+9DihRBHlyh/lJLwIXLgf99xzzu9etZeXFy7Z3nDh1gBoAFy4XeVtQNO0zNcapmUDfUBPnFoBfhQGq6IBaHmjwD4Ahmk5wAD4kKG5J8CNwsAFaHe6DvA9cc0wCgOv8gDka3vA9RHNPgo0D7hNnJtGYWBXxgV2dH4MfMnRRA+Y1WIO2NJ5F/ikoKm3tYsChmkNFHW+fmHQMC1dfHaXPQP3wM1yMdc2B/AOGALTWobBmI1Shu0UGCwX83XyRBQGawHntTtdG5gUNfxVu4CTNqNv6/wWGL7kCc+1AmCYVisl3I2ydD4GYZUCs7IjoLXrxHIx9w9tLAqDCfBwDrXAY457x+cAoCfuwRGjYFUnAGk+PsjR7s8Dn1VeLWCYVlpDw+VivjVHSHt+u9PVJbzGzZXQWTkAkz0V31fATUaEsjVJlQBs4FeGcteLgzgbAALBA+4y3voAeJL8nA0AHfClnM1qm1HhnYUidCSE+KzvSSJUTwAxCOMcpfETMFYpfRUKIAbCFhC3OTJJJwqDWS0BxED0JZ4Pjix1P2+E0loCSMBwyK4S/xc1ojBwag8gMU84cvTKGgmlAYhngu1O9xAXuVE5J1QCQCz3bwHuHvdQui5QKQAxEO6eEKpsFCgTRSXkvdoxSlBMCxhJJbgrrbZRtHCiShN0pRB6PeQ3ckBw2K0oKXMBVYJIP+Nvh9qulFivGoBt1lLQxowT2ykBXCfnhZIglgYACWmqXQv+baioBYCeiCQHm+QEg1O7RhF7hO4OhSAhcJKSFU7qBGADwZeqMMuXn6TUBw8qlaMrirNb4LdhWlP+SWD+cjFfxTpuS2GUpik+o3jFSEkqbJiWn0P0OMSGqlWiOu0TvD+FRHZKAE+oW+cfRmEwqlsesJJEJs8y91QqP+9UL6lqEtz2gpuNEY5sm9sIHln2DRa2aFKGJtiXkZEMiWtgVvRKUSUFkSKt2S7fAGgAXLYpmQQXf36MUChTZdUa2u8/rkvPA6Tz30r4eH3ybcBS5gJ6SaNXb+aABkA1AMxKenclBZLW/He4cYEGwEXb3wEASelexk6LIIIAAAAASUVORK5CYII=">'},r.Converter=function(e){var t={},a=[],p=[],c={},d=o,u={parsed:{},raw:"",format:""};function f(e,t){if(t=t||null,r.helper.isString(e)){if(t=e=r.helper.stdExtName(e),r.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new r.Converter));r.helper.isArray(e)||(e=[e]);var n=l(e,t);if(!n.valid)throw Error(n.error);for(var i=0;i<e.length;++i)switch(e[i].type){case"lang":a.push(e[i]);break;case"output":p.push(e[i]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(r.extensions[e],e);if(r.helper.isUndefined(n[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=n[e]}"function"==typeof e&&(e=e()),r.helper.isArray(e)||(e=[e]);var i=l(e,t);if(!i.valid)throw Error(i.error);for(var o=0;o<e.length;++o){switch(e[o].type){case"lang":a.push(e[o]);break;case"output":p.push(e[o])}if(e[o].hasOwnProperty("listeners"))for(var s in e[o].listeners)e[o].listeners.hasOwnProperty(s)&&g(s,e[o].listeners[s])}}function g(e,t){if(!r.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");c.hasOwnProperty(e)||(c[e]=[]),c[e].push(t)}!function(){for(var a in e=e||{},i)i.hasOwnProperty(a)&&(t[a]=i[a]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.extensions&&r.helper.forEach(t.extensions,f)}(),this._dispatch=function(e,t,r,a){if(c.hasOwnProperty(e))for(var n=0;n<c[e].length;++n){var i=c[e][n](e,t,this,r,a);i&&void 0!==i&&(t=i)}return t},this.listen=function(e,t){return g(e,t),this},this.makeHtml=function(e){if(!e)return e;var n={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:a,outputModifiers:p,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g," "),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,r=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(r,"")}(e)),e="\n\n"+e+"\n\n",e=(e=r.subParser("detab")(e,t,n)).replace(/^[ \t]+$/gm,""),r.helper.forEach(a,function(a){e=r.subParser("runExtension")(a,e,t,n)}),e=r.subParser("metadata")(e,t,n),e=r.subParser("hashPreCodeTags")(e,t,n),e=r.subParser("githubCodeBlocks")(e,t,n),e=r.subParser("hashHTMLBlocks")(e,t,n),e=r.subParser("hashCodeTags")(e,t,n),e=r.subParser("stripLinkDefinitions")(e,t,n),e=r.subParser("blockGamut")(e,t,n),e=r.subParser("unhashHTMLSpans")(e,t,n),e=(e=(e=r.subParser("unescapeSpecialChars")(e,t,n)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),e=r.subParser("completeHTMLDocument")(e,t,n),r.helper.forEach(p,function(a){e=r.subParser("runExtension")(a,e,t,n)}),u=n.metadata,e},this.setOption=function(e,r){t[e]=r},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){f(e,t=t||null)},this.useExtension=function(e){f(e)},this.setFlavor=function(e){if(!s.hasOwnProperty(e))throw Error(e+" flavor was not found");var r=s[e];for(var a in d=e,r)r.hasOwnProperty(a)&&(t[a]=r[a])},this.getFlavor=function(){return d},this.removeExtension=function(e){r.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var n=e[t],i=0;i<a.length;++i)a[i]===n&&a[i].splice(i,1);for(;0<p.length;++i)p[0]===n&&p[0].splice(i,1)}},this.getAllExtensions=function(){return{language:a,output:p}},this.getMetadata=function(e){return e?u.raw:u.parsed},this.getMetadataFormat=function(){return u.format},this._setMetadataPair=function(e,t){u.parsed[e]=t},this._setMetadataFormat=function(e){u.format=e},this._setMetadataRaw=function(e){u.raw=e}},r.subParser("anchors",function(e,t,a){var n=function(e,n,i,o,s,l,p){if(r.helper.isUndefined(p)&&(p=""),i=i.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(!o){if(i||(i=n.toLowerCase().replace(/ ?\n/g," ")),o="#"+i,r.helper.isUndefined(a.gUrls[i]))return e;o=a.gUrls[i],r.helper.isUndefined(a.gTitles[i])||(p=a.gTitles[i])}var c='<a href="'+(o=o.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"';return""!==p&&null!==p&&(c+=' title="'+(p=(p=p.replace(/"/g,"&quot;")).replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"'),t.openLinksInNewWindow&&!/^#/.test(o)&&(c+=' target="¨E95Eblank"'),c+=">"+n+"</a>"};return e=(e=(e=(e=(e=a.converter._dispatch("anchors.before",e,t,a)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[([^\[\]]+)]()()()()()/g,n),t.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d\-]+))(?=[.!?;,[\]()]|\s|$)/gim,function(e,a,n,i,o){if("\\"===n)return a+i;if(!r.helper.isString(t.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var s=t.ghMentionsLink.replace(/\{u}/g,o),l="";return t.openLinksInNewWindow&&(l=' target="¨E95Eblank"'),a+'<a href="'+s+'"'+l+">"+i+"</a>"})),e=a.converter._dispatch("anchors.after",e,t,a)});var d=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,u=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,f=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,_=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,h=function(e){return function(t,a,n,i,o,s,l){var p=n=n.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),c="",d="",u=a||"",f=l||"";return/^www\./i.test(n)&&(n=n.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&s&&(c=s),e.openLinksInNewWindow&&(d=' target="¨E95Eblank"'),u+'<a href="'+n+'"'+d+">"+p+"</a>"+c+f}},m=function(e,t){return function(a,n,i){var o="mailto:";return n=n||"",i=r.subParser("unescapeSpecialChars")(i,e,t),e.encodeEmails?(o=r.helper.encodeEmailAddress(o+i),i=r.helper.encodeEmailAddress(i)):o+=i,n+'<a href="'+o+'">'+i+"</a>"}};r.subParser("autoLinks",function(e,t,r){return e=(e=(e=r.converter._dispatch("autoLinks.before",e,t,r)).replace(f,h(t))).replace(_,m(t,r)),e=r.converter._dispatch("autoLinks.after",e,t,r)}),r.subParser("simplifiedAutoLinks",function(e,t,r){return t.simplifiedAutoLink?(e=r.converter._dispatch("simplifiedAutoLinks.before",e,t,r),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(u,h(t)):e.replace(d,h(t))).replace(g,m(t,r)),e=r.converter._dispatch("simplifiedAutoLinks.after",e,t,r)):e}),r.subParser("blockGamut",function(e,t,a){return e=a.converter._dispatch("blockGamut.before",e,t,a),e=r.subParser("blockQuotes")(e,t,a),e=r.subParser("headers")(e,t,a),e=r.subParser("horizontalRule")(e,t,a),e=r.subParser("lists")(e,t,a),e=r.subParser("codeBlocks")(e,t,a),e=r.subParser("tables")(e,t,a),e=r.subParser("hashHTMLBlocks")(e,t,a),e=r.subParser("paragraphs")(e,t,a),e=a.converter._dispatch("blockGamut.after",e,t,a)}),r.subParser("blockQuotes",function(e,t,a){e=a.converter._dispatch("blockQuotes.before",e,t,a),e+="\n\n";var n=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return t.splitAdjacentBlockquotes&&(n=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(n,function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),e=r.subParser("githubCodeBlocks")(e,t,a),e=(e=(e=r.subParser("blockGamut")(e,t,a)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var r=t;return r=(r=r.replace(/^  /gm,"¨0")).replace(/¨0/g,"")}),r.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",t,a)}),e=a.converter._dispatch("blockQuotes.after",e,t,a)}),r.subParser("codeBlocks",function(e,t,a){e=a.converter._dispatch("codeBlocks.before",e,t,a);return e=(e=(e+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,function(e,n,i){var o=n,s=i,l="\n";return o=r.subParser("outdent")(o,t,a),o=r.subParser("encodeCode")(o,t,a),o=(o=(o=r.subParser("detab")(o,t,a)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(l=""),o="<pre><code>"+o+l+"</code></pre>",r.subParser("hashBlock")(o,t,a)+s})).replace(/¨0/,""),e=a.converter._dispatch("codeBlocks.after",e,t,a)}),r.subParser("codeSpans",function(e,t,a){return void 0===(e=a.converter._dispatch("codeSpans.before",e,t,a))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,n,i,o){var s=o;return s=(s=s.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),s=n+"<code>"+(s=r.subParser("encodeCode")(s,t,a))+"</code>",s=r.subParser("hashHTMLSpans")(s,t,a)}),e=a.converter._dispatch("codeSpans.after",e,t,a)}),r.subParser("completeHTMLDocument",function(e,t,r){if(!t.completeHTMLDocument)return e;e=r.converter._dispatch("completeHTMLDocument.before",e,t,r);var a="html",n="<!DOCTYPE HTML>\n",i="",o='<meta charset="utf-8">\n',s="",l="";for(var p in void 0!==r.metadata.parsed.doctype&&(n="<!DOCTYPE "+r.metadata.parsed.doctype+">\n","html"!==(a=r.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==a||(o='<meta charset="utf-8">')),r.metadata.parsed)if(r.metadata.parsed.hasOwnProperty(p))switch(p.toLowerCase()){case"doctype":break;case"title":i="<title>"+r.metadata.parsed.title+"</title>\n";break;case"charset":o="html"===a||"html5"===a?'<meta charset="'+r.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+r.metadata.parsed.charset+'">\n';break;case"language":case"lang":s=' lang="'+r.metadata.parsed[p]+'"',l+='<meta name="'+p+'" content="'+r.metadata.parsed[p]+'">\n';break;default:l+='<meta name="'+p+'" content="'+r.metadata.parsed[p]+'">\n'}return e=n+"<html"+s+">\n<head>\n"+i+o+l+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",e=r.converter._dispatch("completeHTMLDocument.after",e,t,r)}),r.subParser("detab",function(e,t,r){return e=(e=(e=(e=(e=(e=r.converter._dispatch("detab.before",e,t,r)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,function(e,t){for(var r=t,a=4-r.length%4,n=0;n<a;n++)r+=" ";return r})).replace(/¨A/g,"    ")).replace(/¨B/g,""),e=r.converter._dispatch("detab.after",e,t,r)}),r.subParser("ellipsis",function(e,t,r){return e=(e=r.converter._dispatch("ellipsis.before",e,t,r)).replace(/\.\.\./g,"…"),e=r.converter._dispatch("ellipsis.after",e,t,r)}),r.subParser("emoji",function(e,t,a){if(!t.emoji)return e;return e=(e=a.converter._dispatch("emoji.before",e,t,a)).replace(/:([\S]+?):/g,function(e,t){return r.helper.emojis.hasOwnProperty(t)?r.helper.emojis[t]:e}),e=a.converter._dispatch("emoji.after",e,t,a)}),r.subParser("encodeAmpsAndAngles",function(e,t,r){return e=(e=(e=(e=(e=r.converter._dispatch("encodeAmpsAndAngles.before",e,t,r)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),e=r.converter._dispatch("encodeAmpsAndAngles.after",e,t,r)}),r.subParser("encodeBackslashEscapes",function(e,t,a){return e=(e=(e=a.converter._dispatch("encodeBackslashEscapes.before",e,t,a)).replace(/\\(\\)/g,r.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,r.helper.escapeCharactersCallback),e=a.converter._dispatch("encodeBackslashEscapes.after",e,t,a)}),r.subParser("encodeCode",function(e,t,a){return e=(e=a.converter._dispatch("encodeCode.before",e,t,a)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),e=a.converter._dispatch("encodeCode.after",e,t,a)}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(e,t,a){return e=(e=(e=a.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,t,a)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)})).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,function(e){return e.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),e=a.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,t,a)}),r.subParser("githubCodeBlocks",function(e,t,a){return t.ghCodeBlocks?(e=a.converter._dispatch("githubCodeBlocks.before",e,t,a),e=(e=(e+="¨0").replace(/(?:^|\n)(```+|~~~+)([^\s`~]*)\n([\s\S]*?)\n\1/g,function(e,n,i,o){var s=t.omitExtraWLInCodeBlocks?"":"\n";return o=r.subParser("encodeCode")(o,t,a),o="<pre><code"+(i?' class="'+i+" language-"+i+'"':"")+">"+(o=(o=(o=r.subParser("detab")(o,t,a)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+s+"</code></pre>",o=r.subParser("hashBlock")(o,t,a),"\n\n¨G"+(a.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"})).replace(/¨0/,""),a.converter._dispatch("githubCodeBlocks.after",e,t,a)):e}),r.subParser("hashBlock",function(e,t,r){return e=(e=r.converter._dispatch("hashBlock.before",e,t,r)).replace(/(^\n+|\n+$)/g,""),e="\n\n¨K"+(r.gHtmlBlocks.push(e)-1)+"K\n\n",e=r.converter._dispatch("hashBlock.after",e,t,r)}),r.subParser("hashCodeTags",function(e,t,a){e=a.converter._dispatch("hashCodeTags.before",e,t,a);return e=r.helper.replaceRecursiveRegExp(e,function(e,n,i,o){var s=i+r.subParser("encodeCode")(n,t,a)+o;return"¨C"+(a.gHtmlSpans.push(s)-1)+"C"},"<code\\b[^>]*>","</code>","gim"),e=a.converter._dispatch("hashCodeTags.after",e,t,a)}),r.subParser("hashElement",function(e,t,r){return function(e,t){var a=t;return a=(a=(a=a.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),a="\n\n¨K"+(r.gHtmlBlocks.push(a)-1)+"K\n\n"}}),r.subParser("hashHTMLBlocks",function(e,t,a){e=a.converter._dispatch("hashHTMLBlocks.before",e,t,a);var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],i=function(e,t,r,n){var i=e;return-1!==r.search(/\bmarkdown\b/)&&(i=r+a.converter.makeHtml(t)+n),"\n\n¨K"+(a.gHtmlBlocks.push(i)-1)+"K\n\n"};t.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,function(e,t){return"&lt;"+t+"&gt;"}));for(var o=0;o<n.length;++o)for(var s,l=new RegExp("^ {0,3}(<"+n[o]+"\\b[^>]*>)","im"),p="<"+n[o]+"\\b[^>]*>",c="</"+n[o]+">";-1!==(s=r.helper.regexIndexOf(e,l));){var d=r.helper.splitAtIndex(e,s),u=r.helper.replaceRecursiveRegExp(d[1],i,p,c,"im");if(u===d[1])break;e=d[0].concat(u)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(e,t,a)),e=(e=r.helper.replaceRecursiveRegExp(e,function(e){return"\n\n¨K"+(a.gHtmlBlocks.push(e)-1)+"K\n\n"},"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(e,t,a)),e=a.converter._dispatch("hashHTMLBlocks.after",e,t,a)}),r.subParser("hashHTMLSpans",function(e,t,r){function a(e){return"¨C"+(r.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=r.converter._dispatch("hashHTMLSpans.before",e,t,r)).replace(/<[^>]+?\/>/gi,function(e){return a(e)})).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(e){return a(e)})).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(e){return a(e)})).replace(/<[^>]+?>/gi,function(e){return a(e)}),e=r.converter._dispatch("hashHTMLSpans.after",e,t,r)}),r.subParser("unhashHTMLSpans",function(e,t,r){e=r.converter._dispatch("unhashHTMLSpans.before",e,t,r);for(var a=0;a<r.gHtmlSpans.length;++a){for(var n=r.gHtmlSpans[a],i=0;/¨C(\d+)C/.test(n);){var o=RegExp.$1;if(n=n.replace("¨C"+o+"C",r.gHtmlSpans[o]),10===i){console.error("maximum nesting of 10 spans reached!!!");break}++i}e=e.replace("¨C"+a+"C",n)}return e=r.converter._dispatch("unhashHTMLSpans.after",e,t,r)}),r.subParser("hashPreCodeTags",function(e,t,a){e=a.converter._dispatch("hashPreCodeTags.before",e,t,a);return e=r.helper.replaceRecursiveRegExp(e,function(e,n,i,o){var s=i+r.subParser("encodeCode")(n,t,a)+o;return"\n\n¨G"+(a.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"},"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=a.converter._dispatch("hashPreCodeTags.after",e,t,a)}),r.subParser("headers",function(e,t,a){e=a.converter._dispatch("headers.before",e,t,a);var n=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),i=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,o=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(i,function(e,i){var o=r.subParser("spanGamut")(i,t,a),s=t.noHeaderId?"":' id="'+l(i)+'"',p="<h"+n+s+">"+o+"</h"+n+">";return r.subParser("hashBlock")(p,t,a)})).replace(o,function(e,i){var o=r.subParser("spanGamut")(i,t,a),s=t.noHeaderId?"":' id="'+l(i)+'"',p=n+1,c="<h"+p+s+">"+o+"</h"+p+">";return r.subParser("hashBlock")(c,t,a)});var s=t.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(e){var n,i;if(t.customizedHeaderId){var o=e.match(/\{([^{]+?)}\s*$/);o&&o[1]&&(e=o[1])}return n=e,i=r.helper.isString(t.prefixHeaderId)?t.prefixHeaderId:!0===t.prefixHeaderId?"section-":"",t.rawPrefixHeaderId||(n=i+n),n=t.ghCompatibleHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.rawHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():n.replace(/[^\w]/g,"").toLowerCase(),t.rawPrefixHeaderId&&(n=i+n),a.hashLinkCounts[n]?n=n+"-"+a.hashLinkCounts[n]++:a.hashLinkCounts[n]=1,n}return e=e.replace(s,function(e,i,o){var s=o;t.customizedHeaderId&&(s=o.replace(/\s?\{([^{]+?)}\s*$/,""));var p=r.subParser("spanGamut")(s,t,a),c=t.noHeaderId?"":' id="'+l(o)+'"',d=n-1+i.length,u="<h"+d+c+">"+p+"</h"+d+">";return r.subParser("hashBlock")(u,t,a)}),e=a.converter._dispatch("headers.after",e,t,a)}),r.subParser("horizontalRule",function(e,t,a){e=a.converter._dispatch("horizontalRule.before",e,t,a);var n=r.subParser("hashBlock")("<hr />",t,a);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),e=a.converter._dispatch("horizontalRule.after",e,t,a)}),r.subParser("images",function(e,t,a){function n(e,t,n,i,o,s,l,p){var c=a.gUrls,d=a.gTitles,u=a.gDimensions;if(n=n.toLowerCase(),p||(p=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)i="";else if(""===i||null===i){if(""!==n&&null!==n||(n=t.toLowerCase().replace(/ ?\n/g," ")),i="#"+n,r.helper.isUndefined(c[n]))return e;i=c[n],r.helper.isUndefined(d[n])||(p=d[n]),r.helper.isUndefined(u[n])||(o=u[n].width,s=u[n].height)}t=t.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var f='<img src="'+(i=i.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'" alt="'+t+'"';return p&&(f+=' title="'+(p=p.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"'),o&&s&&(f+=' width="'+(o="*"===o?"auto":o)+'"',f+=' height="'+(s="*"===s?"auto":s)+'"'),f+=" />"}return e=(e=(e=(e=(e=(e=a.converter._dispatch("images.before",e,t,a)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,function(e,t,r,a,i,o,s,l){return n(e,t,r,a=a.replace(/\s/g,""),i,o,0,l)})).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,n)).replace(/!\[([^\[\]]+)]()()()()()/g,n),e=a.converter._dispatch("images.after",e,t,a)}),r.subParser("italicsAndBold",function(e,t,r){function a(e,t,r){return t+e+r}return e=r.converter._dispatch("italicsAndBold.before",e,t,r),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*)___\b/g,function(e,t){return a(t,"<strong><em>","</em></strong>")})).replace(/\b__(\S[\s\S]*)__\b/g,function(e,t){return a(t,"<strong>","</strong>")})).replace(/\b_(\S[\s\S]*?)_\b/g,function(e,t){return a(t,"<em>","</em>")}):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,function(e,t){return/\S$/.test(t)?a(t,"<strong><em>","</em></strong>"):e})).replace(/__(\S[\s\S]*?)__/g,function(e,t){return/\S$/.test(t)?a(t,"<strong>","</strong>"):e})).replace(/_([^\s_][\s\S]*?)_/g,function(e,t){return/\S$/.test(t)?a(t,"<em>","</em>"):e}),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]+?)\*\*\*\B(?!\*)/g,function(e,t,r){return a(r,t+"<strong><em>","</em></strong>")})).replace(/([^*]|^)\B\*\*(\S[\s\S]+?)\*\*\B(?!\*)/g,function(e,t,r){return a(r,t+"<strong>","</strong>")})).replace(/([^*]|^)\B\*(\S[\s\S]+?)\*\B(?!\*)/g,function(e,t,r){return a(r,t+"<em>","</em>")}):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(e,t){return/\S$/.test(t)?a(t,"<strong><em>","</em></strong>"):e})).replace(/\*\*(\S[\s\S]*?)\*\*/g,function(e,t){return/\S$/.test(t)?a(t,"<strong>","</strong>"):e})).replace(/\*([^\s*][\s\S]*?)\*/g,function(e,t){return/\S$/.test(t)?a(t,"<em>","</em>"):e}),e=r.converter._dispatch("italicsAndBold.after",e,t,r)}),r.subParser("lists",function(e,t,a){function n(e,n){a.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!¨0)/.test(e+="¨0");return t.disableForced4SpacesIndentedSublists&&(i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(i,function(e,n,i,s,l,p,c){c=c&&""!==c.trim();var d=r.subParser("outdent")(l,t,a),u="";return p&&t.tasklists&&(u=' class="task-list-item" style="list-style-type: none;"',d=d.replace(/^[ \t]*\[(x|X| )?]/m,function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return c&&(e+=" checked"),e+=">"})),d=d.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(e){return"¨A"+e}),n||d.search(/\n{2,}/)>-1?(d=r.subParser("githubCodeBlocks")(d,t,a),d=r.subParser("blockGamut")(d,t,a)):(d=(d=r.subParser("lists")(d,t,a)).replace(/\n$/,""),d=(d=r.subParser("hashHTMLBlocks")(d,t,a)).replace(/\n\n+/g,"\n\n"),d=o?r.subParser("paragraphs")(d,t,a):r.subParser("spanGamut")(d,t,a)),d="<li"+u+">"+(d=d.replace("¨A",""))+"</li>\n"})).replace(/¨0/g,""),a.gListLevel--,n&&(e=e.replace(/\s+$/,"")),e}function i(e,t){if("ol"===t){var r=e.match(/^ *(\d+)\./);if(r&&"1"!==r[1])return' start="'+r[1]+'"'}return""}function o(e,r,a){var o=t.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,s=t.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===r?o:s,p="";if(-1!==e.search(l))!function t(c){var d=c.search(l),u=i(e,r);-1!==d?(p+="\n\n<"+r+u+">\n"+n(c.slice(0,d),!!a)+"</"+r+">\n",l="ul"===(r="ul"===r?"ol":"ul")?o:s,t(c.slice(d))):p+="\n\n<"+r+u+">\n"+n(c,!!a)+"</"+r+">\n"}(e);else{var c=i(e,r);p="\n\n<"+r+c+">\n"+n(e,!!a)+"</"+r+">\n"}return p}return e=a.converter._dispatch("lists.before",e,t,a),e+="¨0",e=(e=a.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(e,t,r){return o(t,r.search(/[*+-]/g)>-1?"ul":"ol",!0)}):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(e,t,r,a){return o(r,a.search(/[*+-]/g)>-1?"ul":"ol",!1)})).replace(/¨0/,""),e=a.converter._dispatch("lists.after",e,t,a)}),r.subParser("metadata",function(e,t,r){if(!t.metadata)return e;function a(e){r.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,function(e,t,a){return r.metadata.parsed[t]=a,""})}return e=(e=(e=(e=r.converter._dispatch("metadata.before",e,t,r)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(e,t,r){return a(r),"¨M"})).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(e,t,n){return t&&(r.metadata.format=t),a(n),"¨M"})).replace(/¨M/g,""),e=r.converter._dispatch("metadata.after",e,t,r)}),r.subParser("outdent",function(e,t,r){return e=(e=(e=r.converter._dispatch("outdent.before",e,t,r)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),e=r.converter._dispatch("outdent.after",e,t,r)}),r.subParser("paragraphs",function(e,t,a){for(var n=(e=(e=(e=a.converter._dispatch("paragraphs.before",e,t,a)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),i=[],o=n.length,s=0;s<o;s++){var l=n[s];l.search(/¨(K|G)(\d+)\1/g)>=0?i.push(l):l.search(/\S/)>=0&&(l=(l=r.subParser("spanGamut")(l,t,a)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",i.push(l))}for(o=i.length,s=0;s<o;s++){for(var p="",c=i[s],d=!1;/¨(K|G)(\d+)\1/.test(c);){var u=RegExp.$1,f=RegExp.$2;p=(p="K"===u?a.gHtmlBlocks[f]:d?r.subParser("encodeCode")(a.ghCodeBlocks[f].text,t,a):a.ghCodeBlocks[f].codeblock).replace(/\$/g,"$$$$"),c=c.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,p),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(c)&&(d=!0)}i[s]=c}return e=(e=(e=i.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),a.converter._dispatch("paragraphs.after",e,t,a)}),r.subParser("runExtension",function(e,t,r,a){if(e.filter)t=e.filter(t,a.converter,r);else if(e.regex){var n=e.regex;n instanceof RegExp||(n=new RegExp(n,"g")),t=t.replace(n,e.replace)}return t}),r.subParser("spanGamut",function(e,t,a){return e=a.converter._dispatch("spanGamut.before",e,t,a),e=r.subParser("codeSpans")(e,t,a),e=r.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,a),e=r.subParser("encodeBackslashEscapes")(e,t,a),e=r.subParser("images")(e,t,a),e=r.subParser("anchors")(e,t,a),e=r.subParser("autoLinks")(e,t,a),e=r.subParser("simplifiedAutoLinks")(e,t,a),e=r.subParser("emoji")(e,t,a),e=r.subParser("underline")(e,t,a),e=r.subParser("italicsAndBold")(e,t,a),e=r.subParser("strikethrough")(e,t,a),e=r.subParser("ellipsis")(e,t,a),e=r.subParser("hashHTMLSpans")(e,t,a),e=r.subParser("encodeAmpsAndAngles")(e,t,a),t.simpleLineBreaks?/\n\n¨K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=a.converter._dispatch("spanGamut.after",e,t,a)}),r.subParser("strikethrough",function(e,t,a){return t.strikethrough&&(e=(e=a.converter._dispatch("strikethrough.before",e,t,a)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(e,n){return function(e){return t.simplifiedAutoLink&&(e=r.subParser("simplifiedAutoLinks")(e,t,a)),"<del>"+e+"</del>"}(n)}),e=a.converter._dispatch("strikethrough.after",e,t,a)),e}),r.subParser("stripLinkDefinitions",function(e,t,a){var n=function(e,n,i,o,s,l,p){return n=n.toLowerCase(),i.match(/^data:.+?\/.+?;base64,/)?a.gUrls[n]=i.replace(/\s/g,""):a.gUrls[n]=r.subParser("encodeAmpsAndAngles")(i,t,a),l?l+p:(p&&(a.gTitles[n]=p.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&o&&s&&(a.gDimensions[n]={width:o,height:s}),"")};return e=(e=(e=(e+="¨0").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,n)).replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,n)).replace(/¨0/,"")}),r.subParser("tables",function(e,t,a){if(!t.tables)return e;function n(e,n){return"<td"+n+">"+r.subParser("spanGamut")(e,t,a)+"</td>\n"}function i(e){var i,o=e.split("\n");for(i=0;i<o.length;++i)/^ {0,3}\|/.test(o[i])&&(o[i]=o[i].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(o[i])&&(o[i]=o[i].replace(/\|[ \t]*$/,"")),o[i]=r.subParser("codeSpans")(o[i],t,a);var s,l,p,c,d=o[0].split("|").map(function(e){return e.trim()}),u=o[1].split("|").map(function(e){return e.trim()}),f=[],g=[],_=[],h=[];for(o.shift(),o.shift(),i=0;i<o.length;++i)""!==o[i].trim()&&f.push(o[i].split("|").map(function(e){return e.trim()}));if(d.length<u.length)return e;for(i=0;i<u.length;++i)_.push((s=u[i],/^:[ \t]*--*$/.test(s)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(s)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(s)?' style="text-align:center;"':""));for(i=0;i<d.length;++i)r.helper.isUndefined(_[i])&&(_[i]=""),g.push((l=d[i],p=_[i],c=void 0,c="",l=l.trim(),(t.tablesHeaderId||t.tableHeaderId)&&(c=' id="'+l.replace(/ /g,"_").toLowerCase()+'"'),"<th"+c+p+">"+(l=r.subParser("spanGamut")(l,t,a))+"</th>\n"));for(i=0;i<f.length;++i){for(var m=[],C=0;C<g.length;++C)r.helper.isUndefined(f[i][C]),m.push(n(f[i][C],_[C]));h.push(m)}return function(e,t){for(var r="<table>\n<thead>\n<tr>\n",a=e.length,n=0;n<a;++n)r+=e[n];for(r+="</tr>\n</thead>\n<tbody>\n",n=0;n<t.length;++n){r+="<tr>\n";for(var i=0;i<a;++i)r+=t[n][i];r+="</tr>\n"}return r+="</tbody>\n</table>\n"}(g,h)}return e=(e=(e=(e=a.converter._dispatch("tables.before",e,t,a)).replace(/\\(\|)/g,r.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,i)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,i),e=a.converter._dispatch("tables.after",e,t,a)}),r.subParser("underline",function(e,t,a){return t.underline?(e=a.converter._dispatch("underline.before",e,t,a),e=(e=t.literalMidWordUnderscores?e.replace(/\b_?__(\S[\s\S]*)___?\b/g,function(e,t){return"<u>"+t+"</u>"}):e.replace(/_?__(\S[\s\S]*?)___?/g,function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e})).replace(/(_)/g,r.helper.escapeCharactersCallback),e=a.converter._dispatch("underline.after",e,t,a)):e}),r.subParser("unescapeSpecialChars",function(e,t,r){return e=(e=r.converter._dispatch("unescapeSpecialChars.before",e,t,r)).replace(/¨E(\d+)E/g,function(e,t){var r=parseInt(t);return String.fromCharCode(r)}),e=r.converter._dispatch("unescapeSpecialChars.after",e,t,r)});e.exports?e.exports=r:this.showdown=r}).call(commonjsGlobal)});function flt$1(e,t,r){if(null==e||""==e)return 0;if("number"!=typeof e){if(-1!=(e+="").indexOf(" ")){var a=e.split(" ");e=isNaN(parseFloat(a[0]))?a.slice(a.length-1).join(" "):e}e=strip_number_groups(e,r),e=parseFloat(e),isNaN(e)&&(e=0)}return null!=t?_round(e,t):e}function cint$1(e,t){return!0===e?1:!1===e?0:("0"!==(e+="")&&(e=lstrip(e,["0"])),e=parseInt(e),isNaN(e)&&(e=void 0===t?0:t),e)}function strip_number_groups(e,t){t||(t=get_number_format$1());var r=get_number_format_info$1(t),a=new RegExp("."===r.group_sep?"\\.":r.group_sep,"g");if(e=e.replace(a,""),"."!==r.decimal_str&&""!==r.decimal_str){var n=new RegExp(r.decimal_str,"g");e=e.replace(n,".")}return e}function format_currency$1(e,t,r){var a=get_number_format$1(t),n=get_currency_symbol(t);return void 0===r&&(r=frappe.boot.sysdefaults.currency_precision||null),n?n+" "+format_number(e,a,r):format_number(e,a,r)}function get_currency_symbol(e){return frappe.boot?"Yes"==frappe.boot.sysdefaults.hide_currency_symbol?null:(e||(e=frappe.boot.sysdefaults.currency),frappe.model.get_value(":Currency",e,"symbol")||e):frappe.currency_symbols[e]}function get_number_format$1(e){return frappe.boot&&frappe.boot.sysdefaults&&frappe.boot.sysdefaults.number_format||"#,###.##"}function get_number_format_info$1(e){var t=frappe.number_format_info[e];return t||(t={decimal_str:".",group_sep:","}),t.precision=e.split(t.decimal_str).slice(1)[0].length,t}function _round(e,t){var r=e<0,a=cint$1(t),n=Math.pow(10,a),i=+(a?Math.abs(e)*n:Math.abs(e)).toFixed(8),o=Math.floor(i),s=t||.5!=i-o?Math.round(i):o%2==0?o:o+1;return s=a?s/n:s,r?-s:s}function roundNumber(e,t){return _round(e,t)}function precision$1(e,t){if(cur_frm){t||(t=cur_frm.doc);var r=frappe.meta.get_docfield(t.doctype,e,t.parent||t.name);return r||console.log(e+": could not find docfield in method precision()"),frappe.meta.get_field_precision(r,t)}return frappe.boot.sysdefaults.float_precision}function in_list$1(e,t){if(!e)return!1;for(var r=0,a=e.length;r<a;r++)if(e[r]==t)return!0;return!1}function remainder(e,t,r){r=cint$1(r);var a=Math.pow(10,r);if(r)var n=e*a%(t*a)/a;else n=e%t;return flt$1(n,r)}function round_based_on_smallest_currency_fraction(e,t,r){var a=flt$1(frappe.model.get_value(":Currency",t,"smallest_currency_fraction_value"));if(a){var n=remainder(e,a,r);n>a/2?e+=a-n:e-=n}else e=Math.round(e);return e}function get_url_arg(e){return get_query_params()[e]||""}function get_query_params(e){var t={};e||(e=location.search.substring(1));for(var r=e.split("&"),a=0,n=r.length;a<n;a++){var i=r[a].split("="),o=i[0];if(o){var s=i[1];"string"==typeof s&&(s=s.replace(/\+/g,"%20"),s=decodeURIComponent(s)),o in t?(void 0===t[o]?t[o]=[]:"string"==typeof t[o]&&(t[o]=[t[o]]),t[o].push(s)):t[o]=s}}return t}function make_query_string(e,t){void 0===t&&(t=!0);var r=[];for(var a in e){var n=e[a];void 0!==n&&""!==n&&null!==n&&("object"==typeof n&&(n=JSON.stringify(n)),t&&(a=encodeURIComponent(a),n=encodeURIComponent(n)),r.push(a+"="+n))}return"?"+r.join("&")}frappe.provide("frappe.tools"),frappe.tools.downloadify=function(e,t,r){if(t&&t.length&&!has_common(t,t))frappe.msgprint(__("Export not allowed. You need {0} role to export.",[frappe.utils.comma_or(t)]));else{var a=r+".csv",n=frappe.tools.to_csv(e),i=document.createElement("a");if("download"in i){var o=new Blob([n],{type:"text/csv;charset=UTF-8"});i.href=URL.createObjectURL(o),i.download=a}else i.href="data:attachment/csv,"+encodeURIComponent(n),i.download=a,i.target="_blank";document.body.appendChild(i),i.click(),document.body.removeChild(i)}},frappe.markdown=function(e){for(frappe.md2html||(frappe.md2html=new showdown.Converter);"\n"===e.substr(0,1);)e=e.substr(1);for(var t=0,r=e.split("\n")[0];-1!==["\n","\t"].indexOf(r.substr(0,1));)t++,r=r.substr(1);if(t&&t!=r.length){var a=[];$.each(e.split("\n"),function(e,r){a.push(r.substr(t))}),e=a.join("\n")}return frappe.md2html.makeHtml(e)},frappe.tools.to_csv=function(e){var t=[];return $.each(e,function(e,r){r=$.map(r,function(e){return null==e&&(e=""),"string"==typeof e?'"'+$("<i>").html(e.replace(/"/g,'""')).text()+'"':e}),t.push(r.join(","))}),t.join("\n")},frappe.slickgrid_tools={get_filtered_items:function(e){for(var t=[],r=0,a=e.getLength();r<a;r++){var n=e.getItem(r);for(var i in n)n.hasOwnProperty(i)&&"string"==typeof n[i]&&"'"==n[i].charAt(0)&&"'"==n[i].charAt(n[i].length-1)&&(e.getItem(r)[i]=n[i].substr(1,n[i].length-2));t.push(e.getItem(r))}return t},get_view_data:function(e,t,r){for(var a=$.map(e,function(e){return e.name}),n=[],i=$.map(e,function(e){return e.field}),o=0,s=t.getLength();o<s;o++){var l=t.getItem(o),p=[];$.each(i,function(e,t){var r=l[t];null==r&&(r=""),"string"==typeof r&&(e<3&&l.indent>0&&isNaN(new Date(r).valueOf())&&(r=" ".repeat(8*l.indent)+r),"'"==r.charAt(0)&&"'"==r.charAt(r.length-1)&&(r=r.substr(1,r.length-2))),p.push(r)}),r&&!r(p,l)||n.push(p)}return[a].concat(n)},add_property_setter_on_resize:function(e){e.onColumnsResized.subscribe(function(t,r){$.each(e.getColumns(),function(e,t){t.docfield&&t.previousWidth!=t.width&&!in_list(frappe.model.std_fields_list,t.docfield.fieldname)&&(frappe.call({method:"frappe.client.make_width_property_setter",args:{doc:{doctype:"Property Setter",doctype_or_field:"DocField",doc_type:t.docfield.parent,field_name:t.docfield.fieldname,property:"width",value:t.width,__islocal:1}}}),t.previousWidth=t.width,t.docfield.width=t.width)})})}},frappe.provide("frappe.datetime"),moment.defaultDateFormat="YYYY-MM-DD",moment.defaultTimeFormat="HH:mm:ss",moment.defaultDatetimeFormat=moment.defaultDateFormat+" "+moment.defaultTimeFormat,moment.defaultFormat=moment.defaultDateFormat,frappe.provide("frappe.datetime"),$.extend(frappe.datetime,{convert_to_user_tz:function(e,t){if(frappe.sys_defaults.time_zone)var r=moment.tz(e,frappe.sys_defaults.time_zone).local();else r=moment(e);return!1===t?r:r.format(moment.defaultDatetimeFormat)},convert_to_system_tz:function(e,t){if(frappe.sys_defaults.time_zone)var r=moment(e).tz(frappe.sys_defaults.time_zone);else r=moment(e);return!1===t?r:r.format(moment.defaultDatetimeFormat)},is_timezone_same:function(){return!frappe.sys_defaults.time_zone||moment().tz(frappe.sys_defaults.time_zone).utcOffset()===moment().utcOffset()},str_to_obj:function(e){return moment(e,moment.defaultDatetimeFormat)._d},obj_to_str:function(e){return moment(e).locale("en").format()},obj_to_user:function(e){return moment(e).format(frappe.datetime.get_user_fmt().toUpperCase())},get_diff:function(e,t){return moment(e).diff(t,"days")},get_hour_diff:function(e,t){return moment(e).diff(t,"hours")},get_day_diff:function(e,t){return moment(e).diff(t,"days")},add_days:function(e,t){return moment(e).add(t,"days").format()},add_months:function(e,t){return moment(e).add(t,"months").format()},month_start:function(){return moment().startOf("month").format()},month_end:function(){return moment().endOf("month").format()},year_start:function(){return moment().startOf("year").format()},year_end:function(){return moment().endOf("year").format()},get_user_fmt:function(){return frappe.sys_defaults.date_format||"yyyy-mm-dd"},str_to_user:function(e,t){if(void 0===t&&(t=!1),!e)return"";if(t)return moment(e,moment.defaultTimeFormat).format(moment.defaultTimeFormat);var r=frappe.datetime.get_user_fmt().toUpperCase();return"string"!=typeof e||-1===e.indexOf(" ")?moment(e).format(r):moment(e,"YYYY-MM-DD HH:mm:ss").format(r+" HH:mm:ss")},get_datetime_as_string:function(e){return moment(e).format("YYYY-MM-DD HH:mm:ss")},user_to_str:function(e,t){if(void 0===t&&(t=!1),t)return moment(e,moment.defaultTimeFormat).format(moment.defaultTimeFormat);var r=frappe.datetime.get_user_fmt().toUpperCase(),a="YYYY-MM-DD";return-1!==e.indexOf(" ")&&(r+=" HH:mm:ss",a+=" HH:mm:ss"),moment(e,[r.replace("YYYY","YY"),r]).locale("en").format(a)},user_to_obj:function(e){return frappe.datetime.str_to_obj(frappe.datetime.user_to_str(e))},global_date_format:function(e){var t=moment(e);return t._f&&-1!==t._f.indexOf("HH")?t.format("Do MMMM YYYY, h:mma"):t.format("Do MMMM YYYY")},now_date:function(e){return void 0===e&&(e=!1),frappe.datetime._date(moment.defaultDateFormat,e)},now_time:function(e){return void 0===e&&(e=!1),frappe.datetime._date(moment.defaultTimeFormat,e)},now_datetime:function(e){return void 0===e&&(e=!1),frappe.datetime._date(moment.defaultDatetimeFormat,e)},_date:function(e,t){void 0===t&&(t=!1);var r,a=frappe.sys_defaults.time_zone;return r=a?moment.tz(a):moment(),t?frappe.datetime.moment_to_date_obj(r):r.format(e)},moment_to_date_obj:function(e){var t=new Date,r=e.toArray();return t.setFullYear(r[0]),t.setMonth(r[1]),t.setDate(r[2]),t.setHours(r[3]),t.setMinutes(r[4]),t.setSeconds(r[5]),t.setMilliseconds(r[6]),t},nowdate:function(){return frappe.datetime.now_date()},get_today:function(){return frappe.datetime.now_date()},validate:function(e){return moment(e,[moment.defaultDateFormat,moment.defaultDatetimeFormat,moment.defaultTimeFormat],!0).isValid()}}),Object.defineProperties(window,{dateutil:{get:function(){return console.warn("Please use `frappe.datetime` instead of `dateutil`. It will be deprecated soon."),frappe.datetime}},date:{get:function(){return console.warn("Please use `frappe.datetime` instead of `date`. It will be deprecated soon."),frappe.datetime}},get_today:{get:function(){return console.warn("Please use `frappe.datetime.get_today` instead of `get_today`. It will be deprecated soon."),frappe.datetime.get_today}}}),window.frappe||(window.frappe={}),frappe.number_format_info={"#,###.##":{decimal_str:".",group_sep:","},"#.###,##":{decimal_str:",",group_sep:"."},"# ###.##":{decimal_str:".",group_sep:" "},"# ###,##":{decimal_str:",",group_sep:" "},"#'###.##":{decimal_str:".",group_sep:"'"},"#, ###.##":{decimal_str:".",group_sep:", "},"#,##,###.##":{decimal_str:".",group_sep:","},"#,###.###":{decimal_str:".",group_sep:","},"#.###":{decimal_str:"",group_sep:"."},"#,###":{decimal_str:"",group_sep:","}},window.format_number=function(e,t,r){t||(t=get_number_format$1(),null==r&&(r=cint$1(frappe.defaults.get_default("float_precision"))||3));var a=get_number_format_info$1(t);if(null==r&&(r=a.precision),(e=flt$1(e,r,t))<0)var n=!0;var i=(e=(e=Math.abs(e)).toFixed(r)).split("."),o=a.group_sep?3:0;if(o){for(var s=i[0],l="",p=(s.length,s.length);p>=0;p--){var c=replace_all(l,a.group_sep,"").length;"#,##,###.##"==t&&-1!=l.indexOf(",")&&(o=2,c+=1),l+=s.charAt(p),!c||(c+1)%o||0==p||(l+=a.group_sep)}i[0]=l.split("").reverse().join("")}return i[0]+""==""&&(i[0]="0"),i[1]=i[1]&&a.decimal_str?a.decimal_str+i[1]:"",(n?"-":"")+i[0]+i[1]},Object.defineProperty(window,"inList",{get:function(){return console.warn("Please use `in_list` instead of `inList`. It will be deprecated soon."),in_list$1}}),Object.assign(window,{flt:flt$1,cint:cint$1,strip_number_groups:strip_number_groups,format_currency:format_currency$1,get_currency_symbol:get_currency_symbol,get_number_format:get_number_format$1,get_number_format_info:get_number_format_info$1,_round:_round,roundNumber:roundNumber,precision:precision$1,remainder:remainder,round_based_on_smallest_currency_fraction:round_based_on_smallest_currency_fraction,in_list:in_list$1}),frappe.provide("frappe.help"),frappe.help.youtube_id={},frappe.help.has_help=function(e){return frappe.help.youtube_id[e]},frappe.help.show=function(e){frappe.help.youtube_id[e]&&frappe.help.show_video(frappe.help.youtube_id[e])},frappe.help.show_video=function(e,t){if($("body").width()>768)var r=[670,377];else r=[560,315];frappe.msgprint('<iframe width="'+r[0]+'" height="'+r[1]+'" \t\tsrc="https://www.youtube.com/embed/'+e+'" \t\tframeborder="0" allowfullscreen></iframe>'+(frappe.help_feedback_link||""),t||__("Help")).$wrapper.addClass("video-modal")},$("body").on("click","a.help-link",function(){var e=$(this).attr("data-doctype");e&&frappe.help.show(e)}),frappe.provide("frappe.help.help_links"),frappe.help.help_links["data-import-tool"]=[{label:"Importing and Exporting Data",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/data/data-import-tool.html"}],frappe.help.help_links["modules/Setup"]=[{label:"Users and Permissions",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/"},{label:"Settings",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/settings/"},{label:"Data Management",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/data/"},{label:"Email",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/email/"},{label:"Printing",url:"http://frappe.github.io/erpnext/user/manual/en/setting-up/print/"}],frappe.help.help_links["List/User"]=[{label:"Adding Users",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/adding-users"},{label:"Rename User",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/articles/rename-user"}],frappe.help.help_links["permission-manager"]=[{label:"Role Permissions Manager",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/role-based-permissions"}],frappe.help.help_links["user-permissions"]=[{label:"User Permissions",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/user-permissions"}],frappe.help.help_links["Form/System Settings"]=[{label:"System Settings",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/settings/system-settings"}],frappe.help.help_links["List/Email Account"]=[{label:"Email Account",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-account"}],frappe.help.help_links["List/Email Alert"]=[{label:"Email Alert",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-alerts"}],frappe.help.help_links["Form/Print Settings"]=[{label:"Print Settings",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-settings"}],frappe.help.help_links["print-format-builder"]=[{label:"Print Format Builder",url:"https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-format-builder"}],frappe.provide("frappe.contacts"),$.extend(frappe.contacts,{clear_address_and_contact:function(e){$(e.fields_dict.address_html.wrapper).html(""),e.fields_dict.contact_html&&$(e.fields_dict.contact_html.wrapper).html("")},render_address_and_contact:function(e){e.fields_dict.address_html&&"addr_list"in e.doc.__onload&&$(e.fields_dict.address_html.wrapper).html(frappe.render_template("address_list",cur_frm.doc.__onload)).find(".btn-address").on("click",function(){frappe.new_doc("Address")}),e.fields_dict.contact_html&&"contact_list"in e.doc.__onload&&$(e.fields_dict.contact_html.wrapper).html(frappe.render_template("contact_list",cur_frm.doc.__onload)).find(".btn-contact").on("click",function(){frappe.new_doc("Contact")})}}),frappe.preview_email=function(e,t,r){frappe.call({method:"frappe.email.email_body.get_email_html",args:{subject:"Test",template:e,args:t,header:r}}).then(function(e){var t=e.message;t=t.replace(/embed=/,"src="),frappe.msgprint(t).$wrapper.find(".modal-dialog").css("width","70%")})},frappe.provide("frappe.file_manager"),frappe.file_manager=function(){var e=[],t=null,r=null;function a(){e=[],t=null,r=null}return{cut:function(r,a){e=r,t=a},paste:function(n){return new Promise(function(i,o){if(0===e.length||!t)return a(),void i();r=n,frappe.call({method:"frappe.core.doctype.file.file.move_file",args:{file_list:e,new_parent:r,old_parent:t},callback:function(e){a(),i(e)}}).fail(o)})},get can_paste(){return Boolean(e.length>0&&t)},get old_folder(){return t},get files_to_move(){return e}}}(),frappe.templates.upload='<div class="file-upload">  <div class="input-upload">   <input class="input-upload-file hidden" type="file" {{ opts.allow_multiple ? "multiple" : "" }} name="filedata" />   <button class="btn btn-primary btn-sm btn-browse">{%= __("Browse") %}</button>  </div>  <div class="uploaded-filename hidden" style="width: 100%; margin-top: 12px;"></div>  <div class="web-link-wrapper" style="width: calc(100% - 80px);">   <span class="text-muted file-upload-or">{%= __("or") %}</span>   <div class="input-link" style="width: calc(100% - 30px);">    <div class="input-group">     <div class="input-group-addon">      <span class="hidden-xs">{%= __("Web Link") %}</span>      <i class="fa fa-link visible-xs"></i>     </div>     <input class="form-control" type="text" name="file_url"      placeholder="{%= (opts.sample_url || "e.g. http://example.com/somefile.png") %}"/>    </div>   </div>  </div>  <div class="private-file hidden">   <div class="checkbox">       <label>         <input type="checkbox" checked> {{ __("Private") }}       </label>     </div>  </div> </div> ',frappe.upload={make:function(e){e.args||(e.args={}),void 0===e.allow_multiple&&(e.allow_multiple=1),e.show_private=!("is_private"in e),"options"in e&&!("options"in e&&e.options&&"public"==!e.options.toLowerCase()&&"image"==!e.options.toLowerCase())||(e.is_private=1);var t=null;e.parent||(t=new frappe.ui.Dialog({title:__("Upload Attachment"),primary_action_label:__("Attach"),primary_action:function(){}}),e.parent=t.body,e.btn=t.get_primary_btn(),t.show());var r=$(frappe.render_template("upload",{opts:e})).appendTo(e.parent),a=r.find(".input-upload-file"),n=r.find(".uploaded-filename");r.find(".btn-browse").on("click",function(){a.click()});var i=$('<div style="padding: 20px 10px 0px 10px;"/>');new frappe.ui.DropZone(i,{drop:function(t){i.hide(),e.files=e.files?e.files.concat(t):t,a.trigger("change")}}),r.append(i),a.on("change",function(){if(this.files.length>0||e.files){var t=null;e.files?(t=e.files,delete e.files):t=r.find(":file").get(0).files;var a=$.makeArray(t);r.find(".web-link-wrapper").addClass("hidden"),r.find(".btn-browse").removeClass("btn-primary").addClass("btn-default"),n.removeClass("hidden").empty(),n.css({"margin-bottom":"25px"}),a=a.map(function(t){return Object.assign(t,{is_private:e.is_private?1:0})}),r.data("attached_files",a),n.append('\n\t\t\t\t\t<div class="list-item list-item--head">\n\t\t\t\t\t\t<div class="list-item__content list-item__content--flex-2">\n\t\t\t\t\t\t\t'+__("Filename")+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"+(e.show_private?'<div class="list-item__content file-public-column">\n\t\t\t\t\t\t\t'+__("Public")+"\n\t\t\t\t\t\t\t</div>":"")+'\n\t\t\t\t\t\t<div class="list-item__content list-item__content--activity" style="flex: 0 0 32px">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t');var i=a.map(function(t){return frappe.upload.make_file_row(t,e)});n.append(i)}else frappe.upload.show_empty_state(r)}),e.files&&e.files.length>0&&a.trigger("change"),n.on("click",".list-item-container",function(e){var t=$(this).attr("data-filename"),a=r.data("attached_files"),i=$(e.target);if(i.is(":checkbox")){var o=!i.is(":checked");a=a.map(function(e){return e.name===t&&(e.is_private=o?1:0),e}),n.find('.list-item-container[data-filename="'+t+'"] .fa.fa-fw').toggleClass("fa-lock fa-unlock-alt"),r.data("attached_files",a)}else i.is(".uploaded-file-remove, .fa-remove")&&(a=a.filter(function(e){return e.name!==t}),r.data("attached_files",a),n.find('.list-item-container[data-filename="'+t+'"]').remove(),0===a.length&&frappe.upload.show_empty_state(r))}),e.btn?$(e.btn).unbind("click"):e.btn=$('<button class="btn btn-default btn-sm attach-btn">'+__("Attach")+"</div>").appendTo(r),e.btn.click(function(){t&&t.hide(),e.get_params&&(e.args.params=e.get_params());var a=r.find('[name="file_url"]:visible');if(a=a.length&&a.get(0).value,e.args.gs_template)frappe.integration_service.gsuite.create_gsuite_file(e.args,e);else if(a)e.args.file_url=a,frappe.upload.upload_file(null,e.args,e);else{var n=r.data("attached_files");frappe.upload.upload_multiple_files(n,e.args,e)}})},make_file_row:function(e,t){void 0===t&&(t={});var r=t.show_private,a='\n\t\t\t<div class="list-item-container" data-filename="'+e.name+'">\n\t\t\t\t<div class="list-item">\n\t\t\t\t\t<div class="list-item__content list-item__content--flex-2 ellipsis">\n\t\t\t\t\t\t<span>'+e.name+'</span>\n\t\t\t\t\t\t<span style="margin-top: 1px; margin-left: 5px;"\n\t\t\t\t\t\t\tclass="fa fa-fw text-warning '+(e.is_private?"fa-lock":"fa-unlock-alt")+'">\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t'+(r?'<div class="list-item__content file-public-column ellipsis">\n\t\t\t\t\t\t\t<input type="checkbox" '+(e.is_private?"":"checked")+"/></div>":"")+'\n\t\t\t\t\t<div class="list-item__content list-item__content--activity ellipsis" style="flex: 0 0 32px;">\n\t\t\t\t\t<button class="btn btn-default btn-xs text-muted uploaded-file-remove">\n\t\t\t\t\t\t\t<span class="fa fa-remove"></span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>';return $(a)},show_empty_state:function(e){e.find(".uploaded-filename").addClass("hidden"),e.find(".web-link-wrapper").removeClass("hidden"),e.find(".private-file").addClass("hidden"),e.find(".btn-browse").removeClass("btn-default").addClass("btn-primary")},upload_multiple_files:function(e,t,r){var a=-1;function n(){if(e){var n=e[a+=1];t.is_private=n.is_private,r.progress||frappe.show_progress(__("Uploading"),a,e.length)}frappe.upload.upload_file(n,t,r)}frappe.upload.total_files=e?e.length:0,n(),$(document).on("upload_complete",function t(r,i){if(!e||a===e.length-1)return $(document).off("upload_complete",t),void frappe.hide_progress();n()})},upload_file:function(e,t,r){e||t.file_url?e?frappe.upload.read_file(e,t,r):frappe.upload._upload_file(e,t,r):r.on_no_attach?r.on_no_attach():frappe.msgprint(__("Please attach a file or set a URL"))},_upload_file:function(e,t,r,a){t.file_size&&frappe.upload.validate_max_file_size(t.file_size),r.on_attach?r.on_attach(t,a):r.confirm_is_private?frappe.prompt({label:__("Private"),fieldname:"is_private",fieldtype:"Check",default:1},function(a){t.is_private=a.is_private,frappe.upload.upload_to_server(e,t,r)},__("Private or Public?")):(!("is_private"in t)&&"is_private"in r&&(t.is_private=r.is_private),frappe.upload.upload_to_server(e,t,r))},read_file:function(e,t,r){if(t.filename=e.name.split(" ").join("_"),t.file_url=null,!r.options||"image"!=r.options.toLowerCase()||frappe.utils.is_image_file(t.filename)){var a=frappe.cur_progress?frappe.cur_progress.percent:0,n=function(){var a=new FileReader;a.onload=function(){var n=a.result;t.filedata=a.result.split(",")[1],t.file_size=e.size,frappe.upload._upload_file(e,t,r,n)},a.readAsDataURL(e)},i=e.size<=24576;if(r.no_socketio||frappe.flags.no_socketio||i)n();else{t.file_size=e.size,frappe.call({method:"frappe.utils.file_manager.validate_filename",args:{filename:t.filename},callback:function(e){t.filename=e.message,o()}});var o=function(){frappe.socketio.uploader.start({file:e,filename:t.filename,is_private:t.is_private,fallback:function(){n()},callback:function(a){t.file_url=a.file_url,frappe.upload._upload_file(e,t,r)},on_progress:function(e){var t=flt(e)/frappe.upload.total_files;frappe.show_progress(__("Uploading"),a+t)}})}}}else frappe.msgprint(__("Only image extensions (.gif, .jpg, .jpeg, .tiff, .png, .svg) allowed"))},upload_to_server:function(e,t,r){r.start&&r.start();var a={method:"uploadfile",args:t,callback:function(e){if(e._server_messages,e.exc)return r.onerror?r.onerror(e):r.callback(null,e),void frappe.hide_progress();var a=e.message;r.loopcallback&&r.loopcallback(),r.callback&&r.callback(a,e,t),$(document).trigger("upload_complete",a)},error:function(e){r.onerror?r.onerror(e):r.callback(null,null,e),frappe.hide_progress()}};return $.each(["queued","running","progress","always","btn"],function(e,t){r[t]&&(a[t]=r[t])}),frappe.call(a)},get_string:function(e){var t=e.split(",");if(-1===t[0].indexOf(":"))var r=t[2];else r=t[1];return decodeURIComponent(escape(atob(r)))},validate_max_file_size:function(e){var t=frappe.boot.max_file_size||5242880;e>t&&frappe.throw(__("File size exceeded the maximum allowed size of {0} MB",[t/1048576]))},multifile_upload:function(e,t,r){void 0===r&&(r={});for(var a=[],n=0,i=e.length;n<i;n++){var o=e[n].name;a.push({fieldname:"label1",fieldtype:"Heading",label:o}),a.push({fieldname:o+"_is_private",fieldtype:"Check",label:"Private",default:1})}var s=new frappe.ui.Dialog({title:__("Make file(s) private or public?"),fields:a,primary_action:function(){var a=0,n=e.length;s.hide(),r.loopcallback=function(){a<n&&(t.is_private=s.fields_dict[e[a].name+"_is_private"].get_value(),frappe.upload.upload_file(e[a],t,r),a++)},r.loopcallback()}});s.show(),r.confirm_is_private=0},create_gsuite_file:function(e,t){return frappe.call({type:"POST",method:"frappe.integrations.doctype.gsuite_templates.gsuite_templates.create_gsuite_doc",args:e,callback:function(e){var r=e.message;t.callback&&t.callback(r,e)}})}},frappe.provide("frappe.integration_service"),frappe.integration_service.gsuite={create_gsuite_file:function(e,t){return frappe.call({type:"POST",method:"frappe.integrations.doctype.gsuite_templates.gsuite_templates.create_gsuite_doc",args:e,callback:function(e){var r=e.message;t.callback&&t.callback(r,e)}})}},frappe.provide("frappe.ui"),frappe.ui.Tree=function(){function e(e){e.parent,e.label;var t=e.icon_set,r=(e.toolbar,e.expandable,e.with_skeleton);void 0===r&&(r=1);e.args,e.method,e.get_label,e.on_render,e.on_click;$.extend(this,arguments[0]),this.setup_treenode_class(),this.nodes={},this.wrapper=$('<div class="tree">').appendTo(this.parent),r&&this.wrapper.addClass("with-skeleton"),t||(this.icon_set={open:"fa fa-fw fa-folder-open",closed:"fa fa-fw fa-folder",leaf:"octicon octicon-primitive-dot"}),this.setup_root_node()}return e.prototype.get_nodes=function(e,t){var r=this,a=Object.assign({},this.args);return a.parent=e,a.is_root=t,new Promise(function(e){frappe.call({method:r.method,args:a,callback:function(t){e(t.message)}})})},e.prototype.get_all_nodes=function(e,t){var r=Object.assign({},this.args);return r.parent=e,r.is_root=t,r.tree_method=this.method,new Promise(function(e){frappe.call({method:"frappe.desk.treeview.get_all_nodes",args:r,callback:function(t){e(t.message)}})})},e.prototype.setup_treenode_class=function(){var e=this;this.TreeNode=function(){return function(t){t.parent,t.label,t.parent_label,t.expandable,t.is_root,t.data,$.extend(this,arguments[0]),this.loaded=0,this.expanded=0,this.parent_label&&(this.parent_node=e.nodes[this.parent_label]),e.nodes[this.label]=this,e.make_node_element(this),e.on_render&&e.on_render(this)}}()},e.prototype.setup_root_node=function(){this.root_node=new this.TreeNode({parent:this.wrapper,label:this.label,parent_label:null,expandable:!0,is_root:!0,data:{value:this.label}}),this.expand_node(this.root_node,!1)},e.prototype.refresh=function(){this.selected_node.parent_node&&this.load_children(this.selected_node.parent_node,!0)},e.prototype.make_node_element=function(e){e.$tree_link=$('<span class="tree-link">').attr("data-label",e.label).data("node",e).appendTo(e.parent),e.$ul=$('<ul class="tree-children">').hide().appendTo(e.parent),this.make_icon_and_label(e),this.toolbar&&(e.$toolbar=this.get_toolbar(e).insertAfter(e.$tree_link))},e.prototype.add_node=function(e,t){var r=$('<li class="tree-node">');return new this.TreeNode({parent:r.appendTo(e.$ul),parent_label:e.label,label:t.value,title:t.title,expandable:t.expandable,data:t})},e.prototype.reload_node=function(e){this.load_children(e)},e.prototype.toggle=function(){this.get_selected_node().toggle()},e.prototype.get_selected_node=function(){return this.selected_node},e.prototype.set_selected_node=function(e){this.selected_node=e},e.prototype.load_children=function(e,t){var r=this;void 0===t&&(t=!1);var a=e.data.value,n=e.is_root;t?frappe.run_serially([function(){return r.get_all_nodes(a,n)},function(e){r.render_children_of_all_nodes(e)}]):frappe.run_serially([function(){return r.get_nodes(a,n)},function(t){r.render_node_children(e,t)}])},e.prototype.render_children_of_all_nodes=function(e){var t=this;e.map(function(e){t.render_node_children(t.nodes[e.parent],e.data)})},e.prototype.render_node_children=function(e,t){var r=this;e.$ul.empty(),t&&$.each(t,function(t,a){var n=r.add_node(e,a);n.$tree_link.data("node-data",a).data("node",n)}),e.expanded=!1,e.loaded=!0,this.expand_node(e)},e.prototype.on_node_click=function(e){this.expand_node(e),frappe.dom.activate(this.wrapper,e.$tree_link,"tree-link"),e.$toolbar&&this.show_toolbar(e)},e.prototype.expand_node=function(e,t){void 0===t&&(t=!0),this.set_selected_node(e),t&&this.on_click&&this.on_click(e),e.expandable&&this.toggle_node(e),this.select_link(e),e.expanded=!e.expanded,e.parent.toggleClass("opened",e.expanded)},e.prototype.toggle_node=function(e){if(e.expandable&&this.get_nodes&&!e.loaded)return this.load_children(e);e.$ul&&(e.$ul.children().length&&e.$ul.toggle(!e.expanded),this.icon_set&&(e.$tree_link.find("i").removeClass(),e.expanded?e.$tree_link.find("i").addClass(this.icon_set.closed+" node-parent"):e.$tree_link.find("i").addClass(this.icon_set.open+" node-parent")))},e.prototype.select_link=function(e){this.wrapper.find(".selected").removeClass("selected"),e.$tree_link.toggleClass("selected")},e.prototype.show_toolbar=function(e){this.cur_toolbar&&$(this.cur_toolbar).hide(),this.cur_toolbar=e.$toolbar,e.$toolbar.show()},e.prototype.get_node_label=function(e){return this.get_label?this.get_label(e):e.title&&e.title!=e.label?__(e.title)+" <span class='text-muted'>("+e.label+")</span>":__(e.title||e.label)},e.prototype.make_icon_and_label=function(e){var t=this,r="";this.icon_set&&(r=e.expandable?'<i class="'+this.icon_set.closed+' node-parent"></i>':'<i class="'+this.icon_set.leaf+' node-leaf"></i>'),$(r).appendTo(e.$tree_link),$('<a class="tree-label grey h6"> '+this.get_node_label(e)+"</a>").appendTo(e.$tree_link),e.$tree_link.on("click",function(){setTimeout(function(){t.on_node_click(e)},100)})},e.prototype.get_toolbar=function(e){var t=this,r=$('<span class="tree-node-toolbar btn-group"></span>').hide();return Object.keys(this.toolbar).map(function(a){var n=t.toolbar[a];if(n.label&&(!n.condition||n.condition(e))){var i=n.get_label?n.get_label():n.label;$("<button class='btn btn-default btn-xs'></button>").html(i).addClass("tree-toolbar-button "+(n.btnClass||"")).appendTo(r).on("click",function(){n.click(e),t.refresh()})}}),r},e}(),frappe.provide("frappe.pages"),frappe.provide("frappe.views"),window.cur_page=null,frappe.views.Container=Class.extend({_intro:"Container contains pages inside `#container` and manages \t\t\tpage creation, switching",init:function(){this.container=$("#body_div").get(0),this.page=null,this.pagewidth=$(this.container).width(),this.pagemargin=50;var e=this;$(document).on("page-change",function(){var t=frappe.get_route_str();$("body").attr("data-route",t),$("body").attr("data-sidebar",e.has_sidebar()?1:0)}),$(document).bind("rename",function(e,t,r,a){frappe.breadcrumbs.rename(t,r,a)})},add_page:function(e){var t=$('<div class="content page-container"></div>').attr("id","page-"+e).attr("data-page-route",e).hide().appendTo(this.container).get(0);return t.label=e,frappe.pages[e]=t,t},change_to:function(e){if(cur_page=this,this.page&&this.page.label===e)$(this.page).trigger("show");else{if(e.tagName)var t=e;else t=frappe.pages[e];if(t)return window.cur_dialog&&cur_dialog.display&&!cur_dialog.keep_open&&cur_dialog.hide(),this.page&&this.page!=t&&($(this.page).hide(),$(this.page).trigger("hide")),this.page&&this.page==t||(this.page=t,$(this.page).show()),$(document).trigger("page-change"),this.page._route=window.location.hash,$(this.page).trigger("show"),frappe.utils.scroll_to(0),frappe.breadcrumbs.update(),this.page;console.log(__("Page not found")+": "+e)}},has_sidebar:function(){var e=0,t=frappe.get_route_str();if(!(e=frappe.ui.pages[t]&&!frappe.ui.pages[t].single_column)){var r=t.split("/").slice(0,2).join("/");e=$('.page-container[data-page-route="'+r+'"] .layout-side-section').length?1:0}return e}}),frappe.breadcrumbs={all:{},preferred:{File:""},set_doctype_module:function(e,t){localStorage["preferred_breadcrumbs:"+e]=t},get_doctype_module:function(e){return localStorage["preferred_breadcrumbs:"+e]},add:function(e,t,r){var a;a="object"==typeof e?e:{module:e,doctype:t,type:r},frappe.breadcrumbs.all[frappe.breadcrumbs.current_page()]=a,frappe.breadcrumbs.update()},current_page:function(){return frappe.get_route_str()},update:function(){var e=frappe.breadcrumbs.all[frappe.breadcrumbs.current_page()];frappe.visible_modules||(frappe.visible_modules=$.map(frappe.get_desktop_icons(!0),function(e){return e.module_name}));var t=$("#navbar-breadcrumbs").empty();if(e){if("Custom"===e.type){var r='<li><a href="'+e.route+'">'+e.label+"</a></li>";return t.append(r),void $("body").removeClass("no-breadcrumbs")}var a=frappe.breadcrumbs.get_doctype_module(e.doctype);if(a?e.module=a:void 0!==frappe.breadcrumbs.preferred[e.doctype]&&(e.module=frappe.breadcrumbs.preferred[e.doctype]),e.module&&(in_list(["Core","Email","Custom","Workflow","Print"],e.module)&&(e.module="Setup"),frappe.get_module(e.module))){var n=frappe.get_module(e.module),i=(n&&n.icon,n?n.label:e.module);n&&!n.blocked&&frappe.visible_modules.includes(n.module_name)&&$(repl('<li><a href="#modules/%(module)s">%(label)s</a></li>',{module:e.module,label:__(i)})).appendTo(t)}if(e.doctype&&"Form"===frappe.get_route()[0])if("User"===e.doctype&&-1===frappe.user.is_module("Setup")||frappe.get_doc("DocType",e.doctype).issingle);else{var o;if(-1!==frappe.boot.treeviews.indexOf(e.doctype))o=(frappe.model.user_settings[e.doctype].last_view||"Tree")+"/"+e.doctype;else o="List/"+e.doctype;$(repl('<li><a href="#%(route)s">%(label)s</a></li>',{route:o,label:__(e.doctype)})).appendTo(t)}$("body").removeClass("no-breadcrumbs")}else $("body").addClass("no-breadcrumbs")},rename:function(e,t,r){var a=["Form",e,t].join("/"),n=["Form",e,r].join("/");frappe.breadcrumbs.all[n]=frappe.breadcrumbs.all[a],delete frappe.breadcrumbs.all[a]}},frappe.provide("frappe.pages"),frappe.provide("frappe.views"),frappe.views.Factory=Class.extend({init:function(e){$.extend(this,e)},show:function(){var e=frappe.get_route_str();if(frappe.pages[e]&&!e.includes("Form/"))frappe.container.change_to(e),this.on_show&&this.on_show();else{var t=frappe.get_route();t[1]?this.make(t):frappe.show_not_found(t)}},make_page:function(e,t){return frappe.make_page(e,t)}}),frappe.make_page=function(e,t){if(!t)t=frappe.get_route_str();var r=frappe.container.add_page(t);return frappe.ui.make_app_page({parent:r,single_column:!e}),frappe.container.change_to(t),r},frappe.provide("frappe.views.pageview"),frappe.provide("frappe.standard_pages"),frappe.views.pageview={with_page:function(e,t){if(in_list(Object.keys(frappe.standard_pages),e))return frappe.pages[e]||frappe.standard_pages[e](),void t();if(locals.Page&&locals.Page[e]||e==window.page_name)t();else{if(!localStorage["_page:"+e]||1==frappe.boot.developer_mode)return frappe.call({method:"frappe.desk.desk_page.getpage",args:{name:e},callback:function(r){r.docs._dynamic_page||(localStorage["_page:"+e]=JSON.stringify(r.docs)),t()},freeze:!0});frappe.model.sync(JSON.parse(localStorage["_page:"+e])),t()}},show:function(e){e||(e=frappe.boot?frappe.boot.home_page:window.page_name),frappe.model.with_doctype("Page",function(){frappe.views.pageview.with_page(e,function(t){t&&t.exc?t[403]||frappe.show_not_found(e):frappe.pages[e]||new frappe.views.Page(e),frappe.container.change_to(e)})})}},frappe.views.Page=Class.extend({init:function(e){this.name=e;var t=this;if(e==window.page_name)this.wrapper=document.getElementById("page-"+e),this.wrapper.label=document.title||window.page_name,this.wrapper.page_name=window.page_name,frappe.pages[window.page_name]=this.wrapper;else{if(this.pagedoc=locals.Page[this.name],!this.pagedoc)return void frappe.show_not_found(e);this.wrapper=frappe.container.add_page(this.name),this.wrapper.label=this.pagedoc.title||this.pagedoc.name,this.wrapper.page_name=this.pagedoc.name,this.pagedoc.content&&(this.wrapper.innerHTML=this.pagedoc.content),frappe.dom.eval(this.pagedoc.__script||this.pagedoc.script||""),frappe.dom.set_style(this.pagedoc.style||"")}this.trigger_page_event("on_page_load"),$(this.wrapper).on("show",function(){window.cur_frm=null,t.trigger_page_event("on_page_show"),t.trigger_page_event("refresh")})},trigger_page_event:function(e){this.wrapper[e]&&this.wrapper[e](this.wrapper)}}),frappe.show_not_found=function(e){frappe.show_message_page({page_name:e,message:__("Sorry! I could not find what you were looking for."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})},frappe.show_not_permitted=function(e){frappe.show_message_page({page_name:e,message:__("Sorry! You are not permitted to view this page."),img:"/assets/frappe/images/ui/bubble-tea-sorry.svg"})},frappe.show_message_page=function(e){e.page_name||(e.page_name=frappe.get_route_str()),e.icon?e.img=repl('<span class="%(icon)s message-page-icon"></span> ',e):e.img&&(e.img=repl('<img src="%(img)s" class="message-page-image">',e));var t=frappe.pages[e.page_name]||frappe.container.add_page(e.page_name);$(t).html(repl('<div class="page message-page">\t\t\t<div class="text-center message-page-content">\t\t\t\t%(img)s\t\t\t\t<p class="lead">%(message)s</p>\t\t\t\t<a class="btn btn-default btn-sm btn-home" href="#">%(home)s</a>\t\t\t</div>\t\t</div>',{img:e.img||"",message:e.message||"",home:__("Home")})),frappe.container.change_to(e.page_name)},frappe.provide("frappe.search"),frappe.search.AwesomeBar=Class.extend({setup:function(e){var t=this,r=$(e),a=r.get(0);this.options=[],this.global_results=[];var n=new Awesomplete(a,{minChars:0,maxItems:99,autoFirst:!0,list:[],filter:function(e,t){return!0},data:function(e,t){return{label:e.index||"",value:e.value}},item:function(e,t){var r=this.get_item(e.value),a="<span>"+__(r.label||r.value)+"</span>";return r.description&&r.value!==r.description&&(a+='<br><span class="text-muted ellipsis">'+__(r.description)+"</span>"),$("<li></li>").data("item.autocomplete",r).html('<a style="font-weight:normal"><p>'+a+"</p></a>").get(0)},sort:function(e,t){return t.label-e.label}});a.awesomplete=n,r.on("input",function(e){var r=e.target.value.trim().replace(/\s\s+/g," "),a=r.lastIndexOf(" ");t.global_results=[];var i=$(this);clearTimeout(i.data("timeout")),i.data("timeout",setTimeout(function(){t.options=[],r&&r.length>1?(-1!==a&&t.set_specifics(r.slice(0,a),r.slice(a+1)),t.add_defaults(r),t.options=t.options.concat(t.build_options(r)),t.options=t.options.concat(t.global_results)):t.options=t.options.concat(t.deduplicate(frappe.search.utils.get_recent_pages(r||""))),t.add_help(),n.list=t.deduplicate(t.options)},100))});r.on("focus",function(){this.autocomplete_open||$(this).trigger("input")}),r.on("awesomplete-open",function(e){t.autocomplete_open=e.target}),r.on("awesomplete-close",function(e){t.autocomplete_open=!1}),r.on("awesomplete-select",function(e){var t=e.originalEvent.text.value,a=n.get_item(t);if(a.route_options&&(frappe.route_options=a.route_options),a.onclick)a.onclick(a.match);else{var i=window.location.hash;frappe.set_route(a.route),window.location.hash==i&&frappe.route()}r.val("")}),r.on("awesomplete-selectcomplete",function(e){r.val("")}),frappe.search.utils.setup_recent()},add_help:function(){this.options.push({value:__("Help on Search"),index:-10,default:"Help",onclick:function(){var e='<table class="table table-bordered">\t\t\t\t\t<tr><td style="width: 50%">'+__("Make a new record")+"</td><td>"+__("new type of document")+"</td></tr>\t\t\t\t\t<tr><td>"+__("List a document type")+"</td><td>"+__("document type..., e.g. customer")+"</td></tr>\t\t\t\t\t<tr><td>"+__("Search in a document type")+"</td><td>"+__("text in document type")+"</td></tr>\t\t\t\t\t<tr><td>"+__("Open a module or tool")+"</td><td>"+__("module name...")+"</td></tr>\t\t\t\t\t<tr><td>"+__("Calculate")+"</td><td>"+__("e.g. (55 + 434) / 4 or =Math.sin(Math.PI/2)...")+"</td></tr>\t\t\t\t</table>";frappe.msgprint(e,__("Search Help"))}})},set_specifics:function(e,t){var r=this;this.build_options(e).forEach(function(e){e.type&&0===e.type.toLowerCase().indexOf(t.toLowerCase())&&r.options.push(e)})},add_defaults:function(e){this.make_global_search(e),this.make_search_in_current(e),this.make_calculator(e)},build_options:function(e){var t=frappe.search.utils.get_creatables(e).concat(frappe.search.utils.get_search_in_list(e),frappe.search.utils.get_doctypes(e),frappe.search.utils.get_reports(e),frappe.search.utils.get_pages(e),frappe.search.utils.get_modules(e),frappe.search.utils.get_recent_pages(e||""));return this.deduplicate(t).sort(function(e,t){return t.index-e.index})},deduplicate:function(e){var t=[],r=[];return e.forEach(function(e){if(e.route){"List"===e.route[0]&&"Report"!==e.route[2]&&e.route.splice(2);var a="string"==typeof e.route?e.route:e.route.join("/");if(-1===r.indexOf(a))t.push(e),r.push(a);else{var n=r.indexOf(a);t[n].index<e.index&&!e.recent&&(t[n]=e)}}else t.push(e),r.push("")}),t},set_global_results:function(e,t){this.global_results=this.global_results.concat(e)},make_global_search:function(e){this.options.push({label:__("Search for '{0}'",[e.bold()]),value:__("Search for '{0}'",[e]),match:e,index:100,default:"Search",onclick:function(){frappe.searchdialog.search.init_search(e,"global_search")}})},make_search_in_current:function(e){var t=frappe.get_route();if("List"===t[0]&&-1===e.indexOf(" in")){var r={};r[frappe.get_meta(frappe.container.page.list_view.doctype).title_field||"name"]=["like","%"+e+"%"],this.options.push({label:__("Find {0} in {1}",[e.bold(),__(t[1]).bold()]),value:__("Find {0} in {1}",[e,__(t[1])]),route_options:r,onclick:function(){cur_list.refresh()},index:90,default:"Current",match:e})}},make_calculator:function(txt){var first=txt.substr(0,1);if(first==parseInt(first)||"("===first||"="===first){"="===first&&(txt=txt.substr(1));try{var val=eval(txt),formatted_value=__("{0} = {1}",[txt,(val+"").bold()]);this.options.push({label:formatted_value,value:__("{0} = {1}",[txt,val]),match:val,index:80,default:"Calculator",onclick:function(){frappe.msgprint(formatted_value,"Result")}})}catch(e){}}}}),frappe.provide("frappe.search"),frappe.search.SearchDialog=Class.extend({init:function(e){$.extend(this,e),this.make()},make:function(){var e=new frappe.ui.Dialog;$(e.header).html($(frappe.render_template("search_header"))),this.search_dialog=e,this.$search_modal=$(e.$wrapper).addClass("search-dialog"),this.$modal_body=$(e.body),this.$input=this.$search_modal.find(".search-input"),this.setup()},setup:function(){this.modal_state=0,this.current_keyword="",this.more_count=20,this.full_lists={},this.nav_lists={},this.bind_input(),this.bind_events()},update:function(e){this.$search_modal.find(".loading-state").addClass("hide"),this.$modal_body.append(e),this.$modal_body.find(".search-results").length>1?(this.$modal_body.find(".search-results").first().addClass("hide"),e.removeClass("hide"),this.$modal_body.find(".search-results").first().remove()):e.removeClass("hide")},put_placeholder:function(e){var t=$('<div class="row search-results hide"><div class="empty-state"><span style="margin-top: -100px"><i class="mega-octicon octicon-telescope status-icon"><i class="fa fa-square cover twinkle-one hide" style="left:0px;"></i><i class="fa fa-square cover twinkle-two hide" style="left:8px; top:5px;"></i><i class="fa fa-square cover twinkle-three hide" style="left:13px; top:-3px;"></i></i><p>'+e+"</p></span></div></div>");this.update(t)},bind_input:function(){var e=this;this.$input.on("input",function(){var t=$(this);clearTimeout(t.data("timeout")),t.data("timeout",setTimeout(function(){if(e.$input.val()!==e.current_keyword){var t=e.$input.val();t.length>1?e.get_results(t):(e.current_keyword="",e.put_placeholder(e.search.empty_state_text))}},300))})},bind_events:function(){var e=this;this.$modal_body.on("click",".list-link",function(){var t=$(this);e.$modal_body.find(".search-sidebar").find(".list-link").removeClass("active select"),t.addClass("active select");var r=t.attr("data-category");e.$modal_body.find(".results-area").empty().html(e.full_lists[r]),e.$modal_body.find(".module-section-link").first().focus(),e.current_type=r}),this.$modal_body.on("click",".section-more",function(){var t=$(this).attr("data-category");e.$modal_body.find(".search-sidebar").find('*[data-category="'+t+'"]').trigger("click")}),this.$modal_body.on("click",".all-results-link",function(){e.$modal_body.find(".search-sidebar").find('*[data-category="All Results"]').trigger("click")}),this.$modal_body.on("click",".list-more",function(){var t=$(this).attr("data-category"),r=$(this).attr("data-search"),a=e.$modal_body.find(".result").length;if("Global"===r)frappe.search.utils.get_global_results(e.current_keyword,a,e.more_count,t).then(function(t){e.add_more_results(t)},function(e){console.error(e)});else{var n=e.nav_lists[t].slice(0,e.more_count);e.nav_lists[t].splice(0,e.more_count),e.add_more_results([{title:t,results:n}])}}),this.$modal_body.on("click",".switch-to-global-search",function(){e.search=e.searches.global_search,e.$input.attr("placeholder",e.search.input_placeholder),e.put_placeholder(e.search.empty_state_text),e.get_results(e.current_keyword)}),this.$modal_body.on("click","a[data-path]",frappe.help.show_results),this.bind_keyboard_events()},bind_keyboard_events:function(){var e=this;this.$search_modal.on("keydown",function(t){if(e.$modal_body.find(".list-link").length>1&&0===e.modal_state){var r=frappe.ui.keyCode,a=r.UP_ARROW,n=r.DOWN_ARROW,i=r.TAB;if(t.which===n||t.which===i)t.preventDefault(),(o=e.$modal_body.find(".list-link.select").next()).length>0&&o.trigger("click");else if(t.which===a){var o;t.preventDefault(),(o=e.$modal_body.find(".list-link.select").prev()).length>0&&o.trigger("click")}}e.$input.is(":focus")||e.$input.focus()})},init_search:function(e,t){var r=this;this.search=this.searches[t],this.$input.attr("placeholder",this.search.input_placeholder),this.put_placeholder(this.search.empty_state_text),this.get_results(e),this.search_dialog.show(),this.$input.val(e),setTimeout(function(){r.$input.select()},500)},get_results:function(e){this.current_keyword=e,this.$modal_body.find(".empty-state").length>0?(this.put_placeholder(__("Searching ...")),this.$modal_body.find(".cover").removeClass("hide")):this.$search_modal.find(".loading-state").removeClass("hide"),this.search.get_results(e,this.parse_results.bind(this))},parse_results:function(e,t){(e=e.filter(function(e){return e.results.length>0})).length>0?this.render_data(e):this.put_placeholder(this.search.no_results_status(t))},render_data:function(e){var t=this,r=$(frappe.render_template("search")).addClass("hide"),a=r.find(".search-sidebar").empty(),n='<li class="module-sidebar-item list-link" data-category="{0}"><a><span class="ellipsis">{0}</span><i class="octicon octicon-chevron-right"></a></li>';this.modal_state=0,this.full_lists={"All Results":$('<div class="module-body results-summary"></div>')},this.nav_lists={},e.forEach(function(e){a.append($(__(n,[e.title]))),t.add_section_to_summary(e.title,e.results),t.full_lists[e.title]=t.render_full_list(e.title,e.results,e.fetch_type)}),e.length>1&&a.prepend($(__(n,["All Results"]))),this.update(r.clone()),this.$modal_body.find(".list-link").first().trigger("click")},render_full_list:function(e,t,r){for(var a=$(' <div class="module-body"><div class="row module-section full-list '+e+'-section"><div class="col-sm-12 module-section-column"><div class="back-link"><a class="all-results-link small"> All Results</a></div><div class="h4 section-head">'+e+'</div><div class="section-body"></div></div></div></div>'),n=a.find(".module-section-column"),i=0;i<20&&t.length>0;i++)n.append(this.render_result(e,t.shift()));return t.length>0&&("Nav"===r&&(this.nav_lists[e]=t),n.append('<a class="list-more small" data-search="'+r+'" data-category="'+e+'" data-count="20" style="margin-top:10px">'+__("More...")+"</a>")),a},add_section_to_summary:function(e,t){for(var r=this,a=!1,n="10px",i=0;i<t.length;i++)if(t[i].description){a=!0;break}t[0].image&&(n="20px");var o=a?[3,"12"]:[4,"6"],s=o[0],l=o[1];(1!==this.full_lists["All Results"].find(".module-section").last().find(".col-sm-6").length||a)&&this.full_lists["All Results"].append($('<div class="row module-section"></div>'));var p=$('<div class="col-sm-'+l+' module-section-column" data-type="'+e+'">\n\t\t\t<div class="h4 section-head">'+e+'</div>\n\t\t\t<div class="section-body"></div>\n\t\t\t</div>');t.slice(0,s).forEach(function(t){p.append(r.render_result(e,t))}),t.length>s&&p.append('<div style="margin-top:'+n+'"><a class="section-more small"\n\t\t\t\tdata-category="'+e+'">'+__("More...")+"</a></div>"),this.full_lists["All Results"].find(".module-section").last().append(p)},render_result:function(e,t){var r=this,a=$('<div class="result '+e+'-result"></div>');t.image?a.append('<div class="result-image"><img data-name="'+t.label+'" src="'+t.image+'" alt="'+t.label+'"></div>'):null===t.image&&a.append('<div class="result-image"><div class="flex-text"><span>'+frappe.get_abbr(t.label)+"</span></div></div>");var n="<a "+function(e){return e.route?'href="#'+e.route.join("/")+'" ':e.data_path?'data-path="'+e.data_path+'"':""}(t)+' class="module-section-link small">'+t.label+"</a>",i=$('<div style="display: inline-block;"></div>');return t.description?(i.append($("<b>"+n+"</b>")),i.append('<p class="small">'+t.description+"</p>")):(i.append($(n)),t.route_options&&(frappe.route_options=t.route_options),i.on("click",function(e){if(r.search_dialog.hide(),t.onclick)t.onclick(t.match);else{var a=window.location.hash;frappe.set_route(t.route),window.location.hash==a&&frappe.route()}})),a.append(i),t.subtypes&&t.subtypes.forEach(function(e){a.append(e)}),a},add_more_results:function(e){var t=this,r=$('<div class="more-results last"></div>');if(e[0].results.forEach(function(a){r.append(t.render_result(e[0].title,a))}),this.$modal_body.find(".list-more").before(r),e[0].results.length<this.more_count){this.$modal_body.find(".list-more").hide();var a=this.$modal_body.find(".result").length,n=$('<p class="results-status text-muted small">'+a+" results found</p>");this.$modal_body.find(".more-results:last").append(n)}this.$modal_body.find(".more-results.last").slideDown(200,function(){})},searches:{global_search:{input_placeholder:__("Global Search"),empty_state_text:__("Search for anything"),no_results_status:function(e){return __("<p>No results found for '"+e+"' in Global Search</p>")},get_results:function(e,t){var r=frappe.search.utils.get_nav_results(e);frappe.search.utils.get_global_results(e,0,100).then(function(t){return r=r.concat(t),frappe.search.utils.get_help_results(e)}).then(function(a){r=r.concat(a),t(r,e)},function(e){console.error(e)})}},help:{input_placeholder:__("Search Help"),empty_state_text:__("Search the docs"),no_results_status:function(e){return __("<p>No results found for '"+e+"' in Help</p><p>Would you like to search <a class='switch-to-global-search text-muted' style='text-decoration: underline;'>globally</a> or the <a href='https://discuss.erpnext.com' class='forum-link text-muted' style='text-decoration: underline;'>forums</a> instead?</p>")},get_results:function(e,t){var r=[];frappe.search.utils.get_help_results(e).then(function(a){r=r.concat(a),t(r,e)},function(e){console.error(e)})}}}}),frappe.templates.search='<div class="row search-results">     <div class="col-md-2 col-sm-2 hidden-xs layout-side-section">         <ul class="module-sidebar-nav overlay-sidebar nav nav-pills nav-stacked search-sidebar"></ul>     </div>     <div class="col-md-10 col-sm-10 layout-main-section results-area"></div> </div>',frappe.templates.search_header='<div class="search-header">     <i class="octicon octicon-search"></i>     <input type="text" class="form-control search-input" style="padding-left: 15px">     <p class="loading-state hide" style="margin: 0px 20px; color:#d4d9dd">{%= __("Searching")%}&nbsp...</p>     <a type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a> </div>',frappe.provide("frappe.search"),frappe.search.utils={setup_recent:function(){this.recent=JSON.parse(frappe.boot.user.recent||"[]")||[]},get_recent_pages:function(e){var t=[],r=[];return this.recent.forEach(function(e,r){t.push([e[1],["Form",e[0],e[1]]])}),t=t.reverse(),frappe.route_history.forEach(function(e,r){"Form"===e[0]?t.push([e[2],e]):["List","Tree","modules","query-report"].includes(e[0])||"Report"===e[2]?e[1]&&t.push([e[1],e]):e[0]&&t.push([frappe.route_titles[e[0]]||e[0],e])}),function(e,t,a){e.forEach(function(e,n){var i=$.isArray(e)?e[0]:e;if(i=__(i||"").toLowerCase().replace(/-/g," "),t===i||-1!==i.indexOf(t)){var o=a(e);o&&($.isPlainObject(o)&&(o=[o]),o.forEach(function(t){t.match=e,t.recent=!0}),r=o.concat(r))}})}(t,e,function(e){var t={route:e[1]};if("Form"===e[1][0])e[1].length>2&&e[1][1]!==e[1][2]?(t.label=__(e[1][1])+" "+e[1][2].bold(),t.value=__(e[1][1])+" "+e[1][2]):(t.label=__(e[1][1]).bold(),t.value=__(e[1][1]));else if(["List","Tree","modules","query-report"].includes(e[1][0])&&e[1].length>1){var r=e[1][0],a=r;"modules"===r?a="Module":"query-report"!==r&&"Report"!==e[1][2]||(a="Report"),t.label=__(e[1][1]).bold()+" "+__(a),t.value=__(e[1][1])+" "+__(a)}else e[0]?(t.label=e[0].bold(),t.value=e[0]):console.log("Illegal match",e);return t.index=80,t}),r},get_search_in_list:function(e){var t=this,r=[];if(in_list(e.split(" "),"in")&&"in"!==e.slice(-2)){var a=e.split(" in ");frappe.boot.user.can_read.forEach(function(e){if(frappe.boot.user.can_search.includes(e)){var n=t.fuzzy_search(a[1],e);n&&r.push({type:"In List",label:__("Find {0} in {1}",[__(a[0]),t.bolden_match_part(__(e),a[1])]),value:__("Find {0} in {1}",[__(a[0]),__(e)]),route_options:{name:["like","%"+a[0]+"%"]},index:1+n,route:["List",e]})}})}return r},get_creatables:function(e){var t=this,r=[];return e.split(" ")[0].toLowerCase()===__("new")&&frappe.boot.user.can_create.forEach(function(a){var n=t.fuzzy_search(e.substr(4),a);n&&r.push({type:"New",label:__("New {0}",[t.bolden_match_part(__(a),e.substr(4))]),value:__("New {0}",[__(a)]),index:1+n,match:a,onclick:function(){frappe.new_doc(a,!0)}})}),r},get_doctypes:function(e){var t,r,a=this,n=[],i=function(n,i,o){return{type:n,label:a.bolden_match_part(__(r),e)+" "+__(n),value:__(r+" "+n),index:t+o,match:r,route:i}};return frappe.boot.user.can_read.forEach(function(o){if(t=a.fuzzy_search(e,o))if(r=o,in_list(frappe.boot.single_types,o))n.push(i("",["Form",o,o],.05));else if(frappe.boot.user.can_search.includes(o)){if(in_list(frappe.boot.user.can_create,o)){var s=o;n.push({type:"New",label:__("New {0}",[a.bolden_match_part(__(o),e)]),value:__("New {0}",[__(o)]),index:t+.015,match:o,onclick:function(){frappe.new_doc(s,!0)}})}in_list(frappe.boot.treeviews,o)?n.push(i("Tree",["Tree",o],.05)):(n.push(i("List",["List",o],.05)),frappe.model.can_get_report(o)&&n.push(i("Report",["List",o,"Report"],.04)))}}),n},get_reports:function(e){var t,r=this,a=[];return Object.keys(frappe.boot.user.all_reports).forEach(function(n){var i=r.fuzzy_search(e,n);if(i>0){var o=frappe.boot.user.all_reports[n];t="Report Builder"==o.report_type?[o.ref_doctype,n,"Report"]:["query-report",n],a.push({type:"Report",label:__("Report {0}",[r.bolden_match_part(__(n),e)]),value:__("Report {0}",[__(n)]),index:i,route:t})}}),a},get_pages:function(e){var t=this,r=[];this.pages={},$.each(frappe.boot.page_info,function(e,r){t.pages[r.title]=r,r.name=e}),Object.keys(this.pages).forEach(function(a){if("Hub"!=a){var n=t.fuzzy_search(e,a);if(n){var i=t.pages[a];r.push({type:"Page",label:__("Open {0}",[t.bolden_match_part(__(a),e)]),value:__("Open {0}",[__(a)]),match:a,index:n,route:[i.route||i.name]})}}});var a="Calendar";return 0===__("calendar").indexOf(e.toLowerCase())&&r.push({type:"Calendar",value:__("Open {0}",[__(a)]),index:t.fuzzy_search(e,"Calendar"),match:a,route:["List","Event",a]}),a="Hub",0===__("hub").indexOf(e.toLowerCase())&&r.push({type:"Hub",value:__("Open {0}",[__(a)]),index:t.fuzzy_search(e,"Hub"),match:a,route:[a,"Item"]}),0===__("email inbox").indexOf(e.toLowerCase())&&r.push({type:"Inbox",value:__("Open {0}",[__("Email Inbox")]),index:t.fuzzy_search(e,"email inbox"),match:a,route:["List","Communication","Inbox"]}),r},get_modules:function(e){var t=this,r=[];return Object.keys(frappe.modules).forEach(function(a){var n=t.fuzzy_search(e,a);if(n>0){var i=frappe.modules[a];if(i._doctype)return;if(frappe.boot.user.allow_modules&&!frappe.boot.user.allow_modules.includes(i.module_name))return;var o={type:"Module",label:__("Open {0}",[t.bolden_match_part(__(a),e)]),value:__("Open {0}",[__(a)]),index:n};i.link?o.route=[i.link]:o.route=["Module",a],r.push(o)}}),r},get_global_results:function(e,t,r,a){void 0===a&&(a="");var n=this;function i(t){var r,a,i=[];return t.forEach(function(t){var o;r={label:t.name,value:t.name,description:function(t,r){for(var a=t.split(" ||| "),i=[],o=0,s="",l=0;l<a.length;l++){var p=a[l];if(-1!==p.toLowerCase().indexOf(e)){if(-1!==p.indexOf(" &&& "))var c=p.indexOf(" &&& "),d=p.slice(c+5);else c=p.indexOf(" : "),d=p.slice(c+3);if(d.length>120){var u="",f=d.indexOf(e);u+=f<60?d.slice(0,f):"..."+d.slice(f-60,f),u+=d.slice(f,f+60),d=u+=f+60<d.length?"...":""}var g=p.slice(0,c),_=300-o;if(!((o+=g.length+d.length+2)<300)){g.length<_?(_-=g.length,s='<span class="field-name text-muted">'+n.bolden_match_part(g,e)+": </span> ",d=(d=d.slice(0,_)).slice(0,d.lastIndexOf(" "))+" ...",s+=n.bolden_match_part(d,e),i.push(s)):i.push("...");break}s='<span class="field-name text-muted">'+n.bolden_match_part(g,e)+": </span> "+n.bolden_match_part(d,e),-1===i.indexOf(s)&&r!==d&&i.push(s)}}return i.join(", ")}(t.content,t.name),route:["Form",t.doctype,t.name]},(t.image||null===t.image)&&(r.image=t.image),o=t.doctype,(a=i.find(function(e){return e.title===o}))?a.results.push(r):(a={title:t.doctype,results:[r],fetch_type:"Global"},i.push(a))}),i}return new Promise(function(n,o){frappe.call({method:"frappe.utils.global_search.search",args:{text:e,start:t,limit:r,doctype:a},callback:function(e){e.message?n(i(e.message)):n([])}})})},get_help_results:function(e){return new Promise(function(t,r){frappe.call({method:"frappe.utils.help.get_help",args:{text:e},callback:function(e){var r,a,n;e.message?t((r=e.message,n={title:"Help",fetch_type:"Help",results:[]},r.forEach(function(e){a={label:e[0],value:e[0],description:e[1],data_path:e[2],onclick:function(){}},n.results.push(a)}),[n])):t([])}})})},get_nav_results:function(e){function t(e){var t=[],r=[];return e.forEach(function(e){if(e.route){"List"===e.route[0]&&e.route[2]&&e.route.splice(2);var a=e.route.join("/");if(-1===t.indexOf(a))t.push(a),r.push(e);else{var n=t.indexOf(a);r[n].index>e.index&&(r[n]=e)}}else r.push(e)}),r.sort(function(e,t){return t.index-e.index})}var r=[],a=[];t(this.get_doctypes(e)).forEach(function(e){""===e.type?a.push(e):r.push(e)});var n=e.split(" in ")[0];return[{title:"Recents",fetch_type:"Nav",results:t(this.get_recent_pages(e))},{title:"Create a new ...",fetch_type:"Nav",results:t(this.get_creatables(e))},{title:"Find '"+n+"' in ... ",fetch_type:"Nav",results:t(this.get_search_in_list(e))},{title:"Lists",fetch_type:"Nav",results:r},{title:"Reports",fetch_type:"Nav",results:t(this.get_reports(e))},{title:"Administration",fetch_type:"Nav",results:t(this.get_pages(e))},{title:"Modules",fetch_type:"Nav",results:t(this.get_modules(e))},{title:"Setup",fetch_type:"Nav",results:a}]},fuzzy_search:function(e,t){e=e||"";var r=__(t||"").replace(/-/g," "),a=r.length,n=e.length,i=n/a;if(n>a)return 0;if(e===r||0===r.toLowerCase().indexOf(e))return 10+i;if(-1!==r.indexOf(e)&&e!==e.toLowerCase())return 9+i;if(r=r.toLowerCase(),e=e.toLowerCase(),-1!==r.indexOf(e))return 8+i;var o=0,s=0;e:for(var l=0,p=0;l<n;l++){if(0!==s&&o++,o>3)return 0;var c=e.charCodeAt(l);for(s=0;p<a;){if(r.charCodeAt(p++)===c)continue e;if(++s>2)return 0}return 0}return o+s>0?(5+i)/(o+s):0},bolden_match_part:function(e,t){var r="";if(0===this.fuzzy_search(t,e))return e;if(this.fuzzy_search(t,e)>6){var a=new RegExp("("+t+")","ig");return e.replace(a,"<b>$1</b>")}var n=e,i=(e=e.toLowerCase()).length;t=t.toLowerCase();e:for(var o=0,s=0;o<t.length;o++){for(var l=t.charCodeAt(o);s<i;){if(e.charCodeAt(s)===l){var p=n.charAt(s);p===p.toLowerCase()?r+="<b>"+t.charAt(o)+"</b>":r+="<b>"+t.charAt(o).toUpperCase()+"</b>",s++;continue e}r+=n.charAt(s),s++}return n}return r+=n.slice(s)}},frappe.provide("frappe.ui.misc"),frappe.ui.misc.about=function(){if(!frappe.ui.misc.about_dialog){var e=new frappe.ui.Dialog({title:__("Frappe Framework")});$(e.body).html(repl("<div>\t\t<p>"+__("Open Source Applications for the Web")+"</p>  \t\t<p><i class='fa fa-globe fa-fw'></i>\t\t\tWebsite: <a href='https://frappe.io' target='_blank'>https://frappe.io</a></p>\t\t<p><i class='fa fa-github fa-fw'></i>\t\t\tSource: <a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>\t\t<hr>\t\t<h4>Installed Apps</h4>\t\t<div id='about-app-versions'>Loading versions...</div>\t\t<hr>\t\t<p class='text-muted'>&copy; Frappe Technologies Pvt. Ltd and contributors </p> \t\t</div>",frappe.app)),frappe.ui.misc.about_dialog=e,frappe.ui.misc.about_dialog.on_page_show=function(){frappe.versions||frappe.call({method:"frappe.utils.change_log.get_versions",callback:function(e){t(e.message)}})};var t=function(e){var t=$("#about-app-versions").empty();$.each(Object.keys(e).sort(),function(r,a){var n=e[a];if(n.branch)var i=$.format("<p><b>{0}:</b> v{1} ({2})<br></p>",[n.title,n.branch_version||n.version,n.branch]);else i=$.format("<p><b>{0}:</b> v{1}<br></p>",[n.title,n.version]);$(i).appendTo(t)}),frappe.versions=e}}frappe.ui.misc.about_dialog.show()},frappe.templates.navbar='<div class="navbar navbar-default navbar-fixed-top" role="navigation">  <div class="container">   <div class="navbar-header navbar-desk">    <a class="navbar-brand toggle-sidebar visible-xs visible-sm">     <i class="octicon octicon-three-bars"></i>    </a>    <a class="navbar-brand navbar-home hidden-xs hidden-sm" href="#">Home</a>    <ul class="nav navbar-nav" id="navbar-breadcrumbs">    </ul>   </div>   <div class="navbar-center ellipsis" style="display: none;"></div>    <ul class="nav navbar-nav navbar-right">    <li class="user-progress hide" title="Your Setup Progress">     <a class="dropdown-toggle" data-toggle="dropdown" href="#" onclick="return false;"  style="height: 40px;">      <div class="progress-chart" style"width: 50px; margin-top: 8px;"><div class="progress">       <div class="progress-bar"></div>      </div></div>     </a>    </li>    <li class="visible-xs">     <a class="navbar-search-button" href="#" data-toggle="modal" data-target="#search-modal"><i class="octicon octicon-search"></i></a>    </li>    <li class="dropdown dropdown-navbar-user dropdown-mobile">     <a class="dropdown-toggle" data-toggle="dropdown" href="#"      onclick="return false;">     {{ avatar }}                 <span class="ellipsis toolbar-user-fullname hidden-xs hidden-sm">      {%= frappe.user.full_name() %}</span>                 <b class="caret hidden-xs hidden-sm"></b></a>     <ul class="dropdown-menu" id="toolbar-user" role="menu">      <li class="navbar-set-desktop-icons"><a>          {%= __("Set Desktop Icons") %}</a></li>      <li><a href="#Form/User/{%= encodeURIComponent(frappe.session.user) %}">          {%= __("My Settings") %}</a></li>      <li><a href="#" onclick="return frappe.ui.toolbar.clear_cache();">          {%= __("Reload") %}</a></li>      <li><a href="/index" target="_blank" rel="noopener noreferrer">       {%= __("View Website") %}</a></li>      <li><a href="#background_jobs">       {%= __("Background Jobs") %}</a></li>      <li class="divider"></li>      <li><a href="#" onclick="return frappe.app.logout();">       {%= __("Logout") %}</a></li>     </ul>    </li>     <li class="dropdown dropdown-help dropdown-mobile">     <a class="dropdown-toggle" data-toggle="dropdown" href="#"      onclick="return false;"  style="height: 40px;">      <span class="hidden-xs hidden-sm" style="line-height: 24px;">{{ __("Help") }} <b class="caret"></b></span>      <span class="visible-xs visible-sm standard-image"       style="padding: 50% 7px; font-size: 17px; background-color: #fafbfc; font-weight: 100;">?</span>     </a>     <ul class="dropdown-menu" role="menu">      <div class="input-group" style="border-bottom: 1px solid #d1d8dd;">       <input id="input-help" type="text" placeholder="{{ __("What do you need help with?") }}" autofocus>       <span class="input-group-btn"><button class="btn btn-default">{{ __("Go") }}</button></span>      </div>      <li id="help-links"></li>      <li class="divider"></li>      <li>       <a data-link-type="documentation"        data-path="/documentation/index" target="_blank" rel="noopener noreferrer">{{ __("Documentation") }}</a>      </li>      <li class="divider documentation-links"></li>      <li><a href="#" onclick="return frappe.ui.toolbar.show_about();">       {%= __("About") %}</a></li>     </ul>    </li>             <li class="frappe-chat-dropdown"></li>         <li class="dropdown dropdown-navbar-new-comments dropdown-mobile">     <a class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">      <span class="navbar-new-comments">0</span>     </a>     <ul class="dropdown-menu" id="dropdown-notification" role="menu" style="max-height: 480px; overflow-y: auto;">     </ul>    </li>   </ul>    <div id="search-modal" class="modal fade" role="dialog">    <div class="modal-dialog" style="height: 50px;">     <div class="modal-content">      <div class="modal-header">       <form role="search" onsubmit="return false;">        <div class="input-group" style="width: 100%">         <input id="modal-search" type="text" class="form-control"         placeholder="{%= __("Search or type a command") %}" aria-haspopup="true">         <button type="reset" class="close"><i class="octicon octicon-x"></i></button>        </div>       </form>      </div>     </div>    </div>   </div>    <div class="hidden-xs">          <form class="navbar-form navbar-right" role="search" onsubmit="return false;">            <div class="form-group form-group-sm ui-front">              <input id="navbar-search" type="text" class="form-control"      placeholder="{%= __("Search or type a command") %} {%= __("(Ctrl + G)") %}" aria-haspopup="true">     <span class="octicon octicon-search navbar-search-icon"></span>            </div>          </form>   </div>  </div> </div> ',frappe.provide("frappe.ui.toolbar"),frappe.provide("frappe.search"),frappe.ui.toolbar.Toolbar=Class.extend({init:function(){$("header").append(frappe.render_template("navbar",{avatar:frappe.avatar(frappe.session.user)})),$(".dropdown-toggle").dropdown();var e=new frappe.search.AwesomeBar;e.setup("#navbar-search"),e.setup("#modal-search"),this.make()},make:function(){this.setup_sidebar(),this.setup_help(),this.setup_modules_dialog(),this.setup_progress_dialog(),this.bind_events(),$(document).trigger("toolbar_setup")},setup_modules_dialog:function(){var e=this;this.modules_select=new frappe.ui.toolbar.ModulesSelect,$(".navbar-set-desktop-icons").on("click",function(){e.modules_select.show()})},bind_events:function(){$(document).on("notification-update",function(){frappe.ui.notifications.update_notifications()}),$(document).on("page-change",function(){$("header .navbar .custom-menu").remove()}),$("#search-modal").on("shown.bs.modal",function(){var e=$(this);setTimeout(function(){e.find("#modal-search").focus()},300)})},setup_sidebar:function(){$("header").find(".toggle-sidebar").on("click",function(){var e=$(".layout-side-section"),t=e.find(".overlay-sidebar");t.addClass("opened"),t.find(".reports-dropdown").removeClass("dropdown-menu").addClass("list-unstyled"),t.find(".dropdown-toggle").addClass("text-muted").find(".caret").addClass("hidden-xs hidden-sm"),$('<div class="close-sidebar">').hide().appendTo(e).fadeIn();var r=$("html");function a(a){r.css("overflow-y",""),e.find("div.close-sidebar").fadeOut(function(){t.removeClass("opened").find(".dropdown-toggle").removeClass("text-muted"),t.find(".reports-dropdown").addClass("dropdown-menu")})}r.css("overflow-y","hidden"),e.find(".close-sidebar").on("click",a),e.on("click","a",a)})},setup_help:function(){frappe.provide("frappe.help"),frappe.help.show_results=a,this.search=new frappe.search.SearchDialog,frappe.provide("frappe.searchdialog"),frappe.searchdialog.search=this.search,$(".dropdown-help .dropdown-toggle").on("click",function(){$(".dropdown-help input").focus()}),$(".dropdown-help .dropdown-menu").on("click","input, button",function(e){e.stopPropagation()}),$("#input-help").on("keydown",function(e){13==e.which&&(r($(this).val()),$(this).val(""))}),$("#input-help + span").on("click",function(){r($("#input-help").val()),$(this).val("")}),$(document).on("page-change",function(){var e=$(".dropdown-help #help-links");e.html("");for(var t=frappe.get_route_str(),r=t.split("/"),n=[],i=0;i<r.length;i++){var o=t.split("/",i+1).join("/"),s=frappe.help.help_links[o]||[];n=$.merge(n,s)}0===n.length?e.next().hide():e.next().show();for(i=0;i<n.length;i++){var l=n[i],p=l.url,c=p.split("//",2)[1].split("/",2)[1],d=p.slice(p.indexOf("/user"));d.lastIndexOf(".")&&(d=d.slice(0,d.lastIndexOf("."))),d=d.replace("user",c),$("<a>",{href:l.url,text:l.label,target:"_blank","data-path":d}).appendTo(e)}$(".dropdown-help .dropdown-menu").on("click","a",a)});var e=frappe.get_modal("","");e.addClass("help-modal"),$(document).on("click",".help-modal a",a);var t=this;function r(e){t.search.init_search(e,"help")}function a(t){var r=t.target.href;r.indexOf("blob")>0&&window.open(r,"_blank");var a=$(t.target).attr("data-path");a&&(t.preventDefault(),frappe.call({method:"frappe.utils.help.get_help_content",args:{path:a},callback:function(t){t.message&&t.message.title&&(e.find(".modal-title").html("<span>"+t.message.title+"</span>"),e.find(".modal-body").html(t.message.content),e.modal("show"))}}))}},setup_progress_dialog:function(){var e=this;frappe.call({method:"frappe.desk.user_progress.get_user_progress_slides",callback:function(t){if(t.message){var r=t.message;r.length&&r.map(function(e){return parseInt(e.done)}).includes(0)&&frappe.require("assets/frappe/js/frappe/ui/toolbar/user_progress_dialog.js",function(){e.progress_dialog=new frappe.setup.UserProgressDialog({slides:r}),$(".user-progress").removeClass("hide"),$(".user-progress .dropdown-toggle").on("click",function(){e.progress_dialog.show()}),cint(frappe.boot.sysdefaults.is_first_startup)&&(e.progress_dialog.show(),frappe.call({method:"frappe.desk.page.setup_wizard.setup_wizard.reset_is_first_startup",args:{},callback:function(){}}))})}},freeze:!1})}}),$.extend(frappe.ui.toolbar,{add_dropdown_button:function(e,t,r,a){var n=frappe.ui.toolbar.get_menu(e);return n.find("li:not(.custom-menu)").length&&!n.find(".divider").length&&frappe.ui.toolbar.add_menu_divider(n),$('<li class="custom-menu"><a><i class="fa-fw '+a+'"></i> '+t+"</a></li>").insertBefore(n.find(".divider")).find("a").click(function(){r.apply(this)})},get_menu:function(e){return $("#navbar-"+e.toLowerCase())},add_menu_divider:function(e){e="string"==typeof e?frappe.ui.toolbar.get_menu(e):e,$('<li class="divider custom-menu"></li>').prependTo(e)}}),frappe.ui.toolbar.clear_cache=function(){return frappe.assets.clear_local_storage(),frappe.call({method:"frappe.sessions.clear",callback:function(e){e.exc||(frappe.show_alert({message:e.message,indicator:"green"}),location.reload(!0))}}),!1},frappe.ui.toolbar.download_backup=function(){return frappe.msgprint(__("Your download is being built, this may take a few moments...")),$c("frappe.utils.backups.get_backup",{},function(e,t){}),!1},frappe.ui.toolbar.show_about=function(){try{frappe.ui.misc.about()}catch(e){console.log(e)}return!1},frappe.provide("frappe.ui.toolbar"),frappe.ui.toolbar.ModulesSelect=function(){function e(){this.user=frappe.boot.user.name,this.setup()}return e.prototype.setup=function(){var e=this;this.dialog=new frappe.ui.Dialog({title:__("Set Desktop Icons"),fields:[{label:__("Setup for"),fieldname:"setup_for",fieldtype:"Select",options:[{label:__("User"),value:"user"},{label:__("Everyone"),value:"everyone"}],default:"user",onchange:function(){var t=e.$setup_for;"everyone"===t.get_value()?(e.$user.$wrapper.hide(),e.user=void 0,t.set_description(__("Limit icon choices for all users."))):(e.$user.$wrapper.show(),e.user=e.$user.get_value(),t.set_description("")),e.$icons_list.refresh()}},{fieldtype:"Column Break"},{label:__("User"),fieldname:"user",fieldtype:"Link",options:"User",default:frappe.boot.user.name,onchange:function(){e.user=e.get_value()||frappe.boot.user.name,e.$icons_list.refresh()}},{fieldtype:"Section Break"},{fieldname:"icons",fieldtype:"MultiCheck",select_all:1,columns:2,get_data:function(){return new Promise(function(t){frappe.call({method:"frappe.desk.doctype.desktop_icon.desktop_icon.get_module_icons",args:{user:e.user},freeze:!0,callback:function(e){var r=e.message.icons,a=e.message.user;t(r.map(function(e){var t=a?e.hidden:e.blocked;return{label:e.value,value:e.module_name,checked:!t}}).sort(function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}))}})})}}]}),this.dialog.set_primary_action(__("Save"),function(){frappe.call({method:"frappe.desk.doctype.desktop_icon.desktop_icon.update_icons",args:{hidden_list:e.$icons_list.get_unchecked_options(),user:e.user},freeze:!0,callback:function(){window.location.href=""}})}),this.$icons_list=this.dialog.fields_dict.icons,this.$setup_for=this.dialog.fields_dict.setup_for,this.$user=this.dialog.fields_dict.user},e.prototype.show=function(e){e&&(this.user=e||frappe.boot.user.name,this.$icons_list.refresh()),this.dialog.show()},e}(),frappe.provide("frappe.ui.notifications"),frappe.ui.notifications={config:{ToDo:{label:__("To Do")},Event:{label:__("Calendar"),route:"List/Event/Calendar"},Email:{label:__("Email"),route:"List/Communication/Inbox"},Likes:{label:__("Likes"),click:function(){frappe.route_options={show_likes:!0},"activity"==frappe.get_route()[0]?frappe.pages.activity.page.list.refresh():frappe.set_route("activity")}}},update_notifications:function(){this.total=0,this.dropdown=$("#dropdown-notification").empty(),this.boot_info=frappe.boot.notification_info;var e=["Comment","ToDo","Event"];this.get_counts(this.boot_info.open_count_doctype,1,e),this.get_counts(this.boot_info.open_count_other,1);var t={doctypes:{}},r=this.boot_info.targets;Object.keys(r).map(function(e){Object.keys(r[e]).map(function(a){t[a]=r[e][a],t.doctypes[a]=e})}),this.get_counts(t,1,null,["doctypes"],!0),this.get_counts(this.boot_info.open_count_doctype,0,null,e),this.bind_list(),$(".navbar-new-comments").html(this.total>99?"99+":this.total).toggleClass("navbar-new-comments-true",!!this.total).parent().toggleClass("disabled",!this.total)},get_counts:function(e,t,r,a,n){var i=this;void 0===a&&(a=[]),void 0===n&&(n=!1);var o=1;(r=r||Object.keys(e).sort().filter(function(e){return!a.includes(e)})).map(function(t){var r=e.doctypes?e.doctypes[t]:void 0;(e[t]>0||n)&&(i.add_notification(t,e[t],r,n),o=0)}),t&&!o&&this.dropdown.append($('<li class="divider"></li>'))},add_notification:function(e,t,r,a){void 0===a&&(a=!1);var n=this.config[e]?this.config[e].label:e,i=a?'title="Your Target"':"",o=a?$('<li><a class="progress-small" '+i+' data-doctype="'+r+'"\n\t\t\t\tdata-doc="'+e+'"><span class="dropdown-item-label">'+__(n)+'<span>\n\t\t\t\t<div class="progress-chart"><div class="progress">\n\t\t\t\t\t<div class="progress-bar" style="width: '+t+'%"></div>\n\t\t\t\t</div></div>\n\t\t\t</a></li>'):$('<li><a class="badge-hover" data-doctype="'+e+'" '+i+">"+__(n)+'\n\t\t\t\t<span class="badge pull-right">'+t+"</span>\n\t\t\t</a></li>");this.dropdown.append(o),a||(this.total+=t)},bind_list:function(){var e=this;$("#dropdown-notification a").on("click",function(){var t=$(this).attr("data-doctype"),r=$(this).attr("data-doc");if(r)frappe.set_route("Form",t,r);else{var a=e.config[t]||{};a.route?frappe.set_route(a.route):a.click?a.click():frappe.ui.notifications.show_open_count_list(t)}})},show_open_count_list:function(e){var t=this.boot_info.conditions[e];t&&$.isPlainObject(t)&&(frappe.route_options||(frappe.route_options={}),$.extend(frappe.route_options,t));var r=frappe.get_route();"List"===r[0]&&r[1]===e&&frappe.set_route("List",e)}},frappe.last_edited_communication={},frappe.standard_replies={},frappe.views.CommunicationComposer=Class.extend({init:function(e){$.extend(this,e),this.make()},make:function(){var e=this;this.dialog=new frappe.ui.Dialog({title:this.title||this.subject||__("New Email"),no_submit_on_enter:!0,fields:this.get_fields(),primary_action_label:__("Send"),primary_action:function(){e.send_action()}}),$(document).on("upload_complete",function(t,r){if(e.dialog.display){var a=$(e.dialog.fields_dict.select_attachments.wrapper),n=a.find("[data-file-name]:checked").map(function(){return $(this).attr("data-file-name")});e.render_attach(),n.push(r.name),$.each(n,function(e,t){a.find('[data-file-name="'+t+'"]').prop("checked",!0)})}}),this.prepare(),this.dialog.show()},get_fields:function(){var e=[{label:__("To"),fieldtype:"Data",reqd:0,fieldname:"recipients",length:524288},{fieldtype:"Section Break",collapsible:1,label:__("CC, BCC & Standard Reply")},{label:__("CC"),fieldtype:"Data",fieldname:"cc",length:524288},{label:__("BCC"),fieldtype:"Data",fieldname:"bcc",length:524288},{label:__("Standard Reply"),fieldtype:"Link",options:"Standard Reply",fieldname:"standard_reply"},{fieldtype:"Section Break"},{label:__("Subject"),fieldtype:"Data",reqd:1,fieldname:"subject",length:524288},{fieldtype:"Section Break"},{label:__("Message"),fieldtype:"Text Editor",reqd:1,fieldname:"content"},{fieldtype:"Section Break"},{fieldtype:"Column Break"},{label:__("Send As Email"),fieldtype:"Check",fieldname:"send_email"},{label:__("Send me a copy"),fieldtype:"Check",fieldname:"send_me_a_copy",default:frappe.boot.user.send_me_a_copy},{label:__("Send Read Receipt"),fieldtype:"Check",fieldname:"send_read_receipt"},{label:__("Communication Medium"),fieldtype:"Select",options:["Phone","Chat","Email","SMS","Visit","Other"],fieldname:"communication_medium"},{label:__("Sent or Received"),fieldtype:"Select",options:["Received","Sent"],fieldname:"sent_or_received"},{label:__("Attach Document Print"),fieldtype:"Check",fieldname:"attach_document_print"},{label:__("Select Print Format"),fieldtype:"Select",fieldname:"select_print_format"},{label:__("Select Languages"),fieldtype:"Select",fieldname:"language_sel"},{fieldtype:"Column Break"},{label:__("Select Attachments"),fieldtype:"HTML",fieldname:"select_attachments"}],t=frappe.boot.email_accounts.filter(function(e,t){return!in_list(["All Accounts","Sent","Spam","Trash"],e.email_account)&&e.enable_outgoing});return frappe.boot.email_accounts&&t.length>1&&(e=[{label:__("From"),fieldtype:"Select",reqd:1,fieldname:"sender",options:t.map(function(e){return e.email_id})}].concat(e)),e},prepare:function(){this.setup_subject_and_recipients(),this.setup_print_language(),this.setup_print(),this.setup_attach(),this.setup_email(),this.setup_awesomplete(),this.setup_last_edited_communication(),this.setup_standard_reply(),this.dialog.fields_dict.recipients.set_value(this.recipients||""),this.dialog.fields_dict.cc.set_value(this.cc||""),this.dialog.fields_dict.bcc.set_value(this.bcc||""),this.dialog.fields_dict.sender&&this.dialog.fields_dict.sender.set_value(this.sender||""),this.dialog.fields_dict.subject.set_value(this.subject||""),this.setup_earlier_reply()},setup_subject_and_recipients:function(){if(this.subject=this.subject||"",this.forward||this.recipients||!this.last_email||(this.recipients=this.last_email.sender,this.cc=this.last_email.cc,this.bcc=this.last_email.bcc),this.forward||this.recipients||(this.recipients=this.frm&&this.frm.timeline.get_recipient()),!this.subject&&this.frm){var e=this.frm.timeline.get_last_email();if(e&&(this.subject=e.subject,this.recipients||(this.recipients=e.sender),"re"!=strip(this.subject.toLowerCase().split(":")[0])&&(this.subject=__("Re: {0}",[this.subject]))),!this.subject)if(this.frm.subject_field&&this.frm.doc[this.frm.subject_field])this.subject=__("Re: {0}",[this.frm.doc[this.frm.subject_field]]);else{var t=this.frm.doc.name;this.frm.meta.title_field&&this.frm.doc[this.frm.meta.title_field]&&this.frm.doc[this.frm.meta.title_field]!=this.frm.doc.name&&(t=this.frm.doc[this.frm.meta.title_field]+" (#"+this.frm.doc.name+")"),this.subject=__(this.frm.doctype)+": "+t}}},setup_standard_reply:function(){var e=this;this.dialog.fields_dict.standard_reply.df.onchange=function(){var t=e.dialog.fields_dict.standard_reply.get_value();frappe.call({method:"frappe.email.doctype.standard_reply.standard_reply.get_standard_reply",args:{template_name:t,doc:e.frm.doc,_lang:e.dialog.get_value("language_sel")},callback:function(r){!function(r){if(e.reply_added!==t){var a=e.dialog.fields_dict.content,n=e.dialog.fields_dict.subject,i=a.get_value()||"",o=n.get_value()||"",s=i.split("\x3c!-- salutation-ends --\x3e");i=2===s.length?[r.message,"<br>",s[1]]:[r.message,"<br>",i],a.set_value(i.join("")),""===o&&n.set_value(r.subject),e.reply_added=t}}(r.message)}})}},setup_last_edited_communication:function(){var e=this;this.doc||(cur_frm?this.doc=cur_frm.doctype:this.doc="Inbox"),cur_frm&&cur_frm.docname?this.key=cur_frm.docname:this.key="Inbox",this.last_email&&(this.key=this.key+":"+this.last_email.name),this.subject&&(this.key=this.key+":"+this.subject),this.dialog.onhide=function(){var t=e.get_last_edited_communication();$.extend(t,{sender:e.dialog.get_value("sender"),recipients:e.dialog.get_value("recipients"),subject:e.dialog.get_value("subject"),content:e.dialog.get_value("content")})},this.dialog.on_page_show=function(){if(!e.txt){var t=e.get_last_edited_communication();t.content&&(e.dialog.set_value("sender",t.sender||""),e.dialog.set_value("subject",t.subject||""),e.dialog.set_value("recipients",t.recipients||""),e.dialog.set_value("content",t.content||""))}}},get_last_edited_communication:function(){return frappe.last_edited_communication[this.doc]||(frappe.last_edited_communication[this.doc]={}),frappe.last_edited_communication[this.doc][this.key]||(frappe.last_edited_communication[this.doc][this.key]={}),frappe.last_edited_communication[this.doc][this.key]},setup_print_language:function(){var e=this,t=this.doc||cur_frm.doc,r=this.dialog.fields_dict;this.lang_code=t.language,$(r.language_sel.input).change(function(){e.lang_code=this.value}),$(r.language_sel.input).empty().add_options(frappe.get_languages()).val(t.language)},setup_print:function(){var e=this.dialog.fields_dict;$(e.attach_document_print.input).click(function(){$(e.select_print_format.wrapper).toggle($(this).prop("checked"))}),$(e.select_print_format.wrapper).toggle(!1),cur_frm?$(e.select_print_format.input).empty().add_options(cur_frm.print_preview.print_formats).val(cur_frm.print_preview.print_formats[0]):$(e.attach_document_print.wrapper).toggle(!1)},setup_attach:function(){var e=this.dialog.fields_dict,t=$(e.select_attachments.wrapper),r=this;r.attachments||(r.attachments=[]);var a={args:{from_form:1,folder:"Home/Attachments"},callback:function(e,t){r.attachments.push(e)},max_width:null,max_height:null};r.frm&&(a={args:r.frm.attachments.get_args?r.frm.attachments.get_args():{from_form:1,folder:"Home/Attachments"},callback:function(e,t){r.frm.attachments.attachment_uploaded(e,t)},max_width:r.frm.cscript?r.frm.cscript.attachment_max_width:null,max_height:r.frm.cscript?r.frm.cscript.attachment_max_height:null}),$("<h6 class='text-muted add-attachment' style='margin-top: 12px; cursor:pointer;'>"+__("Select Attachments")+"</h6><div class='attach-list'></div>\t\t\t<p class='add-more-attachments'>\t\t\t<a class='text-muted small'><i class='octicon octicon-plus' style='font-size: 12px'></i> "+__("Add Attachment")+"</a></p>").appendTo(t.empty()),t.find(".add-more-attachments a").on("click",this,function(){r.upload=frappe.ui.get_upload_dialog(a)}),r.render_attach()},render_attach:function(){var e=this.dialog.fields_dict,t=$(e.select_attachments.wrapper).find(".attach-list").empty(),r=[];this.attachments&&this.attachments.length&&(r=r.concat(this.attachments)),cur_frm&&(r=r.concat(cur_frm.get_files())),r.length&&$.each(r,function(e,r){r.file_name&&(r.file_url=frappe.urllib.get_full_url(r.file_url),$(repl('<p class="checkbox"><label><span><input type="checkbox" data-file-name="%(name)s"></input></span><span class="small">%(file_name)s</span> <a href="%(file_url)s" target="_blank" class="text-muted small"><i class="fa fa-share" style="vertical-align: middle; margin-left: 3px;"></i></label></p>',r)).appendTo(t))})},setup_email:function(){var e=this,t=this.dialog.fields_dict;this.attach_document_print&&($(t.attach_document_print.input).click(),$(t.select_print_format.wrapper).toggle(!0)),$(t.send_email.input).prop("checked",!0),$(t.send_me_a_copy.input).on("click",function(){var e=t.send_me_a_copy.get_value();frappe.db.set_value("User",frappe.session.user,"send_me_a_copy",e),frappe.boot.user.send_me_a_copy=e}),$(t.send_email.input).click(function(){$(t.communication_medium.wrapper).toggle(!$(this).prop("checked")),$(t.sent_or_received.wrapper).toggle(!$(this).prop("checked")),$(t.send_read_receipt.wrapper).toggle($(this).prop("checked")),e.dialog.get_primary_btn().html($(this).prop("checked")?"Send":"Add Communication")}),$(t.communication_medium.wrapper).toggle(!1),$(t.sent_or_received.wrapper).toggle(!1)},send_action:function(){var e=this,t=e.dialog.get_primary_btn(),r=this.get_values();if(r){var a=$.map($(e.dialog.wrapper).find("[data-file-name]:checked"),function(e){return $(e).attr("data-file-name")});r.attach_document_print?cur_frm.print_preview.is_old_style(r.select_print_format||"")?cur_frm.print_preview.with_old_style({format:r.select_print_format,callback:function(n){e.send_email(t,r,a,n)}}):e.send_email(t,r,a,null,r.select_print_format||""):e.send_email(t,r,a)}},get_values:function(){for(var e=this.dialog.get_values(),t=0,r=this.dialog.fields.length;t<r;t++){var a=this.dialog.fields[t];a.is_cc_checkbox&&(e[a.fieldname]&&(e.cc=(e.cc?e.cc+", ":"")+a.fieldname,e.bcc=(e.bcc?e.bcc+", ":"")+a.fieldname),delete e[a.fieldname])}return e},send_email:function(e,t,r,a,n){var i=this;if(i.dialog.hide(),!t.send_email&&"Email"!==t.communication_medium||t.recipients){if(t.attach_document_print||(a=null,n=null),t.send_email){if(cur_frm&&!frappe.model.can_email(i.doc.doctype,cur_frm))return void frappe.msgprint(__("You are not allowed to send emails related to this document"));t.communication_medium="Email",t.sent_or_received="Sent"}return frappe.call({method:"frappe.core.doctype.communication.email.make",args:{recipients:t.recipients,cc:t.cc,bcc:t.bcc,subject:t.subject,content:t.content,doctype:i.doc.doctype,name:i.doc.name,send_email:t.send_email,print_html:a,send_me_a_copy:t.send_me_a_copy,print_format:n,communication_medium:t.communication_medium,sent_or_received:t.sent_or_received,sender:t.sender,sender_full_name:t.sender?frappe.user.full_name():void 0,attachments:r,_lang:i.lang_code,read_receipt:t.send_read_receipt,print_letterhead:i.is_print_letterhead_checked()},btn:e,callback:function(e){if(e.exc){if(frappe.msgprint(__("There were errors while sending email. Please try again.")),i.error)try{i.error(e)}catch(e){console.log(e)}}else if(frappe.utils.play_sound("email"),t.send_email&&e.message.emails_not_sent_to&&frappe.msgprint(__("Email not sent to {0} (unsubscribed / disabled)",[frappe.utils.escape_html(e.message.emails_not_sent_to)])),(frappe.last_edited_communication[i.doc]||{})[i.key]&&delete frappe.last_edited_communication[i.doc][i.key],cur_frm&&(cur_frm.timeline.input&&cur_frm.timeline.input.val(""),cur_frm.reload_doc()),i.success)try{i.success(e)}catch(e){console.log(e)}}})}frappe.msgprint(__("Enter Email Recipient(s)"))},is_print_letterhead_checked:function(){return this.frm&&$(this.frm.wrapper).find(".form-print-wrapper").is(":visible")?$(this.frm.wrapper).find(".print-letterhead").prop("checked")?1:0:(frappe.model.get_doc(":Print Settings","Print Settings")||{with_letterhead:1}).with_letterhead?1:0},setup_earlier_reply:function(){var e=this.dialog.fields_dict,t=frappe.boot.user.email_signature||"",r=this.last_email;r||(r=this.frm&&this.frm.timeline.get_last_email(!0)),frappe.utils.is_html(t)||(t=t.replace(/\n/g,"<br>")),this.txt&&(this.message=this.txt+(this.message?"<br><br>"+this.message:"")),this.real_name&&(this.message="<p>"+__("Dear")+" "+this.real_name+",</p>\x3c!-- salutation-ends --\x3e<br>"+(this.message||""));var a=(this.message||"")+(t?"<br>"+t:""),n="";if(r){var i=r.original_comment||r.content;i=i.replace(/&lt;meta[\s\S]*meta&gt;/g,"").replace(/&lt;style[\s\S]*&lt;\/style&gt;/g,"");var o=r.communication_date||r.creation;n="<div><br></div>"+a+"<br>\x3c!-- original-reply --\x3e<br><blockquote><p>"+__("On {0}, {1} wrote:",[frappe.datetime.global_date_format(o),r.sender])+"</p>"+i+"<blockquote>"}else n="<div><br></div>"+a;e.content.set_value(n)},setup_awesomplete:function(){var e=this;[this.dialog.fields_dict.recipients.input,this.dialog.fields_dict.cc.input,this.dialog.fields_dict.bcc.input].map(function(t){e.setup_awesomplete_for_input(t)})},setup_awesomplete_for_input:function(e){var t,r=new Awesomplete(e,{minChars:0,maxItems:99,autoFirst:!0,list:[],item:function(e,t){return $("<li>").text(e.value).get(0)},filter:function(e,t){return!0},replace:function(e){var t=this.input.value.match(/^.+,\s*|/)[0];this.input.value=t+e+", "}});$(e).on("input",function(e){clearTimeout(t),t=setTimeout(function(){var t=e.target.value;frappe.call({method:"frappe.email.get_contact_list",args:{txt:function(e){return(t=e,t.split(/,\s*/)).pop();var t}(t)||"%"},quiet:!0,callback:function(e){r.list=e.message||[]}})},250)})}}),frappe.views.TranslationManager=function(){function e(e){Object.assign(this,e),this.make()}return e.prototype.make=function(){var e=this;this.data=[],this.dialog=new frappe.ui.Dialog({fields:this.get_fields(),title:__("Translate {0}",[this.df.label]),no_submit_on_enter:!0,primary_action_label:__("Update Translations"),primary_action:function(t){return e.update_translations(t).then(function(){e.dialog.hide(),e.data=[],frappe.msgprint({title:__("Success"),message:__("Successfully updated translations"),indicator:"green"})})}}),this.get_translations_data().then(function(t){var r;(r=e.data).push.apply(r,t||[]),e.dialog.refresh(),e.dialog.show()})},e.prototype.get_fields=function(){var e=this;return[{label:__("Source Text"),fieldname:"source",fieldtype:"Data",read_only:1,bold:1,default:this.source_name},{label:__("Translations"),fieldname:"translation_data",fieldtype:"Table",fields:[{label:"Language",fieldname:"language",fieldtype:"Link",options:"Language",in_list_view:1,columns:3},{label:"Translation",fieldname:"translation",fieldtype:"Data",in_list_view:1,columns:7}],data:this.data,get_data:function(){return e.data}}]},e.prototype.get_translations_data=function(){return frappe.db.get_list("Translation",{fields:["name","language","target_name as translation"],filters:{source_name:this.source_name}})},e.prototype.update_translations=function(e){var t=e.source,r=e.translation_data;void 0===r&&(r=[]);var a={};return r.map(function(e){a[e.language]=e.translation}),frappe.call({method:"frappe.translate.update_translations_for_source",btn:this.dialog.get_primary_btn(),args:{source:t,translation_dict:a}}).fail(function(){frappe.msgprint({title:__("Something went wrong"),message:__("Please try again"),indicator:"red"})})},e}(),frappe.templates.sort_selector='<div class="sort-selector">  <div class="dropdown">   <a class="text-muted dropdown-toggle small"    data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">    <span class="dropdown-text">{{ __(sort_by_label) }}</span>   </a>   <ul class="dropdown-menu">    {% for value in options %}    <li>     <a class="option" data-value="{{ value.fieldname }}">      {{ __(value.label) }}     </a>    </li>    {% endfor %}   </ul>  </div>  <button class="btn btn-default btn-xs btn-order"   data-value="{{ sort_order }}">   <span class="octicon text-muted    octicon-arrow-{{ sort_order===" desc " ? "down " : "up " }}">   </span>  </button> </div>',frappe.ui.SortSelector=Class.extend({init:function(e){$.extend(this,e),this.labels={},this.make()},make:function(){this.prepare_args(),this.parent.find(".sort-selector").remove(),this.wrapper=$(frappe.render_template("sort_selector",this.args)).appendTo(this.parent),this.bind_events()},bind_events:function(){var e=this;this.wrapper.find(".btn-order").on("click",function(){var t=$(this),r="desc"===$(this).attr("data-value")?"asc":"desc";t.attr("data-value",r),e.sort_order=r,t.find(".octicon").removeClass("octicon-arrow-"+("asc"===r?"down":"up")).addClass("octicon-arrow-"+("desc"===r?"down":"up")),(e.onchange||e.change)(e.sort_by,e.sort_order)}),this.wrapper.find(".dropdown a.option").on("click",function(){e.sort_by=$(this).attr("data-value"),e.wrapper.find(".dropdown .dropdown-text").html($(this).html()),(e.onchange||e.change)(e.sort_by,e.sort_order)})},prepare_args:function(){var e=this;if(this.args||(this.args={}),this.args&&"string"==typeof this.args){var t=this.args;this.args={},t.includes("`.`")&&(t=t.split(".")[1]);var r=t.split(" ");if(2===r.length){var a=strip(r[0],"`");this.args.sort_by=a,this.args.sort_order=r[1]}}this.args.options&&this.args.options.forEach(function(t){e.labels[t.fieldname]=t.label}),this.setup_from_doctype(),this.args.sort_by&&!this.args.sort_by_label&&this.args.options.every(function(t){return t.fieldname!==e.args.sort_by||(e.args.sort_by_label=t.label,!1)})},setup_from_doctype:function(){var e=this,t=frappe.get_meta(this.doctype);if(t){var r=this.get_meta_sort_field(),a=r.meta_sort_field,n=r.meta_sort_order;if(this.args.sort_by||(a?(this.args.sort_by=a,this.args.sort_order=n):(this.args.sort_by="modified",this.args.sort_order="desc")),this.args.sort_by_label||(this.args.sort_by_label=this.get_label(this.args.sort_by)),!this.args.options){var i=[{fieldname:"modified"}];t.title_field&&i.push({fieldname:t.title_field}),t.fields.forEach(function(e){(e.mandatory||e.bold)&&i.push({fieldname:e.fieldname,label:e.label})}),a&&i.push({fieldname:a}),i.push({fieldname:"name"},{fieldname:"creation"},{fieldname:"idx"}),this.args.options=i.uniqBy(function(e){return e.fieldname}),this.args.options.forEach(function(t){t.label||(t.label=e.get_label(t.fieldname))})}this.sort_by=this.args.sort_by,this.sort_order=this.args.sort_order}},get_meta_sort_field:function(){var e=frappe.get_meta(this.doctype);if(!e)return{meta_sort_field:null,meta_sort_order:null};if(e.sort_field&&e.sort_field.includes(",")){var t=e.sort_field.split(",")[0].split(" ");return{meta_sort_field:t[0],meta_sort_order:t[1]}}return{meta_sort_field:e.sort_field||"modified",meta_sort_order:e.sort_order?e.sort_order.toLowerCase():""}},get_label:function(e){return"idx"===e?__("Most Used"):this.labels[e]||frappe.meta.get_label(this.doctype,e)},get_sql_string:function(){return"`tab"+this.doctype+"`.`"+this.sort_by+"` "+this.sort_order}}),frappe.templates.change_log='{% for (var i=0, l=change_log.length; i < l; i++) {     var app_info = change_log[i]; %}  {% if (i > 0) { %} <hr> {% } %}  <div class="text-left app-change-log">   <h2 style="margin-top: 10px;">             {{ app_info.title }}    <small>{{ __("updated to {0}", [app_info.version]) }}</small>   </h2>   {% for (var x=0, y=app_info.change_log.length; x < y; x++) {             var version_info = app_info.change_log[x];             if(version_info) { %}        <p>{{ frappe.markdown(version_info[1]) }}</p>       {% }         } %}  </div> {% } %} ',frappe.start_app=function(){frappe.Application&&(frappe.assets.check(),frappe.provide("frappe.app"),frappe.app=new frappe.Application)},$(document).ready(function(){frappe.utils.supportsES6||frappe.msgprint({indicator:"red",title:__("Browser not supported"),message:__("Some of the features might not work in your browser. Please update your browser to the latest version.")}),frappe.start_app()}),frappe.Application=Class.extend({init:function(){this.load_startup()},load_startup:function(){this.startup()},startup:function(){if(frappe.socketio.init(),frappe.model.init(),"failed"===frappe.boot.status)throw frappe.msgprint({message:frappe.boot.error,title:__("Session Start Failed"),indicator:"red"}),"boot failed";if(this.load_bootinfo(),this.make_nav_bar(),this.set_favicon(),this.setup_analytics(),frappe.ui.keys.setup(),this.set_rtl(),frappe.boot&&localStorage.getItem("session_last_route")&&(window.location.hash=localStorage.getItem("session_last_route"),localStorage.removeItem("session_last_route")),this.make_page_container(),frappe.route(),$(document).trigger("startup"),this.start_notification_updates(),$(document).trigger("app_ready"),frappe.boot.messages&&frappe.msgprint(frappe.boot.messages),frappe.boot.change_log&&frappe.boot.change_log.length?this.show_change_log():this.show_notes(),frappe.realtime.on("csrf_generated",function(e){e.csrf_token&&e.sid===frappe.get_cookie("sid")&&(frappe.csrf_token=e.csrf_token)}),frappe.realtime.on("version-update",function(){var e=frappe.msgprint({message:__("The application has been updated to a new version, please refresh this page"),indicator:"green",title:__("Version Updated")});e.set_primary_action(__("Refresh"),function(){location.reload(!0)}),e.get_close_btn().toggle(!1)}),frappe.sys_defaults.email_user_password){var e=frappe.sys_defaults.email_user_password.split(",");for(var t in e)e[t]===frappe.user.name&&this.set_password(e[t])}},set_password:function(e){var t=this;frappe.call({method:"frappe.core.doctype.user.user.get_email_awaiting",args:{user:e},callback:function(r){if(r=r.message){0<r.length&&t.email_password_prompt(r,e,0)}}})},email_password_prompt:function(e,t,r){var a=this,n=new frappe.ui.Dialog({title:__("Email Account setup please enter your password for: "+e[r].email_id),fields:[{fieldname:"password",fieldtype:"Password",label:"Email Account Password",reqd:1},{fieldtype:"Button",label:__("Submit")}]});n.get_input("submit").on("click",function(){n.hide();var i=new frappe.ui.Dialog({title:__("Checking one moment"),fields:[{fieldtype:"HTML",fieldname:"checking"}]});i.fields_dict.checking.$wrapper.html('<i class="fa fa-spinner fa-spin fa-4x"></i>'),i.show(),frappe.call({method:"frappe.core.doctype.user.user.set_email_password",args:{email_account:e[r].email_account,user:t,password:n.get_value("password")},callback:function(o){i.hide(),n.hide(),o.message?r+1<e.length&&(r+=1,a.email_password_prompt(e,t,r)):(frappe.show_alert("Login Failed please try again",5),a.email_password_prompt(e,t,r))}})}),n.show()},load_bootinfo:function(){frappe.boot?(frappe.modules={},frappe.boot.desktop_icons.forEach(function(e){frappe.modules[e.module_name]=e}),frappe.model.sync(frappe.boot.docs),$.extend(frappe._messages,frappe.boot.__messages),this.check_metadata_cache_status(),this.set_globals(),this.sync_pages(),moment.locale("en"),moment.user_utc_offset=moment().utcOffset(),frappe.boot.timezone_info&&moment.tz.add(frappe.boot.timezone_info),frappe.boot.print_css&&frappe.dom.set_style(frappe.boot.print_css,"print-style"),frappe.user.name=frappe.boot.user.name):this.set_as_guest()},check_metadata_cache_status:function(){frappe.boot.metadata_version!=localStorage.metadata_version&&(frappe.assets.clear_local_storage(),frappe.assets.init_local_storage())},start_notification_updates:function(){var e=this;this.refresh_notifications=frappe.utils.debounce(this.refresh_notifications.bind(this),1e3),this.refresh_notifications(),frappe.realtime.on("clear_notifications",function(){e.refresh_notifications()}),$(document).trigger("notification-update"),$(document).on("session_alive",function(){e.refresh_notifications()})},refresh_notifications:function(){var e=this;if(frappe.session_alive&&frappe.boot&&"setup-wizard"!==frappe.boot.home_page)return frappe.call({method:"frappe.desk.notifications.get_notifications",callback:function(t){t.message&&($.extend(frappe.boot.notification_info,t.message),$(document).trigger("notification-update"),e.update_notification_count_in_modules(),"messages"!=frappe.get_route()[0]&&t.message.new_messages.length&&frappe.utils.set_title_prefix("("+t.message.new_messages.length+")"))},freeze:!1})},update_notification_count_in_modules:function(){$.each(frappe.boot.notification_info.open_count_doctype,function(e,t){t?$('.open-notification.global[data-doctype="'+e+'"]').removeClass("hide").html(t>99?"99+":t):$('.open-notification.global[data-doctype="'+e+'"]').addClass("hide")})},set_globals:function(){frappe.session.user=frappe.boot.user.name,frappe.session.user_email=frappe.boot.user.email,frappe.session.user_fullname=frappe.user_info().fullname,frappe.user_defaults=frappe.boot.user.defaults,frappe.user_roles=frappe.boot.user.roles,frappe.sys_defaults=frappe.boot.sysdefaults,frappe.ui.py_date_format=frappe.boot.sysdefaults.date_format.replace("dd","%d").replace("mm","%m").replace("yyyy","%Y"),frappe.boot.user.last_selected_values={},Object.defineProperties(window,{user:{get:function(){return console.warn("Please use `frappe.session.user` instead of `user`. It will be deprecated soon."),frappe.session.user}},user_fullname:{get:function(){return console.warn("Please use `frappe.session.user_fullname` instead of `user_fullname`. It will be deprecated soon."),frappe.session.user}},user_email:{get:function(){return console.warn("Please use `frappe.session.user_email` instead of `user_email`. It will be deprecated soon."),frappe.session.user_email}},user_defaults:{get:function(){return console.warn("Please use `frappe.user_defaults` instead of `user_defaults`. It will be deprecated soon."),frappe.user_defaults}},roles:{get:function(){return console.warn("Please use `frappe.user_roles` instead of `roles`. It will be deprecated soon."),frappe.user_roles}},sys_defaults:{get:function(){return console.warn("Please use `frappe.sys_defaults` instead of `sys_defaults`. It will be deprecated soon."),frappe.user_roles}}})},sync_pages:function(){if(localStorage.page_info){frappe.boot.allowed_pages=[];var e=JSON.parse(localStorage.page_info);$.each(frappe.boot.page_info,function(t,r){e[t]&&e[t].modified==r.modified||delete localStorage["_page:"+t],frappe.boot.allowed_pages.push(t)})}else frappe.boot.allowed_pages=Object.keys(frappe.boot.page_info);localStorage.page_info=JSON.stringify(frappe.boot.page_info)},set_as_guest:function(){frappe.session.user="Guest",frappe.session.user_email="",frappe.session.user_fullname="Guest",frappe.user_defaults={},frappe.user_roles=["Guest"],frappe.sys_defaults={}},make_page_container:function(){$("#body_div").length&&($(".splash").remove(),frappe.temp_container=$("<div id='temp-container' style='display: none;'>").appendTo("body"),frappe.container=new frappe.views.Container)},make_nav_bar:function(){frappe.boot&&"setup-wizard"!==frappe.boot.home_page&&(frappe.frappe_toolbar=new frappe.ui.toolbar.Toolbar)},logout:function(){var e=this;return e.logged_out=!0,frappe.call({method:"logout",callback:function(t){t.exc||e.redirect_to_login()}})},handle_session_expired:function(){if(!frappe.app.session_expired_dialog){var e=new frappe.ui.Dialog({title:__("Session Expired"),keep_open:!0,fields:[{fieldtype:"Password",fieldname:"password",label:__("Please Enter Your Password to Continue")}],onhide:function(){e.logged_in||frappe.app.redirect_to_login()}});e.set_primary_action(__("Login"),function(){frappe.call({method:"login",args:{usr:frappe.session.user,pwd:e.get_values().password},callback:function(t){"Logged In"===t.message&&(e.logged_in=!0,$(".modal-backdrop").css({opacity:"","background-color":"#334143"})),e.hide()},statusCode:function(){e.hide()}})}),frappe.app.session_expired_dialog=e}frappe.app.session_expired_dialog.display||(frappe.app.session_expired_dialog.show(),$(".modal-backdrop").css({opacity:1,"background-color":"#4B4C9D"}))},redirect_to_login:function(){window.location.href="/"},set_favicon:function(){var e=$('link[type="image/x-icon"]').remove().attr("href");$('<link rel="shortcut icon" href="'+e+'" type="image/x-icon">').appendTo("head"),$('<link rel="icon" href="'+e+'" type="image/x-icon">').appendTo("head")},trigger_primary_action:function(){window.cur_dialog&&cur_dialog.display?cur_dialog.get_primary_btn().trigger("click"):cur_frm&&cur_frm.page.btn_primary.is(":visible")?cur_frm.page.btn_primary.trigger("click"):frappe.container.page.save_action&&frappe.container.page.save_action()},set_rtl:function(){if(["ar","he","fa"].indexOf(frappe.boot.lang)>=0){var e=document.createElement("link");e.rel="stylesheet",e.href="assets/css/frappe-rtl.css",document.getElementsByTagName("head")[0].appendChild(e),$("body").addClass("frappe-rtl")}},show_change_log:function(){var e=this,t=frappe.msgprint(frappe.render_template("change_log",{change_log:frappe.boot.change_log}),__("Updated To New Version"));t.keep_open=!0,t.custom_onhide=function(){frappe.call({method:"frappe.utils.change_log.update_last_known_versions"}),e.show_notes()}},setup_analytics:function(){window.mixpanel&&(window.mixpanel.identify(frappe.session.user),window.mixpanel.people.set({$first_name:frappe.boot.user.first_name,$last_name:frappe.boot.user.last_name,$created:frappe.boot.user.creation,$email:frappe.session.user}))},show_notes:function(){var e=this;frappe.boot.notes.length&&frappe.boot.notes.forEach(function(t){if(!t.seen||t.notify_on_every_login){var r=frappe.msgprint({message:t.content,title:t.title});r.keep_open=!0,r.custom_onhide=function(){t.seen=!0,t.notify_on_every_login||frappe.call({method:"frappe.desk.doctype.note.note.mark_as_seen",args:{note:t.name}}),e.show_notes()}}})}}),frappe.get_module=function(e,t){var r=frappe.modules[e]||t;if(r)return r._setup?r:("module"!==r.type||r.link||(r.link="modules/"+r.module_name),"list"!==r.type||r.link||(r.link="List/"+r._doctype),r.link||(r.link=""),r._id||(r._id=r.module_name.toLowerCase()),r.label||(r.label=e),r._label||(r._label=__(r.label)),r._doctype||(r._doctype=""),r._setup=!0,r)},frappe.get_desktop_icons=function(e,t){for(var r,a=[],n=function(e){(e=frappe.get_module(e.module_name,e)).app_icon=frappe.ui.app_icon.get_html(e),a.push(e)},i=function(r){var a=!0;return a="page"===r.type?r.link in frappe.boot.page_info:r._report?r._report in frappe.boot.user.all_reports:r._doctype?frappe.boot.user.can_read.includes(r._doctype):"Learn"===r.module_name||(!("Setup"!==r.module_name||!frappe.user.has_role("System Manager"))||-1!==frappe.boot.user.allow_modules.indexOf(r.module_name)),r.hidden&&!e&&(a=!1),r.blocked&&!t&&(a=!1),a},o=0,s=frappe.boot.desktop_icons.length;o<s;o++)r=frappe.boot.desktop_icons[o],-1===["Setup","Core"].indexOf(r.module_name)&&i(r)&&n(r);return frappe.user_roles.includes("System Manager")&&i(r=frappe.get_module("Setup"))&&n(r),frappe.user_roles.includes("Administrator")&&i(r=frappe.get_module("Core"))&&n(r),a},frappe.add_to_desktop=function(e,t,r){frappe.call({method:"frappe.desk.doctype.desktop_icon.desktop_icon.add_user_icon",args:{link:frappe.get_route_str(),label:e,type:"link",_doctype:t,_report:r},callback:function(e){e.message&&frappe.show_alert(__("Added"))}})},frappe.provide("frappe.utils"),Object.assign(frappe.utils,{get_url_arg:get_url_arg,get_query_params:get_query_params,make_query_string:make_query_string}),frappe.ui.CommentArea=function(){function e(e){var t=e.parent;void 0===t&&(t=null);var r=e.mentions;void 0===r&&(r=[]);var a=e.on_submit;void 0===a&&(a=null);var n=e.no_wrapper;void 0===n&&(n=!1),this.parent=$(t),this.mentions=r,this.on_submit=a,this.no_wrapper=n,this.make(),frappe.chat.emoji()}return e.prototype.make=function(){this.setup_dom(),this.setup_summernote(),this.bind_events()},e.prototype.setup_dom=function(){var e=this.no_wrapper?"":'<div class="comment-input-header">\n\t\t\t\t<span class="small text-muted">'+__("Add a comment")+'</span>\n\t\t\t\t<button class="btn btn-default btn-comment btn-xs pull-right">\n\t\t\t\t\t'+__("Comment")+"\n\t\t\t\t</button>\n\t\t\t</div>",t=this.no_wrapper?"":'<div class="text-muted small">\n\t\t\t\t'+__("Ctrl+Enter to add comment")+"\n\t\t\t</div>";this.wrapper=$('\n\t\t\t<div class="comment-input-wrapper">\n\t\t\t\t'+e+'\n\t\t\t\t<div class="comment-input-container">\n\t\t\t\t\t<div class="form-control comment-input"></div>\n\t\t\t\t\t'+t+"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),this.wrapper.appendTo(this.parent),this.input=this.parent.find(".comment-input"),this.button=this.parent.find(".btn-comment")},e.prototype.setup_summernote=function(){var e=this,t=this.input;this.button;t.summernote({height:100,toolbar:!1,airMode:!0,hint:{mentions:this.mentions,match:/\B([@:]\w*)/,search:function(e,t){var r=[];e.startsWith("@")?(e=e.substr(1),r=this.mentions):e.startsWith(":")&&frappe.chat.emoji(function(r){for(var a=e.slice(1),n=[],i=0,o=r;i<o.length;i+=1)for(var s=o[i],l=0,p=s.aliases;l<p.length;l+=1){var c=p[l];0===c.indexOf(a)&&n.push({emoji:!0,name:c,value:s.emoji})}t(n)}),t($.grep(r,function(t){return 0==t.indexOf(e)}))},template:function(e){return e.emoji?e.value+" "+e.name:e},content:function(e){return e.emoji?e.value:"@"+e}},callbacks:{onChange:function(){e.set_state()},onKeydown:function(t){"ctrl+enter"===frappe.ui.keys.get_key(t)&&(t.preventDefault(),e.submit()),t.stopPropagation()}},icons:{align:"fa fa-align",alignCenter:"fa fa-align-center",alignJustify:"fa fa-align-justify",alignLeft:"fa fa-align-left",alignRight:"fa fa-align-right",indent:"fa fa-indent",outdent:"fa fa-outdent",arrowsAlt:"fa fa-arrows-alt",bold:"fa fa-bold",caret:"caret",circle:"fa fa-circle",close:"fa fa-close",code:"fa fa-code",eraser:"fa fa-eraser",font:"fa fa-font",frame:"fa fa-frame",italic:"fa fa-italic",link:"fa fa-link",unlink:"fa fa-chain-broken",magic:"fa fa-magic",menuCheck:"fa fa-check",minus:"fa fa-minus",orderedlist:"fa fa-list-ol",pencil:"fa fa-pencil",picture:"fa fa-image",question:"fa fa-question",redo:"fa fa-redo",square:"fa fa-square",strikethrough:"fa fa-strikethrough",subscript:"fa fa-subscript",superscript:"fa fa-superscript",table:"fa fa-table",textHeight:"fa fa-text-height",trash:"fa fa-trash",underline:"fa fa-underline",undo:"fa fa-undo",unorderedlist:"fa fa-list-ul",video:"fa fa-video-camera"}}),this.note_editor=this.wrapper.find(".note-editor"),this.note_editor.css({border:"1px solid #ebeff2","border-radius":"3px",padding:"10px","margin-bottom":"10px","min-height":"80px",cursor:"text"}),this.note_editor.on("click",function(){return t.summernote("focus")})},e.prototype.check_state=function(){return!this.input.summernote("isEmpty")},e.prototype.set_state=function(){this.check_state()?this.button.removeClass("btn-default").addClass("btn-primary"):this.button.removeClass("btn-primary").addClass("btn-default")},e.prototype.destroy=function(){this.input.summernote("destroy")},e.prototype.bind_events=function(){this.button.on("click",this.submit.bind(this))},e.prototype.val=function(e){if(void 0===e)return this.input.summernote("code");this.input.summernote("code",e)},e.prototype.submit=function(){this.on_submit&&this.on_submit(this.val())},e}(),frappe.ui.ReviewArea=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setup_dom=function(){var e=this.no_wrapper?"":'<div class="comment-input-header">\n\t\t\t\t<span class="small text-muted">'+__("Add your review")+'</span>\n\t\t\t\t<button class="btn btn-default btn-comment btn-xs disabled pull-right">\n\t\t\t\t\t'+__("Submit Review")+"\n\t\t\t\t</button>\n\t\t\t</div>",t=this.no_wrapper?"":'<div class="text-muted small">\n\t\t\t\t'+__("Ctrl+Enter to submit")+"\n\t\t\t</div>",r=this.no_wrapper?"":'<div class="rating-area text-muted small" style="margin-bottom: 5px">\n\t\t\t\t'+__("Your rating: ")+"\n\t\t\t\t<i class='fa fa-fw fa-star-o star-icon' data-index=0></i>\n\t\t\t\t<i class='fa fa-fw fa-star-o star-icon' data-index=1></i>\n\t\t\t\t<i class='fa fa-fw fa-star-o star-icon' data-index=2></i>\n\t\t\t\t<i class='fa fa-fw fa-star-o star-icon' data-index=3></i>\n\t\t\t\t<i class='fa fa-fw fa-star-o star-icon' data-index=4></i>\n\t\t\t</div>";this.wrapper=$('\n\t\t\t<div class="comment-input-wrapper">\n\t\t\t\t'+e+'\n\t\t\t\t<div class="comment-input-container">\n\t\t\t\t\t'+r+'\n\t\t\t\t\t<input class="form-control review-subject" type="text"\n\t\t\t\t\t\tplaceholder="'+__("Subject")+'"\n\t\t\t\t\t\tstyle="border-radius: 3px; border-color: #ebeff2">\n\t\t\t\t\t</input>\n\t\t\t\t\t<div class="form-control comment-input"></div>\n\t\t\t\t\t'+t+"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),this.wrapper.appendTo(this.parent),this.input=this.parent.find(".comment-input"),this.subject=this.parent.find(".review-subject"),this.button=this.parent.find(".btn-comment"),this.ratingArea=this.parent.find(".rating-area"),this.rating=0},t.prototype.check_state=function(){return!(this.input.summernote("isEmpty")||0===this.rating||!this.subject.val().length)},t.prototype.set_state=function(){this.check_state()?this.button.removeClass("btn-default disabled").addClass("btn-primary"):this.button.removeClass("btn-primary").addClass("btn-default disabled")},t.prototype.reset=function(){this.set_rating(0),this.subject.val(""),this.input.summernote("code","")},t.prototype.bind_events=function(){var t=this;e.prototype.bind_events.call(this),this.ratingArea.on("click",".star-icon",function(e){var r=$(e.target).attr("data-index");t.set_rating(parseInt(r)+1)}),this.subject.on("change",function(){t.set_state()})},t.prototype.set_rating=function(e){this.ratingArea.find(".star-icon").each(function(t,r){var a=$(r);t<e?(a.removeClass("fa-star-o"),a.addClass("fa-star")):(a.removeClass("fa-star"),a.addClass("fa-star-o"))}),this.rating=e,this.set_state()},t.prototype.val=function(e){if(void 0===e)return{rating:this.rating,subject:this.subject.val(),content:this.input.summernote("code")};this.input.summernote("code",e)},t}(frappe.ui.CommentArea),frappe.templates.rating_icons='{% if show_label %}  {{ __("Rating: ") }} {% endif %} {% for(var i=1, l=6; i<l; i++) { %}  <i class="fa fa-fw {{ i<=rating? "fa-star": "fa-star-o" }} star-icon" data-idx=1></i> {% } %}',frappe.provide("frappe.utils"),frappe.utils.Feedback=Class.extend({resend_feedback_request:function(e){var t={reference_name:e.reference_name,reference_doctype:e.reference_doctype,request:e.feedback_request};this.get_feedback_request_details(t,!0)},manual_feedback_request:function(e){var t={reference_doctype:e.doctype,reference_name:e.name};if(frappe.boot.feedback_triggers[e.doctype]){var r=frappe.boot.feedback_triggers[e.doctype];$.extend(t,{trigger:r}),this.get_feedback_request_details(t,!1)}else this.make_feedback_request_dialog(t,!1)},get_feedback_request_details:function(e,t){var r=this;return frappe.call({method:"frappe.core.doctype.feedback_trigger.feedback_trigger.get_feedback_request_details",args:e,callback:function(e){e.message&&r.make_feedback_request_dialog(e.message,t)}})},make_feedback_request_dialog:function(e,t){var r=this,a=new frappe.ui.Dialog({title:__("{0} Feedback Request",[t?"Resend":"Send"]),fields:[{reqd:1,label:__("Recipient"),fieldname:"recipients",fieldtype:"Data",options:"Email"},{reqd:1,label:__("Subject"),fieldname:"subject",fieldtype:"Data"},{reqd:1,label:__("Message"),fieldname:"message",fieldtype:"Text Editor"}]});$.each(e,function(e,t){a.set_value(e,t)}),a.set_primary_action(__("Send"),function(){$.extend(e,{details:a.get_values()}),e&&(a.hide(),r.send_feedback_request(e))}),a.show()},send_feedback_request:function(e){return $.extend(e,{is_manual:!0}),frappe.call({method:"frappe.core.doctype.feedback_trigger.feedback_trigger.send_feedback_request",args:e,freeze:!0,callback:function(t){t.message&&frappe.msgprint(__("Feedback Request for {0} is sent to {1}",[e.reference_name,e.details.recipients]))}})}});var fuse=createCommonjsModule(function(e,t){var r;r=function(){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){e.exports=function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();var n=r(5),i=r(7),o=r(4),s=function(){function e(t,r){var a=r.location,n=void 0===a?0:a,i=r.distance,s=void 0===i?100:i,l=r.threshold,p=void 0===l?.6:l,c=r.maxPatternLength,d=void 0===c?32:c,u=r.isCaseSensitive,f=void 0!==u&&u,g=r.tokenSeparator,_=void 0===g?/ +/g:g,h=r.findAllMatches,m=void 0!==h&&h,C=r.minMatchCharLength,A=void 0===C?1:C;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:n,distance:s,threshold:p,maxPatternLength:d,isCaseSensitive:f,tokenSeparator:_,findAllMatches:m,minMatchCharLength:A},this.pattern=this.options.isCaseSensitive?t:t.toLowerCase(),this.pattern.length<=d&&(this.patternAlphabet=o(this.pattern))}return a(e,[{key:"search",value:function(e){if(this.options.isCaseSensitive||(e=e.toLowerCase()),this.pattern===e)return{isMatch:!0,score:0,matchedIndices:[[0,e.length-1]]};var t=this.options,r=t.maxPatternLength,a=t.tokenSeparator;if(this.pattern.length>r)return n(e,this.pattern,a);var o=this.options,s=o.location,l=o.distance,p=o.threshold,c=o.findAllMatches,d=o.minMatchCharLength;return i(e,this.pattern,this.patternAlphabet,{location:s,distance:l,threshold:p,findAllMatches:c,minMatchCharLength:d})}}]),e}();e.exports=s},function(e,t,r){var a=r(0);e.exports=function(e,t){return function e(t,r,n){if(r){var i=r.indexOf("."),o=r,s=null;-1!==i&&(o=r.slice(0,i),s=r.slice(i+1));var l=t[o];if(null!=l)if(s||"string"!=typeof l&&"number"!=typeof l)if(a(l))for(var p=0,c=l.length;p<c;p+=1)e(l[p],s,n);else s&&e(l,s,n);else n.push(l.toString())}else n.push(t);return n}(e,t,[])}},function(e,t,r){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],a=-1,n=-1,i=0,o=e.length;i<o;i+=1){var s=e[i];s&&-1===a?a=i:s||-1===a||((n=i-1)-a+1>=t&&r.push([a,n]),a=-1)}return e[i-1]&&i-a>=t&&r.push([a,i-1]),r}},function(e,t,r){e.exports=function(e){for(var t={},r=e.length,a=0;a<r;a+=1)t[e.charAt(a)]=0;for(var n=0;n<r;n+=1)t[e.charAt(n)]|=1<<r-n-1;return t}},function(e,t,r){var a=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,n=new RegExp(t.replace(a,"\\$&").replace(r,"|")),i=e.match(n),o=!!i,s=[];if(o)for(var l=0,p=i.length;l<p;l+=1){var c=i[l];s.push([e.indexOf(c),c.length-1])}return{score:o?.5:1,isMatch:o,matchedIndices:s}}},function(e,t,r){e.exports=function(e,t){var r=t.errors,a=void 0===r?0:r,n=t.currentLocation,i=void 0===n?0:n,o=t.expectedLocation,s=void 0===o?0:o,l=t.distance,p=void 0===l?100:l,c=a/e.length,d=Math.abs(s-i);return p?c+d/p:d?1:c}},function(e,t,r){var a=r(6),n=r(3);e.exports=function(e,t,r,i){for(var o=i.location,s=void 0===o?0:o,l=i.distance,p=void 0===l?100:l,c=i.threshold,d=void 0===c?.6:c,u=i.findAllMatches,f=void 0!==u&&u,g=i.minMatchCharLength,_=void 0===g?1:g,h=s,m=e.length,C=d,A=e.indexOf(t,h),I=t.length,v=[],b=0;b<m;b+=1)v[b]=0;if(-1!==A){var y=a(t,{errors:0,currentLocation:A,expectedLocation:h,distance:p});if(C=Math.min(y,C),-1!==(A=e.lastIndexOf(t,h+I))){var w=a(t,{errors:0,currentLocation:A,expectedLocation:h,distance:p});C=Math.min(w,C)}}A=-1;for(var k=[],x=1,S=I+m,$=1<<I-1,D=0;D<I;D+=1){for(var j=0,O=S;j<O;){a(t,{errors:D,currentLocation:h+O,expectedLocation:h,distance:p})<=C?j=O:S=O,O=Math.floor((S-j)/2+j)}S=O;var F=Math.max(1,h-O+1),T=f?m:Math.min(h+O,m)+I,M=Array(T+2);M[T+1]=(1<<D)-1;for(var P=T;P>=F;P-=1){var E=P-1,R=r[e.charAt(E)];if(R&&(v[E]=1),M[P]=(M[P+1]<<1|1)&R,0!==D&&(M[P]|=(k[P+1]|k[P])<<1|1|k[P+1]),M[P]&$&&(x=a(t,{errors:D,currentLocation:E,expectedLocation:h,distance:p}))<=C){if(C=x,(A=E)<=h)break;F=Math.max(1,2*h-A)}}if(a(t,{errors:D+1,currentLocation:h,expectedLocation:h,distance:p})>C)break;k=M}return{isMatch:A>=0,score:0===x?.001:x,matchedIndices:n(v,_)}}},function(e,t,r){var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();var n=r(1),i=r(2),o=r(0),s=function(){function e(t,r){var a=r.location,n=void 0===a?0:a,o=r.distance,s=void 0===o?100:o,l=r.threshold,p=void 0===l?.6:l,c=r.maxPatternLength,d=void 0===c?32:c,u=r.caseSensitive,f=void 0!==u&&u,g=r.tokenSeparator,_=void 0===g?/ +/g:g,h=r.findAllMatches,m=void 0!==h&&h,C=r.minMatchCharLength,A=void 0===C?1:C,I=r.id,v=void 0===I?null:I,b=r.keys,y=void 0===b?[]:b,w=r.shouldSort,k=void 0===w||w,x=r.getFn,S=void 0===x?i:x,$=r.sortFn,D=void 0===$?function(e,t){return e.score-t.score}:$,j=r.tokenize,O=void 0!==j&&j,F=r.matchAllTokens,T=void 0!==F&&F,M=r.includeMatches,P=void 0!==M&&M,E=r.includeScore,R=void 0!==E&&E,L=r.verbose,z=void 0!==L&&L;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:n,distance:s,threshold:p,maxPatternLength:d,isCaseSensitive:f,tokenSeparator:_,findAllMatches:m,minMatchCharLength:A,id:v,keys:y,includeMatches:P,includeScore:R,shouldSort:k,getFn:S,sortFn:D,verbose:z,tokenize:O,matchAllTokens:T},this.setCollection(t)}return a(e,[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"search",value:function(e){this._log('---------\nSearch pattern: "'+e+'"');var t=this._prepareSearchers(e),r=t.tokenSearchers,a=t.fullSearcher,n=this._search(r,a),i=n.weights,o=n.results;return this._computeScore(i,o),this.options.shouldSort&&this._sort(o),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var r=e.split(this.options.tokenSeparator),a=0,i=r.length;a<i;a+=1)t.push(new n(r[a],this.options));return{tokenSearchers:t,fullSearcher:new n(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],r=this.list,a={},n=[];if("string"==typeof r[0]){for(var i=0,o=r.length;i<o;i+=1)this._analyze({key:"",value:r[i],record:i,index:i},{resultMap:a,results:n,tokenSearchers:e,fullSearcher:t});return{weights:null,results:n}}for(var s={},l=0,p=r.length;l<p;l+=1)for(var c=r[l],d=0,u=this.options.keys.length;d<u;d+=1){var f=this.options.keys[d];if("string"!=typeof f){if(s[f.name]={weight:1-f.weight||1},f.weight<=0||f.weight>1)throw new Error("Key weight has to be > 0 and <= 1");f=f.name}else s[f]={weight:1};this._analyze({key:f,value:this.options.getFn(c,f),record:c,index:l},{resultMap:a,results:n,tokenSearchers:e,fullSearcher:t})}return{weights:s,results:n}}},{key:"_analyze",value:function(e,t){var r=e.key,a=e.arrayIndex,n=void 0===a?-1:a,i=e.value,s=e.record,l=e.index,p=t.tokenSearchers,c=void 0===p?[]:p,d=t.fullSearcher,u=void 0===d?[]:d,f=t.resultMap,g=void 0===f?{}:f,_=t.results,h=void 0===_?[]:_;if(null!=i){var m=!1,C=-1,A=0;if("string"==typeof i){this._log("\nKey: "+(""===r?"-":r));var I=u.search(i);if(this._log('Full text: "'+i+'", score: '+I.score),this.options.tokenize){for(var v=i.split(this.options.tokenSeparator),b=[],y=0;y<c.length;y+=1){var w=c[y];this._log('\nPattern: "'+w.pattern+'"');for(var k=!1,x=0;x<v.length;x+=1){var S=v[x],$=w.search(S),D={};$.isMatch?(D[S]=$.score,m=!0,k=!0,b.push($.score)):(D[S]=1,this.options.matchAllTokens||b.push(1)),this._log('Token: "'+S+'", score: '+D[S])}k&&(A+=1)}C=b[0];for(var j=b.length,O=1;O<j;O+=1)C+=b[O];C/=j,this._log("Token score average:",C)}var F=I.score;C>-1&&(F=(F+C)/2),this._log("Score average:",F);var T=!this.options.tokenize||!this.options.matchAllTokens||A>=c.length;if(this._log("\nCheck Matches: "+T),(m||I.isMatch)&&T){var M=g[l];M?M.output.push({key:r,arrayIndex:n,value:i,score:F,matchedIndices:I.matchedIndices}):(g[l]={item:s,output:[{key:r,arrayIndex:n,value:i,score:F,matchedIndices:I.matchedIndices}]},h.push(g[l]))}}else if(o(i))for(var P=0,E=i.length;P<E;P+=1)this._analyze({key:r,arrayIndex:P,value:i[P],record:s,index:l},{resultMap:g,results:h,tokenSearchers:c,fullSearcher:u})}}},{key:"_computeScore",value:function(e,t){this._log("\n\nComputing score:\n");for(var r=0,a=t.length;r<a;r+=1){for(var n=t[r].output,i=n.length,o=0,s=1,l=0;l<i;l+=1){var p=e?e[n[l].key].weight:1,c=(1===p?n[l].score:n[l].score||.001)*p;1!==p?s=Math.min(s,c):(n[l].nScore=c,o+=c)}t[r].score=1===s?o/i:s,this._log(t[r])}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];this._log("\n\nOutput:\n\n",JSON.stringify(e));var r=[];this.options.includeMatches&&r.push(function(e,t){var r=e.output;t.matches=[];for(var a=0,n=r.length;a<n;a+=1){var i=r[a];if(0!==i.matchedIndices.length){var o={indices:i.matchedIndices,value:i.value};i.key&&(o.key=i.key),i.hasOwnProperty("arrayIndex")&&i.arrayIndex>-1&&(o.arrayIndex=i.arrayIndex),t.matches.push(o)}}}),this.options.includeScore&&r.push(function(e,t){t.score=e.score});for(var a=0,n=e.length;a<n;a+=1){var i=e[a];if(this.options.id&&(i.item=this.options.getFn(i.item,this.options.id)[0]),r.length){for(var o={item:i.item},s=0,l=r.length;s<l;s+=1)r[s](i,o);t.push(o)}else t.push(i.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}]),e}();e.exports=s}])},e.exports=r()}),Fuse=unwrapExports(fuse),moment$1=createCommonjsModule(function(e,t){e.exports=function(){var t,r;function a(){return t.apply(null,arguments)}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){var r,a=[];for(r=0;r<e.length;++r)a.push(t(e[r],r));return a}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var r in t)c(t,r)&&(e[r]=t[r]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function u(e,t,r,a){return $t(e,t,r,a,!0).utc()}function f(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=f(e),a=r.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function _(e){var t=u(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),r=t.length>>>0,a=0;a<r;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};var h=a.momentProperties=[];function m(e,t){var r,a,n;if(o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=f(t)),o(t._locale)||(e._locale=t._locale),h.length>0)for(r=0;r<h.length;r++)a=h[r],o(n=t[a])||(e[a]=n);return e}var C=!1;function A(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===C&&(C=!0,a.updateOffset(this),C=!1)}function I(e){return e instanceof A||null!=e&&null!=e._isAMomentObject}function v(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function b(e){var t=+e,r=0;return 0!==t&&isFinite(t)&&(r=v(t)),r}function y(e,t,r){var a,n=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(a=0;a<n;a++)(r&&e[a]!==t[a]||!r&&b(e[a])!==b(t[a]))&&o++;return o+i}function w(e){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function k(e,t){var r=!0;return d(function(){var n=arguments;if(null!=a.deprecationHandler&&a.deprecationHandler(null,e),r){for(var i,o=[],s=0;s<arguments.length;s++){if(i="","object"==typeof n[s]){for(var l in i+="\n["+s+"] ",arguments[0])i+=l+": "+n[0][l]+", ";i=i.slice(0,-2)}else i=n[s];o.push(i)}w(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return t.apply(this,arguments)},t)}var x,S={};function $(e,t){null!=a.deprecationHandler&&a.deprecationHandler(e,t),S[e]||(w(t),S[e]=!0)}function D(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function j(e,t){var r,a=d({},e);for(r in t)c(t,r)&&(i(e[r])&&i(t[r])?(a[r]={},d(a[r],e[r]),d(a[r],t[r])):null!=t[r]?a[r]=t[r]:delete a[r]);for(r in e)c(e,r)&&!c(t,r)&&i(e[r])&&(a[r]=d({},a[r]));return a}function O(e){null!=e&&this.set(e)}a.suppressDeprecationWarnings=!1,a.deprecationHandler=null,x=Object.keys?Object.keys:function(e){var t,r=[];for(t in e)c(e,t)&&r.push(t);return r};var F={};function T(e,t){var r=e.toLowerCase();F[r]=F[r+"s"]=F[t]=e}function M(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function P(e){var t,r,a={};for(r in e)c(e,r)&&(t=M(r))&&(a[t]=e[r]);return a}var E={};function R(e,t){E[e]=t}function L(e,t,r){var a=""+Math.abs(e),n=t-a.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+a}var z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,N=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Y={},U={};function H(e,t,r,a){var n=a;"string"==typeof a&&(n=function(){return this[a]()}),e&&(U[e]=n),t&&(U[t[0]]=function(){return L(n.apply(this,arguments),t[1],t[2])}),r&&(U[r]=function(){return this.localeData().ordinal(n.apply(this,arguments),e)})}function G(e,t){return e.isValid()?(t=B(t,e.localeData()),Y[t]=Y[t]||function(e){var t,r,a,n=e.match(z);for(t=0,r=n.length;t<r;t++)U[n[t]]?n[t]=U[n[t]]:n[t]=(a=n[t]).match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"");return function(t){var a,i="";for(a=0;a<r;a++)i+=D(n[a])?n[a].call(t,e):n[a];return i}}(t),Y[t](e)):e.localeData().invalidDate()}function B(e,t){var r=5;function a(e){return t.longDateFormat(e)||e}for(N.lastIndex=0;r>=0&&N.test(e);)e=e.replace(N,a),N.lastIndex=0,r-=1;return e}var W=/\d/,q=/\d\d/,Z=/\d{3}/,V=/\d{4}/,J=/[+-]?\d{6}/,Q=/\d\d?/,X=/\d\d\d\d?/,K=/\d\d\d\d\d\d?/,ee=/\d{1,3}/,te=/\d{1,4}/,re=/[+-]?\d{1,6}/,ae=/\d+/,ne=/[+-]?\d+/,ie=/Z|[+-]\d\d:?\d\d/gi,oe=/Z|[+-]\d\d(?::?\d\d)?/gi,se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,le={};function pe(e,t,r){le[e]=D(t)?t:function(e,a){return e&&r?r:t}}function ce(e,t){return c(le,e)?le[e](t._strict,t._locale):new RegExp(de(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,r,a,n){return t||r||a||n})))}function de(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ue={};function fe(e,t){var r,a=t;for("string"==typeof e&&(e=[e]),s(t)&&(a=function(e,r){r[t]=b(e)}),r=0;r<e.length;r++)ue[e[r]]=a}function ge(e,t){fe(e,function(e,r,a,n){a._w=a._w||{},t(e,a._w,a,n)})}function _e(e,t,r){null!=t&&c(ue,e)&&ue[e](t,r._a,r,e)}var he=0,me=1,Ce=2,Ae=3,Ie=4,ve=5,be=6,ye=7,we=8;function ke(e){return xe(e)?366:365}function xe(e){return e%4==0&&e%100!=0||e%400==0}H("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),T("year","y"),R("year",1),pe("Y",ne),pe("YY",Q,q),pe("YYYY",te,V),pe("YYYYY",re,J),pe("YYYYYY",re,J),fe(["YYYYY","YYYYYY"],he),fe("YYYY",function(e,t){t[he]=2===e.length?a.parseTwoDigitYear(e):b(e)}),fe("YY",function(e,t){t[he]=a.parseTwoDigitYear(e)}),fe("Y",function(e,t){t[he]=parseInt(e,10)}),a.parseTwoDigitYear=function(e){return b(e)+(b(e)>68?1900:2e3)};var Se,$e=De("FullYear",!0);function De(e,t){return function(r){return null!=r?(Oe(this,e,r),a.updateOffset(this,t),this):je(this,e)}}function je(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Oe(e,t,r){e.isValid()&&!isNaN(r)&&("FullYear"===t&&xe(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](r,e.month(),Fe(r,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](r))}function Fe(e,t){if(isNaN(e)||isNaN(t))return NaN;var r,a=(t%(r=12)+r)%r;return e+=(t-a)/12,1===a?xe(e)?29:28:31-a%7%2}Se=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),H("MMMM",0,0,function(e){return this.localeData().months(this,e)}),T("month","M"),R("month",8),pe("M",Q),pe("MM",Q,q),pe("MMM",function(e,t){return t.monthsShortRegex(e)}),pe("MMMM",function(e,t){return t.monthsRegex(e)}),fe(["M","MM"],function(e,t){t[me]=b(e)-1}),fe(["MMM","MMMM"],function(e,t,r,a){var n=r._locale.monthsParse(e,a,r._strict);null!=n?t[me]=n:f(r).invalidMonth=e});var Te=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Me="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Pe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ee(e,t){var r;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=b(t);else if(!s(t=e.localeData().monthsParse(t)))return e;return r=Math.min(e.date(),Fe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,r),e}function Re(e){return null!=e?(Ee(this,e),a.updateOffset(this,!0),this):je(this,"Month")}var Le=se,ze=se;function Ne(){function e(e,t){return t.length-e.length}var t,r,a=[],n=[],i=[];for(t=0;t<12;t++)r=u([2e3,t]),a.push(this.monthsShort(r,"")),n.push(this.months(r,"")),i.push(this.months(r,"")),i.push(this.monthsShort(r,""));for(a.sort(e),n.sort(e),i.sort(e),t=0;t<12;t++)a[t]=de(a[t]),n[t]=de(n[t]);for(t=0;t<24;t++)i[t]=de(i[t]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ye(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Ue(e,t,r){var a=7+t-r,n=(7+Ye(e,0,a).getUTCDay()-t)%7;return-n+a-1}function He(e,t,r,a,n){var i,o,s=(7+r-a)%7,l=Ue(e,a,n),p=1+7*(t-1)+s+l;return p<=0?o=ke(i=e-1)+p:p>ke(e)?(i=e+1,o=p-ke(e)):(i=e,o=p),{year:i,dayOfYear:o}}function Ge(e,t,r){var a,n,i=Ue(e.year(),t,r),o=Math.floor((e.dayOfYear()-i-1)/7)+1;return o<1?(n=e.year()-1,a=o+Be(n,t,r)):o>Be(e.year(),t,r)?(a=o-Be(e.year(),t,r),n=e.year()+1):(n=e.year(),a=o),{week:a,year:n}}function Be(e,t,r){var a=Ue(e,t,r),n=Ue(e+1,t,r);return(ke(e)-a+n)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),T("week","w"),T("isoWeek","W"),R("week",5),R("isoWeek",5),pe("w",Q),pe("ww",Q,q),pe("W",Q),pe("WW",Q,q),ge(["w","ww","W","WW"],function(e,t,r,a){t[a.substr(0,1)]=b(e)}),H("d",0,"do","day"),H("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),H("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),H("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),T("day","d"),T("weekday","e"),T("isoWeekday","E"),R("day",11),R("weekday",11),R("isoWeekday",11),pe("d",Q),pe("e",Q),pe("E",Q),pe("dd",function(e,t){return t.weekdaysMinRegex(e)}),pe("ddd",function(e,t){return t.weekdaysShortRegex(e)}),pe("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,r,a){var n=r._locale.weekdaysParse(e,a,r._strict);null!=n?t.d=n:f(r).invalidWeekday=e}),ge(["d","e","E"],function(e,t,r,a){t[a]=b(e)});var We="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ve=se,Je=se,Qe=se;function Xe(){function e(e,t){return t.length-e.length}var t,r,a,n,i,o=[],s=[],l=[],p=[];for(t=0;t<7;t++)r=u([2e3,1]).day(t),a=this.weekdaysMin(r,""),n=this.weekdaysShort(r,""),i=this.weekdays(r,""),o.push(a),s.push(n),l.push(i),p.push(a),p.push(n),p.push(i);for(o.sort(e),s.sort(e),l.sort(e),p.sort(e),t=0;t<7;t++)s[t]=de(s[t]),l[t]=de(l[t]),p[t]=de(p[t]);this._weekdaysRegex=new RegExp("^("+p.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Ke(){return this.hours()%12||12}function et(e,t){H(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function tt(e,t){return t._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,Ke),H("k",["kk",2],0,function(){return this.hours()||24}),H("hmm",0,0,function(){return""+Ke.apply(this)+L(this.minutes(),2)}),H("hmmss",0,0,function(){return""+Ke.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+L(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)}),et("a",!0),et("A",!1),T("hour","h"),R("hour",13),pe("a",tt),pe("A",tt),pe("H",Q),pe("h",Q),pe("k",Q),pe("HH",Q,q),pe("hh",Q,q),pe("kk",Q,q),pe("hmm",X),pe("hmmss",K),pe("Hmm",X),pe("Hmmss",K),fe(["H","HH"],Ae),fe(["k","kk"],function(e,t,r){var a=b(e);t[Ae]=24===a?0:a}),fe(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e}),fe(["h","hh"],function(e,t,r){t[Ae]=b(e),f(r).bigHour=!0}),fe("hmm",function(e,t,r){var a=e.length-2;t[Ae]=b(e.substr(0,a)),t[Ie]=b(e.substr(a)),f(r).bigHour=!0}),fe("hmmss",function(e,t,r){var a=e.length-4,n=e.length-2;t[Ae]=b(e.substr(0,a)),t[Ie]=b(e.substr(a,2)),t[ve]=b(e.substr(n)),f(r).bigHour=!0}),fe("Hmm",function(e,t,r){var a=e.length-2;t[Ae]=b(e.substr(0,a)),t[Ie]=b(e.substr(a))}),fe("Hmmss",function(e,t,r){var a=e.length-4,n=e.length-2;t[Ae]=b(e.substr(0,a)),t[Ie]=b(e.substr(a,2)),t[ve]=b(e.substr(n))});var rt,at=De("Hours",!0),nt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Me,monthsShort:Pe,week:{dow:0,doy:6},weekdays:We,weekdaysMin:Ze,weekdaysShort:qe,meridiemParse:/[ap]\.?m?\.?/i},it={},ot={};function st(e){return e?e.toLowerCase().replace("_","-"):e}function lt(t){var r=null;if(!it[t]&&e&&e.exports)try{r=rt._abbr;var a=commonjsRequire;a("./locale/"+t),pt(r)}catch(e){}return it[t]}function pt(e,t){var r;return e&&(r=o(t)?dt(e):ct(e,t))&&(rt=r),rt._abbr}function ct(e,t){if(null!==t){var r=nt;if(t.abbr=e,null!=it[e])$("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=it[e]._config;else if(null!=t.parentLocale){if(null==it[t.parentLocale])return ot[t.parentLocale]||(ot[t.parentLocale]=[]),ot[t.parentLocale].push({name:e,config:t}),null;r=it[t.parentLocale]._config}return it[e]=new O(j(r,t)),ot[e]&&ot[e].forEach(function(e){ct(e.name,e.config)}),pt(e),it[e]}return delete it[e],null}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rt;if(!n(e)){if(t=lt(e))return t;e=[e]}return function(e){for(var t,r,a,n,i=0;i<e.length;){for(n=st(e[i]).split("-"),t=n.length,r=(r=st(e[i+1]))?r.split("-"):null;t>0;){if(a=lt(n.slice(0,t).join("-")))return a;if(r&&r.length>=t&&y(n,r,!0)>=t-1)break;t--}i++}return null}(e)}function ut(e){var t,r=e._a;return r&&-2===f(e).overflow&&(t=r[me]<0||r[me]>11?me:r[Ce]<1||r[Ce]>Fe(r[he],r[me])?Ce:r[Ae]<0||r[Ae]>24||24===r[Ae]&&(0!==r[Ie]||0!==r[ve]||0!==r[be])?Ae:r[Ie]<0||r[Ie]>59?Ie:r[ve]<0||r[ve]>59?ve:r[be]<0||r[be]>999?be:-1,f(e)._overflowDayOfYear&&(t<he||t>Ce)&&(t=Ce),f(e)._overflowWeeks&&-1===t&&(t=ye),f(e)._overflowWeekday&&-1===t&&(t=we),f(e).overflow=t),e}function ft(e,t,r){return null!=e?e:null!=t?t:r}function gt(e){var t,r,n,i,o,s=[];if(!e._d){for(n=function(e){var t=new Date(a.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[Ce]&&null==e._a[me]&&function(e){var t,r,a,n,i,o,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)i=1,o=4,r=ft(t.GG,e._a[he],Ge(Dt(),1,4).year),a=ft(t.W,1),((n=ft(t.E,1))<1||n>7)&&(l=!0);else{i=e._locale._week.dow,o=e._locale._week.doy;var p=Ge(Dt(),i,o);r=ft(t.gg,e._a[he],p.year),a=ft(t.w,p.week),null!=t.d?((n=t.d)<0||n>6)&&(l=!0):null!=t.e?(n=t.e+i,(t.e<0||t.e>6)&&(l=!0)):n=i}a<1||a>Be(r,i,o)?f(e)._overflowWeeks=!0:null!=l?f(e)._overflowWeekday=!0:(s=He(r,a,n,i,o),e._a[he]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(o=ft(e._a[he],n[he]),(e._dayOfYear>ke(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),r=Ye(o,0,e._dayOfYear),e._a[me]=r.getUTCMonth(),e._a[Ce]=r.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=n[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ae]&&0===e._a[Ie]&&0===e._a[ve]&&0===e._a[be]&&(e._nextDay=!0,e._a[Ae]=0),e._d=(e._useUTC?Ye:function(e,t,r,a,n,i,o){var s=new Date(e,t,r,a,n,i,o);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ae]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(f(e).weekdayMismatch=!0)}}var _t=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/Z|[+-]\d\d(?::?\d\d)?/,Ct=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],At=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],It=/^\/?Date\((\-?\d+)/i;function vt(e){var t,r,a,n,i,o,s=e._i,l=_t.exec(s)||ht.exec(s);if(l){for(f(e).iso=!0,t=0,r=Ct.length;t<r;t++)if(Ct[t][1].exec(l[1])){n=Ct[t][0],a=!1!==Ct[t][2];break}if(null==n)return void(e._isValid=!1);if(l[3]){for(t=0,r=At.length;t<r;t++)if(At[t][1].exec(l[3])){i=(l[2]||" ")+At[t][0];break}if(null==i)return void(e._isValid=!1)}if(!a&&null!=i)return void(e._isValid=!1);if(l[4]){if(!mt.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=n+(i||"")+(o||""),xt(e)}else e._isValid=!1}var bt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function yt(e,t,r,a,n,i){var o=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),Pe.indexOf(t),parseInt(r,10),parseInt(a,10),parseInt(n,10)];return i&&o.push(parseInt(i,10)),o}var wt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t=bt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(t){var r=yt(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,r){if(e){var a=qe.indexOf(e),n=new Date(t[0],t[1],t[2]).getDay();if(a!==n)return f(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}(t[1],r,e))return;e._a=r,e._tzm=function(e,t,r){if(e)return wt[e];if(t)return 0;var a=parseInt(r,10),n=a%100,i=(a-n)/100;return 60*i+n}(t[8],t[9],t[10]),e._d=Ye.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function xt(e){if(e._f!==a.ISO_8601)if(e._f!==a.RFC_2822){e._a=[],f(e).empty=!0;var t,r,n,i,o,s=""+e._i,l=s.length,p=0;for(n=B(e._f,e._locale).match(z)||[],t=0;t<n.length;t++)i=n[t],(r=(s.match(ce(i,e))||[])[0])&&((o=s.substr(0,s.indexOf(r))).length>0&&f(e).unusedInput.push(o),s=s.slice(s.indexOf(r)+r.length),p+=r.length),U[i]?(r?f(e).empty=!1:f(e).unusedTokens.push(i),_e(i,r,e)):e._strict&&!r&&f(e).unusedTokens.push(i);f(e).charsLeftOver=l-p,s.length>0&&f(e).unusedInput.push(s),e._a[Ae]<=12&&!0===f(e).bigHour&&e._a[Ae]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[Ae]=(c=e._locale,d=e._a[Ae],null==(u=e._meridiem)?d:null!=c.meridiemHour?c.meridiemHour(d,u):null!=c.isPM?((g=c.isPM(u))&&d<12&&(d+=12),g||12!==d||(d=0),d):d),gt(e),ut(e)}else kt(e);else vt(e);var c,d,u,g}function St(e){var t=e._i,r=e._f;return e._locale=e._locale||dt(e._l),null===t||void 0===r&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),I(t)?new A(ut(t)):(l(t)?e._d=t:n(r)?function(e){var t,r,a,n,i;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(n=0;n<e._f.length;n++)i=0,t=m({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[n],xt(t),g(t)&&(i+=f(t).charsLeftOver,i+=10*f(t).unusedTokens.length,f(t).score=i,(null==a||i<a)&&(a=i,r=t));d(e,r||t)}(e):r?xt(e):function(e){var t=e._i;o(t)?e._d=new Date(a.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=It.exec(e._i);null===t?(vt(e),!1===e._isValid&&(delete e._isValid,kt(e),!1===e._isValid&&(delete e._isValid,a.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):n(t)?(e._a=p(t.slice(0),function(e){return parseInt(e,10)}),gt(e)):i(t)?function(e){if(!e._d){var t=P(e._i);e._a=p([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),gt(e)}}(e):s(t)?e._d=new Date(t):a.createFromInputFallback(e)}(e),g(e)||(e._d=null),e))}function $t(e,t,r,a,o){var s,l={};return!0!==r&&!1!==r||(a=r,r=void 0),(i(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||n(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=o,l._l=r,l._i=e,l._f=t,l._strict=a,(s=new A(ut(St(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Dt(e,t,r,a){return $t(e,t,r,a,!1)}a.createFromInputFallback=k("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),a.ISO_8601=function(){},a.RFC_2822=function(){};var jt=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Ot=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Dt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function Ft(e,t){var r,a;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Dt();for(r=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](r)||(r=t[a]);return r}var Tt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mt(e){var t=P(e),r=t.year||0,a=t.quarter||0,n=t.month||0,i=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,p=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Se.call(Tt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var r=!1,a=0;a<Tt.length;++a)if(e[Tt[a]]){if(r)return!1;parseFloat(e[Tt[a]])!==b(e[Tt[a]])&&(r=!0)}return!0}(t),this._milliseconds=+c+1e3*p+6e4*l+1e3*s*60*60,this._days=+o+7*i,this._months=+n+3*a+12*r,this._data={},this._locale=dt(),this._bubble()}function Pt(e){return e instanceof Mt}function Et(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Rt(e,t){H(e,0,0,function(){var e=this.utcOffset(),r="+";return e<0&&(e=-e,r="-"),r+L(~~(e/60),2)+t+L(~~e%60,2)})}Rt("Z",":"),Rt("ZZ",""),pe("Z",oe),pe("ZZ",oe),fe(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=zt(oe,e)});var Lt=/([\+\-]|\d\d)/gi;function zt(e,t){var r=(t||"").match(e);if(null===r)return null;var a=r[r.length-1]||[],n=(a+"").match(Lt)||["-",0,0],i=60*n[1]+b(n[2]);return 0===i?0:"+"===n[0]?i:-i}function Nt(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(I(e)||l(e)?e.valueOf():Dt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),a.updateOffset(r,!1),r):Dt(e).local()}function Yt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ut(){return!!this.isValid()&&this._isUTC&&0===this._offset}a.updateOffset=function(){};var Ht=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Gt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(e,t){var r,a,n,i,o,l,p=e,d=null;return Pt(e)?p={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(p={},t?p[t]=e:p.milliseconds=e):(d=Ht.exec(e))?(r="-"===d[1]?-1:1,p={y:0,d:b(d[Ce])*r,h:b(d[Ae])*r,m:b(d[Ie])*r,s:b(d[ve])*r,ms:b(Et(1e3*d[be]))*r}):(d=Gt.exec(e))?(r="-"===d[1]?-1:(d[1],1),p={y:Wt(d[2],r),M:Wt(d[3],r),w:Wt(d[4],r),d:Wt(d[5],r),h:Wt(d[6],r),m:Wt(d[7],r),s:Wt(d[8],r)}):null==p?p={}:"object"==typeof p&&("from"in p||"to"in p)&&(i=Dt(p.from),o=Dt(p.to),n=i.isValid()&&o.isValid()?(o=Nt(o,i),i.isBefore(o)?l=qt(i,o):((l=qt(o,i)).milliseconds=-l.milliseconds,l.months=-l.months),l):{milliseconds:0,months:0},(p={}).ms=n.milliseconds,p.M=n.months),a=new Mt(p),Pt(e)&&c(e,"_locale")&&(a._locale=e._locale),a}function Wt(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function qt(e,t){var r={milliseconds:0,months:0};return r.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function Zt(e,t){return function(r,a){var n;return null===a||isNaN(+a)||($(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=r,r=a,a=n),Vt(this,Bt(r="string"==typeof r?+r:r,a),e),this}}function Vt(e,t,r,n){var i=t._milliseconds,o=Et(t._days),s=Et(t._months);e.isValid()&&(n=null==n||n,s&&Ee(e,je(e,"Month")+s*r),o&&Oe(e,"Date",je(e,"Date")+o*r),i&&e._d.setTime(e._d.valueOf()+i*r),n&&a.updateOffset(e,o||s))}Bt.fn=Mt.prototype,Bt.invalid=function(){return Bt(NaN)};var Jt=Zt(1,"add"),Qt=Zt(-1,"subtract");function Xt(e,t){var r,a,n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return t-i<0?(r=e.clone().add(n-1,"months"),a=(t-i)/(i-r)):(r=e.clone().add(n+1,"months"),a=(t-i)/(r-i)),-(n+a)||0}function Kt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var er=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function tr(){return this._locale}function rr(e,t){H(0,[e,e.length],0,t)}function ar(e,t,r,a,n){var i;return null==e?Ge(this,a,n).year:(i=Be(e,a,n),t>i&&(t=i),function(e,t,r,a,n){var i=He(e,t,r,a,n),o=Ye(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}.call(this,e,t,r,a,n))}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),rr("gggg","weekYear"),rr("ggggg","weekYear"),rr("GGGG","isoWeekYear"),rr("GGGGG","isoWeekYear"),T("weekYear","gg"),T("isoWeekYear","GG"),R("weekYear",1),R("isoWeekYear",1),pe("G",ne),pe("g",ne),pe("GG",Q,q),pe("gg",Q,q),pe("GGGG",te,V),pe("gggg",te,V),pe("GGGGG",re,J),pe("ggggg",re,J),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,a){t[a.substr(0,2)]=b(e)}),ge(["gg","GG"],function(e,t,r,n){t[n]=a.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),T("quarter","Q"),R("quarter",7),pe("Q",W),fe("Q",function(e,t){t[me]=3*(b(e)-1)}),H("D",["DD",2],"Do","date"),T("date","D"),R("date",9),pe("D",Q),pe("DD",Q,q),pe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),fe(["D","DD"],Ce),fe("Do",function(e,t){t[Ce]=b(e.match(Q)[0])});var nr=De("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),T("dayOfYear","DDD"),R("dayOfYear",4),pe("DDD",ee),pe("DDDD",Z),fe(["DDD","DDDD"],function(e,t,r){r._dayOfYear=b(e)}),H("m",["mm",2],0,"minute"),T("minute","m"),R("minute",14),pe("m",Q),pe("mm",Q,q),fe(["m","mm"],Ie);var ir=De("Minutes",!1);H("s",["ss",2],0,"second"),T("second","s"),R("second",15),pe("s",Q),pe("ss",Q,q),fe(["s","ss"],ve);var or,sr=De("Seconds",!1);for(H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),T("millisecond","ms"),R("millisecond",16),pe("S",ee,W),pe("SS",ee,q),pe("SSS",ee,Z),or="SSSS";or.length<=9;or+="S")pe(or,ae);function lr(e,t){t[be]=b(1e3*("0."+e))}for(or="S";or.length<=9;or+="S")fe(or,lr);var pr=De("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var cr=A.prototype;function dr(e){return e}cr.add=Jt,cr.calendar=function(e,t){var r=e||Dt(),n=Nt(r,this).startOf("day"),i=a.calendarFormat(this,n)||"sameElse",o=t&&(D(t[i])?t[i].call(this,r):t[i]);return this.format(o||this.localeData().calendar(i,this,Dt(r)))},cr.clone=function(){return new A(this)},cr.diff=function(e,t,r){var a,n,i;if(!this.isValid())return NaN;if(!(a=Nt(e,this)).isValid())return NaN;switch(n=6e4*(a.utcOffset()-this.utcOffset()),t=M(t)){case"year":i=Xt(this,a)/12;break;case"month":i=Xt(this,a);break;case"quarter":i=Xt(this,a)/3;break;case"second":i=(this-a)/1e3;break;case"minute":i=(this-a)/6e4;break;case"hour":i=(this-a)/36e5;break;case"day":i=(this-a-n)/864e5;break;case"week":i=(this-a-n)/6048e5;break;default:i=this-a}return r?i:v(i)},cr.endOf=function(e){return void 0===(e=M(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},cr.format=function(e){e||(e=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var t=G(this,e);return this.localeData().postformat(t)},cr.from=function(e,t){return this.isValid()&&(I(e)&&e.isValid()||Dt(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},cr.fromNow=function(e){return this.from(Dt(),e)},cr.to=function(e,t){return this.isValid()&&(I(e)&&e.isValid()||Dt(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},cr.toNow=function(e){return this.to(Dt(),e)},cr.get=function(e){return D(this[e=M(e)])?this[e]():this},cr.invalidAt=function(){return f(this).overflow},cr.isAfter=function(e,t){var r=I(e)?e:Dt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=M(o(t)?"millisecond":t))?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf())},cr.isBefore=function(e,t){var r=I(e)?e:Dt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=M(o(t)?"millisecond":t))?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf())},cr.isBetween=function(e,t,r,a){return("("===(a=a||"()")[0]?this.isAfter(e,r):!this.isBefore(e,r))&&(")"===a[1]?this.isBefore(t,r):!this.isAfter(t,r))},cr.isSame=function(e,t){var r,a=I(e)?e:Dt(e);return!(!this.isValid()||!a.isValid())&&("millisecond"===(t=M(t||"millisecond"))?this.valueOf()===a.valueOf():(r=a.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))},cr.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},cr.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},cr.isValid=function(){return g(this)},cr.lang=er,cr.locale=Kt,cr.localeData=tr,cr.max=Ot,cr.min=jt,cr.parsingFlags=function(){return d({},f(this))},cr.set=function(e,t){if("object"==typeof e)for(var r=function(e){var t=[];for(var r in e)t.push({unit:r,priority:E[r]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=P(e)),a=0;a<r.length;a++)this[r[a].unit](e[r[a].unit]);else if(D(this[e=M(e)]))return this[e](t);return this},cr.startOf=function(e){switch(e=M(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},cr.subtract=Qt,cr.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},cr.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},cr.toDate=function(){return new Date(this.valueOf())},cr.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?G(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",G(r,"Z")):G(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},cr.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var r="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=t+'[")]';return this.format(r+a+"-MM-DD[T]HH:mm:ss.SSS"+n)},cr.toJSON=function(){return this.isValid()?this.toISOString():null},cr.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},cr.unix=function(){return Math.floor(this.valueOf()/1e3)},cr.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},cr.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},cr.year=$e,cr.isLeapYear=function(){return xe(this.year())},cr.weekYear=function(e){return ar.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},cr.isoWeekYear=function(e){return ar.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},cr.quarter=cr.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},cr.month=Re,cr.daysInMonth=function(){return Fe(this.year(),this.month())},cr.week=cr.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},cr.isoWeek=cr.isoWeeks=function(e){var t=Ge(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},cr.weeksInYear=function(){var e=this.localeData()._week;return Be(this.year(),e.dow,e.doy)},cr.isoWeeksInYear=function(){return Be(this.year(),1,4)},cr.date=nr,cr.day=cr.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},cr.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},cr.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},cr.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},cr.hour=cr.hours=at,cr.minute=cr.minutes=ir,cr.second=cr.seconds=sr,cr.millisecond=cr.milliseconds=pr,cr.utcOffset=function(e,t,r){var n,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=zt(oe,e)))return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&t&&(n=Yt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==e&&(!t||this._changeInProgress?Vt(this,Bt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Yt(this)},cr.utc=function(e){return this.utcOffset(0,e)},cr.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Yt(this),"m")),this},cr.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=zt(ie,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},cr.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Dt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},cr.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},cr.isLocal=function(){return!!this.isValid()&&!this._isUTC},cr.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},cr.isUtc=Ut,cr.isUTC=Ut,cr.zoneAbbr=function(){return this._isUTC?"UTC":""},cr.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},cr.dates=k("dates accessor is deprecated. Use date instead.",nr),cr.months=k("months accessor is deprecated. Use month instead",Re),cr.years=k("years accessor is deprecated. Use year instead",$e),cr.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),cr.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};if(m(e,this),(e=St(e))._a){var t=e._isUTC?u(e._a):Dt(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var ur=O.prototype;function fr(e,t,r,a){var n=dt(),i=u().set(a,t);return n[r](i,e)}function gr(e,t,r){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return fr(e,t,r,"month");var a,n=[];for(a=0;a<12;a++)n[a]=fr(e,a,r,"month");return n}function _r(e,t,r,a){"boolean"==typeof e?(s(t)&&(r=t,t=void 0),t=t||""):(r=t=e,e=!1,s(t)&&(r=t,t=void 0),t=t||"");var n,i=dt(),o=e?i._week.dow:0;if(null!=r)return fr(t,(r+o)%7,a,"day");var l=[];for(n=0;n<7;n++)l[n]=fr(t,(n+o)%7,a,"day");return l}ur.calendar=function(e,t,r){var a=this._calendar[e]||this._calendar.sameElse;return D(a)?a.call(t,r):a},ur.longDateFormat=function(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},ur.invalidDate=function(){return this._invalidDate},ur.ordinal=function(e){return this._ordinal.replace("%d",e)},ur.preparse=dr,ur.postformat=dr,ur.relativeTime=function(e,t,r,a){var n=this._relativeTime[r];return D(n)?n(e,t,r,a):n.replace(/%d/i,e)},ur.pastFuture=function(e,t){var r=this._relativeTime[e>0?"future":"past"];return D(r)?r(t):r.replace(/%s/i,t)},ur.set=function(e){var t,r;for(r in e)D(t=e[r])?this[r]=t:this["_"+r]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ur.months=function(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Te).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone},ur.monthsShort=function(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Te.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ur.monthsParse=function(e,t,r){var a,n,i;if(this._monthsParseExact)return function(e,t,r){var a,n,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)i=u([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(i,"").toLocaleLowerCase();return r?"MMM"===t?-1!==(n=Se.call(this._shortMonthsParse,o))?n:null:-1!==(n=Se.call(this._longMonthsParse,o))?n:null:"MMM"===t?-1!==(n=Se.call(this._shortMonthsParse,o))?n:-1!==(n=Se.call(this._longMonthsParse,o))?n:null:-1!==(n=Se.call(this._longMonthsParse,o))?n:-1!==(n=Se.call(this._shortMonthsParse,o))?n:null}.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(n=u([2e3,a]),r&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),r||this._monthsParse[a]||(i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[a]=new RegExp(i.replace(".",""),"i")),r&&"MMMM"===t&&this._longMonthsParse[a].test(e))return a;if(r&&"MMM"===t&&this._shortMonthsParse[a].test(e))return a;if(!r&&this._monthsParse[a].test(e))return a}},ur.monthsRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ne.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=ze),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},ur.monthsShortRegex=function(e){return this._monthsParseExact?(c(this,"_monthsRegex")||Ne.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Le),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},ur.week=function(e){return Ge(e,this._week.dow,this._week.doy).week},ur.firstDayOfYear=function(){return this._week.doy},ur.firstDayOfWeek=function(){return this._week.dow},ur.weekdays=function(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone},ur.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},ur.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},ur.weekdaysParse=function(e,t,r){var a,n,i;if(this._weekdaysParseExact)return function(e,t,r){var a,n,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)i=u([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(i,"").toLocaleLowerCase();return r?"dddd"===t?-1!==(n=Se.call(this._weekdaysParse,o))?n:null:"ddd"===t?-1!==(n=Se.call(this._shortWeekdaysParse,o))?n:null:-1!==(n=Se.call(this._minWeekdaysParse,o))?n:null:"dddd"===t?-1!==(n=Se.call(this._weekdaysParse,o))?n:-1!==(n=Se.call(this._shortWeekdaysParse,o))?n:-1!==(n=Se.call(this._minWeekdaysParse,o))?n:null:"ddd"===t?-1!==(n=Se.call(this._shortWeekdaysParse,o))?n:-1!==(n=Se.call(this._weekdaysParse,o))?n:-1!==(n=Se.call(this._minWeekdaysParse,o))?n:null:-1!==(n=Se.call(this._minWeekdaysParse,o))?n:-1!==(n=Se.call(this._weekdaysParse,o))?n:-1!==(n=Se.call(this._shortWeekdaysParse,o))?n:null}.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(n=u([2e3,1]).day(a),r&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(n,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(n,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(n,"").replace(".",".?")+"$","i")),this._weekdaysParse[a]||(i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[a]=new RegExp(i.replace(".",""),"i")),r&&"dddd"===t&&this._fullWeekdaysParse[a].test(e))return a;if(r&&"ddd"===t&&this._shortWeekdaysParse[a].test(e))return a;if(r&&"dd"===t&&this._minWeekdaysParse[a].test(e))return a;if(!r&&this._weekdaysParse[a].test(e))return a}},ur.weekdaysRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Ve),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},ur.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ur.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ur.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},ur.meridiem=function(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"},pt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=1===b(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+r}}),a.lang=k("moment.lang is deprecated. Use moment.locale instead.",pt),a.langData=k("moment.langData is deprecated. Use moment.localeData instead.",dt);var hr=Math.abs;function mr(e,t,r,a){var n=Bt(t,r);return e._milliseconds+=a*n._milliseconds,e._days+=a*n._days,e._months+=a*n._months,e._bubble()}function Cr(e){return e<0?Math.floor(e):Math.ceil(e)}function Ar(e){return 4800*e/146097}function Ir(e){return 146097*e/4800}function vr(e){return function(){return this.as(e)}}var br=vr("ms"),yr=vr("s"),wr=vr("m"),kr=vr("h"),xr=vr("d"),Sr=vr("w"),$r=vr("M"),Dr=vr("y");function jr(e){return function(){return this.isValid()?this._data[e]:NaN}}var Or=jr("milliseconds"),Fr=jr("seconds"),Tr=jr("minutes"),Mr=jr("hours"),Pr=jr("days"),Er=jr("months"),Rr=jr("years"),Lr=Math.round,zr={ss:44,s:45,m:45,h:22,d:26,M:11},Nr=Math.abs;function Yr(e){return(e>0)-(e<0)||+e}function Ur(){if(!this.isValid())return this.localeData().invalidDate();var e,t,r=Nr(this._milliseconds)/1e3,a=Nr(this._days),n=Nr(this._months);e=v(r/60),t=v(e/60),r%=60,e%=60;var i=v(n/12),o=n%=12,s=a,l=t,p=e,c=r?r.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var u=d<0?"-":"",f=Yr(this._months)!==Yr(d)?"-":"",g=Yr(this._days)!==Yr(d)?"-":"",_=Yr(this._milliseconds)!==Yr(d)?"-":"";return u+"P"+(i?f+i+"Y":"")+(o?f+o+"M":"")+(s?g+s+"D":"")+(l||p||c?"T":"")+(l?_+l+"H":"")+(p?_+p+"M":"")+(c?_+c+"S":"")}var Hr=Mt.prototype;return Hr.isValid=function(){return this._isValid},Hr.abs=function(){var e=this._data;return this._milliseconds=hr(this._milliseconds),this._days=hr(this._days),this._months=hr(this._months),e.milliseconds=hr(e.milliseconds),e.seconds=hr(e.seconds),e.minutes=hr(e.minutes),e.hours=hr(e.hours),e.months=hr(e.months),e.years=hr(e.years),this},Hr.add=function(e,t){return mr(this,e,t,1)},Hr.subtract=function(e,t){return mr(this,e,t,-1)},Hr.as=function(e){if(!this.isValid())return NaN;var t,r,a=this._milliseconds;if("month"===(e=M(e))||"year"===e)return t=this._days+a/864e5,r=this._months+Ar(t),"month"===e?r:r/12;switch(t=this._days+Math.round(Ir(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return 24*t+a/36e5;case"minute":return 1440*t+a/6e4;case"second":return 86400*t+a/1e3;case"millisecond":return Math.floor(864e5*t)+a;default:throw new Error("Unknown unit "+e)}},Hr.asMilliseconds=br,Hr.asSeconds=yr,Hr.asMinutes=wr,Hr.asHours=kr,Hr.asDays=xr,Hr.asWeeks=Sr,Hr.asMonths=$r,Hr.asYears=Dr,Hr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*b(this._months/12):NaN},Hr._bubble=function(){var e,t,r,a,n,i=this._milliseconds,o=this._days,s=this._months,l=this._data;return i>=0&&o>=0&&s>=0||i<=0&&o<=0&&s<=0||(i+=864e5*Cr(Ir(s)+o),o=0,s=0),l.milliseconds=i%1e3,e=v(i/1e3),l.seconds=e%60,t=v(e/60),l.minutes=t%60,r=v(t/60),l.hours=r%24,o+=v(r/24),n=v(Ar(o)),s+=n,o-=Cr(Ir(n)),a=v(s/12),s%=12,l.days=o,l.months=s,l.years=a,this},Hr.clone=function(){return Bt(this)},Hr.get=function(e){return e=M(e),this.isValid()?this[e+"s"]():NaN},Hr.milliseconds=Or,Hr.seconds=Fr,Hr.minutes=Tr,Hr.hours=Mr,Hr.days=Pr,Hr.weeks=function(){return v(this.days()/7)},Hr.months=Er,Hr.years=Rr,Hr.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),r=function(e,t,r){var a=Bt(e).abs(),n=Lr(a.as("s")),i=Lr(a.as("m")),o=Lr(a.as("h")),s=Lr(a.as("d")),l=Lr(a.as("M")),p=Lr(a.as("y")),c=n<=zr.ss&&["s",n]||n<zr.s&&["ss",n]||i<=1&&["m"]||i<zr.m&&["mm",i]||o<=1&&["h"]||o<zr.h&&["hh",o]||s<=1&&["d"]||s<zr.d&&["dd",s]||l<=1&&["M"]||l<zr.M&&["MM",l]||p<=1&&["y"]||["yy",p];return c[2]=t,c[3]=+e>0,c[4]=r,function(e,t,r,a,n){return n.relativeTime(t||1,!!r,e,a)}.apply(null,c)}(this,!e,t);return e&&(r=t.pastFuture(+this,r)),t.postformat(r)},Hr.toISOString=Ur,Hr.toString=Ur,Hr.toJSON=Ur,Hr.locale=Kt,Hr.localeData=tr,Hr.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ur),Hr.lang=er,H("X",0,0,"unix"),H("x",0,0,"valueOf"),pe("x",ne),pe("X",/[+-]?\d+(\.\d{1,3})?/),fe("X",function(e,t,r){r._d=new Date(1e3*parseFloat(e,10))}),fe("x",function(e,t,r){r._d=new Date(b(e))}),a.version="2.20.1",t=Dt,a.fn=cr,a.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},a.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=u,a.unix=function(e){return Dt(1e3*e)},a.months=function(e,t){return gr(e,t,"months")},a.isDate=l,a.locale=pt,a.invalid=_,a.duration=Bt,a.isMoment=I,a.weekdays=function(e,t,r){return _r(e,t,r,"weekdays")},a.parseZone=function(){return Dt.apply(null,arguments).parseZone()},a.localeData=dt,a.isDuration=Pt,a.monthsShort=function(e,t){return gr(e,t,"monthsShort")},a.weekdaysMin=function(e,t,r){return _r(e,t,r,"weekdaysMin")},a.defineLocale=ct,a.updateLocale=function(e,t){if(null!=t){var r,a,n=nt;null!=(a=lt(e))&&(n=a._config),t=j(n,t),(r=new O(t)).parentLocale=it[e],it[e]=r,pt(e)}else null!=it[e]&&(null!=it[e].parentLocale?it[e]=it[e].parentLocale:null!=it[e]&&delete it[e]);return it[e]},a.locales=function(){return x(it)},a.weekdaysShort=function(e,t,r){return _r(e,t,r,"weekdaysShort")},a.normalizeUnits=M,a.relativeTimeRounding=function(e){return void 0===e?Lr:"function"==typeof e&&(Lr=e,!0)},a.relativeTimeThreshold=function(e,t){return void 0!==zr[e]&&(void 0===t?zr[e]:(zr[e]=t,"s"===e&&(zr.ss=t-1),!0))},a.calendarFormat=function(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"},a.prototype=cr,a.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},a}()}),hyper_min=createCommonjsModule(function(e){!function(){function t(e,t){for(var r in t)e[r]=t[r];return e}function r(e){!e.__d&&(e.__d=!0)&&1==D.push(e)&&(w.debounceRendering||$)(a)}function a(){var e,t=D;for(D=[];e=t.pop();)e.__d&&I(e)}function n(e,t,r){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&i(e,t.nodeName):r||e._componentConstructor===t.nodeName}function i(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function o(e){var r=t({},e.attributes);r.children=e.children;var a=e.nodeName.defaultProps;if(void 0!==a)for(var n in a)void 0===r[n]&&(r[n]=a[n]);return r}function s(e){var t=e.parentNode;t&&t.removeChild(e)}function l(e,t,r,a,n){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)r&&r(null),a&&a(e);else if("class"!==t||n)if("style"===t){if(a&&"string"!=typeof a&&"string"!=typeof r||(e.style.cssText=a||""),a&&"object"==typeof a){if("string"!=typeof r)for(var i in r)i in a||(e.style[i]="");for(var i in a)e.style[i]="number"==typeof a[i]&&!1===S.test(i)?a[i]+"px":a[i]}}else if("html"===t)a&&(e.innerHTML=a);else if("o"==t[0]&&"n"==t[1]){var o=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),a?r||e.addEventListener(t,p,o):e.removeEventListener(t,p,o),(e.__l||(e.__l={}))[t]=a}else if("list"!==t&&"type"!==t&&!n&&t in e)(function(e,t,r){try{e[t]=r}catch(e){}})(e,t,null==a?"":a),null!=a&&!1!==a||e.removeAttribute(t);else{var s=n&&t!==(t=t.replace(/^xlink\:?/,""));null==a||!1===a?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof a&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),a):e.setAttribute(t,a))}else e.className=a||""}function p(e){return this.__l[e.type](w.event&&w.event(e)||e)}function c(){for(var e;e=j.pop();)w.afterMount&&w.afterMount(e),e.on_mounted&&e.on_mounted()}function d(e,t,r,a,n,i){O++||(F=null!=n&&void 0!==n.ownerSVGElement,T=null!=e&&!("__hyperattr_"in e));var o=u(e,t,r,a,i);return n&&o.parentNode!==n&&n.appendChild(o),--O||(T=!1,i||c()),o}function u(e,t,r,a,n){var o=e,s=F;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||n)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),g(e,!0))),o.__hyperattr_=!0,o;var l=t.nodeName;if("function"==typeof l)return v(e,t,r,a);if(F="svg"===l||"foreignObject"!==l&&F,l+="",(!e||!i(e,l))&&(o=function(e,t){var r=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return r.__n=e,r}(l,F),e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),g(e,!0)}var p=o.firstChild,c=o.__hyperattr_,d=t.children;if(null==c){c=o.__hyperattr_={};for(var u=o.attributes,_=u.length;_--;)c[u[_].name]=u[_].value}return!T&&d&&1===d.length&&"string"==typeof d[0]&&null!=p&&void 0!==p.splitText&&null==p.nextSibling?p.nodeValue!=d[0]&&(p.nodeValue=d[0]):(d&&d.length||null!=p)&&f(o,d,r,a,T||null!=c.html),h(o,t.attributes,c),F=s,o}function f(e,t,r,a,i){var o,l,p,c,d,f=e.childNodes,_=[],h={},m=0,C=0,A=f.length,I=0,v=t?t.length:0;if(0!==A)for(var b=0;b<A;b++){var y=f[b],w=y.__hyperattr_;null!=(k=v&&w?y._component?y._component.__k:w.key:null)?(m++,h[k]=y):(w||(void 0!==y.splitText?!i||y.nodeValue.trim():i))&&(_[I++]=y)}if(0!==v)for(b=0;b<v;b++){var k;if(d=null,null!=(k=(c=t[b]).key))m&&void 0!==h[k]&&(d=h[k],h[k]=void 0,m--);else if(!d&&C<I)for(o=C;o<I;o++)if(void 0!==_[o]&&n(l=_[o],c,i)){d=l,_[o]=void 0,o===I-1&&I--,o===C&&C++;break}d=u(d,c,r,a),p=f[b],d&&d!==e&&d!==p&&(null==p?e.appendChild(d):d===p.nextSibling?s(p):e.insertBefore(d,p))}if(m)for(var b in h)void 0!==h[b]&&g(h[b],!1);for(;C<=I;)void 0!==(d=_[I--])&&g(d,!1)}function g(e,t){var r=e._component;r?b(r):(null!=e.__hyperattr_&&e.__hyperattr_.ref&&e.__hyperattr_.ref(null),!1!==t&&null!=e.__hyperattr_||s(e),_(e))}function _(e){for(e=e.lastChild;e;){var t=e.previousSibling;g(e,!0),e=t}}function h(e,t,r){var a;for(a in r)t&&null!=t[a]||null==r[a]||l(e,a,r[a],r[a]=void 0,F);for(a in t)"children"===a||"innerHTML"===a||a in r&&t[a]===("value"===a||"checked"===a?e[a]:r[a])||l(e,a,r[a],r[a]=t[a],F)}function m(e,t,r){var a,n=M[e.name];if(e.prototype&&e.prototype.render?(a=new e(t,r),y.call(a,t,r)):((a=new y(t,r)).constructor=e,a.render=C),n)for(var i=n.length;i--;)if(n[i].constructor===e){a.__b=n[i].__b,n.splice(i,1);break}return a}function C(e,t,r){return this.constructor(e,r)}function A(e,t,a,n,i){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||i?e.on_mount&&e.on_mount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,n),n&&n!==e.context&&(e.__c||(e.__c=e.context),e.context=n),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==a&&(1!==a&&!1===w.syncComponentUpdates&&e.base?r(e):I(e,1,i)),e.__r&&e.__r(e))}function I(e,r,a,n){if(!e.__x){var i,s,l,p=e.props,u=e.state,f=e.context,_=e.__p||p,h=e.__s||u,C=e.__c||f,v=e.base,y=e.__b,k=v||y,x=e._component,S=!1;if(v&&(e.props=_,e.state=h,e.context=C,2!==r&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(p,u,f)?S=!0:e.componentWillUpdate&&e.componentWillUpdate(p,u,f),e.props=p,e.state=u,e.context=f),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!S){i=e.render(p,u,f),e.getChildContext&&(f=t(t({},f),e.getChildContext()));var $,D,F=i&&i.nodeName;if("function"==typeof F){var T=o(i);(s=x)&&s.constructor===F&&T.key==s.__k?A(s,T,1,f,!1):($=s,e._component=s=m(F,T,f),s.__b=s.__b||y,s.__u=e,A(s,T,0,f,!1),I(s,1,a,!0)),D=s.base}else l=k,($=x)&&(l=e._component=null),(k||1===r)&&(l&&(l._component=null),D=d(l,i,f,a||!v,k&&k.parentNode,!0));if(k&&D!==k&&s!==x){var M=k.parentNode;M&&D!==M&&(M.replaceChild(D,k),$||(k._component=null,g(k,!1)))}if($&&b($),e.base=D,D&&!n){for(var P=e,E=e;E=E.__u;)(P=E).base=D;D._component=P,D._componentConstructor=P.constructor}}if(!v||a?j.unshift(e):S||(e.on_updated&&e.on_updated(_,h,C),w.afterUpdate&&w.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);O||n||c()}}function v(e,t,r,a){for(var n=e&&e._component,i=n,s=e,l=n&&e._componentConstructor===t.nodeName,p=l,c=o(t);n&&!p&&(n=n.__u);)p=n.constructor===t.nodeName;return n&&p&&(!a||n._component)?(A(n,c,3,r,a),e=n.base):(i&&!l&&(b(i),e=s=null),n=m(t.nodeName,c,r),e&&!n.__b&&(n.__b=e,s=null),A(n,c,1,r,a),e=n.base,s&&e!==s&&(s._component=null,g(s,!1))),e}function b(e){w.beforeUnmount&&w.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var r=e._component;r?b(r):t&&(t.__hyperattr_&&t.__hyperattr_.ref&&t.__hyperattr_.ref(null),e.__b=t,s(t),function(e){var t=e.constructor.name;(M[t]||(M[t]=[])).push(e)}(e),_(t)),e.__r&&e.__r(null)}function y(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}var w={},k=[],x=[],S=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,$="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=[],j=[],O=0,F=!1,T=!1,M={};t(y.prototype,{set_state:function(e,a){var n=this.state;this.__s||(this.__s=t({},n)),t(n,"function"==typeof e?e(n,this.props):e),a&&(this.__h=this.__h||[]).push(a),r(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),I(this,2)},render:function(){}});var P={h:function(e,t){var r,a,n,i,o=arguments,s=x;for(i=arguments.length;i-- >2;)k.push(o[i]);for(t&&null!=t.children&&(k.length||k.push(t.children),delete t.children);k.length;)if((a=k.pop())&&void 0!==a.pop)for(i=a.length;i--;)k.push(a[i]);else"boolean"==typeof a&&(a=null),(n="function"!=typeof e)&&(null==a?a="":"number"==typeof a?a+="":"string"!=typeof a&&(n=!1)),n&&r?s[s.length-1]+=a:s===x?s=[a]:s.push(a),r=n;var l=new function(){};return l.nodeName=e,l.children=s,l.attributes=null==t?void 0:t,l.key=null==t?void 0:t.key,void 0!==w.vnode&&w.vnode(l),l},Component:y,render:function(e,t,r){return d(r,e,{},!1,t,!1)}};e.exports=P}()});frappe.Error=Error,frappe.TypeError=TypeError,frappe.ValueError=Error,frappe.ImportError=Error,frappe.provide("frappe.datetime"),frappe.datetime.datetime=function(){function e(e,t){if(void 0===t&&(t=null),void 0===typeof moment$1)throw new frappe.ImportError("Moment.js not installed.");this.moment=e?moment$1(e,t):moment$1()}return e.prototype.format=function(e){return void 0===e&&(e=null),this.moment.format(e)},e}(),frappe.datetime.range=function(){function e(e,t){if(void 0===typeof moment$1)throw new frappe.ImportError("Moment.js not installed.");this.start=e,this.end=t}return e.prototype.contains=function(e){var t=e.moment.isBetween(this.start.moment,this.end.moment);return t},e}(),frappe.datetime.now=function(){return new frappe.datetime.datetime},frappe.datetime.equal=function(e,t,r){return e=e.moment,t=t.moment,e.isSame(t,r)},frappe.datetime.compare=function(e,t){return e=e.moment,t=t.moment,e.isBefore(t)?1:t.isBefore(e)?-1:0},frappe.quick_edit=function(e,t,r){return new Promise(function(a){frappe.model.with_doctype(e,function(){frappe.db.get_doc(e,t).then(function(n){var i=frappe.get_meta(e).fields.filter(function(e){return e.reqd||e.bold&&!e.read_only}),o=new frappe.ui.Dialog({title:__("Edit "+e+" ("+t+")"),fields:i,action:{primary:{label:__("Save"),onsubmit:function(i){frappe.call("frappe.client.save",{doc:Object.assign({},{doctype:e,docname:t},n,i)}).then(function(e){r&&r(e.message),a(e.message)}),o.hide()}},secondary:{label:__("Discard")}}});o.set_values(n);var s=$(o.body);s.append("\n\t\t\t\t\t<div class=\"qe-fp\" style=\"padding-top: '15px'; padding-bottom: '15px'; padding-left: '7px'\">\n\t\t\t\t\t\t<button class=\"btn btn-default btn-sm\">\n\t\t\t\t\t\t\t"+__("Edit in Full Page")+"\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t"),s.find(".qe-fp").click(function(){o.hide(),frappe.set_route("Form/"+e+"/"+t)}),o.show()})})})},frappe.provide("frappe._"),frappe._.format=function(e,t){for(var r in t)e=e.replace("{"+r+"}",t[r]);return e},frappe._.fuzzy_search=function(e,t,r){return r=Object.assign({},{shouldSort:!0,threshold:.6,location:0,distance:100,minMatchCharLength:1,maxPatternLength:32},r),new Fuse(t,r).search(e)},frappe._.pluralize=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r="s"),""+e+(1===t?"":r)},frappe._.capitalize=function(e){return""+e.charAt(0).toUpperCase()+e.slice(1)},frappe._.head=function(e){return frappe._.is_empty(e)?void 0:e[0]},frappe._.copy_array=function(e){if(Array.isArray(e))return e.slice();throw frappe.TypeError("Expected Array, recieved "+typeof e+" instead.")},frappe._.is_empty=function(e){var t=!1;return null==e?t=!0:Array.isArray(e)||"string"==typeof e||e instanceof $?t=0===e.length:"object"==typeof e&&(t=0===Object.keys(e).length),t},frappe._.as_array=function(e){return Array.isArray(e)?e:[e]},frappe._.squash=function(e){return Array.isArray(e)&&1===e.length?e[0]:e},frappe._.is_mobile=function(){var e=new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini","i"),t=navigator.userAgent;return e.test(t)},frappe._.compact=function(e){return e.filter(Boolean)},frappe.utils=Object.assign({},frappe.utils,frappe._),frappe.provide("frappe.user"),frappe.user.first_name=function(e){return frappe._.head(frappe.user.full_name(e).split(" "))},frappe.provide("frappe.ui.keycode"),frappe.ui.keycode={RETURN:13},frappe.provide("frappe.stores"),frappe.stores=[],frappe.Store=function(){function e(e){if("string"!=typeof e)throw new frappe.TypeError("Expected string for name, got "+typeof e+" instead.");this.name=e}return e.get=function(e){return e in frappe.stores||(frappe.stores[e]=new frappe.Store(e)),frappe.stores[e]},e.prototype.set=function(e,t){localStorage.setItem(this.name+":"+e,t)},e.prototype.get=function(e,t){return localStorage.getItem(this.name+":"+e)},e}(),frappe.provide("frappe.loggers"),frappe.Logger=function(){function e(e,t){if("string"!=typeof e)throw new frappe.TypeError("Expected string for name, got "+typeof e+" instead.");this.name=e,this.level=t,this.level||(frappe.boot.developer_mode?this.level=frappe.Logger.ERROR:this.level=frappe.Logger.NOTSET),this.format=frappe.Logger.FORMAT}return e.get=function(e,t){return e in frappe.loggers||(frappe.loggers[e]=new frappe.Logger(e,t)),frappe.loggers[e]},e.prototype.debug=function(e){this.log(e,frappe.Logger.DEBUG)},e.prototype.info=function(e){this.log(e,frappe.Logger.INFO)},e.prototype.warn=function(e){this.log(e,frappe.Logger.WARN)},e.prototype.error=function(e){this.log(e,frappe.Logger.ERROR)},e.prototype.log=function(e,t){var r=frappe.datetime.now();if(t.value<=this.level.value){var a=frappe._.format(this.format,{time:r.format("HH:mm:ss"),name:this.name});console.log("%c "+a+":","color: "+t.color,e)}},e}(),frappe.Logger.DEBUG={value:10,color:"#616161",name:"DEBUG"},frappe.Logger.INFO={value:20,color:"#2196F3",name:"INFO"},frappe.Logger.WARN={value:30,color:"#FFC107",name:"WARN"},frappe.Logger.ERROR={value:40,color:"#F44336",name:"ERROR"},frappe.Logger.NOTSET={value:0,name:"NOTSET"},frappe.Logger.FORMAT="{time} {name}",frappe.provide("frappe.chat"),frappe.log=frappe.Logger.get("frappe.chat",frappe.Logger.NOTSET),frappe.provide("frappe.chat.profile"),frappe.chat.profile.create=function(e,t){return"function"==typeof e?(t=e,e=null):"string"==typeof e&&(e=frappe._.as_array(e)),new Promise(function(r){frappe.call("frappe.chat.doctype.chat_profile.chat_profile.create",{user:frappe.session.user,exists_ok:!0,fields:e},function(e){t&&t(e.message),r(e.message)})})},frappe.chat.profile.update=function(e,t,r){return new Promise(function(a){frappe.call("frappe.chat.doctype.chat_profile.chat_profile.update",{user:e||frappe.session.user,data:t},function(e){r&&r(e.message),a(e.message)})})},frappe.provide("frappe.chat.profile.on"),frappe.chat.profile.on.update=function(e){frappe.realtime.on("frappe.chat.profile:update",function(t){return e(t.user,t.data)})},frappe.chat.profile.STATUSES=[{name:"Online",color:"green"},{name:"Away",color:"yellow"},{name:"Busy",color:"red"},{name:"Offline",color:"darkgrey"}],frappe.provide("frappe.chat.room"),frappe.chat.room.create=function(e,t,r,a,n){return"function"==typeof a&&(n=a,a=null),r=frappe._.as_array(r),new Promise(function(i){frappe.call("frappe.chat.doctype.chat_room.chat_room.create",{kind:e,owner:t||frappe.session.user,users:r,name:a},function(e){var t=e.message;t=Object.assign({},t,{creation:new frappe.datetime.datetime(t.creation)}),n&&n(t),i(t)})})},frappe.chat.room.get=function(e,t,r){return"function"==typeof e?(r=e,e=null,t=null):"string"==typeof e&&(e=frappe._.as_array(e),"function"==typeof t?(r=t,t=null):"string"==typeof t&&(t=frappe._.as_array(t))),new Promise(function(a){frappe.call("frappe.chat.doctype.chat_room.chat_room.get",{user:frappe.session.user,rooms:e,fields:t},function(e){var t=e.message;t?(t=(t=frappe._.as_array(t)).map(function(e){return Object.assign({},e,{creation:new frappe.datetime.datetime(e.creation),last_message:e.last_message?Object.assign({},e.last_message,{creation:new frappe.datetime.datetime(e.last_message.creation)}):null})}),t=frappe._.squash(t)):t=[],r&&r(t),a(t)})})},frappe.chat.room.subscribe=function(e){frappe.realtime.publish("frappe.chat.room:subscribe",e)},frappe.chat.room.history=function(e,t){return new Promise(function(r){frappe.call("frappe.chat.doctype.chat_room.chat_room.history",{room:e,user:frappe.session.user},function(e){var a=e.message?frappe._.as_array(e.message):[];a=a.map(function(e){return Object.assign({},e,{creation:new frappe.datetime.datetime(e.creation)})}),t&&t(a),r(a)})})},frappe.chat.room.search=function(e,t){var r=t.map(function(e){return e.room_name?e.room_name:e.owner===frappe.session.user?frappe.user.full_name(frappe._.squash(e.users)):frappe.user.full_name(e.owner)}),a=frappe._.fuzzy_search(e,r);return t=a.map(function(e){return t[e]})},frappe.chat.room.sort=function(e,t){return void 0===t&&(t=null),t=t||function(e,t){return e.last_message&&t.last_message?frappe.datetime.compare(e.last_message.creation,t.last_message.creation):e.last_message?frappe.datetime.compare(e.last_message.creation,t.creation):t.last_message?frappe.datetime.compare(e.creation,t.last_message.creation):frappe.datetime.compare(e.creation,t.creation)},e.sort(t),e},frappe.provide("frappe.chat.room.on"),frappe.chat.room.on.update=function(e){frappe.realtime.on("frappe.chat.room:update",function(t){t.data.last_message&&(t.data=Object.assign({},t.data,{last_message:Object.assign({},t.data.last_message,{creation:new frappe.datetime.datetime(t.data.last_message.creation)})})),e(t.room,t.data)})},frappe.chat.room.on.create=function(e){frappe.realtime.on("frappe.chat.room:create",function(t){return e(Object.assign({},t,{creation:new frappe.datetime.datetime(t.creation)}))})},frappe.chat.room.on.typing=function(e){frappe.realtime.on("frappe.chat.room:typing",function(t){return e(t.room,t.user)})},frappe.provide("frappe.chat.message"),frappe.chat.message.typing=function(e,t){frappe.realtime.publish("frappe.chat.message:typing",{user:t||frappe.session.user,room:e})},frappe.chat.message.send=function(e,t,r){void 0===r&&(r="Content"),frappe.call("frappe.chat.doctype.chat_message.chat_message.send",{user:frappe.session.user,room:e,content:t,type:r})},frappe.chat.message.update=function(e,t,r){return new Promise(function(a){frappe.call("frappe.chat.doctype.chat_message.chat_message.update",{user:frappe.session.user,message:e,update:t},function(e){r&&r(response.message),a(response.message)})})},frappe.chat.message.sort=function(e){return frappe._.is_empty(e)||e.sort(function(e,t){return frappe.datetime.compare(t.creation,e.creation)}),e},frappe.chat.message.seen=function(e,t){frappe.call("frappe.chat.doctype.chat_message.chat_message.seen",{message:e,user:t||frappe.session.user})},frappe.provide("frappe.chat.message.on"),frappe.chat.message.on.create=function(e){frappe.realtime.on("frappe.chat.message:create",function(t){return e(Object.assign({},t,{creation:new frappe.datetime.datetime(t.creation)}))})},frappe.chat.message.on.update=function(e){frappe.realtime.on("frappe.chat.message:update",function(t){return e(t.message,t.data)})},frappe.chat.pretty_datetime=function(e){var t=moment$1(),r=e.moment;return t.isSame(r,"d")?r.format("hh:mm A"):t.isSame(r,"week")?r.format("dddd"):r.format("DD/MM/YYYY")},frappe.provide("frappe.chat.sound"),frappe.chat.sound.play=function(e,t){void 0===t&&(t=.1);var r=$('<audio class="chat-audio"/>');r.attr("volume",t),frappe._.is_empty(r)&&$(document).append(r),r.paused||(frappe.log.info("Stopping sound playing."),r[0].pause(),r.attr("currentTime",0)),frappe.log.info("Playing sound."),r.attr("src",frappe.chat.sound.PATH+"/chat-"+e+".mp3"),r[0].play()},frappe.chat.sound.PATH="/assets/frappe/sounds",frappe.chat.emojis=[],frappe.chat.emoji=function(e){return new Promise(function(t){frappe._.is_empty(frappe.chat.emojis)?$.get("https://cdn.rawgit.com/frappe/emoji/master/emoji",function(r){frappe.chat.emojis=JSON.parse(r),e&&e(frappe.chat.emojis),t(frappe.chat.emojis)}):(e&&e(frappe.chat.emojis),t(frappe.chat.emojis))})},frappe.provide("frappe.chat.website.settings"),frappe.chat.website.settings=function(e,t){return"function"==typeof e?(t=e,e=null):"string"==typeof e&&(e=frappe._.as_array(e)),new Promise(function(r){frappe.call("frappe.chat.website.settings",{fields:e}).then(function(e){var a=e.message;a.enable_from&&(a=Object.assign({},a,{enable_from:new frappe.datetime.datetime(a.enable_from,"HH:mm:ss")})),a.enable_to&&(a=Object.assign({},a,{enable_to:new frappe.datetime.datetime(a.enable_to,"HH:mm:ss")})),t&&t(a),r(a)})})},frappe.chat.website.token=function(e){return new Promise(function(t){frappe.call("frappe.chat.website.token").then(function(r){e&&e(r.message),t(r.message)})})};var h=hyper_min.h,Component=hyper_min.Component;return frappe.provide("frappe.components"),frappe.provide("frappe.chat.component"),frappe.components.Button=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=frappe.components.Button.SIZE[e.size];return h("button",Object.assign({},e,{class:"btn "+(t&&t.class)+" btn-"+e.type+" "+(e.block?"btn-block":"")+" "+(e.class?e.class:"")}),e.children)},t}(Component),frappe.components.Button.SIZE={small:{class:"btn-sm"},large:{class:"btn-lg"}},frappe.components.Button.defaultProps={type:"default",block:!1},frappe.components.FAB=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=frappe.components.FAB.SIZE[e.size];return h(frappe.components.Button,Object.assign({},e,{class:e.class+" "+(t&&t.class)}),h("i",{class:e.icon}))},t}(frappe.components.Button),frappe.components.FAB.defaultProps={icon:"octicon octicon-plus"},frappe.components.FAB.SIZE={small:{class:"frappe-fab-sm"},large:{class:"frappe-fab-lg"}},frappe.components.Indicator=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props;return e.color?h("span",Object.assign({},e,{class:"indicator "+e.color})):null},t}(Component),frappe.components.FontAwesome=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props;return e.type?h("i",Object.assign({},e,{class:"fa "+(e.fixed?"fa-fw":"")+" fa-"+e.type+" "+e.class})):null},t}(Component),frappe.components.FontAwesome.defaultProps={fixed:!1},frappe.components.Octicon=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props;return e.type?h("i",Object.assign({},e,{class:"octicon octicon-"+e.type})):null},t}(Component),frappe.components.Avatar=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.abbr||e.title.substr(0,1),r=frappe.components.Avatar.SIZE[e.size]||frappe.components.Avatar.SIZE.medium;return h("span",{class:"avatar "+r.class+" "+(e.class?e.class:"")},e.image?h("img",{class:"media-object",src:e.image}):h("div",{class:"standard-image"},t))},t}(Component),frappe.components.Avatar.SIZE={small:{class:"avatar-small"},large:{class:"avatar-large"},medium:{class:"avatar-medium"}},frappe.Chat=function(){function e(e,t){"string"==typeof e||e instanceof $||e instanceof HTMLElement||(t=e,e=null),this.options=frappe.Chat.OPTIONS,this.set_wrapper(e||"body"),this.set_options(t),frappe.chat.emoji()}return e.prototype.set_wrapper=function(e){return this.$wrapper=$(e),this},e.prototype.set_options=function(e){return this.options=Object.assign({},this.options,e),this},e.prototype.destroy=function(){return this.$wrapper.remove(".frappe-chat"),this},e.prototype.render=function(e){void 0===e&&(e={}),this.destroy();var t=this.$wrapper,r=this.options,a=h(frappe.Chat.Widget,Object.assign({},{layout:r.layout,target:r.target},e));return hyper_min.render(a,t[0]),this},e}(),frappe.Chat.Layout={PAGE:"page",POPPER:"popper"},frappe.Chat.OPTIONS={layout:frappe.Chat.Layout.POPPER},frappe.Chat.Widget=function(e){function t(t){var r=this;e.call(this,t),this.room={},this.room.add=function(e){var t=(e=frappe._.as_array(e)).map(function(e){return e.name});frappe.log.info("Subscribing "+frappe.session.user+" to Chat Rooms "+t.join(", ")+"."),frappe.chat.room.subscribe(t);for(var a=[],n=0,i=e;n<i.length;n+=1){var o=i[n];(["Group","Visitor"].includes(o.type)||o.owner===frappe.session.user||o.last_message)&&(frappe.log.info("Adding "+o.name+" to component."),a.push(o))}r.set_state({rooms:r.state.rooms.concat(a)})},this.room.update=function(e,t){var a=r.state,n=!1,i=a.rooms.map(function(r){if(r.name===e){if(n=!0,t.typing)if(frappe._.is_empty(r.typing))t.typing=frappe._.as_array(t.typing);else{var a=t.typing;r.typing.includes(a)||(t.typing=frappe._.copy_array(r.typing),t.typing.push(a))}return Object.assign({},r,t)}return r});if("Guest"!==frappe.session.user&&(n?r.set_state({rooms:i}):frappe.chat.room.get(e,function(e){return r.room.add(e)})),a.room.name===e){if(t.typing)if(frappe._.is_empty(a.room.typing))t.typing=frappe._.as_array(t.typing);else{var o=t.typing;a.room.typing.includes(o)||(t.typing=frappe._.copy_array(a.room.typing),t.typing.push(o))}var s=Object.assign({},a.room,t);r.set_state({room:s})}},this.room.select=function(e){frappe.chat.room.history(e,function(t){var a=r.state,n=a.rooms.find(function(t){return t.name===e});r.set_state({room:Object.assign({},a.room,n,{messages:t})})})},this.state=Object.assign({},frappe.Chat.Widget.defaultState,t),this.make()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.make=function(){var e=this;"Guest"!==frappe.session.user?frappe.chat.profile.create(["status","message_preview","notification_tones","conversation_tones"]).then(function(t){e.set_state({profile:t}),frappe.chat.room.get(function(t){t=frappe._.as_array(t),frappe.log.info("User "+frappe.session.user+" is subscribed to "+t.length+" "+frappe._.pluralize("room",t.length)+"."),frappe._.is_empty(t)||e.room.add(t)}),e.bind()}):this.bind()},t.prototype.bind=function(){var e=this;frappe.chat.profile.on.update(function(t,r){if(frappe.log.warn("TRIGGER: Chat Profile update "+JSON.stringify(r)+" of User "+t+"."),"status"in r)if(t===frappe.session.user)e.set_state({profile:Object.assign({},e.state.profile,{status:r.status})});else{var a='<span class="indicator '+frappe.chat.profile.STATUSES.find(function(e){return e.name===r.status}).color+'"/> '+frappe.user.full_name(t)+" is currently <b>"+r.status+"</b>";frappe.show_alert(a,3)}}),frappe.chat.room.on.create(function(t){frappe.log.warn("TRIGGER: Chat Room "+t.name+" created."),e.room.add(t)}),frappe.chat.room.on.update(function(t,r){frappe.log.warn("TRIGGER: Chat Room "+t+" update "+JSON.stringify(r)+" recieved."),e.room.update(t,r)}),frappe.chat.room.on.typing(function(t,r){r!==frappe.session.user&&(frappe.log.warn("User "+r+" typing in Chat Room "+t+"."),e.room.update(t,{typing:r}),setTimeout(function(){return e.room.update(t,{typing:null})},5e3))}),frappe.chat.message.on.create(function(t){var r=e.state;if(r.room.name?r.profile.conversation_tones&&frappe.chat.sound.play("message"):r.profile.notification_tones&&frappe.chat.sound.play("notification"),t.user!==frappe.session.user&&r.profile.message_preview&&!r.toggle){$("body").find(".frappe-chat-alert").remove();var a='\n\t\t\t\t<span>\n\t\t\t\t\t<span class="indicator yellow"/> <b>'+frappe.user.first_name(t.user)+"</b>: "+t.content+"\n\t\t\t\t</span>\n\t\t\t\t";frappe.show_alert(a,3)}if(t.room===r.room.name){var n=frappe._.copy_array(r.room.messages);n.push(t),e.set_state({room:Object.assign({},r.room,{messages:n})})}}),frappe.chat.message.on.update(function(e,t){frappe.log.warn("TRIGGER: Chat Message "+e+" update "+JSON.stringify(t)+" recieved.")})},t.prototype.render=function(){var e=this,t=this.props,r=this.state,a=this,n=h(frappe.Chat.Widget.ActionBar,{placeholder:__("Search or Create a New Chat"),class:"level",layout:t.layout,actions:frappe._.compact([{label:__("New"),onclick:function(){var e=new frappe.ui.Dialog({title:__("New Chat"),fields:[{label:__("Chat Type"),fieldname:"type",fieldtype:"Select",options:["Group","Direct Chat"],default:"Group",onchange:function(){var t="Group"===e.get_value("type");e.set_df_property("group_name","reqd",t),e.set_df_property("user","reqd",!t)}},{label:__("Group Name"),fieldname:"group_name",fieldtype:"Data",reqd:!0,depends_on:"eval:doc.type == 'Group'"},{label:__("Users"),fieldname:"users",fieldtype:"MultiSelect",options:frappe.user.get_emails(),depends_on:"eval:doc.type == 'Group'"},{label:__("User"),fieldname:"user",fieldtype:"Link",options:"User",depends_on:"eval:doc.type == 'Direct Chat'"}],action:{primary:{label:__("Create"),onsubmit:function(t){if("Group"===t.type){if(!frappe._.is_empty(t.users)){var r=t.group_name,a=e.fields_dict.users.get_values();frappe.chat.room.create("Group",null,a,r)}}else{var n=t.user;frappe.chat.room.create("Direct",null,n)}e.hide()}}}});e.show()}},frappe._.is_mobile()&&{icon:"octicon octicon-x",onclick:function(){return e.set_state({toggle:!1})}}],Boolean),change:function(e){a.set_state({query:e})},span:function(e){a.set_state({span:e})}}),i=[];if("user_info"in frappe.boot)for(var o=0,s=frappe.user.get_emails();o<s.length;o+=1){for(var l=s[o],p=!1,c=0,d=r.rooms;c<d.length;c+=1){var u=d[c];"Direct"===u.type&&(u.owner!==l&&frappe._.squash(u.users)!==l||(p=!0))}p||i.push({owner:frappe.session.user,users:[l]})}var f=r.query?frappe.chat.room.search(r.query,r.rooms.concat(i)):frappe.chat.room.sort(r.rooms),g=r.span?frappe.Chat.Layout.PAGE:frappe.Chat.Layout.POPPER,_=frappe._.is_empty(f)&&!r.query?h("div",{class:"vcenter"},h("div",{class:"text-center text-extra-muted"},h("p","",__("You don't have any messages yet.")))):h(frappe.Chat.Widget.RoomList,{rooms:f,click:function(t){t.name?e.room.select(t.name):frappe.chat.room.create("Direct",t.owner,frappe._.squash(t.users),function(t){var r=t.name;return e.room.select(r)})}}),m=h(frappe.Chat.Widget.Room,Object.assign({},r.room,{layout:g,destroy:function(){e.set_state({room:{name:null,messages:[]}})}})),C=g===frappe.Chat.Layout.POPPER?h(frappe.Chat.Widget.Popper,{heading:n,page:r.room.name&&m,target:t.target,toggle:function(t){return e.set_state({toggle:t})}},_):h("div",{class:"frappe-chat-popper"},h("div",{class:"frappe-chat-popper-collapse"},h("div",{class:"panel panel-default panel-span",style:{width:"25%"}},h("div",{class:"panel-heading"},n),_),m));return h("div",{class:"frappe-chat"},C)},t}(Component),frappe.Chat.Widget.defaultState={query:"",profile:{},rooms:[],room:{name:null,messages:[],typing:[]},toggle:!1,span:!1},frappe.Chat.Widget.defaultProps={layout:frappe.Chat.Layout.POPPER},frappe.Chat.Widget.Popper=function(e){function t(t){var r=this;e.call(this,t),this.toggle=this.toggle.bind(this),this.state=frappe.Chat.Widget.Popper.defaultState,t.target&&$(t.target).click(function(){return r.toggle()})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toggle=function(e){var t;t=1===arguments.length?e:!this.state.active,this.set_state({active:t}),this.props.toggle(t)},t.prototype.on_mounted=function(){var e=this;$(document.body).on("click",".page-container, .frappe-chat-popper",function(t){var r=t.currentTarget;$(r).is(".page-container")&&e.toggle(!1)})},t.prototype.render=function(){var e=this,t=this.props,r=this.state;return r.destroy?null:h("div",{class:"frappe-chat-popper",style:t.target?null:{"margin-bottom":"80px"}},t.target?null:h(frappe.components.FAB,{class:"frappe-fab",icon:r.active?"fa fa-fw fa-times":"font-heavy octicon octicon-comment",size:frappe._.is_mobile()?null:"large",type:"primary",onclick:function(){return e.toggle()}}),r.active?h("div",{class:"frappe-chat-popper-collapse"},t.page?t.page:h("div",{class:"panel panel-default "+(frappe._.is_mobile()?"panel-span":"")},h("div",{class:"panel-heading"},t.heading),t.children)):null)},t}(Component),frappe.Chat.Widget.Popper.defaultState={active:!1,destroy:!1},frappe.Chat.Widget.ActionBar=function(e){function t(t){e.call(this,t),this.change=this.change.bind(this),this.submit=this.submit.bind(this),this.state=frappe.Chat.Widget.ActionBar.defaultState}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.change=function(e){var t,r=this.props,a=this.state;this.set_state(((t={})[e.target.name]=e.target.value,t)),r.change(a.query)},t.prototype.submit=function(e){var t=this.props,r=this.state;e.preventDefault(),t.submit(r.query)},t.prototype.render=function(){var e=this,t=this.props,r=this.state,a=t.actions;return h("div",{class:"frappe-chat-action-bar "+(t.class?t.class:"")},h("form",{oninput:this.change,onsubmit:this.submit},h("input",{autocomplete:"off",class:"form-control input-sm",name:"query",value:r.query,placeholder:t.placeholder||"Search"})),frappe._.is_empty(a)?null:a.map(function(e){return h(frappe.Chat.Widget.ActionBar.Action,Object.assign({},e))}),frappe._.is_mobile()?null:h(frappe.Chat.Widget.ActionBar.Action,{icon:"octicon octicon-screen-"+(r.span?"normal":"full"),onclick:function(){var a=!r.span;e.set_state({span:a}),t.span(a)}}))},t}(Component),frappe.Chat.Widget.ActionBar.defaultState={query:null,span:!1},frappe.Chat.Widget.ActionBar.Action=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props;return h(frappe.components.Button,Object.assign({},{size:"small",class:"btn-action"},e),e.icon?h("i",{class:e.icon}):null,(e.icon?" ":"")+(e.label?e.label:""))},t}(Component),frappe.Chat.Widget.RoomList=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.rooms;return frappe._.is_empty(t)?null:h("ul",{class:"frappe-chat-room-list nav nav-pills nav-stacked"},t.map(function(t){return h(frappe.Chat.Widget.RoomList.Item,Object.assign({},t,{click:e.click}))}))},t}(Component),frappe.Chat.Widget.RoomList.Item=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t={};if("Group"===e.type)if(t.title=e.room_name,t.image=e.avatar,frappe._.is_empty(e.typing)){if(e.last_message){var r=e.last_message,a=r.content;"File"===r.type?t.subtitle="📁 "+a.name:t.subtitle=e.last_message.content}}else{e.typing=frappe._.as_array(e.typing);var n=e.typing.map(function(e){return frappe.user.first_name(e)});t.subtitle=n.join(", ")+" typing..."}else{var i=e.owner===frappe.session.user?frappe._.squash(e.users):e.owner;if(t.title=frappe.user.full_name(i),t.image=frappe.user.image(i),t.abbr=frappe.user.abbr(i),frappe._.is_empty(e.typing)){if(e.last_message){var o=e.last_message,s=o.content;"File"===o.type?t.subtitle="📁 "+s.name:t.subtitle=e.last_message.content}}else t.subtitle="typing..."}return e.last_message&&(t.timestamp=frappe.chat.pretty_datetime(e.last_message.creation)),h("li",null,h("a",{class:e.active?"active":"",onclick:function(){return e.click(e)}},h("div",{class:"row"},h("div",{class:"col-xs-9"},h(frappe.Chat.Widget.MediaProfile,Object.assign({},t))),h("div",{class:"col-xs-3 text-right"},h("div",{class:"text-muted",style:{"font-size":"9px"}},t.timestamp)))))},t}(Component),frappe.Chat.Widget.MediaProfile=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=frappe.Chat.Widget.MediaProfile.POSITION[e.position||"left"],r=h("div",{class:t.class+" media-middle"},h(frappe.components.Avatar,Object.assign({},e,{title:e.title,image:e.image,size:e.size,abbr:e.abbr})));return h("div",{class:"media",style:"media-right"===t.class?{"text-align":"right"}:null},"media-left"===t.class?r:null,h("div",{class:"media-body"},h("div",{class:"media-heading ellipsis small",style:"max-width: "+(e.width_title||"100%")+" display: inline-block"},e.title),e.content?h("div","",h("small","",e.content)):null,e.subtitle?h("div",{class:"media-subtitle small"},h("small",{class:"text-muted"},e.subtitle)):null),"media-right"===t.class?r:null)},t}(Component),frappe.Chat.Widget.MediaProfile.POSITION={left:{class:"media-left"},right:{class:"media-right"}},frappe.Chat.Widget.Room=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=(this.state,[{match:/@(\w*)$/,search:function(t,r){if("Group"===e.type){var a=t.slice(1);r([].concat(frappe._.as_array(e.owner),e.users).filter(function(e){return e!==frappe.session.user&&0===e.indexOf(a)}))}},component:function(e){return h(frappe.Chat.Widget.MediaProfile,{title:frappe.user.full_name(e),image:frappe.user.image(e),size:"small"})}},{match:/:([a-z]*)$/,search:function(e,t){frappe.chat.emoji(function(r){for(var a=e.slice(1),n=[],i=0,o=r;i<o.length;i+=1)for(var s=o[i],l=0,p=s.aliases;l<p.length;l+=1){var c=p[l];0===c.indexOf(a)&&n.push({name:c,value:s.emoji})}t(n)})},content:function(e){return e.value},component:function(e){return h(frappe.Chat.Widget.MediaProfile,{title:e.name,abbr:e.value,size:"small"})}}]),r=frappe._.compact([!frappe._.is_mobile()&&{icon:"camera",label:"Camera",onclick:function(){var e=new frappe.ui.Capture({animate:!1,error:!0});e.show(),e.submit(function(e){})}},{icon:"file",label:"File",onclick:function(){frappe.upload.make({args:{doctype:"Chat Room",docname:e.name},callback:function(t,r,a){var n=a.file_url,i=a.filename;frappe.chat.message.send(e.name,{path:n,name:i},"File")}})}}]);if("Guest"!==frappe.session.user&&e.messages){e.messages=frappe._.as_array(e.messages);for(var a=0,n=e.messages;a<n.length;a+=1){var i=n[a];if(i.seen.includes(frappe.session.user))break;frappe.chat.message.seen(i.name)}}return h("div",{class:"panel panel-default\n\t\t\t\t"+(e.name?"panel-bg":"")+"\n\t\t\t\t"+(e.layout===frappe.Chat.Layout.PAGE||frappe._.is_mobile()?"panel-span":""),style:e.layout===frappe.Chat.Layout.PAGE&&{width:"75%",left:"25%","box-shadow":"none"}},e.name&&h(frappe.Chat.Widget.Room.Header,Object.assign({},e,{on_back:e.destroy})),e.name?frappe._.is_empty(e.messages)?h("div",{class:"panel-body",style:{height:"100%"}},h("div",{class:"vcenter"},h("div",{class:"text-center text-extra-muted"},h(frappe.components.Octicon,{type:"comment-discussion",style:"font-size: 48px"}),h("p","",__("Start a conversation."))))):h(frappe.chat.component.ChatList,{messages:e.messages}):h("div",{class:"panel-body",style:{height:"100%"}},h("div",{class:"vcenter"},h("div",{class:"text-center text-extra-muted"},h(frappe.components.Octicon,{type:"comment-discussion",style:"font-size: 125px"}),h("p","",__("Select a chat to start messaging."))))),e.name?h("div",{class:"chat-room-footer"},h(frappe.chat.component.ChatForm,{actions:r,onchange:function(){frappe.chat.message.typing(e.name)},onsubmit:function(t){frappe.chat.message.send(e.name,t)},hint:t})):null)},t}(Component),frappe.Chat.Widget.Room.Header=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t={};if(["Group","Visitor"].includes(e.type))if(t.route="Form/Chat Room/"+e.name,t.title=e.room_name,t.image=e.avatar,frappe._.is_empty(e.typing))t.subtitle="Group"===e.type?__(e.users.length+" "+frappe._.pluralize("member",e.users.length)):"";else{e.typing=frappe._.as_array(e.typing);var r=e.typing.map(function(e){return frappe.user.first_name(e)});t.subtitle=r.join(", ")+" typing..."}else{var a=e.owner===frappe.session.user?frappe._.squash(e.users):e.owner;t.route="Form/User/"+a,t.title=frappe.user.full_name(a),t.image=frappe.user.image(a),frappe._.is_empty(e.typing)||(t.subtitle="typing...")}var n=e.layout===frappe.Chat.Layout.POPPER||frappe._.is_mobile();return h("div",{class:"panel-heading",style:{height:"50px"}},h("div",{class:"level"},n&&"Guest"!==frappe.session.user?h(frappe.components.Button,{class:"btn-back",onclick:e.on_back},h(frappe.components.Octicon,{type:"chevron-left"})):null,h("div","",h("div",{class:"panel-title"},h("div",{class:"cursor-pointer",onclick:function(){frappe.set_route(t.route)}},h(frappe.Chat.Widget.MediaProfile,Object.assign({},t))))),h("div",{class:n?"col-xs-1":"col-xs-3"},h("div",{class:"text-right"}))))},t}(Component),frappe.chat.component.ChatList=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.on_mounted=function(){this.$element=$(".frappe-chat").find(".chat-list"),this.$element.scrollTop(this.$element[0].scrollHeight)},t.prototype.on_updated=function(){this.$element.scrollTop(this.$element[0].scrollHeight)},t.prototype.render=function(){for(var e=[],t=0;t<this.props.messages.length;++t){var r=this.props.messages[t];r.user,frappe.session.user;0!==t&&frappe.datetime.equal(r.creation,this.props.messages[t-1].creation,"day")||e.push({type:"Notification",content:r.creation.format("MMMM DD")}),e.push(r)}return h("div",{class:"chat-list list-group"},frappe._.is_empty(e)?null:e.map(function(e){return h(frappe.chat.component.ChatList.Item,Object.assign({},e))}))},t}(Component),frappe.chat.component.ChatList.Item=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props,t=e.user===frappe.session.user,r=e.content;return h("div",{class:"chat-list-item list-group-item"},"Notification"===e.type?h("div",{class:"chat-list-notification"},h("div",{class:"chat-list-notification-content"},r)):h("div",{class:t?"text-right":""},"Group"!==e.room_type||t?null:h(frappe.components.Avatar,{title:frappe.user.full_name(e.user),image:frappe.user.image(e.user)}),h(frappe.chat.component.ChatBubble,e)))},t}(Component),frappe.chat.component.ChatBubble=function(e){function t(t){e.call(this,t),this.onclick=this.onclick.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onclick=function(){var e=this.props;e.user===frappe.session.user&&frappe.quick_edit("Chat Message",e.name,function(e){})},t.prototype.render=function(){var e=this.props,t=e.creation.format("hh:mm A"),r=e.user===frappe.session.user,a=!frappe._.is_empty(e.seen)&&!e.seen.includes(frappe.session.user),n=e.content;return h("div",{class:"chat-bubble "+(e.groupable?"chat-groupable":"")+" chat-bubble-"+(r?"r":"l"),onclick:this.onclick},"Group"!==e.room_type||r?null:h("div",{class:"chat-bubble-author"},h("a",{onclick:function(){frappe.set_route("Form/User/"+e.user)}},frappe.user.full_name(e.user))),h("div",{class:"chat-bubble-content"},h("small","","File"===e.type?h("a",{class:"no-decoration",href:n.path,target:"_blank"},h(frappe.components.FontAwesome,{type:"file",fixed:!0})," "+n.name):n)),h("div",{class:"chat-bubble-meta"},h("span",{class:"chat-bubble-creation"},t),r&&a?h("span",{class:"chat-bubble-check"},h(frappe.components.Octicon,{type:"check"})):null))},t}(Component),frappe.chat.component.ChatForm=function(e){function t(t){e.call(this,t),this.onchange=this.onchange.bind(this),this.onsubmit=this.onsubmit.bind(this),this.hint=this.hint.bind(this),this.state=frappe.chat.component.ChatForm.defaultState}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onchange=function(e){var t,r=this.props,a=this.state,n=e.target.value;this.set_state(((t={})[e.target.name]=n,t)),r.onchange(a),this.hint(n)},t.prototype.hint=function(e){var t=this,r=this.props;this.state;if(r.hint){var a=e.split(" "),n=a.slice(0,a.length-1),i=a[a.length-1];if(i){r.hint=frappe._.as_array(r.hint);var o=r.hint.find(function(e){return e.match.test(i)});o?o.search(i,function(e){var r=e.map(function(e){var t=i.replace(o.match,o.content?o.content(e):e),r=(n.join(" ")+" "+t).trim();return e={component:o.component(e),content:r}}).slice(0,o.max||5);t.set_state({hints:r})}):this.set_state({hints:[]})}else this.set_state({hints:[]})}},t.prototype.onsubmit=function(e){e.preventDefault(),this.state.content&&(this.props.onsubmit(this.state.content),this.set_state({content:null}))},t.prototype.render=function(){var e=this,t=this.props,r=this.state;return h("div",{class:"chat-form"},r.hints.length?h("ul",{class:"hint-list list-group"},r.hints.map(function(t){return h("li",{class:"hint-list-item list-group-item"},h("a",{href:"javascript:void(0)",onclick:function(){e.set_state({content:t.content,hints:[]})}},t.component))})):null,h("form",{oninput:this.onchange,onsubmit:this.onsubmit},h("div",{class:"input-group input-group-lg"},frappe._.is_empty(t.actions)?null:h("div",{class:"input-group-btn dropup"},h(frappe.components.Button,{class:"dropdown-toggle","data-toggle":"dropdown"},h(frappe.components.FontAwesome,{class:"text-muted",type:"paperclip",fixed:!0})),h("div",{class:"dropdown-menu dropdown-menu-left",onclick:function(e){return e.stopPropagation()}},!frappe._.is_empty(t.actions)&&t.actions.map(function(e){return h("li",null,h("a",{onclick:e.onclick},h(frappe.components.FontAwesome,{type:e.icon,fixed:!0})," "+e.label))}))),h("textarea",{class:"form-control",name:"content",value:r.content,placeholder:"Type a message",autofocus:!0,onkeypress:function(t){t.which!==frappe.ui.keycode.RETURN||t.shiftKey||e.onsubmit(t)}}),h("div",{class:"input-group-btn"},h(frappe.components.Button,{onclick:this.onsubmit},h(frappe.components.FontAwesome,{class:frappe._.is_empty(r.content)?"text-muted":"text-primary",type:"send",fixed:!0}))))))},t}(Component),frappe.chat.component.ChatForm.defaultState={content:null,hints:[]},frappe.chat.component.EmojiPicker=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=this.props;return h("div",{class:"frappe-chat-emoji dropup "+e.class},h(frappe.components.Button,{type:"primary",class:"dropdown-toggle","data-toggle":"dropdown"},h(frappe.components.FontAwesome,{type:"smile-o",fixed:!0})),h("div",{class:"dropdown-menu dropdown-menu-right",onclick:function(e){return e.stopPropagation()}},h("div",{class:"panel panel-default"},h(frappe.chat.component.EmojiPicker.List))))},t}(Component),frappe.chat.component.EmojiPicker.List=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){this.props;return h("div",{class:"list-group"})},t}(Component),frappe.provide("frappe._"),frappe._.platform=function(){var e=navigator.appVersion;return e.includes("Win")?"Windows":e.includes("Mac")?"Darwin":e.includes("X11")?"UNIX":e.includes("Linux")?"Linux":void 0},frappe.provide("frappe.assets"),frappe.assets.image=function(e,t){return void 0===t&&(t="frappe"),"/assets/"+t+"/images/"+e},frappe.provide("frappe.boot"),frappe.provide("frappe.browser"),frappe.browser.Notification="Notification"in window,frappe.notify=function(e,t){frappe.log=frappe.Logger.get("frappe.notify");var r={icon:frappe.assets.image("favicon.png","frappe"),lang:frappe.boot.lang||"en"};t=Object.assign({},r,t),frappe.browser.Notification||frappe.log.error("ERROR: This browser does not support desktop notifications."),Notification.requestPermission(function(r){if("granted"===r)new Notification(e,t)})},frappe.chat.render=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),frappe.log.info((e?"Enable":"Disable")+" Chat for User.");var r="desk"in frappe;if(r){var a=$(".navbar .frappe-chat-dropdown");if(frappe.utils.is_empty(a.has(".frappe-chat-toggle"))){var n=$('\n\t\t\t\t<a class="dropdown-toggle frappe-chat-toggle" data-toggle="dropdown">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<i class="octicon octicon-comment-discussion"/>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t');a.addClass("dropdown hidden"),a.html(n)}e?a.removeClass("hidden"):a.addClass("hidden")}if((!frappe.chatter||t)&&(frappe.chatter=new frappe.Chat({target:r?".navbar .frappe-chat-toggle":null}),e))if("Guest"!==frappe.session.user||r)frappe.chatter.render();else{frappe.store=frappe.Store.get("frappe.chat");var i=frappe.store.get("guest_token");frappe.log.info("Local Guest Token - "+i);var o=function(e){return new Promise(function(t){frappe.chat.room.create("Visitor",e).then(function(e){frappe.log.info("Visitor Room Created: "+e.name),frappe.chat.room.subscribe(e.name);var r=e;frappe.chat.room.history(e.name).then(function(e){return Object.assign({},r,{messages:e})}).then(function(e){t(e)})})})};i?o(i).then(function(e){frappe.chatter.render({room:e})}):frappe.chat.website.token().then(function(e){frappe.log.info("Generated Guest Token - "+e),frappe.store.set("guest_token",e),o(e).then(function(e){frappe.chatter.render({room:e})})})}},frappe.chat.setup=function(){frappe.log=frappe.Logger.get("frappe.chat"),frappe.log.info("Setting up frappe.chat"),frappe.log.warn("TODO: frappe.chat.<object> requires a storage."),"Guest"!==frappe.session.user?(frappe.log.info("Creating a Chat Profile."),frappe.chat.profile.create("enable_chat").then(function(e){var t=e.enable_chat;if(frappe.log.info("Chat Profile created for User "+frappe.session.user+"."),"desk"in frappe){var r=frappe.sys_defaults.enable_chat&&t;frappe.chat.render(r)}}),frappe.chat.profile.on.update(function(e,t){if(e===frappe.session.user&&"enable_chat"in t){frappe.log.warn("Chat Profile update (Enable Chat - "+Boolean(t.enable_chat)+")");var r=frappe.sys_defaults.enable_chat&&t.enable_chat;frappe.chat.render(r)}})):(frappe.log.info("Retrieving Chat Website Settings."),frappe.chat.website.settings(["socketio","enable","enable_from","enable_to"]).then(function(e){frappe.log.info("Chat Website Setting - "+JSON.stringify(e)),frappe.log.info("Chat Website Setting - "+(e.enable?"Enable":"Disable"));var t=e.enable;e.enable_from&&e.enable_to&&(frappe.log.info("Enabling Chat Schedule - "+e.enable_from.format()+" : "+e.enable_to.format()),t=new frappe.datetime.range(e.enable_from,e.enable_to).contains(frappe.datetime.now()));t&&(frappe.log.info("Initializing Socket.IO"),frappe.socketio.init(e.socketio.port)),frappe.chat.render(t)}))},$(document).on("ready toolbar_setup",function(){frappe.chat.setup()}),exports.__moduleExports=_class,exports}({});
//# sourceMappingURL=desk.min.js.map
