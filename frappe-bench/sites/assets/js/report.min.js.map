{"version":3,"file":"report.min.js","sources":["../../../apps/frappe/frappe/public/js/lib/clusterize.min.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/report_factory.js","../../../apps/frappe/node_modules/sortablejs/Sortable.js","../../../apps/frappe/node_modules/clusterize.js/clusterize.js","../../../apps/frappe/node_modules/frappe-datatable/dist/frappe-datatable.cjs.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/report_view.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/query_report.js","../../../apps/frappe/frappe/public/js/frappe/views/reports/grid_report.js"],"sourcesContent":["/*! Clusterize.js - v0.17.6 - 2017-03-05\n* http://NeXTs.github.com/Clusterize.js/\n* Copyright (c) 2015 Denis Lukov; Licensed GPLv3 */\n\n;(function(q,n){\"undefined\"!=typeof module?module.exports=n():\"function\"==typeof define&&\"object\"==typeof define.amd?define(n):this[q]=n()})(\"Clusterize\",function(){function q(b,a,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(\"on\"+b,c)}function n(b,a,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent(\"on\"+b,c)}function r(b){return\"[object Array]\"===Object.prototype.toString.call(b)}function m(b,a){return window.getComputedStyle?window.getComputedStyle(a)[b]:\n\ta.currentStyle[b]}var l=function(){for(var b=3,a=document.createElement(\"b\"),c=a.all||[];a.innerHTML=\"\\x3c!--[if gt IE \"+ ++b+\"]><i><![endif]--\\x3e\",c[0];);return 4<b?b:document.documentMode}(),x=navigator.platform.toLowerCase().indexOf(\"mac\")+1,p=function(b){if(!(this instanceof p))return new p(b);var a=this,c={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:\"clusterize-no-data\",no_data_text:\"No data\",keep_parity:!0,callbacks:{}};a.options={};for(var d=\"rows_in_block blocks_in_cluster show_no_data_row no_data_class no_data_text keep_parity tag callbacks\".split(\" \"),\n\tf=0,h;h=d[f];f++)a.options[h]=\"undefined\"!=typeof b[h]&&null!=b[h]?b[h]:c[h];c=[\"scroll\",\"content\"];for(f=0;d=c[f];f++)if(a[d+\"_elem\"]=b[d+\"Id\"]?document.getElementById(b[d+\"Id\"]):b[d+\"Elem\"],!a[d+\"_elem\"])throw Error(\"Error! Could not find \"+d+\" element\");a.content_elem.hasAttribute(\"tabindex\")||a.content_elem.setAttribute(\"tabindex\",0);var e=r(b.rows)?b.rows:a.fetchMarkup(),g={};b=a.scroll_elem.scrollTop;a.insertToDOM(e,g);a.scroll_elem.scrollTop=b;var k=!1,m=0,l=!1,t=function(){x&&(l||(a.content_elem.style.pointerEvents=\n\t\"none\"),l=!0,clearTimeout(m),m=setTimeout(function(){a.content_elem.style.pointerEvents=\"auto\";l=!1},50));k!=(k=a.getClusterNum())&&a.insertToDOM(e,g);a.options.callbacks.scrollingProgress&&a.options.callbacks.scrollingProgress(a.getScrollProgress())},u=0,v=function(){clearTimeout(u);u=setTimeout(a.refresh,100)};q(\"scroll\",a.scroll_elem,t);q(\"resize\",window,v);a.destroy=function(b){n(\"scroll\",a.scroll_elem,t);n(\"resize\",window,v);a.html((b?a.generateEmptyRow():e).join(\"\"))};a.refresh=function(b){(a.getRowsHeight(e)||\n\tb)&&a.update(e)};a.update=function(b){e=r(b)?b:[];b=a.scroll_elem.scrollTop;e.length*a.options.item_height<b&&(k=a.scroll_elem.scrollTop=0);a.insertToDOM(e,g);a.scroll_elem.scrollTop=b};a.clear=function(){a.update([])};a.getRowsAmount=function(){return e.length};a.getScrollProgress=function(){return this.options.scroll_top/(e.length*this.options.item_height)*100||0};var w=function(b,c){var d=r(c)?c:[];d.length&&(e=\"append\"==b?e.concat(d):d.concat(e),a.insertToDOM(e,g))};a.append=function(a){w(\"append\",\n\ta)};a.prepend=function(a){w(\"prepend\",a)}};p.prototype={constructor:p,fetchMarkup:function(){for(var b=[],a=this.getChildNodes(this.content_elem);a.length;)b.push(a.shift().outerHTML);return b},exploreEnvironment:function(b,a){var c=this.options;c.content_tag=this.content_elem.tagName.toLowerCase();b.length&&(l&&9>=l&&!c.tag&&(c.tag=b[0].match(/<([^>\\s/]*)/)[1].toLowerCase()),1>=this.content_elem.children.length&&(a.data=this.html(b[0]+b[0]+b[0])),c.tag||(c.tag=this.content_elem.children[0].tagName.toLowerCase()),\n\tthis.getRowsHeight(b))},getRowsHeight:function(b){var a=this.options,c=a.item_height;a.cluster_height=0;if(b.length){b=this.content_elem.children;var d=b[Math.floor(b.length/2)];a.item_height=d.offsetHeight;\"tr\"==a.tag&&\"collapse\"!=m(\"borderCollapse\",this.content_elem)&&(a.item_height+=parseInt(m(\"borderSpacing\",this.content_elem),10)||0);\"tr\"!=a.tag&&(b=parseInt(m(\"marginTop\",d),10)||0,d=parseInt(m(\"marginBottom\",d),10)||0,a.item_height+=Math.max(b,d));a.block_height=a.item_height*a.rows_in_block;\n\ta.rows_in_cluster=a.blocks_in_cluster*a.rows_in_block;a.cluster_height=a.blocks_in_cluster*a.block_height;return c!=a.item_height}},getClusterNum:function(){this.options.scroll_top=this.scroll_elem.scrollTop;return Math.floor(this.options.scroll_top/(this.options.cluster_height-this.options.block_height))||0},generateEmptyRow:function(){var b=this.options;if(!b.tag||!b.show_no_data_row)return[];var a=document.createElement(b.tag),c=document.createTextNode(b.no_data_text),d;a.className=b.no_data_class;\n\t\"tr\"==b.tag&&(d=document.createElement(\"td\"),d.colSpan=100,d.appendChild(c));a.appendChild(d||c);return[a.outerHTML]},generate:function(b,a){var c=this.options,d=b.length;if(d<c.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:d?b:this.generateEmptyRow()};var f=Math.max((c.rows_in_cluster-c.rows_in_block)*a,0),h=f+c.rows_in_cluster,e=Math.max(f*c.item_height,0),c=Math.max((d-h)*c.item_height,0),d=[],g=f;for(1>e&&g++;f<h;f++)b[f]&&d.push(b[f]);return{top_offset:e,bottom_offset:c,\n\trows_above:g,rows:d}},renderExtraTag:function(b,a){var c=document.createElement(this.options.tag);c.className=[\"clusterize-extra-row\",\"clusterize-\"+b].join(\" \");a&&(c.style.height=a+\"px\");return c.outerHTML},insertToDOM:function(b,a){this.options.cluster_height||this.exploreEnvironment(b,a);var c=this.generate(b,this.getClusterNum()),d=c.rows.join(\"\"),f=this.checkChanges(\"data\",d,a),h=this.checkChanges(\"top\",c.top_offset,a),e=this.checkChanges(\"bottom\",c.bottom_offset,a),g=this.options.callbacks,\n\tk=[];f||h?(c.top_offset&&(this.options.keep_parity&&k.push(this.renderExtraTag(\"keep-parity\")),k.push(this.renderExtraTag(\"top-space\",c.top_offset))),k.push(d),c.bottom_offset&&k.push(this.renderExtraTag(\"bottom-space\",c.bottom_offset)),g.clusterWillChange&&g.clusterWillChange(),this.html(k.join(\"\")),\"ol\"==this.options.content_tag&&this.content_elem.setAttribute(\"start\",c.rows_above),g.clusterChanged&&g.clusterChanged()):e&&(this.content_elem.lastChild.style.height=c.bottom_offset+\"px\")},html:function(b){var a=\n\tthis.content_elem;if(l&&9>=l&&\"tr\"==this.options.tag){var c=document.createElement(\"div\");for(c.innerHTML=\"<table><tbody>\"+b+\"</tbody></table>\";b=a.lastChild;)a.removeChild(b);for(c=this.getChildNodes(c.firstChild.firstChild);c.length;)a.appendChild(c.shift())}else a.innerHTML=b},getChildNodes:function(b){b=b.children;for(var a=[],c=0,d=b.length;c<d;c++)a.push(b[c]);return a},checkChanges:function(b,a,c){var d=a!=c[b];c[b]=a;return d}};return p});","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.views.ReportFactory = frappe.views.Factory.extend({\n\tmake: function(route) {\n\t\tconst _route = ['List', route[1], 'Report'];\n\n\t\tif (route[2]) {\n\t\t\t// custom report\n\t\t\t_route.push(route[2]);\n\t\t}\n\n\t\tfrappe.set_route(_route);\n\t}\n});\n","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"Sortable\"] = factory();\n\t}\n})(function sortableFactory() {\n\t\"use strict\";\n\n\tif (typeof window === \"undefined\" || !window.document) {\n\t\treturn function sortableError() {\n\t\t\tthrow new Error(\"Sortable.js requires a window with a document\");\n\t\t};\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\t\tlastDownEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\t\tscrollCustomFn,\n\n\t\tlastEl,\n\t\tlastCSS,\n\t\tlastParentCSS,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tputSortable,\n\n\t\tautoScroll = {},\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\t\t/** @const */\n\t\tR_SPACE = /\\s+/g,\n\t\tR_FLOAT = /left|right|inline/,\n\n\t\texpando = 'Sortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\t\tsetTimeout = win.setTimeout,\n\n\t\t$ = win.jQuery || win.Zepto,\n\t\tPolymer = win.Polymer,\n\n\t\tcaptureMode = false,\n\t\tpassiveMode = false,\n\n\t\tsupportDraggable = ('draggable' in document.createElement('div')),\n\t\tsupportCssPointerEvents = (function (el) {\n\t\t\t// false when IE11\n\t\t\tif (!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\\.|msie)/i)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tel = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\n\t\tabs = Math.abs,\n\t\tmin = Math.min,\n\n\t\tsavedInputChecked = [],\n\t\ttouchDragOverListeners = [],\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (rootEl && options.scroll) {\n\t\t\t\tvar _this = rootEl[expando],\n\t\t\t\t\tel,\n\t\t\t\t\trect,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy,\n\n\t\t\t\t\tscrollOffsetX,\n\t\t\t\t\tscrollOffsetY\n\t\t\t\t;\n\n\t\t\t\t// Delect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollParentEl = rootEl;\n\t\t\t\t\tscrollCustomFn = options.scrollFn;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = rootEl;\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n\t\t\t\t\t\t\t\t(scrollEl.offsetHeight < scrollEl.scrollHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\t\t} while (scrollEl = scrollEl.parentNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scrollEl) {\n\t\t\t\t\tel = scrollEl;\n\t\t\t\t\trect = scrollEl.getBoundingClientRect();\n\t\t\t\t\tvx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n\t\t\t\t\tvy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n\t\t\t\t}\n\n\n\t\t\t\tif (!(vx || vy)) {\n\t\t\t\t\tvx = (winWidth - x <= sens) - (x <= sens);\n\t\t\t\t\tvy = (winHeight - y <= sens) - (y <= sens);\n\n\t\t\t\t\t/* jshint expr:true */\n\t\t\t\t\t(vx || vy) && (el = win);\n\t\t\t\t}\n\n\n\t\t\t\tif (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n\t\t\t\t\tautoScroll.el = el;\n\t\t\t\t\tautoScroll.vx = vx;\n\t\t\t\t\tautoScroll.vy = vy;\n\n\t\t\t\t\tclearInterval(autoScroll.pid);\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tautoScroll.pid = setInterval(function () {\n\t\t\t\t\t\t\tscrollOffsetY = vy ? vy * speed : 0;\n\t\t\t\t\t\t\tscrollOffsetX = vx ? vx * speed : 0;\n\n\t\t\t\t\t\t\tif ('function' === typeof(scrollCustomFn)) {\n\t\t\t\t\t\t\t\treturn scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (el === win) {\n\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tel.scrollTop += scrollOffsetY;\n\t\t\t\t\t\t\t\tel.scrollLeft += scrollOffsetX;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 30),\n\n\t\t_prepareGroup = function (options) {\n\t\t\tfunction toFn(value, pull) {\n\t\t\t\tif (value === void 0 || value === true) {\n\t\t\t\t\tvalue = group.name;\n\t\t\t\t}\n\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn value;\n\t\t\t\t} else {\n\t\t\t\t\treturn function (to, from) {\n\t\t\t\t\t\tvar fromGroup = from.options.group.name;\n\n\t\t\t\t\t\treturn pull\n\t\t\t\t\t\t\t? value\n\t\t\t\t\t\t\t: value && (value.join\n\t\t\t\t\t\t\t\t? value.indexOf(fromGroup) > -1\n\t\t\t\t\t\t\t\t: (fromGroup == value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar group = {};\n\t\t\tvar originalGroup = options.group;\n\n\t\t\tif (!originalGroup || typeof originalGroup != 'object') {\n\t\t\t\toriginalGroup = {name: originalGroup};\n\t\t\t}\n\n\t\t\tgroup.name = originalGroup.name;\n\t\t\tgroup.checkPull = toFn(originalGroup.pull, true);\n\t\t\tgroup.checkPut = toFn(originalGroup.put);\n\t\t\tgroup.revertClone = originalGroup.revertClone;\n\n\t\t\toptions.group = group;\n\t\t}\n\t;\n\n\t// Detect support a passive mode\n\ttry {\n\t\twindow.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n\t\t\tget: function () {\n\t\t\t\t// `false`, because everything starts to work incorrectly and instead of d'n'd,\n\t\t\t\t// begins the page has scrolled.\n\t\t\t\tpassiveMode = false;\n\t\t\t\tcaptureMode = {\n\t\t\t\t\tcapture: false,\n\t\t\t\t\tpassive: passiveMode\n\t\t\t\t};\n\t\t\t}\n\t\t}));\n\t} catch (err) {}\n\n\t/**\n\t * @class  Sortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction Sortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'Sortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: Math.random(),\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n\t\t\tghostClass: 'sortable-ghost',\n\t\t\tchosenClass: 'sortable-chosen',\n\t\t\tdragClass: 'sortable-drag',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tpreventOnFilter: true,\n\t\t\tanimation: 0,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'sortable-fallback',\n\t\t\tfallbackOnBody: false,\n\t\t\tfallbackTolerance: 0,\n\t\t\tfallbackOffset: {x: 0, y: 0},\n\t\t\tsupportPointer: Sortable.supportPointer !== false\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t_on(el, 'touchstart', this._onTapStart);\n\t\toptions.supportPointer && _on(el, 'pointerdown', this._onTapStart);\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\ttouchDragOverListeners.push(this._onDragOver);\n\n\t\t// Restore sorting\n\t\toptions.store && this.sort(options.store.get(this));\n\t}\n\n\n\tSortable.prototype = /** @lends Sortable.prototype */ {\n\t\tconstructor: Sortable,\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\tpreventOnFilter = options.preventOnFilter,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = evt.target.shadowRoot && (evt.path && evt.path[0]) || target,\n\t\t\t\tfilter = options.filter,\n\t\t\t\tstartIndex;\n\n\t\t\t_saveInputCheckedState(el);\n\n\n\t\t\t// Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\t\t\tif (dragEl) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button or enabled\n\t\t\t}\n\n\t\t\t// cancel dnd if original target is content editable\n\t\t\tif (originalTarget.isContentEditable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el);\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (lastDownEl === target) {\n\t\t\t\t// Ignoring duplicate `down`\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get the index of the dragged element within its parent\n\t\t\tstartIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, el, startIndex);\n\t\t\t\t\tpreventOnFilter && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, el, startIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tpreventOnFilter && evt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target, startIndex);\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\ttapEvt = evt;\n\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tlastDownEl = target;\n\t\t\t\tactiveGroup = options.group;\n\t\t\t\toldIndex = startIndex;\n\n\t\t\t\tthis._lastX = (touch || evt).clientX;\n\t\t\t\tthis._lastY = (touch || evt).clientY;\n\n\t\t\t\tdragEl.style['will-change'] = 'all';\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = _this.nativeDraggable;\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, options.chosenClass, true);\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(evt, touch);\n\n\t\t\t\t\t// Drag start event\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, rootEl, oldIndex);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'selectstart', _this);\n\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointercancel', _this._onDrop);\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\t\t\t\t\toptions.supportPointer && _on(ownerDocument, 'pointermove', _this._disableDelayedDrag);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'pointermove', this._disableDelayedDrag);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Event */evt, /** Touch */touch) {\n\t\t\ttouch = touch || (evt.pointerType == 'touch' ? evt : null);\n\n\t\t\tif (touch) {\n\t\t\t\t// Touch device support\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: touch.clientX,\n\t\t\t\t\tclientY: touch.clientY\n\t\t\t\t};\n\n\t\t\t\tthis._onDragStart(tapEvt, 'touch');\n\t\t\t}\n\t\t\telse if (!this.nativeDraggable) {\n\t\t\t\tthis._onDragStart(tapEvt, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\t// Timeout neccessary for IE9\n\t\t\t\t\t_nextTick(function () {\n\t\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function () {\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\tvar options = this.options;\n\n\t\t\t\t// Apply effect\n\t\t\t\t_toggleClass(dragEl, options.ghostClass, true);\n\t\t\t\t_toggleClass(dragEl, options.dragClass, false);\n\n\t\t\t\tSortable.active = this;\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, rootEl, oldIndex);\n\t\t\t} else {\n\t\t\t\tthis._nulling();\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function () {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t\t}\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\tvar parent = target;\n\t\t\t\tvar i = touchDragOverListeners.length;\n\n\t\t\t\tif (target && target.shadowRoot) {\n\t\t\t\t\ttarget = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n\t\t\t\t\tparent = target;\n\t\t\t\t}\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando]) {\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\ttouchDragOverListeners[i]({\n\t\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\tvar\toptions = this.options,\n\t\t\t\t\tfallbackTolerance = options.fallbackTolerance,\n\t\t\t\t\tfallbackOffset = options.fallbackOffset,\n\t\t\t\t\ttouch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tdx = (touch.clientX - tapEvt.clientX) + fallbackOffset.x,\n\t\t\t\t\tdy = (touch.clientY - tapEvt.clientY) + fallbackOffset.y,\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!Sortable.active) {\n\t\t\t\t\tif (fallbackTolerance &&\n\t\t\t\t\t\tmin(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._dragStarted();\n\t\t\t\t}\n\n\t\t\t\t// as well as creating the ghost element on the document body\n\t\t\t\tthis._appendGhost();\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = dragEl.getBoundingClientRect(),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options,\n\t\t\t\t\tghostRect;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\t\t\t\t_toggleClass(ghostEl, options.dragClass, true);\n\n\t\t\t\t_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\t\t\t\t_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n\t\t\t\t// Fixing dimensions.\n\t\t\t\tghostRect = ghostEl.getBoundingClientRect();\n\t\t\t\t_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n\t\t\tvar _this = this;\n\t\t\tvar dataTransfer = evt.dataTransfer;\n\t\t\tvar options = _this.options;\n\n\t\t\t_this._offUpEvents();\n\n\t\t\tif (activeGroup.checkPull(_this, _this, dragEl, evt)) {\n\t\t\t\tcloneEl = _clone(dragEl);\n\n\t\t\t\tcloneEl.draggable = false;\n\t\t\t\tcloneEl.style['will-change'] = '';\n\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\t_toggleClass(cloneEl, _this.options.chosenClass, false);\n\n\t\t\t\t// #1143: IFrame support workaround\n\t\t\t\t_this._cloneId = _nextTick(function () {\n\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t\t_dispatchEvent(_this, rootEl, 'clone', dragEl);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t_toggleClass(dragEl, options.dragClass, true);\n\n\t\t\tif (useFallback) {\n\t\t\t\tif (useFallback === 'touch') {\n\t\t\t\t\t// Bind touch events\n\t\t\t\t\t_on(document, 'touchmove', _this._onTouchMove);\n\t\t\t\t\t_on(document, 'touchend', _this._onDrop);\n\t\t\t\t\t_on(document, 'touchcancel', _this._onDrop);\n\n\t\t\t\t\tif (options.supportPointer) {\n\t\t\t\t\t\t_on(document, 'pointermove', _this._onTouchMove);\n\t\t\t\t\t\t_on(document, 'pointerup', _this._onDrop);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Old brwoser\n\t\t\t\t\t_on(document, 'mousemove', _this._onTouchMove);\n\t\t\t\t\t_on(document, 'mouseup', _this._onDrop);\n\t\t\t\t}\n\n\t\t\t\t_this._loopId = setInterval(_this._emulateDragOver, 50);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(_this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', _this);\n\n\t\t\t\t// #1143: Бывает элемент с IFrame внутри блокирует `drop`,\n\t\t\t\t// поэтому если вызвался `mouseover`, значит надо отменять весь d'n'd.\n\t\t\t\t// Breaking Chrome 62+\n\t\t\t\t// _on(document, 'mouseover', _this);\n\n\t\t\t\t_this._dragStartId = _nextTick(_this._dragStarted);\n\t\t\t}\n\t\t},\n\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget,\n\t\t\t\tdragRect,\n\t\t\t\ttargetRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tactiveSortable = Sortable.active,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tisMovingBetweenSortable = false,\n\t\t\t\tcanSort = options.sort;\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation();\n\t\t\t}\n\n\t\t\tif (dragEl.animated) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmoved = true;\n\n\t\t\tif (activeSortable && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: (\n\t\t\t\t\t\tputSortable === this ||\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t(activeSortable.lastPullMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) &&\n\t\t\t\t\t\t\tgroup.checkPut(this, activeSortable, dragEl, evt)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t) &&\n\t\t\t\t(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n\t\t\t) {\n\t\t\t\t// Smart auto-scrolling\n\t\t\t\t_autoScroll(evt, options, this.el);\n\n\t\t\t\tif (_silent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttarget = _closest(evt.target, options.draggable, el);\n\t\t\t\tdragRect = dragEl.getBoundingClientRect();\n\n\t\t\t\tif (putSortable !== this) {\n\t\t\t\t\tputSortable = this;\n\t\t\t\t\tisMovingBetweenSortable = true;\n\t\t\t\t}\n\n\t\t\t\tif (revert) {\n\t\t\t\t\t_cloneHide(activeSortable, true);\n\t\t\t\t\tparentEl = rootEl; // actualization\n\n\t\t\t\t\tif (cloneEl || nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, cloneEl || nextEl);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!canSort) {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t(el === evt.target) && (_ghostIsLast(el, evt))\n\t\t\t\t) {\n\t\t\t\t\t//assign target only if condition is true\n\t\t\t\t\tif (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {\n\t\t\t\t\t\ttarget = el.lastElementChild;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tif (target.animated) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\t_cloneHide(activeSortable, isOwner);\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt) !== false) {\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n\t\t\t\t\tif (lastEl !== target) {\n\t\t\t\t\t\tlastEl = target;\n\t\t\t\t\t\tlastCSS = _css(target);\n\t\t\t\t\t\tlastParentCSS = _css(target.parentNode);\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\n\t\t\t\t\tvar width = targetRect.right - targetRect.left,\n\t\t\t\t\t\theight = targetRect.bottom - targetRect.top,\n\t\t\t\t\t\tfloating = R_FLOAT.test(lastCSS.cssFloat + lastCSS.display)\n\t\t\t\t\t\t\t|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n\t\t\t\t\t\tisWide = (target.offsetWidth > dragEl.offsetWidth),\n\t\t\t\t\t\tisLong = (target.offsetHeight > dragEl.offsetHeight),\n\t\t\t\t\t\thalfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n\t\t\t\t\t\tnextSibling = target.nextElementSibling,\n\t\t\t\t\t\tafter = false\n\t\t\t\t\t;\n\n\t\t\t\t\tif (floating) {\n\t\t\t\t\t\tvar elTop = dragEl.offsetTop,\n\t\t\t\t\t\t\ttgTop = target.offsetTop;\n\n\t\t\t\t\t\tif (elTop === tgTop) {\n\t\t\t\t\t\t\tafter = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (target.previousElementSibling === dragEl || dragEl.previousElementSibling === target) {\n\t\t\t\t\t\t\tafter = (evt.clientY - targetRect.top) / height > 0.5;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = tgTop > elTop;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (!isMovingBetweenSortable) {\n\t\t\t\t\t\tafter = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\t_cloneHide(activeSortable, isOwner);\n\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\tthis._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = target.getBoundingClientRect();\n\n\t\t\t\tif (prevRect.nodeType === 1) {\n\t\t\t\t\tprevRect = prevRect.getBoundingClientRect();\n\t\t\t\t}\n\n\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t+ (prevRect.left - currentRect.left) + 'px,'\n\t\t\t\t\t+ (prevRect.top - currentRect.top) + 'px,0)'\n\t\t\t\t);\n\n\t\t\t\ttarget.offsetWidth; // repaint\n\n\t\t\t\t_css(target, 'transition', 'all ' + ms + 'ms');\n\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\n\t\t\t\tclearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(document, 'pointermove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointerup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t\t_off(ownerDocument, 'pointercancel', this._onDrop);\n\t\t\t_off(ownerDocument, 'selectstart', this);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\n\t\t\tclearInterval(this._loopId);\n\t\t\tclearInterval(autoScroll.pid);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t_cancelNextTick(this._cloneId);\n\t\t\t_cancelNextTick(this._dragStartId);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mouseover', this);\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (rootEl === parentEl || Sortable.active.lastPullMode !== 'clone') {\n\t\t\t\t\t// Remove clone\n\t\t\t\t\tcloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n\t\t\t\t}\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\t\t\t\t\tdragEl.style['will-change'] = '';\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\t// Drag stop event\n\t\t\t\t\t_dispatchEvent(this, rootEl, 'unchoose', dragEl, parentEl, rootEl, oldIndex);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Sortable.active) {\n\t\t\t\t\t\t/* jshint eqnull:true */\n\t\t\t\t\t\tif (newIndex == null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, parentEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\t\t\tlastDownEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\n\t\t\tlastEl =\n\t\t\tlastCSS =\n\n\t\t\tputSortable =\n\t\t\tactiveGroup =\n\t\t\tSortable.active = null;\n\n\t\t\tsavedInputChecked.forEach(function (el) {\n\t\t\t\tel.checked = true;\n\t\t\t});\n\t\t\tsavedInputChecked.length = 0;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tswitch (evt.type) {\n\t\t\t\tcase 'drop':\n\t\t\t\tcase 'dragend':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'dragover':\n\t\t\t\tcase 'dragenter':\n\t\t\t\t\tif (dragEl) {\n\t\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mouseover':\n\t\t\t\t\tthis._onDrop(evt);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'selectstart':\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\t\t\t_off(el, 'pointerdown', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\ttouchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n\t\t\tthis._onDrop();\n\n\t\t\tthis.el = el = null;\n\t\t}\n\t};\n\n\n\tfunction _cloneHide(sortable, state) {\n\t\tif (sortable.lastPullMode !== 'clone') {\n\t\t\tstate = true;\n\t\t}\n\n\t\tif (cloneEl && (cloneEl.state !== state)) {\n\t\t\t_css(cloneEl, 'display', state ? 'none' : '');\n\n\t\t\tif (!state) {\n\t\t\t\tif (cloneEl.state) {\n\t\t\t\t\tif (sortable.options.group.revertClone) {\n\t\t\t\t\t\trootEl.insertBefore(cloneEl, nextEl);\n\t\t\t\t\t\tsortable._animate(dragEl, cloneEl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloneEl.state = state;\n\t\t}\n\t}\n\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif ((selector === '>*' && el.parentNode === ctx) || _matches(el, selector)) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t\t/* jshint boss:true */\n\t\t\t} while (el = _getParentOrHost(el));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _getParentOrHost(el) {\n\t\tvar parent = el.host;\n\n\t\treturn (parent && parent.nodeType) ? parent : el.parentNode;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, captureMode);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style)) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(sortable, rootEl, name, targetEl, toEl, fromEl, startIndex, newIndex) {\n\t\tsortable = (sortable || rootEl[expando]);\n\n\t\tvar evt = document.createEvent('Event'),\n\t\t\toptions = sortable.options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n\t\tevt.initEvent(name, true, true);\n\n\t\tevt.to = toEl || rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\trootEl.dispatchEvent(evt);\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(sortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {\n\t\tvar evt,\n\t\t\tsortable = fromEl[expando],\n\t\t\tonMoveFn = sortable.options.onMove,\n\t\t\tretVal;\n\n\t\tevt = document.createEvent('Event');\n\t\tevt.initEvent('move', true, true);\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\t\tevt.willInsertAfter = willInsertAfter;\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(sortable, evt, originalEvt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\n\t/** @returns {HTMLElement|false} */\n\tfunction _ghostIsLast(el, evt) {\n\t\tvar lastEl = el.lastElementChild,\n\t\t\trect = lastEl.getBoundingClientRect();\n\n\t\t// 5 — min delta\n\t\t// abs — нельзя добавлять, а то глюки при наведении сверху\n\t\treturn (evt.clientY - (rect.top + rect.height) > 5) ||\n\t\t\t(evt.clientX - (rect.left + rect.width) > 5);\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif ((el.nodeName.toUpperCase() !== 'TEMPLATE') && (selector === '>*' || _matches(el, selector))) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\tselector = selector.split('.');\n\n\t\t\tvar tag = selector.shift().toUpperCase(),\n\t\t\t\tre = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n\t\t\treturn (\n\t\t\t\t(tag === '' || el.nodeName.toUpperCase() == tag) &&\n\t\t\t\t(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction _throttle(callback, ms) {\n\t\tvar args, _this;\n\n\t\treturn function () {\n\t\t\tif (args === void 0) {\n\t\t\t\targs = arguments;\n\t\t\t\t_this = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\targs = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\tfunction _clone(el) {\n\t\tif (Polymer && Polymer.dom) {\n\t\t\treturn Polymer.dom(el).cloneNode(true);\n\t\t}\n\t\telse if ($) {\n\t\t\treturn $(el).clone(true)[0];\n\t\t}\n\t\telse {\n\t\t\treturn el.cloneNode(true);\n\t\t}\n\t}\n\n\tfunction _saveInputCheckedState(root) {\n\t\tvar inputs = root.getElementsByTagName('input');\n\t\tvar idx = inputs.length;\n\n\t\twhile (idx--) {\n\t\t\tvar el = inputs[idx];\n\t\t\tel.checked && savedInputChecked.push(el);\n\t\t}\n\t}\n\n\tfunction _nextTick(fn) {\n\t\treturn setTimeout(fn, 0);\n\t}\n\n\tfunction _cancelNextTick(id) {\n\t\treturn clearTimeout(id);\n\t}\n\n\t// Fixed #973:\n\t_on(document, 'touchmove', function (evt) {\n\t\tif (Sortable.active) {\n\t\t\tevt.preventDefault();\n\t\t}\n\t});\n\n\t// Export utils\n\tSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tclone: _clone,\n\t\tindex: _index,\n\t\tnextTick: _nextTick,\n\t\tcancelNextTick: _cancelNextTick\n\t};\n\n\n\t/**\n\t * Create sortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tSortable.create = function (el, options) {\n\t\treturn new Sortable(el, options);\n\t};\n\n\n\t// Export\n\tSortable.version = '1.7.0';\n\treturn Sortable;\n});\n","/* Clusterize.js - v0.18.1 - 2018-01-02\n http://NeXTs.github.com/Clusterize.js/\n Copyright (c) 2015 Denis Lukov; Licensed GPLv3 */\n\n;(function(name, definition) {\n    if (typeof module != 'undefined') module.exports = definition();\n    else if (typeof define == 'function' && typeof define.amd == 'object') define(definition);\n    else this[name] = definition();\n}('Clusterize', function() {\n  \"use strict\"\n\n  // detect ie9 and lower\n  // https://gist.github.com/padolsey/527683#comment-786682\n  var ie = (function(){\n    for( var v = 3,\n             el = document.createElement('b'),\n             all = el.all || [];\n         el.innerHTML = '<!--[if gt IE ' + (++v) + ']><i><![endif]-->',\n         all[0];\n       ){}\n    return v > 4 ? v : document.documentMode;\n  }()),\n  is_mac = navigator.platform.toLowerCase().indexOf('mac') + 1;\n  var Clusterize = function(data) {\n    if( ! (this instanceof Clusterize))\n      return new Clusterize(data);\n    var self = this;\n\n    var defaults = {\n      rows_in_block: 50,\n      blocks_in_cluster: 4,\n      tag: null,\n      show_no_data_row: true,\n      no_data_class: 'clusterize-no-data',\n      no_data_text: 'No data',\n      keep_parity: true,\n      callbacks: {}\n    }\n\n    // public parameters\n    self.options = {};\n    var options = ['rows_in_block', 'blocks_in_cluster', 'show_no_data_row', 'no_data_class', 'no_data_text', 'keep_parity', 'tag', 'callbacks'];\n    for(var i = 0, option; option = options[i]; i++) {\n      self.options[option] = typeof data[option] != 'undefined' && data[option] != null\n        ? data[option]\n        : defaults[option];\n    }\n\n    var elems = ['scroll', 'content'];\n    for(var i = 0, elem; elem = elems[i]; i++) {\n      self[elem + '_elem'] = data[elem + 'Id']\n        ? document.getElementById(data[elem + 'Id'])\n        : data[elem + 'Elem'];\n      if( ! self[elem + '_elem'])\n        throw new Error(\"Error! Could not find \" + elem + \" element\");\n    }\n\n    // tabindex forces the browser to keep focus on the scrolling list, fixes #11\n    if( ! self.content_elem.hasAttribute('tabindex'))\n      self.content_elem.setAttribute('tabindex', 0);\n\n    // private parameters\n    var rows = isArray(data.rows)\n        ? data.rows\n        : self.fetchMarkup(),\n      cache = {},\n      scroll_top = self.scroll_elem.scrollTop;\n\n    // append initial data\n    self.insertToDOM(rows, cache);\n\n    // restore the scroll position\n    self.scroll_elem.scrollTop = scroll_top;\n\n    // adding scroll handler\n    var last_cluster = false,\n    scroll_debounce = 0,\n    pointer_events_set = false,\n    scrollEv = function() {\n      // fixes scrolling issue on Mac #3\n      if (is_mac) {\n          if( ! pointer_events_set) self.content_elem.style.pointerEvents = 'none';\n          pointer_events_set = true;\n          clearTimeout(scroll_debounce);\n          scroll_debounce = setTimeout(function () {\n              self.content_elem.style.pointerEvents = 'auto';\n              pointer_events_set = false;\n          }, 50);\n      }\n      if (last_cluster != (last_cluster = self.getClusterNum()))\n        self.insertToDOM(rows, cache);\n      if (self.options.callbacks.scrollingProgress)\n        self.options.callbacks.scrollingProgress(self.getScrollProgress());\n    },\n    resize_debounce = 0,\n    resizeEv = function() {\n      clearTimeout(resize_debounce);\n      resize_debounce = setTimeout(self.refresh, 100);\n    }\n    on('scroll', self.scroll_elem, scrollEv);\n    on('resize', window, resizeEv);\n\n    // public methods\n    self.destroy = function(clean) {\n      off('scroll', self.scroll_elem, scrollEv);\n      off('resize', window, resizeEv);\n      self.html((clean ? self.generateEmptyRow() : rows).join(''));\n    }\n    self.refresh = function(force) {\n      if(self.getRowsHeight(rows) || force) self.update(rows);\n    }\n    self.update = function(new_rows) {\n      rows = isArray(new_rows)\n        ? new_rows\n        : [];\n      var scroll_top = self.scroll_elem.scrollTop;\n      // fixes #39\n      if(rows.length * self.options.item_height < scroll_top) {\n        self.scroll_elem.scrollTop = 0;\n        last_cluster = 0;\n      }\n      self.insertToDOM(rows, cache);\n      self.scroll_elem.scrollTop = scroll_top;\n    }\n    self.clear = function() {\n      self.update([]);\n    }\n    self.getRowsAmount = function() {\n      return rows.length;\n    }\n    self.getScrollProgress = function() {\n      return this.options.scroll_top / (rows.length * this.options.item_height) * 100 || 0;\n    }\n\n    var add = function(where, _new_rows) {\n      var new_rows = isArray(_new_rows)\n        ? _new_rows\n        : [];\n      if( ! new_rows.length) return;\n      rows = where == 'append'\n        ? rows.concat(new_rows)\n        : new_rows.concat(rows);\n      self.insertToDOM(rows, cache);\n    }\n    self.append = function(rows) {\n      add('append', rows);\n    }\n    self.prepend = function(rows) {\n      add('prepend', rows);\n    }\n  }\n\n  Clusterize.prototype = {\n    constructor: Clusterize,\n    // fetch existing markup\n    fetchMarkup: function() {\n      var rows = [], rows_nodes = this.getChildNodes(this.content_elem);\n      while (rows_nodes.length) {\n        rows.push(rows_nodes.shift().outerHTML);\n      }\n      return rows;\n    },\n    // get tag name, content tag name, tag height, calc cluster height\n    exploreEnvironment: function(rows, cache) {\n      var opts = this.options;\n      opts.content_tag = this.content_elem.tagName.toLowerCase();\n      if( ! rows.length) return;\n      if(ie && ie <= 9 && ! opts.tag) opts.tag = rows[0].match(/<([^>\\s/]*)/)[1].toLowerCase();\n      if(this.content_elem.children.length <= 1) cache.data = this.html(rows[0] + rows[0] + rows[0]);\n      if( ! opts.tag) opts.tag = this.content_elem.children[0].tagName.toLowerCase();\n      this.getRowsHeight(rows);\n    },\n    getRowsHeight: function(rows) {\n      var opts = this.options,\n        prev_item_height = opts.item_height;\n      opts.cluster_height = 0;\n      if( ! rows.length) return;\n      var nodes = this.content_elem.children;\n      if( ! nodes.length) return;\n      var node = nodes[Math.floor(nodes.length / 2)];\n      opts.item_height = node.offsetHeight;\n      // consider table's border-spacing\n      if(opts.tag == 'tr' && getStyle('borderCollapse', this.content_elem) != 'collapse')\n        opts.item_height += parseInt(getStyle('borderSpacing', this.content_elem), 10) || 0;\n      // consider margins (and margins collapsing)\n      if(opts.tag != 'tr') {\n        var marginTop = parseInt(getStyle('marginTop', node), 10) || 0;\n        var marginBottom = parseInt(getStyle('marginBottom', node), 10) || 0;\n        opts.item_height += Math.max(marginTop, marginBottom);\n      }\n      opts.block_height = opts.item_height * opts.rows_in_block;\n      opts.rows_in_cluster = opts.blocks_in_cluster * opts.rows_in_block;\n      opts.cluster_height = opts.blocks_in_cluster * opts.block_height;\n      return prev_item_height != opts.item_height;\n    },\n    // get current cluster number\n    getClusterNum: function () {\n      this.options.scroll_top = this.scroll_elem.scrollTop;\n      return Math.floor(this.options.scroll_top / (this.options.cluster_height - this.options.block_height)) || 0;\n    },\n    // generate empty row if no data provided\n    generateEmptyRow: function() {\n      var opts = this.options;\n      if( ! opts.tag || ! opts.show_no_data_row) return [];\n      var empty_row = document.createElement(opts.tag),\n        no_data_content = document.createTextNode(opts.no_data_text), td;\n      empty_row.className = opts.no_data_class;\n      if(opts.tag == 'tr') {\n        td = document.createElement('td');\n        // fixes #53\n        td.colSpan = 100;\n        td.appendChild(no_data_content);\n      }\n      empty_row.appendChild(td || no_data_content);\n      return [empty_row.outerHTML];\n    },\n    // generate cluster for current scroll position\n    generate: function (rows, cluster_num) {\n      var opts = this.options,\n        rows_len = rows.length;\n      if (rows_len < opts.rows_in_block) {\n        return {\n          top_offset: 0,\n          bottom_offset: 0,\n          rows_above: 0,\n          rows: rows_len ? rows : this.generateEmptyRow()\n        }\n      }\n      var items_start = Math.max((opts.rows_in_cluster - opts.rows_in_block) * cluster_num, 0),\n        items_end = items_start + opts.rows_in_cluster,\n        top_offset = Math.max(items_start * opts.item_height, 0),\n        bottom_offset = Math.max((rows_len - items_end) * opts.item_height, 0),\n        this_cluster_rows = [],\n        rows_above = items_start;\n      if(top_offset < 1) {\n        rows_above++;\n      }\n      for (var i = items_start; i < items_end; i++) {\n        rows[i] && this_cluster_rows.push(rows[i]);\n      }\n      return {\n        top_offset: top_offset,\n        bottom_offset: bottom_offset,\n        rows_above: rows_above,\n        rows: this_cluster_rows\n      }\n    },\n    renderExtraTag: function(class_name, height) {\n      var tag = document.createElement(this.options.tag),\n        clusterize_prefix = 'clusterize-';\n      tag.className = [clusterize_prefix + 'extra-row', clusterize_prefix + class_name].join(' ');\n      height && (tag.style.height = height + 'px');\n      return tag.outerHTML;\n    },\n    // if necessary verify data changed and insert to DOM\n    insertToDOM: function(rows, cache) {\n      // explore row's height\n      if( ! this.options.cluster_height) {\n        this.exploreEnvironment(rows, cache);\n      }\n      var data = this.generate(rows, this.getClusterNum()),\n        this_cluster_rows = data.rows.join(''),\n        this_cluster_content_changed = this.checkChanges('data', this_cluster_rows, cache),\n        top_offset_changed = this.checkChanges('top', data.top_offset, cache),\n        only_bottom_offset_changed = this.checkChanges('bottom', data.bottom_offset, cache),\n        callbacks = this.options.callbacks,\n        layout = [];\n\n      if(this_cluster_content_changed || top_offset_changed) {\n        if(data.top_offset) {\n          this.options.keep_parity && layout.push(this.renderExtraTag('keep-parity'));\n          layout.push(this.renderExtraTag('top-space', data.top_offset));\n        }\n        layout.push(this_cluster_rows);\n        data.bottom_offset && layout.push(this.renderExtraTag('bottom-space', data.bottom_offset));\n        callbacks.clusterWillChange && callbacks.clusterWillChange();\n        this.html(layout.join(''));\n        this.options.content_tag == 'ol' && this.content_elem.setAttribute('start', data.rows_above);\n        this.content_elem.style['counter-increment'] = 'clusterize-counter ' + (data.rows_above-1);\n        callbacks.clusterChanged && callbacks.clusterChanged();\n      } else if(only_bottom_offset_changed) {\n        this.content_elem.lastChild.style.height = data.bottom_offset + 'px';\n      }\n    },\n    // unfortunately ie <= 9 does not allow to use innerHTML for table elements, so make a workaround\n    html: function(data) {\n      var content_elem = this.content_elem;\n      if(ie && ie <= 9 && this.options.tag == 'tr') {\n        var div = document.createElement('div'), last;\n        div.innerHTML = '<table><tbody>' + data + '</tbody></table>';\n        while((last = content_elem.lastChild)) {\n          content_elem.removeChild(last);\n        }\n        var rows_nodes = this.getChildNodes(div.firstChild.firstChild);\n        while (rows_nodes.length) {\n          content_elem.appendChild(rows_nodes.shift());\n        }\n      } else {\n        content_elem.innerHTML = data;\n      }\n    },\n    getChildNodes: function(tag) {\n        var child_nodes = tag.children, nodes = [];\n        for (var i = 0, ii = child_nodes.length; i < ii; i++) {\n            nodes.push(child_nodes[i]);\n        }\n        return nodes;\n    },\n    checkChanges: function(type, value, cache) {\n      var changed = value != cache[type];\n      cache[type] = value;\n      return changed;\n    }\n  }\n\n  // support functions\n  function on(evt, element, fnc) {\n    return element.addEventListener ? element.addEventListener(evt, fnc, false) : element.attachEvent(\"on\" + evt, fnc);\n  }\n  function off(evt, element, fnc) {\n    return element.removeEventListener ? element.removeEventListener(evt, fnc, false) : element.detachEvent(\"on\" + evt, fnc);\n  }\n  function isArray(arr) {\n    return Object.prototype.toString.call(arr) === '[object Array]';\n  }\n  function getStyle(prop, elem) {\n    return window.getComputedStyle ? window.getComputedStyle(elem)[prop] : elem.currentStyle[prop];\n  }\n\n  return Clusterize;\n}));","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Sortable = _interopDefault(require('sortablejs'));\nvar Clusterize = _interopDefault(require('clusterize.js'));\n\nfunction $(expr, con) {\n    return typeof expr === 'string' ?\n        (con || document).querySelector(expr) :\n        expr || null;\n}\n\n$.each = (expr, con) => {\n    return typeof expr === 'string' ?\n        Array.from((con || document).querySelectorAll(expr)) :\n        expr || null;\n};\n\n$.create = (tag, o) => {\n    let element = document.createElement(tag);\n\n    for (let i in o) {\n        let val = o[i];\n\n        if (i === 'inside') {\n            $(val).appendChild(element);\n        } else\n        if (i === 'around') {\n            let ref = $(val);\n            ref.parentNode.insertBefore(element, ref);\n            element.appendChild(ref);\n        } else\n        if (i === 'styles') {\n            if (typeof val === 'object') {\n                Object.keys(val).map(prop => {\n                    element.style[prop] = val[prop];\n                });\n            }\n        } else\n        if (i in element) {\n            element[i] = val;\n        } else {\n            element.setAttribute(i, val);\n        }\n    }\n\n    return element;\n};\n\n$.on = (element, event, selector, callback) => {\n    if (!callback) {\n        callback = selector;\n        $.bind(element, event, callback);\n    } else {\n        $.delegate(element, event, selector, callback);\n    }\n};\n\n$.off = (element, event, handler) => {\n    element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n    event.split(/\\s+/).forEach(function (event) {\n        element.addEventListener(event, callback);\n    });\n};\n\n$.delegate = (element, event, selector, callback) => {\n    element.addEventListener(event, function (e) {\n        const delegatedTarget = e.target.closest(selector);\n        if (delegatedTarget) {\n            e.delegatedTarget = delegatedTarget;\n            callback.call(this, e, delegatedTarget);\n        }\n    });\n};\n\n$.unbind = (element, o) => {\n    if (element) {\n        for (let event in o) {\n            let callback = o[event];\n\n            event.split(/\\s+/).forEach(function (event) {\n                element.removeEventListener(event, callback);\n            });\n        }\n    }\n};\n\n$.fire = (target, type, properties) => {\n    let evt = document.createEvent('HTMLEvents');\n\n    evt.initEvent(type, true, true);\n\n    for (let j in properties) {\n        evt[j] = properties[j];\n    }\n\n    return target.dispatchEvent(evt);\n};\n\n$.data = (element, attrs) => { // eslint-disable-line\n    if (!attrs) {\n        return element.dataset;\n    }\n\n    for (const attr in attrs) {\n        element.dataset[attr] = attrs[attr];\n    }\n};\n\n$.style = (elements, styleMap) => { // eslint-disable-line\n\n    if (typeof styleMap === 'string') {\n        return $.getStyle(elements, styleMap);\n    }\n\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    elements.map(element => {\n        for (const prop in styleMap) {\n            element.style[prop] = styleMap[prop];\n        }\n    });\n};\n\n$.removeStyle = (elements, styleProps) => {\n    if (!Array.isArray(elements)) {\n        elements = [elements];\n    }\n\n    if (!Array.isArray(styleProps)) {\n        styleProps = [styleProps];\n    }\n\n    elements.map(element => {\n        for (const prop of styleProps) {\n            element.style[prop] = '';\n        }\n    });\n};\n\n$.getStyle = (element, prop) => {\n    let val = getComputedStyle(element)[prop];\n\n    if (['width', 'height'].includes(prop)) {\n        val = parseFloat(val);\n    }\n\n    return val;\n};\n\n$.closest = (selector, element) => {\n    if (!element) return null;\n\n    if (element.matches(selector)) {\n        return element;\n    }\n\n    return $.closest(selector, element.parentNode);\n};\n\n$.inViewport = (el, parentEl) => {\n    const {\n        top,\n        left,\n        bottom,\n        right\n    } = el.getBoundingClientRect();\n    const {\n        top: pTop,\n        left: pLeft,\n        bottom: pBottom,\n        right: pRight\n    } = parentEl.getBoundingClientRect();\n\n    return top >= pTop && left >= pLeft && bottom <= pBottom && right <= pRight;\n};\n\n$.scrollTop = function scrollTop(element, pixels) {\n    requestAnimationFrame(() => {\n        element.scrollTop = pixels;\n    });\n};\n\n$.scrollbarWidth = function scrollbarWidth() {\n    // Create the measurement node\n    const scrollDiv = document.createElement('div');\n    $.style(scrollDiv, {\n        width: '100px',\n        height: '100px',\n        overflow: 'scroll',\n        position: 'absolute',\n        top: '-9999px'\n    });\n    document.body.appendChild(scrollDiv);\n\n    // Get the scrollbar width\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n\n    // Delete the DIV\n    document.body.removeChild(scrollDiv);\n\n    return scrollbarWidth;\n};\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nvar isObject_1 = isObject;\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\nvar _freeGlobal = freeGlobal;\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = _freeGlobal || freeSelf || Function('return this')();\n\nvar _root = root;\n\nvar now = function() {\n  return _root.Date.now();\n};\n\nvar now_1 = now;\n\nvar Symbol = _root.Symbol;\n\nvar _Symbol = Symbol;\n\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nvar _getRawTag = getRawTag;\n\n/** Used for built-in method references. */\nvar objectProto$1 = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString$1 = objectProto$1.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString$1.call(value);\n}\n\nvar _objectToString = objectToString;\n\nvar nullTag = '[object Null]';\nvar undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag$1 = _Symbol ? _Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag$1 && symToStringTag$1 in Object(value))\n    ? _getRawTag(value)\n    : _objectToString(value);\n}\n\nvar _baseGetTag = baseGetTag;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nvar isObjectLike_1 = isObjectLike;\n\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike_1(value) && _baseGetTag(value) == symbolTag);\n}\n\nvar isSymbol_1 = isSymbol;\n\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol_1(value)) {\n    return NAN;\n  }\n  if (isObject_1(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject_1(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nvar toNumber_1 = toNumber;\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\nvar nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber_1(wait) || 0;\n  if (isObject_1(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now_1();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now_1());\n  }\n\n  function debounced() {\n    var time = now_1(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nvar debounce_1 = debounce;\n\nvar FUNC_ERROR_TEXT$1 = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT$1);\n  }\n  if (isObject_1(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce_1(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nvar throttle_1 = throttle;\n\nfunction camelCaseToDash(str) {\n    return str.replace(/([A-Z])/g, (g) => `-${g[0].toLowerCase()}`);\n}\n\nfunction makeDataAttributeString(props) {\n    const keys = Object.keys(props);\n\n    return keys\n        .map((key) => {\n            const _key = camelCaseToDash(key);\n            const val = props[key];\n\n            if (val === undefined) return '';\n            return `data-${_key}=\"${val}\" `;\n        })\n        .join('')\n        .trim();\n}\n\nfunction copyTextToClipboard(text) {\n    // https://stackoverflow.com/a/30810322/5353542\n    var textArea = document.createElement('textarea');\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakyness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = 'fixed';\n    textArea.style.top = 0;\n    textArea.style.left = 0;\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = 0;\n\n    // Clean up any borders.\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = 'transparent';\n\n    textArea.value = text;\n\n    document.body.appendChild(textArea);\n\n    textArea.select();\n\n    try {\n        document.execCommand('copy');\n    } catch (err) {\n        console.log('Oops, unable to copy');\n    }\n\n    document.body.removeChild(textArea);\n}\n\nfunction isNumeric(val) {\n    return !isNaN(val);\n}\n\nlet throttle$1 = throttle_1;\n\nlet debounce$2 = debounce_1;\n\nfunction nextTick(fn, context = null) {\n    return (...args) => {\n        return new Promise(resolve => {\n            const execute = () => {\n                const out = fn.apply(context, args);\n                resolve(out);\n            };\n\n            if (window.setImmediate) {\n                setImmediate(execute);\n            } else if (window.requestAnimationFrame) {\n                requestAnimationFrame(execute);\n            } else {\n                setTimeout(execute);\n            }\n        });\n    };\n}\n\nfunction linkProperties(target, source, properties) {\n    const props = properties.reduce((acc, prop) => {\n        acc[prop] = {\n            get() {\n                return source[prop];\n            }\n        };\n        return acc;\n    }, {});\n    Object.defineProperties(target, props);\n}\n\nfunction isSet(val) {\n    return val !== undefined || val !== null;\n}\n\nfunction notSet(val) {\n    return !isSet(val);\n}\n\nfunction isNumber(val) {\n    return !isNaN(val);\n}\n\nfunction ensureArray(val) {\n    if (!Array.isArray(val)) {\n        return [val];\n    }\n    return val;\n}\n\nclass DataManager {\n    constructor(options) {\n        this.options = options;\n        this.sortRows = nextTick(this.sortRows, this);\n        this.switchColumn = nextTick(this.switchColumn, this);\n        this.removeColumn = nextTick(this.removeColumn, this);\n        this.filterRows = nextTick(this.filterRows, this);\n    }\n\n    init(data, columns) {\n        if (!data) {\n            data = this.options.data;\n        }\n        if (columns) {\n            this.options.columns = columns;\n        }\n\n        this.data = data;\n\n        this.rowCount = 0;\n        this.columns = [];\n        this.rows = [];\n\n        this.prepareColumns();\n        this.prepareRows();\n        this.prepareTreeRows();\n        this.prepareRowView();\n\n        this.prepareNumericColumns();\n    }\n\n    // computed property\n    get currentSort() {\n        const col = this.columns.find(col => col.sortOrder !== 'none');\n        return col || {\n            colIndex: -1,\n            sortOrder: 'none'\n        };\n    }\n\n    prepareColumns() {\n        this.columns = [];\n        this.validateColumns();\n        this.prepareDefaultColumns();\n        this.prepareHeader();\n    }\n\n    prepareDefaultColumns() {\n        if (this.options.checkboxColumn && !this.hasColumnById('_checkbox')) {\n            const cell = {\n                id: '_checkbox',\n                content: this.getCheckboxHTML(),\n                editable: false,\n                resizable: false,\n                sortable: false,\n                focusable: false,\n                dropdown: false,\n                width: 32\n            };\n            this.columns.push(cell);\n        }\n\n        if (this.options.serialNoColumn && !this.hasColumnById('_rowIndex')) {\n            let cell = {\n                id: '_rowIndex',\n                content: '',\n                align: 'center',\n                editable: false,\n                resizable: false,\n                focusable: false,\n                dropdown: false\n            };\n\n            this.columns.push(cell);\n        }\n    }\n\n    prepareHeader() {\n        let columns = this.columns.concat(this.options.columns);\n        const baseCell = {\n            isHeader: 1,\n            editable: true,\n            sortable: true,\n            resizable: true,\n            focusable: true,\n            dropdown: true,\n            width: null,\n            format: (value) => {\n                if (value === null || value === undefined) {\n                    return '';\n                }\n                return value + '';\n            }\n        };\n\n        this.columns = columns\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(col => Object.assign({}, baseCell, col))\n            .map(col => {\n                col.content = col.content || col.name || '';\n                col.id = col.id || col.content;\n                return col;\n            });\n    }\n\n    prepareCell(content, i) {\n        const cell = {\n            content: '',\n            align: 'left',\n            sortOrder: 'none',\n            colIndex: i,\n            column: this.columns[i]\n        };\n\n        if (content !== null && typeof content === 'object') {\n            // passed as column/header\n            Object.assign(cell, content);\n        } else {\n            cell.content = content;\n        }\n\n        return cell;\n    }\n\n    prepareNumericColumns() {\n        const row0 = this.getRow(0);\n        if (!row0) return;\n        this.columns = this.columns.map((column, i) => {\n\n            const cellValue = row0[i].content;\n            if (!column.align && cellValue && isNumeric(cellValue)) {\n                column.align = 'right';\n            }\n\n            return column;\n        });\n    }\n\n    prepareRows() {\n        this.validateData(this.data);\n\n        this.rows = this.data.map((d, i) => {\n            const index = this._getNextRowCount();\n\n            let row = [];\n            let meta = {\n                rowIndex: index\n            };\n\n            if (Array.isArray(d)) {\n                // row is an array\n                if (this.options.checkboxColumn) {\n                    row.push(this.getCheckboxHTML());\n                }\n                if (this.options.serialNoColumn) {\n                    row.push((index + 1) + '');\n                }\n                row = row.concat(d);\n\n                while (row.length < this.columns.length) {\n                    row.push('');\n                }\n\n            } else {\n                // row is an object\n                for (let col of this.columns) {\n                    if (col.id === '_checkbox') {\n                        row.push(this.getCheckboxHTML());\n                    } else if (col.id === '_rowIndex') {\n                        row.push((index + 1) + '');\n                    } else {\n                        row.push(d[col.id]);\n                    }\n                }\n\n                meta.indent = d.indent || 0;\n            }\n\n            return this.prepareRow(row, meta);\n        });\n    }\n\n    prepareTreeRows() {\n        this.rows.forEach((row, i) => {\n            if (isNumber(row.meta.indent)) {\n                // if (i === 36) debugger;\n                const nextRow = this.getRow(i + 1);\n                row.meta.isLeaf = !nextRow ||\n                    notSet(nextRow.meta.indent) ||\n                    nextRow.meta.indent <= row.meta.indent;\n            }\n        });\n    }\n\n    prepareRowView() {\n        // This is order in which rows will be rendered in the table.\n        // When sorting happens, only this.rowViewOrder will change\n        // and not the original this.rows\n        this.rowViewOrder = this.rows.map(row => row.meta.rowIndex);\n    }\n\n    prepareRow(row, meta) {\n        const baseRowCell = {\n            rowIndex: meta.rowIndex,\n            indent: meta.indent\n        };\n\n        row = row\n            .map((cell, i) => this.prepareCell(cell, i))\n            .map(cell => Object.assign({}, baseRowCell, cell));\n\n        // monkey patched in array object\n        row.meta = meta;\n        return row;\n    }\n\n    validateColumns() {\n        const columns = this.options.columns;\n        if (!Array.isArray(columns)) {\n            throw new DataError('`columns` must be an array');\n        }\n\n        columns.forEach((column, i) => {\n            if (typeof column !== 'string' && typeof column !== 'object') {\n                throw new DataError(`column \"${i}\" must be a string or an object`);\n            }\n        });\n    }\n\n    validateData(data) {\n        if (Array.isArray(data) &&\n            (data.length === 0 || Array.isArray(data[0]) || typeof data[0] === 'object')) {\n            return true;\n        }\n        throw new DataError('`data` must be an array of arrays or objects');\n    }\n\n    appendRows(rows) {\n        this.validateData(rows);\n\n        this.rows.push(...this.prepareRows(rows));\n    }\n\n    sortRows(colIndex, sortOrder = 'none') {\n        colIndex = +colIndex;\n\n        // reset sortOrder and update for colIndex\n        this.getColumns()\n            .map(col => {\n                if (col.colIndex === colIndex) {\n                    col.sortOrder = sortOrder;\n                } else {\n                    col.sortOrder = 'none';\n                }\n            });\n\n        this._sortRows(colIndex, sortOrder);\n    }\n\n    _sortRows(colIndex, sortOrder) {\n\n        if (this.currentSort.colIndex === colIndex) {\n            // reverse the array if only sortOrder changed\n            if (\n                (this.currentSort.sortOrder === 'asc' && sortOrder === 'desc') ||\n                (this.currentSort.sortOrder === 'desc' && sortOrder === 'asc')\n            ) {\n                this.reverseArray(this.rowViewOrder);\n                this.currentSort.sortOrder = sortOrder;\n                return;\n            }\n        }\n\n        this.rowViewOrder.sort((a, b) => {\n            const aIndex = a;\n            const bIndex = b;\n            const aContent = this.getCell(colIndex, a).content;\n            const bContent = this.getCell(colIndex, b).content;\n\n            if (sortOrder === 'none') {\n                return aIndex - bIndex;\n            } else if (sortOrder === 'asc') {\n                if (aContent < bContent) return -1;\n                if (aContent > bContent) return 1;\n                if (aContent === bContent) return 0;\n            } else if (sortOrder === 'desc') {\n                if (aContent < bContent) return 1;\n                if (aContent > bContent) return -1;\n                if (aContent === bContent) return 0;\n            }\n            return 0;\n        });\n\n        if (this.hasColumnById('_rowIndex')) {\n            // update row index\n            const srNoColIndex = this.getColumnIndexById('_rowIndex');\n            this.rows.forEach((row, index) => {\n                const viewIndex = this.rowViewOrder.indexOf(index);\n                const cell = row[srNoColIndex];\n                cell.content = (viewIndex + 1) + '';\n            });\n        }\n    }\n\n    reverseArray(array) {\n        let left = null;\n        let right = null;\n        let length = array.length;\n\n        for (left = 0, right = length - 1; left < right; left += 1, right -= 1) {\n            const temporary = array[left];\n\n            array[left] = array[right];\n            array[right] = temporary;\n        }\n    }\n\n    switchColumn(index1, index2) {\n        // update columns\n        const temp = this.columns[index1];\n        this.columns[index1] = this.columns[index2];\n        this.columns[index2] = temp;\n\n        this.columns[index1].colIndex = index1;\n        this.columns[index2].colIndex = index2;\n\n        // update rows\n        this.rows.forEach(row => {\n            const newCell1 = Object.assign({}, row[index1], {\n                colIndex: index2\n            });\n            const newCell2 = Object.assign({}, row[index2], {\n                colIndex: index1\n            });\n\n            row[index2] = newCell1;\n            row[index1] = newCell2;\n        });\n    }\n\n    removeColumn(index) {\n        index = +index;\n        const filter = cell => cell.colIndex !== index;\n        const map = (cell, i) => Object.assign({}, cell, {\n            colIndex: i\n        });\n        // update columns\n        this.columns = this.columns\n            .filter(filter)\n            .map(map);\n\n        // update rows\n        this.rows.forEach(row => {\n            // remove cell\n            row.splice(index, 1);\n            // update colIndex\n            row.forEach((cell, i) => {\n                cell.colIndex = i;\n            });\n        });\n    }\n\n    updateRow(row, rowIndex) {\n        if (row.length < this.columns.length) {\n            if (this.hasColumnById('_rowIndex')) {\n                const val = (rowIndex + 1) + '';\n\n                row = [val].concat(row);\n            }\n\n            if (this.hasColumnById('_checkbox')) {\n                const val = '<input type=\"checkbox\" />';\n\n                row = [val].concat(row);\n            }\n        }\n\n        const _row = this.prepareRow(row, rowIndex);\n        const index = this.rows.findIndex(row => row[0].rowIndex === rowIndex);\n        this.rows[index] = _row;\n\n        return _row;\n    }\n\n    updateCell(colIndex, rowIndex, options) {\n        let cell;\n        if (typeof colIndex === 'object') {\n            // cell object was passed,\n            // must have colIndex, rowIndex\n            cell = colIndex;\n            colIndex = cell.colIndex;\n            rowIndex = cell.rowIndex;\n            // the object passed must be merged with original cell\n            options = cell;\n        }\n        cell = this.getCell(colIndex, rowIndex);\n\n        // mutate object directly\n        for (let key in options) {\n            const newVal = options[key];\n            if (newVal !== undefined) {\n                cell[key] = newVal;\n            }\n        }\n\n        return cell;\n    }\n\n    updateColumn(colIndex, keyValPairs) {\n        const column = this.getColumn(colIndex);\n        for (let key in keyValPairs) {\n            const newVal = keyValPairs[key];\n            if (newVal !== undefined) {\n                column[key] = newVal;\n            }\n        }\n        return column;\n    }\n\n    filterRows(keyword, colIndex) {\n        let rowsToHide = [];\n        let rowsToShow = [];\n        const cells = this.rows.map(row => row[colIndex]);\n\n        cells.forEach(cell => {\n            const hay = String(cell.content || '').toLowerCase();\n            const needle = (keyword || '').toLowerCase();\n\n            if (!needle || hay.includes(needle)) {\n                rowsToShow.push(cell.rowIndex);\n            } else {\n                rowsToHide.push(cell.rowIndex);\n            }\n        });\n\n        this._filteredRows = rowsToShow;\n\n        return {\n            rowsToHide,\n            rowsToShow\n        };\n    }\n\n    getFilteredRowIndices() {\n        return this._filteredRows || this.rows.map(row => row.meta.rowIndex);\n    }\n\n    getRowCount() {\n        return this.rowCount;\n    }\n\n    _getNextRowCount() {\n        const val = this.rowCount;\n\n        this.rowCount++;\n        return val;\n    }\n\n    getRows(start, end) {\n        return this.rows.slice(start, end);\n    }\n\n    getRowsForView(start, end) {\n        const rows = this.rowViewOrder.map(i => this.rows[i]);\n        return rows.slice(start, end);\n    }\n\n    getColumns(skipStandardColumns) {\n        let columns = this.columns;\n\n        if (skipStandardColumns) {\n            columns = columns.slice(this.getStandardColumnCount());\n        }\n\n        return columns;\n    }\n\n    getStandardColumnCount() {\n        if (this.options.checkboxColumn && this.options.serialNoColumn) {\n            return 2;\n        }\n\n        if (this.options.checkboxColumn || this.options.serialNoColumn) {\n            return 1;\n        }\n\n        return 0;\n    }\n\n    getColumnCount(skipStandardColumns) {\n        let val = this.columns.length;\n\n        if (skipStandardColumns) {\n            val = val - this.getStandardColumnCount();\n        }\n\n        return val;\n    }\n\n    getColumn(colIndex) {\n        colIndex = +colIndex;\n\n        if (colIndex < 0) {\n            // negative indexes\n            colIndex = this.columns.length + colIndex;\n        }\n\n        return this.columns.find(col => col.colIndex === colIndex);\n    }\n\n    getColumnById(id) {\n        return this.columns.find(col => col.id === id);\n    }\n\n    getRow(rowIndex) {\n        rowIndex = +rowIndex;\n        return this.rows[rowIndex];\n    }\n\n    getCell(colIndex, rowIndex) {\n        rowIndex = +rowIndex;\n        colIndex = +colIndex;\n        return this.getRow(rowIndex)[colIndex];\n    }\n\n    getChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent)) continue;\n\n            if (row.meta.indent > parentIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    getImmediateChildren(parentRowIndex) {\n        parentRowIndex = +parentRowIndex;\n        const parentIndent = this.getRow(parentRowIndex).meta.indent;\n        const out = [];\n        const childIndent = parentIndent + 1;\n\n        for (let i = parentRowIndex + 1; i < this.rowCount; i++) {\n            const row = this.getRow(i);\n            if (isNaN(row.meta.indent) || row.meta.indent > childIndent) continue;\n\n            if (row.meta.indent === childIndent) {\n                out.push(i);\n            }\n\n            if (row.meta.indent === parentIndent) {\n                break;\n            }\n        }\n\n        return out;\n    }\n\n    get() {\n        return {\n            columns: this.columns,\n            rows: this.rows\n        };\n    }\n\n    /**\n     * Returns the original data which was passed\n     * based on rowIndex\n     * @param {Number} rowIndex\n     * @returns Array|Object\n     * @memberof DataManager\n     */\n    getData(rowIndex) {\n        return this.data[rowIndex];\n    }\n\n    hasColumn(name) {\n        return Boolean(this.columns.find(col => col.content === name));\n    }\n\n    hasColumnById(id) {\n        return Boolean(this.columns.find(col => col.id === id));\n    }\n\n    getColumnIndex(name) {\n        return this.columns.findIndex(col => col.content === name);\n    }\n\n    getColumnIndexById(id) {\n        return this.columns.findIndex(col => col.id === id);\n    }\n\n    getCheckboxHTML() {\n        return '<input type=\"checkbox\" />';\n    }\n}\n\n// Custom Errors\nclass DataError extends TypeError {}\n\nclass ColumnManager {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'header',\n            'datamanager',\n            'style',\n            'wrapper',\n            'rowmanager',\n            'bodyScrollable'\n        ]);\n\n        this.bindEvents();\n        getDropdownHTML = getDropdownHTML.bind(this, this.options.dropdownButton);\n    }\n\n    renderHeader() {\n        this.header.innerHTML = '<thead></thead>';\n        this.refreshHeader();\n    }\n\n    refreshHeader() {\n        const columns = this.datamanager.getColumns();\n        const $cols = $.each('.data-table-cell[data-is-header]', this.header);\n\n        const refreshHTML =\n            // first init\n            !$('.data-table-cell', this.header) ||\n            // deleted column\n            columns.length < $cols.length;\n\n        if (refreshHTML) {\n            // refresh html\n            $('thead', this.header).innerHTML = this.getHeaderHTML(columns);\n\n            this.$filterRow = $('.data-table-row[data-is-filter]', this.header);\n            if (this.$filterRow) {\n                $.style(this.$filterRow, { display: 'none' });\n            }\n        } else {\n            // update data-attributes\n            $cols.map(($col, i) => {\n                const column = columns[i];\n                // column sorted or order changed\n                // update colIndex of each header cell\n                $.data($col, {\n                    colIndex: column.colIndex\n                });\n\n                // refresh sort indicator\n                const sortIndicator = $('.sort-indicator', $col);\n                if (sortIndicator) {\n                    sortIndicator.innerHTML = this.options.sortIndicator[column.sortOrder];\n                }\n            });\n        }\n        // reset columnMap\n        this.$columnMap = [];\n    }\n\n    getHeaderHTML(columns) {\n        let html = this.rowmanager.getRowHTML(columns, {\n            isHeader: 1\n        });\n        if (this.options.inlineFilters) {\n            html += this.rowmanager.getRowHTML(columns, {\n                isFilter: 1\n            });\n        }\n        return html;\n    }\n\n    bindEvents() {\n        this.bindDropdown();\n        this.bindResizeColumn();\n        this.bindMoveColumn();\n        this.bindFilter();\n    }\n\n    bindDropdown() {\n        let $activeDropdown;\n        $.on(this.header, 'click', '.data-table-dropdown-toggle', (e, $button) => {\n            const $dropdown = $.closest('.data-table-dropdown', $button);\n\n            if (!$dropdown.classList.contains('is-active')) {\n                deactivateDropdown();\n                $dropdown.classList.add('is-active');\n                $activeDropdown = $dropdown;\n            } else {\n                deactivateDropdown();\n            }\n        });\n\n        $.on(document.body, 'click', (e) => {\n            if (e.target.matches('.data-table-dropdown-toggle')) return;\n            deactivateDropdown();\n        });\n\n        const dropdownItems = this.options.headerDropdown;\n\n        $.on(this.header, 'click', '.data-table-dropdown-list > div', (e, $item) => {\n            const $col = $.closest('.data-table-cell', $item);\n            const {\n                index\n            } = $.data($item);\n            const {\n                colIndex\n            } = $.data($col);\n            let callback = dropdownItems[index].action;\n\n            callback && callback.call(this.instance, this.getColumn(colIndex));\n        });\n\n        function deactivateDropdown(e) {\n            $activeDropdown && $activeDropdown.classList.remove('is-active');\n            $activeDropdown = null;\n        }\n    }\n\n    bindResizeColumn() {\n        let isDragging = false;\n        let $resizingCell, startWidth, startX;\n\n        $.on(this.header, 'mousedown', '.data-table-cell .column-resizer', (e, $handle) => {\n            document.body.classList.add('data-table-resize');\n            const $cell = $handle.parentNode.parentNode;\n            $resizingCell = $cell;\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            const col = this.getColumn(colIndex);\n\n            if (col && col.resizable === false) {\n                return;\n            }\n\n            isDragging = true;\n            startWidth = $.style($('.content', $resizingCell), 'width');\n            startX = e.pageX;\n        });\n\n        $.on(document.body, 'mouseup', (e) => {\n            document.body.classList.remove('data-table-resize');\n            if (!$resizingCell) return;\n            isDragging = false;\n\n            const {\n                colIndex\n            } = $.data($resizingCell);\n            this.setColumnWidth(colIndex);\n            this.style.setBodyStyle();\n            $resizingCell = null;\n        });\n\n        $.on(document.body, 'mousemove', (e) => {\n            if (!isDragging) return;\n            const finalWidth = startWidth + (e.pageX - startX);\n            const {\n                colIndex\n            } = $.data($resizingCell);\n\n            if (this.getColumnMinWidth(colIndex) > finalWidth) {\n                // don't resize past minWidth\n                return;\n            }\n            this.datamanager.updateColumn(colIndex, {\n                width: finalWidth\n            });\n            this.setColumnHeaderWidth(colIndex);\n        });\n    }\n\n    bindMoveColumn() {\n        let initialized;\n\n        const initialize = () => {\n            if (initialized) {\n                $.off(document.body, 'mousemove', initialize);\n                return;\n            }\n            const ready = $('.data-table-cell', this.header);\n            if (!ready) return;\n\n            const $parent = $('.data-table-row', this.header);\n\n            this.sortable = Sortable.create($parent, {\n                onEnd: (e) => {\n                    const {\n                        oldIndex,\n                        newIndex\n                    } = e;\n                    const $draggedCell = e.item;\n                    const {\n                        colIndex\n                    } = $.data($draggedCell);\n                    if (+colIndex === newIndex) return;\n\n                    this.switchColumn(oldIndex, newIndex);\n                },\n                preventOnFilter: false,\n                filter: '.column-resizer, .data-table-dropdown',\n                animation: 150\n            });\n        };\n\n        $.on(document.body, 'mousemove', initialize);\n    }\n\n    bindSortColumn() {\n\n        $.on(this.header, 'click', '.data-table-cell .column-title', (e, span) => {\n            const $cell = span.closest('.data-table-cell');\n            let {\n                colIndex,\n                sortOrder = 'none'\n            } = $.data($cell);\n            const col = this.getColumn(colIndex);\n\n            if (col && col.sortable === false) {\n                return;\n            }\n\n            // reset sort indicator\n            $('.sort-indicator', this.header).textContent = '';\n            $.each('.data-table-cell', this.header).map($cell => {\n                $.data($cell, {\n                    sortOrder: 'none'\n                });\n            });\n\n            let nextSortOrder, textContent;\n            if (sortOrder === 'none') {\n                nextSortOrder = 'asc';\n                textContent = '▲';\n            } else if (sortOrder === 'asc') {\n                nextSortOrder = 'desc';\n                textContent = '▼';\n            } else if (sortOrder === 'desc') {\n                nextSortOrder = 'none';\n                textContent = '';\n            }\n\n            $.data($cell, {\n                sortOrder: nextSortOrder\n            });\n            $('.sort-indicator', $cell).textContent = textContent;\n\n            this.sortColumn(colIndex, nextSortOrder);\n        });\n    }\n\n    sortColumn(colIndex, nextSortOrder) {\n        this.instance.freeze();\n        this.sortRows(colIndex, nextSortOrder)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onSortColumn', this.getColumn(colIndex));\n            });\n    }\n\n    removeColumn(colIndex) {\n        const removedCol = this.getColumn(colIndex);\n        this.instance.freeze();\n        this.datamanager.removeColumn(colIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => this.instance.unfreeze())\n            .then(() => {\n                this.fireEvent('onRemoveColumn', removedCol);\n            });\n    }\n\n    switchColumn(oldIndex, newIndex) {\n        this.instance.freeze();\n        this.datamanager.switchColumn(oldIndex, newIndex)\n            .then(() => {\n                this.refreshHeader();\n                return this.rowmanager.refreshRows();\n            })\n            .then(() => {\n                this.setColumnWidth(oldIndex);\n                this.setColumnWidth(newIndex);\n                this.instance.unfreeze();\n            })\n            .then(() => {\n                this.fireEvent('onSwitchColumn',\n                    this.getColumn(oldIndex), this.getColumn(newIndex)\n                );\n            });\n    }\n\n    toggleFilter(flag) {\n        let showFilter;\n        if (flag === undefined) {\n            showFilter = !this.isFilterShown;\n        } else {\n            showFilter = flag;\n        }\n\n        if (showFilter) {\n            $.style(this.$filterRow, { display: '' });\n        } else {\n            $.style(this.$filterRow, { display: 'none' });\n        }\n\n        this.isFilterShown = showFilter;\n        this.style.setBodyStyle();\n    }\n\n    focusFilter(colIndex) {\n        if (!this.isFilterShown) return;\n\n        const $filterInput = $(`[data-col-index=\"${colIndex}\"] .data-table-filter`, this.$filterRow);\n        $filterInput.focus();\n    }\n\n    bindFilter() {\n        if (!this.options.inlineFilters) return;\n        const handler = e => {\n            const $filterCell = $.closest('.data-table-cell', e.target);\n            const {\n                colIndex\n            } = $.data($filterCell);\n            const keyword = e.target.value;\n\n            this.datamanager.filterRows(keyword, colIndex)\n                .then(({\n                    rowsToHide,\n                    rowsToShow\n                }) => {\n                    this.rowmanager.hideRows(rowsToHide);\n                    this.rowmanager.showRows(rowsToShow);\n                });\n        };\n        $.on(this.header, 'keydown', '.data-table-filter', debounce$2(handler, 300));\n    }\n\n    sortRows(colIndex, sortOrder) {\n        return this.datamanager.sortRows(colIndex, sortOrder);\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    setColumnWidth(colIndex, width) {\n        colIndex = +colIndex;\n        this._columnWidthMap = this._columnWidthMap || [];\n\n        let columnWidth = width || this.getColumn(colIndex).width;\n\n        let index = this._columnWidthMap[colIndex];\n        const selector = `[data-col-index=\"${colIndex}\"] .content, [data-col-index=\"${colIndex}\"] .edit-cell`;\n        const styles = {\n            width: columnWidth + 'px'\n        };\n\n        index = this.style.setStyle(selector, styles, index);\n\n        if (index !== undefined) {\n            this._columnWidthMap[colIndex] = index;\n        }\n    }\n\n    setColumnHeaderWidth(colIndex) {\n        colIndex = +colIndex;\n        this.$columnMap = this.$columnMap || [];\n        const selector = `.data-table-header [data-col-index=\"${colIndex}\"] .content`;\n        const {\n            width\n        } = this.getColumn(colIndex);\n\n        let $column = this.$columnMap[colIndex];\n        if (!$column) {\n            $column = this.header.querySelector(selector);\n            this.$columnMap[colIndex] = $column;\n        }\n\n        $column.style.width = width + 'px';\n    }\n\n    getColumnMinWidth(colIndex) {\n        colIndex = +colIndex;\n        return this.getColumn(colIndex).minWidth || 24;\n    }\n\n    getFirstColumnIndex() {\n        return this.datamanager.getColumnIndexById('_rowIndex') + 1;\n    }\n\n    getHeaderCell$(colIndex) {\n        return $(`.data-table-cell[data-col-index=\"${colIndex}\"]`, this.header);\n    }\n\n    getLastColumnIndex() {\n        return this.datamanager.getColumnCount() - 1;\n    }\n\n    getSerialColumnIndex() {\n        const columns = this.datamanager.getColumns();\n\n        return columns.findIndex(column => column.content.includes('Sr. No'));\n    }\n}\n\n// eslint-disable-next-line\nvar getDropdownHTML = function getDropdownHTML(dropdownButton = 'v') {\n    // add dropdown buttons\n    const dropdownItems = this.options.headerDropdown;\n\n    return `<div class=\"data-table-dropdown-toggle\">${dropdownButton}</div>\n    <div class=\"data-table-dropdown-list\">\n      ${dropdownItems.map((d, i) => `<div data-index=\"${i}\">${d.label}</div>`).join('')}\n    </div>\n  `;\n};\n\nclass CellManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'wrapper',\n            'options',\n            'style',\n            'bodyScrollable',\n            'columnmanager',\n            'rowmanager',\n            'datamanager',\n            'keyboard'\n        ]);\n\n        this.bindEvents();\n    }\n\n    bindEvents() {\n        this.bindFocusCell();\n        this.bindEditCell();\n        this.bindKeyboardSelection();\n        this.bindCopyCellContents();\n        this.bindMouseEvents();\n        this.bindTreeEvents();\n    }\n\n    bindFocusCell() {\n        this.bindKeyboardNav();\n    }\n\n    bindEditCell() {\n        this.$editingCell = null;\n\n        $.on(this.bodyScrollable, 'dblclick', '.data-table-cell', (e, cell) => {\n            this.activateEditing(cell);\n        });\n\n        this.keyboard.on('enter', (e) => {\n            if (this.$focusedCell && !this.$editingCell) {\n                // enter keypress on focused cell\n                this.activateEditing(this.$focusedCell);\n            } else if (this.$editingCell) {\n                // enter keypress on editing cell\n                this.submitEditing();\n                this.deactivateEditing();\n            }\n        });\n    }\n\n    bindKeyboardNav() {\n        const focusCell = (direction) => {\n            if (!this.$focusedCell || this.$editingCell) {\n                return false;\n            }\n\n            let $cell = this.$focusedCell;\n\n            if (direction === 'left' || direction === 'shift+tab') {\n                $cell = this.getLeftCell$($cell);\n            } else if (direction === 'right' || direction === 'tab') {\n                $cell = this.getRightCell$($cell);\n            } else if (direction === 'up') {\n                $cell = this.getAboveCell$($cell);\n            } else if (direction === 'down') {\n                $cell = this.getBelowCell$($cell);\n            }\n\n            this.focusCell($cell);\n            return true;\n        };\n\n        const focusLastCell = (direction) => {\n            if (!this.$focusedCell || this.$editingCell) {\n                return false;\n            }\n\n            let $cell = this.$focusedCell;\n            const {\n                rowIndex,\n                colIndex\n            } = $.data($cell);\n\n            if (direction === 'left') {\n                $cell = this.getLeftMostCell$(rowIndex);\n            } else if (direction === 'right') {\n                $cell = this.getRightMostCell$(rowIndex);\n            } else if (direction === 'up') {\n                $cell = this.getTopMostCell$(colIndex);\n            } else if (direction === 'down') {\n                $cell = this.getBottomMostCell$(colIndex);\n            }\n\n            this.focusCell($cell);\n            return true;\n        };\n\n        ['left', 'right', 'up', 'down', 'tab', 'shift+tab'].map(\n            direction => this.keyboard.on(direction, () => focusCell(direction))\n        );\n\n        ['left', 'right', 'up', 'down'].map(\n            direction => this.keyboard.on('ctrl+' + direction, () => focusLastCell(direction))\n        );\n\n        this.keyboard.on('esc', () => {\n            this.deactivateEditing();\n        });\n\n        if (this.options.inlineFilters) {\n            this.keyboard.on('ctrl+f', (e) => {\n                const $cell = $.closest('.data-table-cell', e.target);\n                let {\n                    colIndex\n                } = $.data($cell);\n\n                this.activateFilter(colIndex);\n                return true;\n            });\n        }\n    }\n\n    bindKeyboardSelection() {\n        const getNextSelectionCursor = (direction) => {\n            let $selectionCursor = this.getSelectionCursor();\n\n            if (direction === 'left') {\n                $selectionCursor = this.getLeftCell$($selectionCursor);\n            } else if (direction === 'right') {\n                $selectionCursor = this.getRightCell$($selectionCursor);\n            } else if (direction === 'up') {\n                $selectionCursor = this.getAboveCell$($selectionCursor);\n            } else if (direction === 'down') {\n                $selectionCursor = this.getBelowCell$($selectionCursor);\n            }\n\n            return $selectionCursor;\n        };\n\n        ['left', 'right', 'up', 'down'].map(\n            direction => this.keyboard.on('shift+' + direction,\n                () => this.selectArea(getNextSelectionCursor(direction)))\n        );\n    }\n\n    bindCopyCellContents() {\n        this.keyboard.on('ctrl+c', () => {\n            this.copyCellContents(this.$focusedCell, this.$selectionCursor);\n        });\n    }\n\n    bindMouseEvents() {\n        let mouseDown = null;\n\n        $.on(this.bodyScrollable, 'mousedown', '.data-table-cell', (e) => {\n            mouseDown = true;\n            this.focusCell($(e.delegatedTarget));\n        });\n\n        $.on(this.bodyScrollable, 'mouseup', () => {\n            mouseDown = false;\n        });\n\n        const selectArea = (e) => {\n            if (!mouseDown) return;\n            this.selectArea($(e.delegatedTarget));\n        };\n\n        $.on(this.bodyScrollable, 'mousemove', '.data-table-cell', throttle$1(selectArea, 50));\n    }\n\n    bindTreeEvents() {\n        $.on(this.bodyScrollable, 'click', '.toggle', (e, $toggle) => {\n            const $cell = $.closest('.data-table-cell', $toggle);\n            const { rowIndex } = $.data($cell);\n\n            if ($cell.classList.contains('tree-close')) {\n                this.rowmanager.openSingleNode(rowIndex);\n            } else {\n                this.rowmanager.closeSingleNode(rowIndex);\n            }\n        });\n    }\n\n    focusCell($cell, {\n        skipClearSelection = 0\n    } = {}) {\n        if (!$cell) return;\n\n        // don't focus if already editing cell\n        if ($cell === this.$editingCell) return;\n\n        const {\n            colIndex,\n            isHeader\n        } = $.data($cell);\n        if (isHeader) {\n            return;\n        }\n\n        const column = this.columnmanager.getColumn(colIndex);\n        if (column.focusable === false) {\n            return;\n        }\n\n        this.scrollToCell($cell);\n\n        this.deactivateEditing();\n        if (!skipClearSelection) {\n            this.clearSelection();\n        }\n\n        if (this.$focusedCell) {\n            this.$focusedCell.classList.remove('selected');\n        }\n\n        this.$focusedCell = $cell;\n        $cell.classList.add('selected');\n\n        // so that keyboard nav works\n        $cell.focus();\n\n        this.highlightRowColumnHeader($cell);\n    }\n\n    highlightRowColumnHeader($cell) {\n        const {\n            colIndex,\n            rowIndex\n        } = $.data($cell);\n        const _colIndex = this.datamanager.getColumnIndexById('_rowIndex');\n        const colHeaderSelector = `.data-table-header .data-table-cell[data-col-index=\"${colIndex}\"]`;\n        const rowHeaderSelector = `.data-table-cell[data-row-index=\"${rowIndex}\"][data-col-index=\"${_colIndex}\"]`;\n\n        if (this.lastHeaders) {\n            $.removeStyle(this.lastHeaders, 'backgroundColor');\n        }\n\n        const colHeader = $(colHeaderSelector, this.wrapper);\n        const rowHeader = $(rowHeaderSelector, this.wrapper);\n\n        $.style([colHeader, rowHeader], {\n            backgroundColor: '#f5f7fa' // light-bg\n        });\n\n        this.lastHeaders = [colHeader, rowHeader];\n    }\n\n    selectAreaOnClusterChanged() {\n        if (!(this.$focusedCell && this.$selectionCursor)) return;\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$selectionCursor);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell || $cell === this.$selectionCursor) return;\n\n        // selectArea needs $focusedCell\n        const fCell = $.data(this.$focusedCell);\n        this.$focusedCell = this.getCell$(fCell.colIndex, fCell.rowIndex);\n\n        this.selectArea($cell);\n    }\n\n    focusCellOnClusterChanged() {\n        if (!this.$focusedCell) return;\n\n        const {\n            colIndex,\n            rowIndex\n        } = $.data(this.$focusedCell);\n        const $cell = this.getCell$(colIndex, rowIndex);\n\n        if (!$cell) return;\n        // this function is called after selectAreaOnClusterChanged,\n        // focusCell calls clearSelection which resets the area selection\n        // so a flag to skip it\n        this.focusCell($cell, {\n            skipClearSelection: 1\n        });\n    }\n\n    selectArea($selectionCursor) {\n        if (!this.$focusedCell) return;\n\n        if (this._selectArea(this.$focusedCell, $selectionCursor)) {\n            // valid selection\n            this.$selectionCursor = $selectionCursor;\n        }\n    };\n\n    _selectArea($cell1, $cell2) {\n        if ($cell1 === $cell2) return false;\n\n        const cells = this.getCellsInRange($cell1, $cell2);\n        if (!cells) return false;\n\n        this.clearSelection();\n        cells.map(index => this.getCell$(...index)).map($cell => $cell.classList.add('highlight'));\n        return true;\n    }\n\n    getCellsInRange($cell1, $cell2) {\n        let colIndex1, rowIndex1, colIndex2, rowIndex2;\n\n        if (typeof $cell1 === 'number') {\n            [colIndex1, rowIndex1, colIndex2, rowIndex2] = arguments;\n        } else\n        if (typeof $cell1 === 'object') {\n\n            if (!($cell1 && $cell2)) {\n                return false;\n            }\n\n            const cell1 = $.data($cell1);\n            const cell2 = $.data($cell2);\n\n            colIndex1 = cell1.colIndex;\n            rowIndex1 = cell1.rowIndex;\n            colIndex2 = cell2.colIndex;\n            rowIndex2 = cell2.rowIndex;\n        }\n\n        if (rowIndex1 > rowIndex2) {\n            [rowIndex1, rowIndex2] = [rowIndex2, rowIndex1];\n        }\n\n        if (colIndex1 > colIndex2) {\n            [colIndex1, colIndex2] = [colIndex2, colIndex1];\n        }\n\n        if (this.isStandardCell(colIndex1) || this.isStandardCell(colIndex2)) {\n            return false;\n        }\n\n        let cells = [];\n        let colIndex = colIndex1;\n        let rowIndex = rowIndex1;\n        let rowIndices = [];\n\n        while (rowIndex <= rowIndex2) {\n            rowIndices.push(rowIndex);\n            rowIndex++;\n        }\n\n        rowIndices.map(rowIndex => {\n            while (colIndex <= colIndex2) {\n                cells.push([colIndex, rowIndex]);\n                colIndex++;\n            }\n            colIndex = colIndex1;\n        });\n\n        return cells;\n    }\n\n    clearSelection() {\n        $.each('.data-table-cell.highlight', this.bodyScrollable)\n            .map(cell => cell.classList.remove('highlight'));\n\n        this.$selectionCursor = null;\n    }\n\n    getSelectionCursor() {\n        return this.$selectionCursor || this.$focusedCell;\n    }\n\n    activateEditing($cell) {\n        this.focusCell($cell);\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n\n        const col = this.columnmanager.getColumn(colIndex);\n        if (col && (col.editable === false || col.focusable === false)) {\n            return;\n        }\n\n        const cell = this.getCell(colIndex, rowIndex);\n        if (cell && cell.editable === false) {\n            return;\n        }\n\n        if (this.$editingCell) {\n            const {\n                _rowIndex,\n                _colIndex\n            } = $.data(this.$editingCell);\n\n            if (rowIndex === _rowIndex && colIndex === _colIndex) {\n                // editing the same cell\n                return;\n            }\n        }\n\n        this.$editingCell = $cell;\n        $cell.classList.add('editing');\n\n        const $editCell = $('.edit-cell', $cell);\n        $editCell.innerHTML = '';\n\n        const editor = this.getEditor(colIndex, rowIndex, cell.content, $editCell);\n\n        if (editor) {\n            this.currentCellEditor = editor;\n            // initialize editing input with cell value\n            editor.initValue(cell.content, rowIndex, col);\n        }\n    }\n\n    deactivateEditing() {\n        // keep focus on the cell so that keyboard navigation works\n        if (this.$focusedCell) this.$focusedCell.focus();\n\n        if (!this.$editingCell) return;\n        this.$editingCell.classList.remove('editing');\n        this.$editingCell = null;\n    }\n\n    getEditor(colIndex, rowIndex, value, parent) {\n        const column = this.datamanager.getColumn(colIndex);\n        const row = this.datamanager.getRow(rowIndex);\n        const data = this.datamanager.getData(rowIndex);\n        let editor = this.options.getEditor ?\n            this.options.getEditor(colIndex, rowIndex, value, parent, column, row, data) :\n            this.getDefaultEditor(parent);\n\n        if (editor === false) {\n            // explicitly returned false\n            return false;\n        }\n        if (editor === undefined) {\n            // didn't return editor, fallback to default\n            editor = this.getDefaultEditor(parent);\n        }\n\n        return editor;\n    }\n\n    getDefaultEditor(parent) {\n        const $input = $.create('input', {\n            class: 'input-style',\n            type: 'text',\n            inside: parent\n        });\n\n        return {\n            initValue(value) {\n                $input.focus();\n                $input.value = value;\n            },\n            getValue() {\n                return $input.value;\n            },\n            setValue(value) {\n                $input.value = value;\n            }\n        };\n    }\n\n    submitEditing() {\n        if (!this.$editingCell) return;\n        const $cell = this.$editingCell;\n        const {\n            rowIndex,\n            colIndex\n        } = $.data($cell);\n        const col = this.datamanager.getColumn(colIndex);\n\n        if ($cell) {\n            const editor = this.currentCellEditor;\n\n            if (editor) {\n                const value = editor.getValue();\n                const done = editor.setValue(value, rowIndex, col);\n                const oldValue = this.getCell(colIndex, rowIndex).content;\n\n                // update cell immediately\n                this.updateCell(colIndex, rowIndex, value);\n                $cell.focus();\n\n                if (done && done.then) {\n                    // revert to oldValue if promise fails\n                    done.catch((e) => {\n                        console.log(e);\n                        this.updateCell(colIndex, rowIndex, oldValue);\n                    });\n                }\n            }\n        }\n\n        this.currentCellEditor = null;\n    }\n\n    copyCellContents($cell1, $cell2) {\n        if (!$cell2 && $cell1) {\n            // copy only focusedCell\n            const {\n                colIndex,\n                rowIndex\n            } = $.data($cell1);\n            const cell = this.getCell(colIndex, rowIndex);\n            copyTextToClipboard(cell.content);\n            return;\n        }\n        const cells = this.getCellsInRange($cell1, $cell2);\n\n        if (!cells) return;\n\n        const values = cells\n            // get cell objects\n            .map(index => this.getCell(...index))\n            // convert to array of rows\n            .reduce((acc, curr) => {\n                const rowIndex = curr.rowIndex;\n\n                acc[rowIndex] = acc[rowIndex] || [];\n                acc[rowIndex].push(curr.content);\n\n                return acc;\n            }, [])\n            // join values by tab\n            .map(row => row.join('\\t'))\n            // join rows by newline\n            .join('\\n');\n\n        copyTextToClipboard(values);\n    }\n\n    activateFilter(colIndex) {\n        this.columnmanager.toggleFilter();\n        this.columnmanager.focusFilter(colIndex);\n\n        if (!this.columnmanager.isFilterShown) {\n            // put focus back on cell\n            this.$focusedCell.focus();\n        }\n    }\n\n    updateCell(colIndex, rowIndex, value) {\n        const cell = this.datamanager.updateCell(colIndex, rowIndex, {\n            content: value\n        });\n        this.refreshCell(cell);\n    }\n\n    refreshCell(cell) {\n        const $cell = $(this.selector(cell.colIndex, cell.rowIndex), this.bodyScrollable);\n        $cell.innerHTML = this.getCellContent(cell);\n    }\n\n    toggleTreeButton(rowIndex, flag) {\n        const colIndex = this.columnmanager.getFirstColumnIndex();\n        const $cell = this.getCell$(colIndex, rowIndex);\n        if ($cell) {\n            $cell.classList[flag ? 'remove' : 'add']('tree-close');\n        }\n    }\n\n    isStandardCell(colIndex) {\n        // Standard cells are in Sr. No and Checkbox column\n        return colIndex < this.columnmanager.getFirstColumnIndex();\n    }\n\n    getCell$(colIndex, rowIndex) {\n        return $(this.selector(colIndex, rowIndex), this.bodyScrollable);\n    }\n\n    getAboveCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $aboveRow = $cell.parentElement.previousElementSibling;\n        while ($aboveRow && $aboveRow.classList.contains('hide')) {\n            $aboveRow = $aboveRow.previousElementSibling;\n        }\n\n        if (!$aboveRow) return $cell;\n        return $(`[data-col-index=\"${colIndex}\"]`, $aboveRow);\n    }\n\n    getBelowCell$($cell) {\n        const {\n            colIndex\n        } = $.data($cell);\n\n        let $belowRow = $cell.parentElement.nextElementSibling;\n        while ($belowRow && $belowRow.classList.contains('hide')) {\n            $belowRow = $belowRow.nextElementSibling;\n        }\n\n        if (!$belowRow) return $cell;\n        return $(`[data-col-index=\"${colIndex}\"]`, $belowRow);\n    }\n\n    getLeftCell$($cell) {\n        return $cell.previousElementSibling;\n    }\n\n    getRightCell$($cell) {\n        return $cell.nextElementSibling;\n    }\n\n    getLeftMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getFirstColumnIndex(), rowIndex);\n    }\n\n    getRightMostCell$(rowIndex) {\n        return this.getCell$(this.columnmanager.getLastColumnIndex(), rowIndex);\n    }\n\n    getTopMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getFirstRowIndex());\n    }\n\n    getBottomMostCell$(colIndex) {\n        return this.getCell$(colIndex, this.rowmanager.getLastRowIndex());\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.instance.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getCellAttr($cell) {\n        return this.instance.getCellAttr($cell);\n    }\n\n    getRowHeight() {\n        return $.style($('.data-table-row', this.bodyScrollable), 'height');\n    }\n\n    scrollToCell($cell) {\n        if ($.inViewport($cell, this.bodyScrollable)) return false;\n\n        const {\n            rowIndex\n        } = $.data($cell);\n        this.rowmanager.scrollToRow(rowIndex);\n        return false;\n    }\n\n    getRowCountPerPage() {\n        return Math.ceil(this.instance.getViewportHeight() / this.getRowHeight());\n    }\n\n    getCellHTML(cell) {\n        const {\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter\n        } = cell;\n        const dataAttr = makeDataAttributeString({\n            rowIndex,\n            colIndex,\n            isHeader,\n            isFilter\n        });\n\n        return `\n            <td class=\"data-table-cell noselect\" ${dataAttr} tabindex=\"0\">\n                ${this.getCellContent(cell)}\n            </td>\n        `;\n    }\n\n    getCellContent(cell) {\n        const {\n            isHeader,\n            isFilter\n        } = cell;\n\n        const editable = !isHeader && cell.editable !== false;\n        const editCellHTML = editable ? this.getEditCellHTML() : '';\n\n        const sortable = isHeader && cell.sortable !== false;\n        const sortIndicator = sortable ? '<span class=\"sort-indicator\"></span>' : '';\n\n        const resizable = isHeader && cell.resizable !== false;\n        const resizeColumn = resizable ? '<span class=\"column-resizer\"></span>' : '';\n\n        const hasDropdown = isHeader && cell.dropdown !== false;\n        const dropdown = hasDropdown ? `<div class=\"data-table-dropdown\">${getDropdownHTML()}</div>` : '';\n\n        const customFormatter = cell.format || (cell.column && cell.column.format) || null;\n\n        let contentHTML;\n        if (isHeader || isFilter || !customFormatter) {\n            contentHTML = cell.content;\n        } else {\n            const row = this.datamanager.getRow(cell.rowIndex);\n            const data = this.datamanager.getData(cell.rowIndex);\n            contentHTML = customFormatter(cell.content, row, cell.column, data);\n        }\n\n        if (this.options.treeView && !(isHeader || isFilter) && cell.indent !== undefined) {\n            const nextRow = this.datamanager.getRow(cell.rowIndex + 1);\n            const addToggle = nextRow && nextRow.meta.indent > cell.indent;\n\n            // Add toggle and indent in the first column\n            const firstColumnIndex = this.datamanager.getColumnIndexById('_rowIndex') + 1;\n            if (firstColumnIndex === cell.colIndex) {\n                const padding = ((cell.indent || 0) + 1) * 1.5;\n                const toggleHTML = addToggle ? `<span class=\"toggle\" style=\"left: ${padding - 1.5}rem\"></span>` : '';\n                contentHTML = `<span class=\"tree-node\" style=\"padding-left: ${padding}rem\">\n                    ${toggleHTML}${contentHTML}</span>`;\n            }\n        }\n\n        return `\n            <div class=\"content ellipsis\">\n                ${contentHTML}\n                ${sortIndicator}\n                ${resizeColumn}\n                ${dropdown}\n            </div>\n            ${editCellHTML}\n        `;\n    }\n\n    getEditCellHTML() {\n        return `\n      <div class=\"edit-cell\"></div>\n    `;\n    }\n\n    selector(colIndex, rowIndex) {\n        return `.data-table-cell[data-col-index=\"${colIndex}\"][data-row-index=\"${rowIndex}\"]`;\n    }\n}\n\nclass RowManager {\n    constructor(instance) {\n        this.instance = instance;\n        linkProperties(this, this.instance, [\n            'options',\n            'fireEvent',\n            'wrapper',\n            'bodyScrollable',\n            'bodyRenderer'\n        ]);\n\n        this.bindEvents();\n        this.refreshRows = nextTick(this.refreshRows, this);\n    }\n\n    get datamanager() {\n        return this.instance.datamanager;\n    }\n\n    get cellmanager() {\n        return this.instance.cellmanager;\n    }\n\n    bindEvents() {\n        this.bindCheckbox();\n    }\n\n    bindCheckbox() {\n        if (!this.options.checkboxColumn) return;\n\n        // map of checked rows\n        this.checkMap = [];\n\n        $.on(this.wrapper, 'click', '.data-table-cell[data-col-index=\"0\"] [type=\"checkbox\"]', (e, $checkbox) => {\n            const $cell = $checkbox.closest('.data-table-cell');\n            const {\n                rowIndex,\n                isHeader\n            } = $.data($cell);\n            const checked = $checkbox.checked;\n\n            if (isHeader) {\n                this.checkAll(checked);\n            } else {\n                this.checkRow(rowIndex, checked);\n            }\n        });\n    }\n\n    refreshRows() {\n        this.instance.renderBody();\n        this.instance.setDimensions();\n    }\n\n    refreshRow(row, rowIndex) {\n        const _row = this.datamanager.updateRow(row, rowIndex);\n\n        _row.forEach(cell => {\n            this.cellmanager.refreshCell(cell);\n        });\n    }\n\n    getCheckedRows() {\n        if (!this.checkMap) {\n            return [];\n        }\n\n        let out = [];\n        for (let rowIndex in this.checkMap) {\n            const checked = this.checkMap[rowIndex];\n            if (checked === 1) {\n                out.push(rowIndex);\n            }\n        }\n\n        return out;\n    }\n\n    highlightCheckedRows() {\n        this.getCheckedRows()\n            .map(rowIndex => this.checkRow(rowIndex, true));\n    }\n\n    checkRow(rowIndex, toggle) {\n        const value = toggle ? 1 : 0;\n        const selector = rowIndex =>\n            `.data-table-cell[data-row-index=\"${rowIndex}\"][data-col-index=\"0\"] [type=\"checkbox\"]`;\n        // update internal map\n        this.checkMap[rowIndex] = value;\n        // set checkbox value explicitly\n        $.each(selector(rowIndex), this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight row\n        this.highlightRow(rowIndex, toggle);\n        this.showCheckStatus();\n        this.fireEvent('onCheckRow', this.datamanager.getRow(rowIndex));\n    }\n\n    checkAll(toggle) {\n        const value = toggle ? 1 : 0;\n\n        // update internal map\n        if (toggle) {\n            this.checkMap = Array.from(Array(this.getTotalRows())).map(c => value);\n        } else {\n            this.checkMap = [];\n        }\n        // set checkbox value\n        $.each('.data-table-cell[data-col-index=\"0\"] [type=\"checkbox\"]', this.bodyScrollable)\n            .map(input => {\n                input.checked = toggle;\n            });\n        // highlight all\n        this.highlightAll(toggle);\n        this.showCheckStatus();\n    }\n\n    showCheckStatus() {\n        if (!this.options.checkedRowStatus) return;\n        const checkedRows = this.getCheckedRows();\n        const count = checkedRows.length;\n        if (count > 0) {\n            this.bodyRenderer.showToastMessage(`${count} row${count > 1 ? 's' : ''} selected`);\n        } else {\n            this.bodyRenderer.clearToastMessage();\n        }\n    }\n\n    highlightRow(rowIndex, toggle = true) {\n        const $row = this.getRow$(rowIndex);\n        if (!$row) return;\n\n        if (!toggle && this.bodyScrollable.classList.contains('row-highlight-all')) {\n            $row.classList.add('row-unhighlight');\n            return;\n        }\n\n        if (toggle && $row.classList.contains('row-unhighlight')) {\n            $row.classList.remove('row-unhighlight');\n        }\n\n        this._highlightedRows = this._highlightedRows || {};\n\n        if (toggle) {\n            $row.classList.add('row-highlight');\n            this._highlightedRows[rowIndex] = $row;\n        } else {\n            $row.classList.remove('row-highlight');\n            delete this._highlightedRows[rowIndex];\n        }\n    }\n\n    highlightAll(toggle = true) {\n        if (toggle) {\n            this.bodyScrollable.classList.add('row-highlight-all');\n        } else {\n            this.bodyScrollable.classList.remove('row-highlight-all');\n            for (const rowIndex in this._highlightedRows) {\n                const $row = this._highlightedRows[rowIndex];\n                $row.classList.remove('row-highlight');\n            }\n            this._highlightedRows = {};\n        }\n    }\n\n    hideRows(rowIndices) {\n        rowIndices = ensureArray(rowIndices);\n        rowIndices.map(rowIndex => {\n            const $tr = this.getRow$(rowIndex);\n            $tr.classList.add('hide');\n        });\n    }\n\n    showRows(rowIndices) {\n        rowIndices = ensureArray(rowIndices);\n        rowIndices.map(rowIndex => {\n            const $tr = this.getRow$(rowIndex);\n            $tr.classList.remove('hide');\n        });\n    }\n\n    openSingleNode(rowIndex) {\n        const rowsToShow = this.datamanager.getImmediateChildren(rowIndex);\n        this.showRows(rowsToShow);\n        this.cellmanager.toggleTreeButton(rowIndex, true);\n    }\n\n    closeSingleNode(rowIndex) {\n        const children = this.datamanager.getImmediateChildren(rowIndex);\n        children.forEach(childIndex => {\n            const row = this.datamanager.getRow(childIndex);\n            if (row.meta.isLeaf) {\n                // close\n                this.hideRows(childIndex);\n                this.cellmanager.toggleTreeButton(childIndex, false);\n            } else {\n                this.closeSingleNode(childIndex);\n                this.hideRows(childIndex);\n            }\n        });\n        this.cellmanager.toggleTreeButton(rowIndex, false);\n    }\n\n    getRow$(rowIndex) {\n        return $(this.selector(rowIndex), this.bodyScrollable);\n    }\n\n    getTotalRows() {\n        return this.datamanager.getRowCount();\n    }\n\n    getFirstRowIndex() {\n        return 0;\n    }\n\n    getLastRowIndex() {\n        return this.datamanager.getRowCount() - 1;\n    }\n\n    scrollToRow(rowIndex) {\n        rowIndex = +rowIndex;\n        this._lastScrollTo = this._lastScrollTo || 0;\n        const $row = this.getRow$(rowIndex);\n        if ($.inViewport($row, this.bodyScrollable)) return;\n\n        const {\n            height\n        } = $row.getBoundingClientRect();\n        const {\n            top,\n            bottom\n        } = this.bodyScrollable.getBoundingClientRect();\n        const rowsInView = Math.floor((bottom - top) / height);\n\n        let offset = 0;\n        if (rowIndex > this._lastScrollTo) {\n            offset = height * ((rowIndex + 1) - rowsInView);\n        } else {\n            offset = height * ((rowIndex + 1) - 1);\n        }\n\n        this._lastScrollTo = rowIndex;\n        $.scrollTop(this.bodyScrollable, offset);\n    }\n\n    getRowHTML(row, props) {\n        const dataAttr = makeDataAttributeString(props);\n\n        if (props.isFilter) {\n            row = row.map(cell => (Object.assign({}, cell, {\n                content: this.getFilterInput({\n                    colIndex: cell.colIndex\n                }),\n                isFilter: 1,\n                isHeader: undefined,\n                editable: false\n            })));\n        }\n\n        return `\n            <tr class=\"data-table-row\" ${dataAttr}>\n                ${row.map(cell => this.cellmanager.getCellHTML(cell)).join('')}\n            </tr>\n        `;\n    }\n\n    getFilterInput(props) {\n        const dataAttr = makeDataAttributeString(props);\n        return `<input class=\"data-table-filter input-style\" type=\"text\" ${dataAttr} />`;\n    }\n\n    selector(rowIndex) {\n        return `.data-table-row[data-row-index=\"${rowIndex}\"]`;\n    }\n}\n\nclass BodyRenderer {\n    constructor(instance) {\n        this.instance = instance;\n        this.options = instance.options;\n        this.datamanager = instance.datamanager;\n        this.rowmanager = instance.rowmanager;\n        this.cellmanager = instance.cellmanager;\n        this.bodyScrollable = instance.bodyScrollable;\n        this.log = instance.log;\n        this.appendRemainingData = nextTick(this.appendRemainingData, this);\n    }\n\n    render() {\n        if (this.options.clusterize) {\n            this.renderBodyWithClusterize();\n        } else {\n            this.renderBodyHTML();\n        }\n    }\n\n    renderBodyHTML() {\n        const rows = this.datamanager.getRowsForView();\n\n        this.bodyScrollable.innerHTML = `\n            <table class=\"data-table-body\">\n                ${this.getBodyHTML(rows)}\n            </table>\n        `;\n        this.instance.setDimensions();\n        this.restoreState();\n    }\n\n    renderBodyWithClusterize() {\n        // first page\n        const rows = this.datamanager.getRowsForView(0, 20);\n        let initialData = this.getDataForClusterize(rows);\n\n        if (initialData.length === 0) {\n            initialData = [`<tr class=\"no-data\"><td>${this.options.noDataMessage}</td></tr>`];\n        }\n\n        if (!this.clusterize) {\n            // empty body\n            this.bodyScrollable.innerHTML = `\n                <table class=\"data-table-body\">\n                    ${this.getBodyHTML([])}\n                </table>\n            `;\n\n            // first 20 rows will appended\n            // rest of them in nextTick\n            this.clusterize = new Clusterize({\n                rows: initialData,\n                scrollElem: this.bodyScrollable,\n                contentElem: $('tbody', this.bodyScrollable),\n                callbacks: {\n                    clusterChanged: () => {\n                        this.restoreState();\n                    }\n                },\n                /* eslint-disable */\n                show_no_data_row: false,\n                /* eslint-enable */\n            });\n\n            // setDimensions requires atleast 1 row to exist in dom\n            this.instance.setDimensions();\n        } else {\n            this.clusterize.update(initialData);\n        }\n\n        this.appendRemainingData();\n    }\n\n    restoreState() {\n        this.rowmanager.highlightCheckedRows();\n        this.cellmanager.selectAreaOnClusterChanged();\n        this.cellmanager.focusCellOnClusterChanged();\n    }\n\n    appendRemainingData() {\n        const rows = this.datamanager.getRowsForView(20);\n        const data = this.getDataForClusterize(rows);\n        this.clusterize.append(data);\n    }\n\n    showToastMessage(message) {\n        this.instance.toastMessage.innerHTML = `<span>${message}</span>`;\n    }\n\n    clearToastMessage() {\n        this.instance.toastMessage.innerHTML = '';\n    }\n\n    getDataForClusterize(rows) {\n        return rows.map((row) => this.rowmanager.getRowHTML(row, row.meta));\n    }\n\n    getBodyHTML(rows) {\n        return `\n            <tbody>\n                ${rows.map(row => this.rowmanager.getRowHTML(row, row.meta)).join('')}\n            </tbody>\n        `;\n    }\n}\n\nclass Style {\n    constructor(instance) {\n        this.instance = instance;\n\n        linkProperties(this, this.instance, [\n            'options', 'datamanager', 'columnmanager',\n            'header', 'bodyScrollable', 'datatableWrapper',\n            'getColumn'\n        ]);\n\n        this.scopeClass = 'datatable-instance-' + instance.constructor.instances;\n        instance.datatableWrapper.classList.add(this.scopeClass);\n\n        const styleEl = document.createElement('style');\n        instance.wrapper.insertBefore(styleEl, instance.datatableWrapper);\n        this.styleEl = styleEl;\n\n        this.bindResizeWindow();\n    }\n\n    get stylesheet() {\n        return this.styleEl.sheet;\n    }\n\n    bindResizeWindow() {\n        if (this.options.layout === 'fluid') {\n            $.on(window, 'resize', throttle$1(() => {\n                this.distributeRemainingWidth();\n                this.refreshColumnWidth();\n                this.compensateScrollbarWidth();\n                this.setBodyStyle();\n            }, 300));\n        }\n    }\n\n    destroy() {\n        this.styleEl.remove();\n    }\n\n    setStyle(selector, styleMap, index = -1) {\n        const styles = Object.keys(styleMap)\n            .map(prop => {\n                if (!prop.includes('-')) {\n                    prop = camelCaseToDash(prop);\n                }\n                return `${prop}:${styleMap[prop]};`;\n            })\n            .join('');\n        let prefixedSelector = selector\n            .split(',')\n            .map(r => `.${this.scopeClass} ${r}`)\n            .join(',');\n\n        let ruleString = `${prefixedSelector} { ${styles} }`;\n\n        if (!this.stylesheet) return;\n\n        let _index = this.stylesheet.cssRules.length;\n        if (index !== -1) {\n            this.stylesheet.deleteRule(index);\n            _index = index;\n        }\n\n        this.stylesheet.insertRule(ruleString, _index);\n        return _index; // eslint-disable-line\n    }\n\n    setDimensions() {\n        this.setHeaderStyle();\n\n        this.setupMinWidth();\n        this.setupNaturalColumnWidth();\n        this.setupColumnWidth();\n        this.distributeRemainingWidth();\n        this.setColumnStyle();\n        this.compensateScrollbarWidth();\n\n        this.setDefaultCellHeight();\n        this.setBodyStyle();\n    }\n\n    setHeaderStyle() {\n        if (this.options.layout === 'fluid') {\n            // setting width as 0 will ensure that the\n            // header doesn't take the available space\n            $.style(this.header, {\n                width: 0\n            });\n        }\n\n        $.style(this.header, {\n            margin: 0\n        });\n\n        // don't show resize cursor on nonResizable columns\n        const nonResizableColumnsSelector = this.datamanager.getColumns()\n            .filter(col => col.resizable === false)\n            .map(col => col.colIndex)\n            .map(i => `.data-table-header [data-col-index=\"${i}\"]`)\n            .join();\n\n        this.setStyle(nonResizableColumnsSelector, {\n            cursor: 'pointer'\n        });\n    }\n\n    setupMinWidth() {\n        $.each('.data-table-cell[data-is-header]', this.header).map(col => {\n            const width = $.style($('.content', col), 'width');\n            const {\n                colIndex\n            } = $.data(col);\n            const column = this.getColumn(colIndex);\n\n            if (!column.minWidth) {\n                // only set this once\n                column.minWidth = width;\n            }\n        });\n    }\n\n    setupNaturalColumnWidth() {\n        if (!$('.data-table-row')) return;\n\n        // set initial width as naturally calculated by table's first row\n        $.each('.data-table-row[data-row-index=\"0\"] .data-table-cell', this.bodyScrollable).map($cell => {\n            const {\n                colIndex\n            } = $.data($cell);\n            const column = this.datamanager.getColumn(colIndex);\n\n            let naturalWidth = $.style($('.content', $cell), 'width');\n\n            if (column.id === '_rowIndex') {\n                naturalWidth = this.getRowIndexColumnWidth(naturalWidth);\n                column.width = naturalWidth;\n            }\n\n            column.naturalWidth = naturalWidth;\n        });\n    }\n\n    setupColumnWidth() {\n        if (this.options.layout === 'ratio') {\n            let totalWidth = $.style(this.datatableWrapper, 'width');\n\n            if (this.options.serialNoColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_rowIndex');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            if (this.options.checkboxColumn) {\n                const rowIndexColumn = this.datamanager.getColumnById('_checkbox');\n                totalWidth = totalWidth - rowIndexColumn.width - 1;\n            }\n\n            const totalParts = this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') {\n                        return 0;\n                    }\n                    if (!column.width) {\n                        column.width = 1;\n                    }\n                    column.ratioWidth = parseInt(column.width, 10);\n                    return column.ratioWidth;\n                })\n                .reduce((a, c) => a + c);\n\n            const onePart = totalWidth / totalParts;\n\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (column.id === '_rowIndex' || column.id === '_checkbox') return;\n                    column.width = Math.floor(onePart * column.ratioWidth) - 1;\n                });\n        } else {\n            this.datamanager.getColumns()\n                .map(column => {\n                    if (!column.width) {\n                        column.width = column.naturalWidth;\n                    }\n                    if (column.width < column.minWidth) {\n                        column.width = column.minWidth;\n                    }\n                });\n        }\n    }\n\n    compensateScrollbarWidth() {\n        const scrollbarWidth = $.scrollbarWidth();\n        const lastCol = this.datamanager.getColumn(-1);\n        const width = lastCol.width - scrollbarWidth;\n        this.columnmanager.setColumnWidth(lastCol.colIndex, width);\n    }\n\n    distributeRemainingWidth() {\n        if (this.options.layout !== 'fluid') return;\n\n        const wrapperWidth = $.style(this.instance.datatableWrapper, 'width');\n        const headerWidth = $.style(this.header, 'width');\n        const resizableColumns = this.datamanager.getColumns().filter(col => col.resizable);\n        const deltaWidth = (wrapperWidth - headerWidth) / resizableColumns.length;\n\n        resizableColumns.map(col => {\n            const width = $.style(this.getColumnHeaderElement(col.colIndex), 'width');\n            let finalWidth = Math.floor(width + deltaWidth) - 2;\n\n            this.datamanager.updateColumn(col.colIndex, {\n                width: finalWidth\n            });\n        });\n    }\n\n    setDefaultCellHeight() {\n        if (this.__cellHeightSet) return;\n        const $firstCell = $('.data-table-cell', this.instance.bodyScrollable);\n        if (!$firstCell) return;\n\n        const height = this.options.cellHeight || $.style($firstCell, 'height');\n        if (height) {\n            this.setCellHeight(height);\n            this.__cellHeightSet = true;\n        }\n    }\n\n    setCellHeight(height) {\n        this.setStyle('.data-table-cell .content', {\n            height: height + 'px'\n        });\n        this.setStyle('.data-table-cell .edit-cell', {\n            height: height + 'px'\n        });\n    }\n\n    setColumnStyle() {\n        // align columns\n        this.datamanager.getColumns()\n            .map(column => {\n                // alignment\n                if (['left', 'center', 'right'].includes(column.align)) {\n                    this.setStyle(`[data-col-index=\"${column.colIndex}\"]`, {\n                        'text-align': column.align\n                    });\n                }\n                // width\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n        this.setBodyStyle();\n    }\n\n    refreshColumnWidth() {\n        this.datamanager.getColumns()\n            .map(column => {\n                this.columnmanager.setColumnHeaderWidth(column.colIndex);\n                this.columnmanager.setColumnWidth(column.colIndex);\n            });\n    }\n\n    setBodyStyle() {\n        const width = $.style(this.header, 'width');\n\n        $.style(this.bodyScrollable, {\n            width: width + 'px'\n        });\n\n        $.style(this.bodyScrollable, {\n            marginTop: $.style(this.header, 'height') + 'px'\n        });\n\n        $.style($('table', this.bodyScrollable), {\n            margin: 0,\n            width: '100%'\n        });\n    }\n\n    getColumnHeaderElement(colIndex) {\n        colIndex = +colIndex;\n        if (colIndex < 0) return null;\n        return $(`.data-table-cell[data-col-index=\"${colIndex}\"]`, this.header);\n    }\n\n    getRowIndexColumnWidth(baseWidth) {\n        this._rowIndexColumnWidthMap = this._rowIndexColumnWidthMap || {};\n        const rowCount = this.datamanager.getRowCount();\n        const digits = (rowCount + '').length;\n\n        if (!this._rowIndexColumnWidthMap[digits]) {\n            // add 8px for each unit\n            this._rowIndexColumnWidthMap[digits] = baseWidth + ((digits - 1) * 8);\n        }\n\n        return this._rowIndexColumnWidthMap[digits];\n    }\n}\n\nconst KEYCODES = {\n    13: 'enter',\n    91: 'meta',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    9: 'tab',\n    27: 'esc',\n    67: 'c',\n    70: 'f'\n};\n\nclass Keyboard {\n    constructor(element) {\n        this.listeners = {};\n        $.on(element, 'keydown', this.handler.bind(this));\n    }\n\n    handler(e) {\n        let key = KEYCODES[e.keyCode];\n\n        if (e.shiftKey && key !== 'shift') {\n            key = 'shift+' + key;\n        }\n\n        if ((e.ctrlKey && key !== 'ctrl') || (e.metaKey && key !== 'meta')) {\n            key = 'ctrl+' + key;\n        }\n\n        const listeners = this.listeners[key];\n\n        if (listeners && listeners.length > 0) {\n            for (let listener of listeners) {\n                const preventBubbling = listener(e);\n                if (preventBubbling === undefined || preventBubbling === true) {\n                    e.preventDefault();\n                }\n            }\n        }\n    }\n\n    on(key, listener) {\n        const keys = key.split(',').map(k => k.trim());\n\n        keys.map(key => {\n            this.listeners[key] = this.listeners[key] || [];\n            this.listeners[key].push(listener);\n        });\n    }\n}\n\nvar DEFAULT_OPTIONS = {\n    columns: [],\n    data: [],\n    dropdownButton: '▼',\n    headerDropdown: [\n        {\n            label: 'Sort Ascending',\n            action: function (column) {\n                this.sortColumn(column.colIndex, 'asc');\n            }\n        },\n        {\n            label: 'Sort Descending',\n            action: function (column) {\n                this.sortColumn(column.colIndex, 'desc');\n            }\n        },\n        {\n            label: 'Reset sorting',\n            action: function (column) {\n                this.sortColumn(column.colIndex, 'none');\n            }\n        },\n        {\n            label: 'Remove column',\n            action: function (column) {\n                this.removeColumn(column.colIndex);\n            }\n        }\n    ],\n    events: {\n        onRemoveColumn(column) {},\n        onSwitchColumn(column1, column2) {},\n        onSortColumn(column) {},\n        onCheckRow(row) {}\n    },\n    sortIndicator: {\n        asc: '↑',\n        desc: '↓',\n        none: ''\n    },\n    freezeMessage: '',\n    getEditor: null,\n    serialNoColumn: true,\n    checkboxColumn: false,\n    clusterize: true,\n    logs: false,\n    layout: 'fixed', // fixed, fluid, ratio\n    noDataMessage: 'No Data',\n    cellHeight: null,\n    inlineFilters: false,\n    treeView: false,\n    checkedRowStatus: true\n};\n\nclass DataTable {\n    constructor(wrapper, options) {\n        DataTable.instances++;\n\n        if (typeof wrapper === 'string') {\n            // css selector\n            wrapper = document.querySelector(wrapper);\n        }\n        this.wrapper = wrapper;\n        if (!(this.wrapper instanceof HTMLElement)) {\n            throw new Error('Invalid argument given for `wrapper`');\n        }\n\n        this.buildOptions(options);\n        this.prepare();\n\n        this.style = new Style(this);\n        this.keyboard = new Keyboard(this.wrapper);\n        this.datamanager = new DataManager(this.options);\n        this.rowmanager = new RowManager(this);\n        this.columnmanager = new ColumnManager(this);\n        this.cellmanager = new CellManager(this);\n        this.bodyRenderer = new BodyRenderer(this);\n\n        if (this.options.data) {\n            this.refresh();\n        }\n    }\n\n    buildOptions(options) {\n        this.options = this.options || {};\n\n        this.options = Object.assign(\n            {}, DEFAULT_OPTIONS,\n            this.options || {}, options\n        );\n\n        this.options.headerDropdown\n            .push(...(options.headerDropdown || []));\n\n        // custom user events\n        this.events = Object.assign(\n            {}, DEFAULT_OPTIONS.events,\n            this.options.events || {},\n            options.events || {}\n        );\n        this.fireEvent = this.fireEvent.bind(this);\n    }\n\n    prepare() {\n        this.prepareDom();\n        this.unfreeze();\n    }\n\n    prepareDom() {\n        this.wrapper.innerHTML = `\n            <div class=\"data-table\">\n                <table class=\"data-table-header\">\n                </table>\n                <div class=\"body-scrollable\">\n                </div>\n                <div class=\"freeze-container\">\n                <span>${this.options.freezeMessage}</span>\n                </div>\n                <div class=\"data-table-footer\">\n                </div>\n                <div class=\"toast-message\"></div>\n            </div>\n        `;\n\n        this.datatableWrapper = $('.data-table', this.wrapper);\n        this.header = $('.data-table-header', this.wrapper);\n        this.bodyScrollable = $('.body-scrollable', this.wrapper);\n        this.freezeContainer = $('.freeze-container', this.wrapper);\n        this.toastMessage = $('.toast-message', this.wrapper);\n    }\n\n    refresh(data, columns) {\n        this.datamanager.init(data, columns);\n        this.render();\n        this.setDimensions();\n    }\n\n    destroy() {\n        this.wrapper.innerHTML = '';\n        this.style.destroy();\n    }\n\n    appendRows(rows) {\n        this.datamanager.appendRows(rows);\n        this.rowmanager.refreshRows();\n    }\n\n    refreshRow(row, rowIndex) {\n        this.rowmanager.refreshRow(row, rowIndex);\n    }\n\n    render() {\n        this.renderHeader();\n        this.renderBody();\n    }\n\n    renderHeader() {\n        this.columnmanager.renderHeader();\n    }\n\n    renderBody() {\n        this.bodyRenderer.render();\n    }\n\n    setDimensions() {\n        this.style.setDimensions();\n    }\n\n    showToastMessage(message) {\n        this.bodyRenderer.showToastMessage(message);\n    }\n\n    clearToastMessage() {\n        this.bodyRenderer.clearToastMessage();\n    }\n\n    getColumn(colIndex) {\n        return this.datamanager.getColumn(colIndex);\n    }\n\n    getColumns() {\n        return this.datamanager.getColumns();\n    }\n\n    getRows() {\n        return this.datamanager.getRows();\n    }\n\n    getCell(colIndex, rowIndex) {\n        return this.datamanager.getCell(colIndex, rowIndex);\n    }\n\n    getColumnHeaderElement(colIndex) {\n        return this.columnmanager.getColumnHeaderElement(colIndex);\n    }\n\n    getViewportHeight() {\n        if (!this.viewportHeight) {\n            this.viewportHeight = $.style(this.bodyScrollable, 'height');\n        }\n\n        return this.viewportHeight;\n    }\n\n    sortColumn(colIndex, sortOrder) {\n        this.columnmanager.sortColumn(colIndex, sortOrder);\n    }\n\n    removeColumn(colIndex) {\n        this.columnmanager.removeColumn(colIndex);\n    }\n\n    scrollToLastColumn() {\n        this.datatableWrapper.scrollLeft = 9999;\n    }\n\n    freeze() {\n        $.style(this.freezeContainer, {\n            display: ''\n        });\n    }\n\n    unfreeze() {\n        $.style(this.freezeContainer, {\n            display: 'none'\n        });\n    }\n\n    updateOptions(options) {\n        this.buildOptions(options);\n    }\n\n    fireEvent(eventName, ...args) {\n        this.events[eventName].apply(this, args);\n    }\n\n    log() {\n        if (this.options.logs) {\n            console.log.apply(console, arguments);\n        }\n    }\n}\n\nDataTable.instances = 0;\n\nvar name = \"frappe-datatable\";\nvar version = \"0.0.3\";\nvar description = \"A modern datatable library for the web\";\nvar main = \"dist/frappe-datatable.cjs.js\";\nvar scripts = {\"start\":\"yarn run dev\",\"build\":\"rollup -c\",\"dev\":\"rollup -c -w\",\"test\":\"mocha --compilers js:babel-core/register --colors ./test/*.spec.js\",\"test:watch\":\"mocha --compilers js:babel-core/register --colors -w ./test/*.spec.js\"};\nvar devDependencies = {\"chai\":\"3.5.0\",\"cssnano\":\"^3.10.0\",\"deepmerge\":\"^2.0.1\",\"eslint\":\"3.19.0\",\"eslint-loader\":\"1.7.1\",\"mocha\":\"3.3.0\",\"postcss-cssnext\":\"^3.1.0\",\"postcss-nested\":\"^3.0.0\",\"precss\":\"^3.1.0\",\"rollup-plugin-commonjs\":\"^8.3.0\",\"rollup-plugin-json\":\"^2.3.0\",\"rollup-plugin-node-resolve\":\"^3.0.3\",\"rollup-plugin-postcss\":\"^1.2.8\",\"rollup-plugin-uglify\":\"^3.0.0\"};\nvar repository = {\"type\":\"git\",\"url\":\"https://github.com/frappe/datatable.git\"};\nvar keywords = [\"datatable\",\"data\",\"grid\",\"table\"];\nvar author = \"Faris Ansari\";\nvar license = \"MIT\";\nvar bugs = {\"url\":\"https://github.com/frappe/datatable/issues\"};\nvar homepage = \"https://frappe.github.io/datatable\";\nvar dependencies = {\"clusterize.js\":\"^0.18.0\",\"lodash\":\"^4.17.5\",\"sortablejs\":\"^1.7.0\"};\nvar packageJson = {\n\tname: name,\n\tversion: version,\n\tdescription: description,\n\tmain: main,\n\tscripts: scripts,\n\tdevDependencies: devDependencies,\n\trepository: repository,\n\tkeywords: keywords,\n\tauthor: author,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tdependencies: dependencies\n};\n\nDataTable.__version__ = packageJson.version;\n\nmodule.exports = DataTable;\n","/**\n * frappe.views.ReportView\n */\nimport DataTable from 'frappe-datatable';\n\nfrappe.provide('frappe.views');\n\nfrappe.views.ReportView = class ReportView extends frappe.views.ListView {\n\tsetup_defaults() {\n\t\tsuper.setup_defaults();\n\t\tthis.view_name = 'Report';\n\t\tthis.page_title = __('Report:') + ' ' + this.page_title;\n\t\tthis.menu_items = this.report_menu_items();\n\n\t\tconst route = frappe.get_route();\n\t\tif (route.length === 4) {\n\t\t\tthis.report_name = route[3];\n\t\t}\n\n\t\tthis.add_totals_row = this.view_user_settings.add_totals_row || 0;\n\n\t\tif (this.report_name) {\n\t\t\treturn this.get_report_doc()\n\t\t\t\t.then(doc => {\n\t\t\t\t\tthis.report_doc = doc;\n\t\t\t\t\tthis.report_doc.json = JSON.parse(this.report_doc.json);\n\n\t\t\t\t\tthis.filters = this.report_doc.json.filters;\n\t\t\t\t\tthis.order_by = this.report_doc.json.order_by;\n\t\t\t\t\tthis.add_totals_row = this.report_doc.json.add_totals_row;\n\t\t\t\t\tthis.page_title = this.report_name;\n\t\t\t\t});\n\t\t}\n\t}\n\n\tsetup_view() {\n\t\tthis.setup_columns();\n\t\tthis.bind_charts_button();\n\t}\n\n\tsetup_result_area() {\n\t\tsuper.setup_result_area();\n\t\tthis.$datatable_wrapper = $('<div class=\"data-table-wrapper\">');\n\t\tthis.$charts_wrapper = $('<div class=\"charts-wrapper\">');\n\t\tthis.$result.append(this.$charts_wrapper);\n\t\tthis.$result.append(this.$datatable_wrapper);\n\t}\n\n\tbefore_render() {\n\t\tthis.save_report_settings();\n\t}\n\n\tsave_report_settings() {\n\t\tfrappe.model.user_settings.save(this.doctype, 'last_view', this.view_name);\n\n\t\tif (!this.report_name) {\n\t\t\tthis.save_view_user_settings({\n\t\t\t\tfields: this.fields,\n\t\t\t\tfilters: this.filter_area.get(),\n\t\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\t\tadd_totals_row: this.add_totals_row\n\t\t\t});\n\t\t}\n\t}\n\n\tupdate_data(r) {\n\t\tlet data = r.message || {};\n\t\tdata = frappe.utils.dict(data.keys, data.values);\n\n\t\tif (this.start === 0) {\n\t\t\tthis.data = data;\n\t\t} else {\n\t\t\tthis.data = this.data.concat(data);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.data.length === 0) return;\n\n\t\tif (this.chart) {\n\t\t\tthis.refresh_charts();\n\t\t}\n\t\tif (this.datatable) {\n\t\t\tthis.datatable.refresh(this.get_data(this.data));\n\t\t\treturn;\n\t\t}\n\t\tthis.setup_datatable(this.data);\n\t}\n\n\ton_update(data) {\n\t\tif (this.doctype === data.doctype && data.name) {\n\t\t\t// flash row when doc is updated by some other user\n\t\t\tconst flash_row = data.user !== frappe.session.user;\n\t\t\tif (this.data.find(d => d.name === data.name)) {\n\t\t\t\t// update existing\n\t\t\t\tfrappe.db.get_doc(data.doctype, data.name)\n\t\t\t\t\t.then(doc => this.update_row(doc, flash_row));\n\t\t\t} else {\n\t\t\t\t// refresh\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate_row(doc, flash_row) {\n\t\tconst to_refresh = [];\n\n\t\tthis.data = this.data.map((d, i) => {\n\t\t\tif (d.name === doc.name) {\n\t\t\t\tfor (let fieldname in d) {\n\t\t\t\t\tif (fieldname.includes(':')) {\n\t\t\t\t\t\t// child table field\n\t\t\t\t\t\tconst [cdt, _field] = fieldname.split(':');\n\t\t\t\t\t\tconst cdt_row = Object.keys(doc)\n\t\t\t\t\t\t\t.filter(key => Array.isArray(doc[key]) && doc[key][0].doctype === cdt)\n\t\t\t\t\t\t\t.map(key => doc[key])\n\t\t\t\t\t\t\t.map(a => a[0])\n\t\t\t\t\t\t\t.filter(cdoc => cdoc.name === d[cdt + ':name'])[0];\n\t\t\t\t\t\tif (cdt_row) {\n\t\t\t\t\t\t\td[fieldname] = cdt_row[_field];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\td[fieldname] = doc[fieldname];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tto_refresh.push([d, i]);\n\t\t\t}\n\t\t\treturn d;\n\t\t});\n\n\t\t// indicate row update\n\t\tconst _flash_row = (rowIndex) => {\n\t\t\tif (!flash_row) return;\n\t\t\tconst $row = this.$result.find(`.data-table-row[data-row-index=\"${rowIndex}\"]`);\n\t\t\t$row.addClass('row-update');\n\t\t\tsetTimeout(() => $row.removeClass('row-update'), 500);\n\t\t};\n\n\t\tto_refresh.forEach(([data, rowIndex]) => {\n\t\t\tconst new_row = this.build_row(data);\n\t\t\tthis.datatable.refreshRow(new_row, rowIndex);\n\t\t\t_flash_row(rowIndex);\n\t\t});\n\t}\n\n\tsetup_datatable(values) {\n\t\tthis.datatable = new DataTable(this.$datatable_wrapper[0], {\n\t\t\tcolumns: this.columns,\n\t\t\tdata: this.get_data(values),\n\t\t\tgetEditor: this.get_editing_object.bind(this),\n\t\t\tevents: {\n\t\t\t\tonRemoveColumn: (column) => {\n\t\t\t\t\tthis.remove_column_from_datatable(column);\n\t\t\t\t},\n\t\t\t\tonSwitchColumn: (column1, column2) => {\n\t\t\t\t\tthis.switch_column(column1, column2);\n\t\t\t\t}\n\t\t\t},\n\t\t\theaderDropdown: [{\n\t\t\t\tlabel: __('Add Column'),\n\t\t\t\taction: (datatabe_col) => {\n\t\t\t\t\tlet columns_in_picker = [];\n\t\t\t\t\tconst columns = this.get_columns_for_picker();\n\n\t\t\t\t\tcolumns_in_picker = columns[this.doctype]\n\t\t\t\t\t\t.filter(df => !this.is_column_added(df))\n\t\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\t\tvalue: df.fieldname\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tdelete columns[this.doctype];\n\n\t\t\t\t\tfor (let cdt in columns) {\n\t\t\t\t\t\tcolumns[cdt]\n\t\t\t\t\t\t\t.filter(df => !this.is_column_added(df))\n\t\t\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\t\t\tlabel: __(df.label) + ` (${cdt})`,\n\t\t\t\t\t\t\t\tvalue: df.fieldname + ',' + cdt\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t.forEach(df => columns_in_picker.push(df));\n\t\t\t\t\t}\n\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Add Column'),\n\t\t\t\t\t\tfields: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __('Select Column'),\n\t\t\t\t\t\t\t\tfieldname: 'column',\n\t\t\t\t\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\t\t\t\t\toptions: columns_in_picker\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __('Insert Column Before {0}', [datatabe_col.docfield.label.bold()]),\n\t\t\t\t\t\t\t\tfieldname: 'insert_before',\n\t\t\t\t\t\t\t\tfieldtype: 'Check'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tprimary_action: ({ column, insert_before }) => {\n\t\t\t\t\t\t\tif (!columns_in_picker.map(col => col.value).includes(column)) {\n\t\t\t\t\t\t\t\tfrappe.show_alert(__('Invalid column'));\n\t\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet doctype = this.doctype;\n\t\t\t\t\t\t\tif (column.includes(',')) {\n\t\t\t\t\t\t\t\t[column, doctype] = column.split(',');\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\tlet index = datatabe_col.colIndex;\n\t\t\t\t\t\t\tif (insert_before) {\n\t\t\t\t\t\t\t\tindex = index - 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.add_column_to_datatable(column, doctype, index);\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\t\t\t\t}\n\t\t\t}]\n\t\t});\n\t}\n\n\tbind_charts_button() {\n\t\tthis.list_sidebar.sidebar.find('.charts-menu').removeClass('hide');\n\t\tthis.list_sidebar.sidebar.on('click', '.toggle-charts', (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.toggle_charts();\n\t\t});\n\t\tthis.list_sidebar.sidebar.on('click', '.configure-charts', (e) => {\n\t\t\te.preventDefault();\n\t\t\tthis.get_chart_data().then(() => this.refresh_charts());\n\t\t});\n\t\tthis.refresh_charts_sidebar_button();\n\t}\n\n\trefresh_charts_sidebar_button() {\n\t\t// show configure charts button if charts is shown\n\t\tconst $configure_btn = this.list_sidebar.sidebar.find('.configure-charts');\n\t\tconst charts_visible = this.chart && !this.$charts_wrapper.hasClass('hidden');\n\n\t\tif (charts_visible) {\n\t\t\t$configure_btn.removeClass('hidden');\n\t\t} else {\n\t\t\t$configure_btn.addClass('hidden');\n\t\t}\n\t}\n\n\ttoggle_charts() {\n\t\tif (!this.chart) {\n\t\t\tthis.setup_charts();\n\t\t\treturn;\n\t\t}\n\t\tthis.$charts_wrapper.toggleClass('hidden');\n\n\t\tif (!this.$charts_wrapper.hasClass('hidden')) {\n\t\t\tthis.chart.refresh();\n\t\t}\n\n\t\tthis.refresh_charts_sidebar_button();\n\t}\n\n\tsetup_charts() {\n\t\tthis.get_chart_data()\n\t\t\t.then(args => {\n\t\t\t\tlet data = {\n\t\t\t\t\tlabels: args.labels,\n\t\t\t\t\tdatasets: args.datasets\n\t\t\t\t};\n\n\t\t\t\tthis.last_chart_type = args.chart_type;\n\n\t\t\t\tconst get_df = (field) => frappe.meta.get_docfield(this.doctype, field);\n\t\t\t\tconst get_doc = (value, field) => this.data.find(d => d[field] === value);\n\n\t\t\t\tthis.chart = new Chart(this.$charts_wrapper[0], {\n\t\t\t\t\ttitle: __(\"{0} Chart\", [this.doctype]),\n\t\t\t\t\tdata: data,\n\t\t\t\t\ttype: args.chart_type, // 'bar', 'line', 'scatter', 'pie', 'percentage'\n\t\t\t\t\theight: 150,\n\t\t\t\t\tcolors: ['violet', 'light-blue', 'orange', 'red'],\n\n\t\t\t\t\tformat_tooltip_x: value => value.doc.name,\n\t\t\t\t\tformat_tooltip_y:\n\t\t\t\t\t\tvalue => frappe.format(value, get_df(value.field), { always_show_decimals: true, inline: true }, get_doc(value.doc))\n\t\t\t\t});\n\n\t\t\t\tthis.refresh_charts_sidebar_button();\n\t\t\t});\n\t}\n\n\trefresh_charts() {\n\t\tif (!this.chart) return;\n\t\tconst { x_field, y_fields, chart_type } = this.chart_args;\n\t\tconst args = this.get_chart_args(x_field, y_fields, chart_type);\n\t\tthis.chart.update_values(args.datasets, args.labels);\n\t\tthis.chart.refresh();\n\n\t\tif (args.chart_type !== this.last_chart_type) {\n\t\t\tthis.chart.get_different_chart(args.chart_type);\n\t\t}\n\t}\n\n\tget_chart_data() {\n\t\treturn new Promise(resolve => {\n\t\t\tconst cur_list_fields = this.fields.map(f => f[0]);\n\t\t\tconst x_fields = this.meta.fields.filter(df =>\n\t\t\t\t!df.hidden && cur_list_fields.includes(df.fieldname)\n\t\t\t).map(df => df.fieldname);\n\t\t\tconst y_fields = this.meta.fields.filter(df =>\n\t\t\t\t!df.hidden && frappe.model.is_numeric_field(df)\n\t\t\t\t&& cur_list_fields.includes(df.fieldname)\n\t\t\t).map(df => df.fieldname);\n\n\t\t\tconst defaults = this.chart_args || {};\n\n\t\t\tconst dialog = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Configure Chart'),\n\t\t\t\tfields: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('X Axis Field'),\n\t\t\t\t\t\tfieldtype: 'Autocomplete',\n\t\t\t\t\t\tfieldname: 'x_axis',\n\t\t\t\t\t\toptions: x_fields,\n\t\t\t\t\t\tdefault: defaults.x_field\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('Y Axis Fields'),\n\t\t\t\t\t\tfieldtype: 'MultiSelect',\n\t\t\t\t\t\tfieldname: 'y_axes',\n\t\t\t\t\t\toptions: y_fields,\n\t\t\t\t\t\tdescription: __('Showing only Numeric fields from Report'),\n\t\t\t\t\t\tdefault: defaults.y_fields\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: __('Chart Type'),\n\t\t\t\t\t\tfieldtype: 'Select',\n\t\t\t\t\t\toptions: ['Bar', 'Line', 'Scatter', 'Pie', 'Percentage'],\n\t\t\t\t\t\tfieldname: 'chart_type',\n\t\t\t\t\t\tdefault: toTitle(defaults.chart_type || 'Bar')\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tprimary_action: ({ x_axis, y_axes, chart_type }) => {\n\t\t\t\t\ty_axes = y_axes.split(',').map(d => d.trim()).filter(Boolean);\n\n\t\t\t\t\tif (!(\n\t\t\t\t\t\ty_axes.every(d => y_fields.includes(d))\n\t\t\t\t\t\t&& x_fields.includes(x_axis)\n\t\t\t\t\t)) return;\n\n\t\t\t\t\tconst args = this.get_chart_args(x_axis, y_axes, chart_type);\n\t\t\t\t\tthis.chart_args = args;\n\t\t\t\t\tresolve(args);\n\t\t\t\t\tdialog.hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdialog.show();\n\t\t});\n\t}\n\n\tget_chart_args(x_axis, y_axes, chart_type) {\n\t\tconst labels = this.data.map(d => {\n\t\t\t// HACK: labels need strings,\n\t\t\t// so we return objects that\n\t\t\t// look like strings and also\n\t\t\t// monkey patch the doc\n\t\t\t// javascript is awesome\n\t\t\treturn {\n\t\t\t\tdoc: d,\n\t\t\t\ttoString() {\n\t\t\t\t\treturn d[x_axis];\n\t\t\t\t},\n\t\t\t\tslice: String.prototype.slice\n\t\t\t};\n\t\t});\n\n\t\treturn {\n\t\t\tchart_type: chart_type.toLowerCase(),\n\t\t\tx_field: x_axis,\n\t\t\ty_fields: y_axes,\n\t\t\tlabels: labels,\n\t\t\tdatasets: y_axes.map(y_axis => ({\n\t\t\t\tname: frappe.meta.get_docfield(this.doctype, y_axis).label,\n\t\t\t\tvalues: this.data.map(d => ({\n\t\t\t\t\tdoc: d,\n\t\t\t\t\tfield: y_axis,\n\t\t\t\t\ttoString() {\n\t\t\t\t\t\treturn d[y_axis];\n\t\t\t\t\t},\n\t\t\t\t\tslice: String.prototype.slice\n\t\t\t\t}))\n\t\t\t}))\n\t\t};\n\t}\n\n\tget_editing_object(colIndex, rowIndex, value, parent) {\n\t\tconst control = this.render_editing_input(colIndex, value, parent);\n\t\tif (!control) return false;\n\n\t\tcontrol.df.change = () => control.set_focus();\n\n\t\treturn {\n\t\t\tinitValue: (value) => {\n\t\t\t\treturn control.set_value(value);\n\t\t\t},\n\t\t\tsetValue: (value) => {\n\t\t\t\tconst cell = this.datatable.getCell(colIndex, rowIndex);\n\t\t\t\tlet fieldname = this.datatable.getColumn(colIndex).docfield.fieldname;\n\t\t\t\tlet docname = cell.name;\n\t\t\t\tlet doctype = cell.doctype;\n\n\t\t\t\tcontrol.set_value(value);\n\t\t\t\treturn this.set_control_value(doctype, docname, fieldname, value)\n\t\t\t\t\t.then((updated_doc) => {\n\t\t\t\t\t\tconst _data = this.data.find(d => d.name === updated_doc.name);\n\t\t\t\t\t\tfor (let field in _data) {\n\t\t\t\t\t\t\t_data[field] = updated_doc[field];\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => this.refresh_charts());\n\t\t\t},\n\t\t\tgetValue: () => {\n\t\t\t\treturn control.get_value();\n\t\t\t}\n\t\t};\n\t}\n\n\tset_control_value(doctype, docname, fieldname, value) {\n\t\tthis.last_updated_doc = docname;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tfrappe.db.set_value(doctype, docname, {[fieldname]: value})\n\t\t\t\t.then(r => {\n\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\tresolve(r.message);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.fail(reject);\n\t\t});\n\t}\n\n\trender_editing_input(colIndex, value, parent) {\n\t\tconst col = this.datatable.getColumn(colIndex);\n\t\tlet control = null;\n\n\t\tif (col.docfield.fieldtype === 'Text Editor') {\n\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\ttitle: __('Edit {0}', [col.docfield.label]),\n\t\t\t\tfields: [col.docfield],\n\t\t\t\tprimary_action: () => {\n\t\t\t\t\tthis.datatable.cellmanager.submitEditing();\n\t\t\t\t\tthis.datatable.cellmanager.deactivateEditing();\n\t\t\t\t\td.hide();\n\t\t\t\t}\n\t\t\t});\n\t\t\td.show();\n\t\t\tcontrol = d.fields_dict[col.docfield.fieldname];\n\t\t} else {\n\t\t\t// make control\n\t\t\tcontrol = frappe.ui.form.make_control({\n\t\t\t\tdf: col.docfield,\n\t\t\t\tparent: parent,\n\t\t\t\trender_input: true\n\t\t\t});\n\t\t\tcontrol.set_value(value);\n\t\t\tcontrol.toggle_label(false);\n\t\t\tcontrol.toggle_description(false);\n\t\t}\n\n\t\treturn control;\n\t}\n\n\tis_editable(df, data) {\n\t\tif (!df || data.docstatus !== 0) return false;\n\t\tconst is_standard_field = frappe.model.std_fields_list.includes(df.fieldname);\n\t\tconst can_edit = !(\n\t\t\tis_standard_field\n\t\t\t|| df.read_only\n\t\t\t|| df.hidden\n\t\t\t|| !frappe.model.can_write(this.doctype)\n\t\t);\n\t\treturn can_edit;\n\t}\n\n\tget_data(values) {\n\t\treturn this.build_rows(values);\n\t}\n\n\tset_fields() {\n\t\tif (this.report_name && this.report_doc.json.fields) {\n\t\t\tthis.fields = this.report_doc.json.fields;\n\t\t\treturn;\n\t\t} else if (this.view_user_settings.fields) {\n\t\t\t// get from user_settings\n\t\t\tthis.fields = this.view_user_settings.fields;\n\t\t\treturn;\n\t\t}\n\n\t\t// get fields from meta\n\t\tthis.fields = [];\n\t\tconst add_field = f => this._add_field(f);\n\n\t\t// default fields\n\t\t[\n\t\t\t'name', 'docstatus',\n\t\t\tthis.meta.title_field,\n\t\t\tthis.meta.image_field\n\t\t].map(add_field);\n\n\t\t// fields in_list_view or in_standard_filter\n\t\tconst fields = this.meta.fields.filter(df => {\n\t\t\treturn (df.in_list_view || df.in_standard_filter)\n\t\t\t\t&& frappe.perm.has_perm(this.doctype, df.permlevel, 'read')\n\t\t\t\t&& frappe.model.is_value_type(df.fieldtype)\n\t\t\t\t&& !df.report_hide;\n\t\t});\n\n\t\tfields.map(add_field);\n\n\t\t// currency fields\n\t\tfields.filter(\n\t\t\tdf => df.fieldtype === 'Currency' && df.options\n\t\t).map(df => {\n\t\t\tif (df.options.includes(':')) {\n\t\t\t\tadd_field(df.options.split(':')[1]);\n\t\t\t} else {\n\t\t\t\tadd_field(df.options);\n\t\t\t}\n\t\t});\n\n\t\t// fields in listview_settings\n\t\t(this.settings.add_fields || []).map(add_field);\n\t}\n\n\tbuild_fields() {\n\t\tthis.fields.push(['docstatus', this.doctype]);\n\t\tsuper.build_fields();\n\t}\n\n\tget_fields() {\n\t\tlet fields = this.fields.map(f => {\n\t\t\tlet column_name = frappe.model.get_full_column_name(f[0], f[1]);\n\t\t\tif (f[1] !== this.doctype) {\n\t\t\t\t// child table field\n\t\t\t\tcolumn_name = column_name + ' as ' + `'${f[1]}:${f[0]}'`;\n\t\t\t}\n\t\t\treturn column_name;\n\t\t});\n\t\tconst cdt_name_fields =\n\t\t\tthis.get_unique_cdt_in_view()\n\t\t\t\t.map(cdt => frappe.model.get_full_column_name('name', cdt) + ' as ' + `'${cdt}:name'`);\n\t\tfields = fields.concat(cdt_name_fields);\n\n\t\treturn fields;\n\t}\n\n\tget_unique_cdt_in_view() {\n\t\treturn this.fields\n\t\t\t.filter(f => f[1] !== this.doctype)\n\t\t\t.map(f => f[1])\n\t\t\t.uniqBy(d => d);\n\t}\n\n\tadd_column_to_datatable(fieldname, doctype, col_index) {\n\t\tconst field = [fieldname, doctype];\n\t\tthis.fields.splice(col_index, 0, field);\n\n\t\tthis.add_currency_column(fieldname, doctype, col_index);\n\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\n\t\tthis.datatable.destroy();\n\t\tthis.datatable = null;\n\t\tthis.refresh();\n\t}\n\n\tadd_currency_column(fieldname, doctype, col_index) {\n\t\t// Adds dependent currency field if required\n\t\tconst df = frappe.meta.get_docfield(doctype, fieldname);\n\t\tif (df && df.fieldtype === 'Currency' && df.options && !df.options.includes(':')) {\n\t\t\tconst field = [df.options, doctype];\n\t\t\tif (col_index === undefined) {\n\t\t\t\tthis.fields.push(field);\n\t\t\t} else {\n\t\t\t\tthis.fields.splice(col_index, 0, field);\n\t\t\t}\n\t\t\tfrappe.show_alert(__('Also adding the dependent currency field {0}', [field[0].bold()]));\n\t\t}\n\t}\n\n\tremove_column_from_datatable(column) {\n\t\tconst index = this.fields.findIndex(f => column.field === f[0]);\n\t\tif (index === -1) return;\n\t\tconst field = this.fields[index];\n\t\tif (field[0] === 'name') {\n\t\t\tfrappe.throw(__('Cannot remove ID field'));\n\t\t}\n\t\tthis.fields.splice(index, 1);\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\t\tthis.refresh();\n\t}\n\n\tswitch_column(col1, col2) {\n\t\tconst index1 = this.fields.findIndex(f => col1.field === f[0]);\n\t\tconst index2 = this.fields.findIndex(f => col2.field === f[0]);\n\t\tconst _fields = this.fields.slice();\n\n\t\tlet temp = _fields[index1];\n\t\t_fields[index1] = _fields[index2];\n\t\t_fields[index2] = temp;\n\n\t\tthis.fields = _fields;\n\t\tthis.build_fields();\n\t\tthis.setup_columns();\n\t\tthis.refresh();\n\t}\n\n\tget_columns_for_picker() {\n\t\tlet out = {};\n\n\t\tconst standard_fields_filter = df =>\n\t\t\t!in_list(frappe.model.no_value_type, df.fieldtype) &&\n\t\t\t!df.report_hide && df.fieldname !== 'naming_series' &&\n\t\t\t!df.hidden;\n\n\t\tlet doctype_fields = frappe.meta.get_docfields(this.doctype).filter(standard_fields_filter);\n\n\t\tdoctype_fields = [{\n\t\t\tlabel: __('ID'),\n\t\t\tfieldname: 'name',\n\t\t\tfieldtype: 'Data'\n\t\t}].concat(doctype_fields, frappe.model.std_fields);\n\n\t\tout[this.doctype] = doctype_fields;\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype)\n\t\t\t.filter(df => !df.hidden);\n\n\t\ttable_fields.forEach(df => {\n\t\t\tconst cdt = df.options;\n\t\t\tconst child_table_fields = frappe.meta.get_docfields(cdt).filter(standard_fields_filter);\n\n\t\t\tout[cdt] = child_table_fields;\n\t\t});\n\n\t\treturn out;\n\t}\n\n\tget_dialog_fields() {\n\t\tconst dialog_fields = [];\n\t\tconst columns = this.get_columns_for_picker();\n\n\t\tdialog_fields.push({\n\t\t\tlabel: __(this.doctype),\n\t\t\tfieldname: this.doctype,\n\t\t\tfieldtype: 'MultiCheck',\n\t\t\tcolumns: 2,\n\t\t\toptions: columns[this.doctype]\n\t\t\t\t.map(df => ({\n\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\tchecked: this.fields.find(f => f[0] === df.fieldname)\n\t\t\t\t}))\n\t\t});\n\n\t\tdelete columns[this.doctype];\n\n\t\tconst table_fields = frappe.meta.get_table_fields(this.doctype)\n\t\t\t.filter(df => !df.hidden);\n\n\t\ttable_fields.forEach(df => {\n\t\t\tconst cdt = df.options;\n\n\t\t\tdialog_fields.push({\n\t\t\t\tlabel: __(df.label) + ` (${__(cdt)})`,\n\t\t\t\tfieldname: df.options,\n\t\t\t\tfieldtype: 'MultiCheck',\n\t\t\t\tcolumns: 2,\n\t\t\t\toptions: columns[cdt]\n\t\t\t\t\t.map(df => ({\n\t\t\t\t\t\tlabel: __(df.label),\n\t\t\t\t\t\tvalue: df.fieldname,\n\t\t\t\t\t\tchecked: this.fields.find(f => f[0] === df.fieldname && f[1] === cdt)\n\t\t\t\t\t}))\n\t\t\t});\n\t\t});\n\n\t\treturn dialog_fields;\n\t}\n\n\tis_column_added(df) {\n\t\treturn Boolean(\n\t\t\tthis.fields.find(f => f[0] === df.fieldname && df.parent === f[1])\n\t\t);\n\t}\n\n\tsetup_columns() {\n\t\tconst hide_columns = ['docstatus'];\n\t\tconst fields = this.fields.filter(f => !hide_columns.includes(f[0]));\n\t\tthis.columns = fields.map(f => this.build_column(f));\n\t}\n\n\tbuild_column(c) {\n\t\tlet [fieldname, doctype] = c;\n\t\tlet docfield = frappe.meta.docfield_map[doctype || this.doctype][fieldname];\n\n\t\tif (!docfield) {\n\t\t\tdocfield = frappe.model.get_std_field(fieldname);\n\n\t\t\tif (docfield) {\n\t\t\t\tdocfield.parent = this.doctype;\n\t\t\t\tif (fieldname == \"name\") {\n\t\t\t\t\tdocfield.options = this.doctype;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!docfield) return;\n\n\t\tlet title = __(docfield ? docfield.label : toTitle(fieldname));\n\t\tif (doctype !== this.doctype) {\n\t\t\ttitle += ` (${__(doctype)})`;\n\t\t}\n\n\t\tconst editable = frappe.model.is_non_std_field(fieldname) && !docfield.read_only;\n\n\t\treturn {\n\t\t\tid: fieldname,\n\t\t\tfield: fieldname,\n\t\t\tdocfield: docfield,\n\t\t\tname: title,\n\t\t\tcontent: title,\n\t\t\twidth: (docfield ? cint(docfield.width) : null) || null,\n\t\t\teditable: editable,\n\t\t\tformat: (value, row, column, data) => {\n\t\t\t\treturn frappe.format(value, column.docfield, { always_show_decimals: true }, data);\n\t\t\t}\n\t\t};\n\t}\n\n\tbuild_rows(data) {\n\t\tconst out = data.map(d => this.build_row(d));\n\n\t\tif (this.add_totals_row) {\n\t\t\tconst totals_row = data.reduce((totals_row, d) => {\n\t\t\t\tthis.columns.forEach((col, i) => {\n\t\t\t\t\ttotals_row[i] = totals_row[i] || {\n\t\t\t\t\t\tname: 'Totals Row',\n\t\t\t\t\t\tcontent: ''\n\t\t\t\t\t};\n\n\t\t\t\t\tif (col.field in d && frappe.model.is_numeric_field(col.docfield)) {\n\n\t\t\t\t\t\tif (!totals_row[i].format) {\n\t\t\t\t\t\t\ttotals_row[i].format = value => frappe.format(value, col.docfield, { always_show_decimals: true });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttotals_row[i].content = totals_row[i].content || 0;\n\t\t\t\t\t\ttotals_row[i].content += parseInt(d[col.field], 10);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn totals_row;\n\t\t\t}, []);\n\n\t\t\ttotals_row[0].content = __('Totals').bold();\n\n\t\t\tout.push(totals_row);\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tbuild_row(d) {\n\t\treturn this.columns.map(col => {\n\t\t\tif (col.docfield.parent !== this.doctype) {\n\t\t\t\t// child table field\n\t\t\t\tconst cdt_field = f => `${col.docfield.parent}:${f}`;\n\t\t\t\tconst name = d[cdt_field('name')];\n\n\t\t\t\treturn {\n\t\t\t\t\tname: name,\n\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\tcontent: d[cdt_field(col.field)],\n\t\t\t\t\teditable: Boolean(name && this.is_editable(col.docfield, d)),\n\t\t\t\t\tformat: value => {\n\t\t\t\t\t\treturn frappe.format(value, col.docfield, { always_show_decimals: true });\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (col.field in d) {\n\t\t\t\tconst value = d[col.field];\n\t\t\t\treturn {\n\t\t\t\t\tname: d.name,\n\t\t\t\t\tdoctype: col.docfield.parent,\n\t\t\t\t\tcontent: value,\n\t\t\t\t\teditable: this.is_editable(col.docfield, d)\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcontent: ''\n\t\t\t};\n\t\t});\n\t}\n\n\tget_checked_items(only_docnames) {\n\t\tconst indexes = this.datatable.rowmanager.getCheckedRows();\n\t\tconst items = indexes.filter(i => i != undefined)\n\t\t\t.map(i => this.data[i]);\n\n\t\tif (only_docnames) {\n\t\t\treturn items.map(d => d.name);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tsave_report(save_type) {\n\t\tconst _save_report = (name) => {\n\t\t\t// callback\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: 'frappe.desk.reportview.save_report',\n\t\t\t\targs: {\n\t\t\t\t\tname: name,\n\t\t\t\t\tdoctype: this.doctype,\n\t\t\t\t\tjson: JSON.stringify({\n\t\t\t\t\t\tfilters: this.filter_area.get(),\n\t\t\t\t\t\tfields: this.fields,\n\t\t\t\t\t\torder_by: this.sort_selector.get_sql_string(),\n\t\t\t\t\t\tadd_totals_row: this.add_totals_row\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tcallback:(r) => {\n\t\t\t\t\tif(r.exc) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Report was not saved (there were errors)\"));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif(r.message != this.report_name) {\n\t\t\t\t\t\tfrappe.set_route('List', this.doctype, 'Report', r.message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\t\tif(this.report_name && save_type == \"save\") {\n\t\t\t_save_report(this.report_name);\n\t\t} else {\n\t\t\tfrappe.prompt({fieldname: 'name', label: __('New Report name'), reqd: 1, fieldtype: 'Data'}, (data) => {\n\t\t\t\t_save_report(data.name);\n\t\t\t}, __('Save As'));\n\t\t}\n\t}\n\n\tget_report_doc() {\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.model.with_doc('Report', this.report_name, () => {\n\t\t\t\tresolve(frappe.get_doc('Report', this.report_name));\n\t\t\t});\n\t\t});\n\t}\n\n\treport_menu_items() {\n\t\tlet items = [\n\t\t\t{\n\t\t\t\tlabel: __('Show Totals'),\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.add_totals_row = !this.add_totals_row;\n\t\t\t\t\tthis.save_view_user_settings({ add_totals_row: this.add_totals_row });\n\t\t\t\t\tthis.datatable.refresh(this.get_data(this.data));\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.ui.get_print_settings(false, (print_settings) => {\n\t\t\t\t\t\tvar title =  __(this.doctype);\n\t\t\t\t\t\tfrappe.render_grid({\n\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\tprint_settings: print_settings,\n\t\t\t\t\t\t\tcolumns: this.columns,\n\t\t\t\t\t\t\tdata: this.data\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Toggle Chart'),\n\t\t\t\taction: () => this.toggle_charts()\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Toggle Sidebar'),\n\t\t\t\taction: () => this.toggle_side_bar()\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Pick Columns'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst d = new frappe.ui.Dialog({\n\t\t\t\t\t\ttitle: __('Pick Columns'),\n\t\t\t\t\t\tfields: this.get_dialog_fields(),\n\t\t\t\t\t\tprimary_action: (values) => {\n\t\t\t\t\t\t\t// doctype fields\n\t\t\t\t\t\t\tlet fields = values[this.doctype].map(f => [f, this.doctype]);\n\t\t\t\t\t\t\tdelete values[this.doctype];\n\n\t\t\t\t\t\t\t// child table fields\n\t\t\t\t\t\t\tfor (let cdt in values) {\n\t\t\t\t\t\t\t\tfields = fields.concat(values[cdt].map(f => [f, cdt]));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.fields = fields;\n\n\t\t\t\t\t\t\tthis.fields.map(f => this.add_currency_column(f[0], f[1]));\n\n\t\t\t\t\t\t\tthis.build_fields();\n\t\t\t\t\t\t\tthis.setup_columns();\n\n\t\t\t\t\t\t\tthis.datatable.destroy();\n\t\t\t\t\t\t\tthis.datatable = null;\n\t\t\t\t\t\t\tthis.refresh();\n\n\t\t\t\t\t\t\td.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\td.show();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\tif (frappe.model.can_export(this.doctype)) {\n\t\t\titems.push({\n\t\t\t\tlabel: __('Export'),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst args = this.get_args();\n\t\t\t\t\tconst selected_items = this.get_checked_items(true);\n\n\t\t\t\t\tfrappe.prompt({\n\t\t\t\t\t\tfieldtype:\"Select\", label: __(\"Select File Type\"), fieldname:\"file_format_type\",\n\t\t\t\t\t\toptions:\"Excel\\nCSV\", default:\"Excel\", reqd: 1\n\t\t\t\t\t},\n\t\t\t\t\t(data) => {\n\t\t\t\t\t\targs.cmd = 'frappe.desk.reportview.export_query';\n\t\t\t\t\t\targs.file_format_type = data.file_format_type;\n\n\t\t\t\t\t\tif (args.file_format_type === 'CSV') {\n\t\t\t\t\t\t\tfrappe.tools.downloadify(this.data, null, this.doctype);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(this.add_totals_row) {\n\t\t\t\t\t\t\targs.add_totals_row = 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(selected_items.length > 0) {\n\t\t\t\t\t\t\targs.selected_items = selected_items;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\targs.start = 0;\n\t\t\t\t\t\targs.page_length = this.data.length;\n\n\t\t\t\t\t\topen_url_post(frappe.request.url, args);\n\t\t\t\t\t},\n\t\t\t\t\t__(\"Export Report: {0}\",[__(this.doctype)]), __(\"Download\"));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\tlabel: __(\"Setup Auto Email\"),\n\t\t\taction: () => {\n\t\t\t\tif(this.report_name) {\n\t\t\t\t\tfrappe.set_route('List', 'Auto Email Report', {'report' : this.report_name});\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.msgprint(__('Please save the report first'));\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// save buttons\n\t\tif(frappe.user.is_report_manager()) {\n\t\t\titems = items.concat([\n\t\t\t\t{ label: __('Save'), action: () => this.save_report('save') },\n\t\t\t\t{ label: __('Save As'), action: () => this.save_report('save_as') }\n\t\t\t]);\n\t\t}\n\n\t\t// user permissions\n\t\tif(this.report_name && frappe.model.can_set_user_permissions(\"Report\")) {\n\t\t\titems.push({\n\t\t\t\tlabel: __(\"User Permissions\"),\n\t\t\t\taction: () => {\n\t\t\t\t\tconst args = {\n\t\t\t\t\t\tdoctype: \"Report\",\n\t\t\t\t\t\tname: this.report_name\n\t\t\t\t\t};\n\t\t\t\t\tfrappe.set_route('List', 'User Permission', args);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// add to desktop\n\t\titems.push({\n\t\t\tlabel: __('Add to Desktop'),\n\t\t\taction: () => {\n\t\t\t\tfrappe.add_to_desktop(\n\t\t\t\t\tthis.report_name || __('{0} Report', [this.doctype]),\n\t\t\t\t\tthis.doctype, this.report_name\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\treturn items.map(i => Object.assign(i, { standard: true }));\n\t}\n\n};\n","// Copyright (c) 2018, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\nimport DataTable from 'frappe-datatable';\n\nfrappe.provide('frappe.views');\nfrappe.provide('frappe.query_reports');\n\nfrappe.standard_pages['query-report'] = function() {\n\tvar wrapper = frappe.container.add_page('query-report');\n\n\tfrappe.ui.make_app_page({\n\t\tparent: wrapper,\n\t\ttitle: __('Query Report'),\n\t\tsingle_column: true,\n\t});\n\n\tfrappe.query_report = new frappe.views.QueryReport({\n\t\tparent: wrapper,\n\t});\n\n\t$(wrapper).bind('show', function() {\n\t\tfrappe.query_report.show();\n\t});\n};\n\nfrappe.views.QueryReport = class QueryReport extends frappe.views.BaseList {\n\tshow() {\n\t\tthis.init().then(() => this.load());\n\t}\n\n\tinit() {\n\t\tif (this.init_promise) {\n\t\t\treturn this.init_promise;\n\t\t}\n\n\t\tlet tasks = [\n\t\t\tthis.setup_defaults,\n\t\t\tthis.setup_page,\n\t\t\tthis.setup_report_wrapper\n\t\t].map(fn => fn.bind(this));\n\n\t\tthis.init_promise = frappe.run_serially(tasks);\n\t\treturn this.init_promise;\n\t}\n\n\tsetup_defaults() {\n\t\tthis.route = frappe.get_route();\n\t\tthis.page_name = frappe.get_route_str();\n\n\t\t// Setup buttons\n\t\tthis.primary_action = null;\n\t\tthis.secondary_action = {\n\t\t\tlabel: __('Refresh'),\n\t\t\taction: () => this.refresh()\n\t\t};\n\n\t\t// throttle refresh for 300ms\n\t\tthis.refresh = frappe.utils.throttle(this.refresh, 300);\n\n\t\tthis.menu_items = [];\n\t}\n\n\tload() {\n\t\tif (frappe.get_route().length < 2) {\n\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\treturn;\n\t\t}\n\t\tif (this.report_name !== frappe.get_route()[1]) {\n\t\t\tthis.toggle_loading(true);\n\t\t\t// different report\n\t\t\tthis.load_report();\n\t\t} else {\n\t\t\t// same report\n\t\t\tthis.refresh_report();\n\t\t}\n\t}\n\n\tload_report() {\n\t\tthis.route = frappe.get_route();\n\t\tthis.page_name = frappe.get_route_str();\n\t\tthis.report_name = this.route[1];\n\t\tthis.page_title = __(this.report_name);\n\t\tthis.menu_items = this.get_menu_items();\n\t\tthis.datatable = null;\n\n\t\tfrappe.run_serially([\n\t\t\t() => this.get_report_doc(),\n\t\t\t() => this.get_report_settings(),\n\t\t\t() => this.setup_page_head(),\n\t\t\t() => this.refresh_report()\n\t\t]);\n\t}\n\n\trefresh_report() {\n\t\tthis.toggle_message(true);\n\n\t\treturn frappe.run_serially([\n\t\t\t() => this.setup_filters(),\n\t\t\t() => this.set_route_filters(),\n\t\t\t() => this.report_settings.onload && this.report_settings.onload(this),\n\t\t\t() => this.get_user_settings(),\n\t\t\t() => this.refresh(),\n\t\t\t() => this.save_user_settings()\n\t\t]);\n\t}\n\n\tget_report_doc() {\n\t\treturn frappe.model.with_doc('Report', this.report_name)\n\t\t\t.then(doc => {\n\t\t\t\tthis.report_doc = doc;\n\t\t\t})\n\t\t\t.then(() => frappe.model.with_doc('DocType', this.report_doc.ref_doctype));\n\t}\n\n\tget_report_settings() {\n\t\tif (frappe.query_reports[this.report_name]) {\n\t\t\tthis.report_settings = frappe.query_reports[this.report_name];\n\t\t\treturn this._load_script;\n\t\t}\n\n\t\tthis._load_script = (new Promise(resolve => frappe.call({\n\t\t\tmethod: 'frappe.desk.query_report.get_script',\n\t\t\targs: { report_name: this.report_name },\n\t\t\tcallback: resolve\n\t\t}))).then(r => {\n\t\t\tfrappe.dom.eval(r.message.script || '');\n\t\t\treturn r;\n\t\t}).then(r => {\n\t\t\treturn frappe.after_ajax(() => {\n\t\t\t\tthis.report_settings = frappe.query_reports[this.report_name];\n\t\t\t\tthis.report_settings.html_format = r.message.html_format;\n\t\t\t});\n\t\t});\n\n\t\treturn this._load_script;\n\t}\n\n\tsetup_filters() {\n\t\tthis.clear_filters();\n\t\tconst { filters = [] } = this.report_settings;\n\n\t\tthis.filters = filters.map(df => {\n\t\t\tif (df.fieldtype === 'Break') return;\n\n\t\t\tconst f = this.page.add_field(df);\n\n\t\t\tif (df.default) {\n\t\t\t\tf.set_input(df.default);\n\t\t\t}\n\n\t\t\tif (df.get_query) f.get_query = df.get_query;\n\t\t\tif (df.on_change) f.on_change = df.on_change;\n\t\t\tdf.onchange = () => {\n\t\t\t\tif (f.on_change) {\n\t\t\t\t\tf.on_change(this);\n\t\t\t\t} else {\n\t\t\t\t\tthis.refresh();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn f;\n\t\t}).filter(Boolean);\n\n\t\tif (this.filters.length === 0) {\n\t\t\t// hide page form if no filters\n\t\t\tthis.page.hide_form();\n\t\t} else {\n\t\t\tthis.page.show_form();\n\t\t}\n\n\t\t// set the field 'query_report_filters_by_name' first\n\t\t// as they can be used in\n\t\t// setting/triggering the filters\n\t\tthis.set_filters_by_name();\n\t}\n\n\tset_filters_by_name() {\n\t\tfrappe.query_report_filters_by_name = {};\n\t\tfor (var i in this.filters) {\n\t\t\tfrappe.query_report_filters_by_name[this.filters[i].df.fieldname] = this.filters[i];\n\t\t}\n\t}\n\n\tset_route_filters() {\n\t\tif(frappe.route_options) {\n\t\t\tconst fields = Object.keys(frappe.route_options);\n\t\t\tconst filters_to_set = this.filters.filter(f => fields.includes(f.df.fieldname));\n\n\t\t\tconst promises = filters_to_set.map(f => {\n\t\t\t\treturn () => {\n\t\t\t\t\tconst value = frappe.route_options[f.df.fieldname];\n\t\t\t\t\treturn f.set_value(value);\n\t\t\t\t};\n\t\t\t});\n\t\t\tpromises.push(() => {\n\t\t\t\tfrappe.route_options = null;\n\t\t\t});\n\n\t\t\treturn frappe.run_serially(promises);\n\t\t}\n\t}\n\n\tclear_filters() {\n\t\tthis.page.clear_fields();\n\t}\n\n\trefresh() {\n\t\tthis.toggle_message(true);\n\t\tconst filters = this.get_filter_values(true);\n\t\treturn new Promise(resolve => frappe.call({\n\t\t\tmethod: 'frappe.desk.query_report.run',\n\t\t\ttype: 'GET',\n\t\t\targs: {\n\t\t\t\treport_name: this.report_name,\n\t\t\t\tfilters: filters\n\t\t\t},\n\t\t\tcallback: resolve\n\t\t})).then(r => {\n\t\t\tconst data = r.message;\n\n\t\t\tthis.toggle_message(false);\n\n\t\t\tif (data.result && data.result.length) {\n\t\t\t\tthis.render_chart(data);\n\t\t\t\tthis.render_report(data);\n\t\t\t} else {\n\t\t\t\tthis.toggle_nothing_to_show(true);\n\t\t\t}\n\t\t});\n\t}\n\n\trender_report(data) {\n\t\tthis.columns = this.prepare_columns(data.columns);\n\t\tthis.data = this.prepare_data(data.result);\n\t\tthis.tree_report = this.data.some(d => 'indent' in d);\n\n\t\tconst columns = this.get_visible_columns();\n\t\tif (this.datatable) {\n\t\t\tthis.datatable.refresh(this.data, columns);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.datatable = new DataTable(this.$report[0], {\n\t\t\tcolumns: columns,\n\t\t\tdata: this.data,\n\t\t\tinlineFilters: true,\n\t\t\ttreeView: this.tree_report,\n\t\t\tlayout: 'fixed',\n\t\t\tevents: {\n\t\t\t\tonRemoveColumn: () => this.save_user_settings(),\n\t\t\t\tonSwitchColumn: () => this.save_user_settings()\n\t\t\t}\n\t\t});\n\t}\n\n\trender_chart(data) {\n\t\tthis.$chart.empty();\n\t\tlet opts = this.report_settings.get_chart_data\n\t\t\t? this.report_settings.get_chart_data(data.columns, data.result)\n\t\t\t: data.chart\n\t\t\t\t? data.chart\n\t\t\t\t: {};\n\t\tif (!(opts.data && opts.data.labels && opts.data.labels.length > 0)) return;\n\n\t\tObject.assign(opts, {\n\t\t\theight: 200\n\t\t});\n\n\t\tthis.$chart.show();\n\t\tthis.chart = new Chart(this.$chart[0], opts);\n\t}\n\n\tget_user_settings() {\n\t\treturn frappe.model.user_settings.get(this.report_name)\n\t\t\t.then(user_settings => {\n\t\t\t\tthis.user_settings = user_settings;\n\t\t\t});\n\t}\n\n\tsave_user_settings(clear_settings = false) {\n\t\tif (clear_settings) {\n\t\t\treturn frappe.model.user_settings.save(this.report_name, 'column_order', []);\n\t\t}\n\t\tif (!this.datatable) return;\n\t\tconst column_order = this.datatable.datamanager.getColumns(true).map(col => col.id);\n\t\treturn frappe.model.user_settings.save(this.report_name, 'column_order', column_order);\n\t}\n\n\tprepare_columns(columns) {\n\t\treturn columns.map(column => {\n\t\t\tif (typeof column === 'string') {\n\t\t\t\tif (column.includes(':')) {\n\t\t\t\t\tlet [label, fieldtype, width] = column.split(':');\n\t\t\t\t\tlet options;\n\n\t\t\t\t\tif (fieldtype.includes('/')) {\n\t\t\t\t\t\t[fieldtype, options] = fieldtype.split('/');\n\t\t\t\t\t}\n\n\t\t\t\t\tcolumn = {\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t\tfieldname: label,\n\t\t\t\t\t\tfieldtype,\n\t\t\t\t\t\twidth,\n\t\t\t\t\t\toptions\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tcolumn = {\n\t\t\t\t\t\tlabel: column,\n\t\t\t\t\t\tfieldname: column,\n\t\t\t\t\t\tfieldtype: 'Data'\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Object.assign(column, {\n\t\t\t\tid: column.fieldname,\n\t\t\t\tname: column.label,\n\t\t\t\twidth: parseInt(column.width) || null,\n\t\t\t\teditable: false,\n\t\t\t\tformat: (value, row, column, data) =>\n\t\t\t\t\tfrappe.format(value || '', column,\n\t\t\t\t\t\t{for_print: false, always_show_decimals: true}, data)\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_data(data) {\n\t\treturn data.map(row => {\n\t\t\tlet row_obj = {};\n\t\t\tif (Array.isArray(row)) {\n\t\t\t\tthis.columns.forEach((column, i) => {\n\t\t\t\t\trow_obj[column.id] = row[i] || null;\n\t\t\t\t});\n\n\t\t\t\treturn row_obj;\n\t\t\t}\n\t\t\treturn row;\n\t\t});\n\t}\n\n\tget_visible_columns() {\n\t\t// return columns according to user_settings\n\n\t\tif (this.user_settings.column_order && this.user_settings.column_order.length > 0) {\n\t\t\treturn this.user_settings.column_order\n\t\t\t\t.map(id => this.columns.find(col => col.id === id))\n\t\t\t\t.filter(Boolean);\n\t\t} else {\n\t\t\treturn this.columns;\n\t\t}\n\t}\n\n\tget_filter_values(raise) {\n\t\tconst mandatory = this.filters.filter(f => f.df.reqd);\n\t\tconst missing_mandatory = mandatory.filter(f => !f.get_value());\n\n\t\tif (raise && missing_mandatory.length > 0) {\n\t\t\t// this.chart_area.hide();\n\t\t\t// this.wrapper.find('.waiting-area').empty().toggle(false);\n\t\t\t// this.$no_result.html(__('Please set filters')).show();\n\t\t\tif (raise) {\n\t\t\t\tfrappe.throw(__('Filter missing: {0}', [missing_mandatory.map(f => f.df.label).join(', ')]));\n\t\t\t}\n\t\t}\n\n\t\tconst filters = this.filters\n\t\t\t.filter(f => f.get_value())\n\t\t\t.map(f => {\n\t\t\t\tvar v = f.get_value();\n\t\t\t\t// hidden fields dont have $input\n\t\t\t\tif(f.df.hidden) v = f.value;\n\t\t\t\tif(v === '%') v = null;\n\t\t\t\treturn {\n\t\t\t\t\t[f.df.fieldname]: v\n\t\t\t\t};\n\t\t\t})\n\t\t\t.reduce((acc, f) => {\n\t\t\t\tObject.assign(acc, f);\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\n\t\treturn filters;\n\t}\n\n\tset_breadcrumbs() {\n\t\tif (!this.report_doc || !this.report_doc.ref_doctype) return;\n\t\tconst ref_doctype = frappe.get_meta(this.report_doc.ref_doctype);\n\t\tfrappe.breadcrumbs.add(ref_doctype.module);\n\t}\n\n\tprint_report(print_settings) {\n\t\tconst custom_format = this.report_settings.html_format || null;\n\t\tconst filters_html = this.get_filters_html_for_print();\n\n\t\tfrappe.render_grid({\n\t\t\ttemplate: custom_format,\n\t\t\ttitle: __(this.report_name),\n\t\t\tsubtitle: filters_html,\n\t\t\tprint_settings: print_settings,\n\t\t\tfilters: this.get_filter_values(),\n\t\t\tdata: custom_format ? this.data : this.get_data_for_print(),\n\t\t\tcolumns: custom_format ? this.columns: this.get_visible_columns(),\n\t\t\treport: this\n\t\t});\n\t}\n\n\tpdf_report(print_settings) {\n\t\tconst base_url = frappe.urllib.get_base_url();\n\t\tconst print_css = frappe.boot.print_css;\n\t\tconst landscape = print_settings.orientation == 'Landscape';\n\n\t\tconst custom_format = this.report_settings.html_format || null;\n\t\tconst columns = custom_format ? this.columns : this.get_visible_columns();\n\t\tconst data = custom_format ? this.data : this.get_data_for_print();\n\t\tconst applied_filters = this.get_filter_values();\n\n\t\tconst filters_html = this.get_filters_html_for_print();\n\t\tconst content = frappe.render_template(custom_format || 'print_grid', {\n\t\t\ttitle: __(this.report_name),\n\t\t\tsubtitle: filters_html,\n\t\t\tfilters: applied_filters,\n\t\t\tdata: data,\n\t\t\tcolumns: columns,\n\t\t\treport: this\n\t\t});\n\n\t\t// Render Report in HTML\n\t\tconst html = frappe.render_template('print_template', {\n\t\t\ttitle: __(this.report_name),\n\t\t\tcontent: content,\n\t\t\tbase_url: base_url,\n\t\t\tprint_css: print_css,\n\t\t\tprint_settings: print_settings,\n\t\t\tlandscape: landscape,\n\t\t\tcolumns: columns\n\t\t});\n\n\t\tfrappe.render_pdf(html, print_settings);\n\t}\n\n\tget_filters_html_for_print() {\n\t\tconst applied_filters = this.get_filter_values();\n\t\treturn Object.keys(applied_filters)\n\t\t\t.map(filter_name => {\n\t\t\t\tconst label = frappe.query_report_filters_by_name[filter_name].df.label;\n\t\t\t\tconst value = applied_filters[filter_name];\n\t\t\t\treturn `<h6>${__(label)}: ${value}</h6>`;\n\t\t\t})\n\t\t\t.join('');\n\t}\n\n\texport_report() {\n\t\tif (this.export_dialog) {\n\t\t\tthis.export_dialog.clear();\n\t\t\tthis.export_dialog.show();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.export_dialog = frappe.prompt({\n\t\t\tlabel: __('Select File Format'),\n\t\t\tfieldname: 'file_format',\n\t\t\tfieldtype: 'Select',\n\t\t\toptions: ['Excel', 'CSV'],\n\t\t\tdefault: 'Excel',\n\t\t\treqd: 1\n\t\t}, ({ file_format }) => {\n\t\t\tif (file_format === 'CSV') {\n\t\t\t\tconst column_row = this.columns.map(col => col.label);\n\t\t\t\tconst data = this.get_data_for_csv();\n\t\t\t\tconst out = [column_row].concat(data);\n\n\t\t\t\tfrappe.tools.downloadify(out, null, this.report_name);\n\t\t\t} else {\n\t\t\t\tconst filters = this.get_filter_values(true);\n\n\t\t\t\tconst args = {\n\t\t\t\t\tcmd: 'frappe.desk.query_report.export_query',\n\t\t\t\t\treport_name: this.report_name,\n\t\t\t\t\tfile_format_type: file_format,\n\t\t\t\t\tfilters: filters,\n\t\t\t\t\tvisible_idx: this.datatable.datamanager.getFilteredRowIndices(),\n\t\t\t\t};\n\n\t\t\t\topen_url_post(frappe.request.url, args);\n\t\t\t}\n\t\t}, __('Export Report: '+ this.report_name), __('Download'));\n\t}\n\n\tget_data_for_csv() {\n\t\tconst indices = this.datatable.datamanager.getFilteredRowIndices();\n\t\tconst out = indices.map(i => this.datatable.datamanager.getRow(i).map(c => c.content));\n\t\treturn out.map(row => row.slice(1));\n\t}\n\n\tget_data_for_print() {\n\t\tconst indices = this.datatable.datamanager.getFilteredRowIndices();\n\t\treturn indices.map(i => this.data[i]);\n\t}\n\n\tget_columns_for_print() {\n\t\treturn this.columns || [];\n\t}\n\n\tget_menu_items() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tlabel: __('Refresh'),\n\t\t\t\taction: () => this.refresh(),\n\t\t\t\tclass: 'visible-xs'\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Edit'),\n\t\t\t\taction: () => frappe.set_route('Form', 'Report', this.report_name),\n\t\t\t\tcondition: () => frappe.user.is_report_manager(),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.ui.get_print_settings(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tprint_settings => this.print_report(print_settings),\n\t\t\t\t\t\tthis.report_doc.letter_head\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tcondition: () => frappe.model.can_print(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('PDF'),\n\t\t\t\taction: () => {\n\t\t\t\t\tfrappe.ui.get_print_settings(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\tprint_settings => this.pdf_report(print_settings),\n\t\t\t\t\t\tthis.report_doc.letter_head\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tcondition: () => frappe.model.can_print(this.report_doc.ref_doctype),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Export'),\n\t\t\t\taction: () => this.export_report(),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Setup Auto Email'),\n\t\t\t\taction: () => frappe.set_route('List', 'Auto Email Report', {'report' : this.report_name}),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('User Permissions'),\n\t\t\t\taction: () => frappe.set_route('List', 'User Permission', {\n\t\t\t\t\tdoctype: 'Report',\n\t\t\t\t\tname: this.report_name\n\t\t\t\t}),\n\t\t\t\tcondition: () => frappe.model.can_set_user_permissions('Report'),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Clear User Settings'),\n\t\t\t\taction: () => this.save_user_settings(true).then(() => this.refresh_report()),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tlabel: __('Add to Desktop'),\n\t\t\t\taction: () => frappe.add_to_desktop(this.report_name, null, this.report_name),\n\t\t\t\tstandard: true\n\t\t\t},\n\t\t];\n\t}\n\n\tsetup_page_head() {\n\t\tsuper.setup_page_head();\n\t\tthis.page.set_title_sub(`<label class='label label-warning text-color'>${__('Beta')}</label>`);\n\t}\n\n\tsetup_report_wrapper() {\n\t\tif (this.$report) return;\n\t\tthis.$chart = $('<div class=\"chart-wrapper\">').hide().appendTo(this.page.main);\n\t\tthis.$report = $('<div class=\"report-wrapper\">').appendTo(this.page.main);\n\t\tthis.$message = $(this.message_div('')).hide().appendTo(this.page.main);\n\t}\n\n\tmessage_div(message) {\n\t\treturn `<div class='flex justify-center align-center text-muted' style='height: 50vh;'>\n\t\t\t<div>${message}</div>\n\t\t</div>`;\n\t}\n\n\ttoggle_loading(flag) {\n\t\tthis.toggle_message(flag, __('Loading') + '...');\n\t}\n\n\ttoggle_nothing_to_show(flag) {\n\t\tthis.toggle_message(flag, __('Nothing to show'));\n\t}\n\n\ttoggle_message(flag, message) {\n\t\tif (flag) {\n\t\t\tthis.$message.find('div').html(message);\n\t\t\tthis.$message.show();\n\t\t} else {\n\t\t\tthis.$message.hide();\n\t\t}\n\t\tthis.$report.toggle(!flag);\n\t\tthis.$chart.toggle(!flag);\n\t}\n\n\t// backward compatibility\n\tget get_values() {\n\t\treturn this.get_filter_values;\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nimport DataTable from 'frappe-datatable';\nfrappe.provide(\"frappe.report_dump\");\n\n$.extend(frappe.report_dump, {\n\tdata: {},\n\tlast_modified: {},\n\twith_data: function(doctypes, callback) {\n\t\tvar pre_loaded = Object.keys(frappe.report_dump.last_modified);\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.desk.report_dump.get_data\",\n\t\t\ttype: \"GET\",\n\t\t\targs: {\n\t\t\t\tdoctypes: doctypes,\n\t\t\t\tlast_modified: frappe.report_dump.last_modified\n\t\t\t},\n\t\t\tfreeze: true,\n\t\t\tcallback: function(r) {\n\t\t\t\t// creating map of data from a list\n\t\t\t\t$.each(r.message, function(doctype, doctype_data) {\n\t\t\t\t\tfrappe.report_dump.set_data(doctype, doctype_data);\n\t\t\t\t});\n\n\t\t\t\t// reverse map names\n\t\t\t\t$.each(r.message, function(doctype, doctype_data) {\n\t\t\t\t\t// only if not pre-loaded\n\t\t\t\t\tif(!in_list(pre_loaded, doctype)) {\n\t\t\t\t\t\tif(doctype_data.links) {\n\t\t\t\t\t\t\t$.each(frappe.report_dump.data[doctype], function(row_idx, row) {\n\t\t\t\t\t\t\t\t$.each(doctype_data.links, function(link_key, link) {\n\t\t\t\t\t\t\t\t\tif(frappe.report_dump.data[link[0]][row[link_key]]) {\n\t\t\t\t\t\t\t\t\t\trow[link_key] = frappe.report_dump.data[link[0]][row[link_key]][link[1]];\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\trow[link_key] = null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t},\n\tset_data: function(doctype, doctype_data) {\n\t\tvar data = [];\n\t\tvar replace_dict = {};\n\t\tvar make_row = function(d) {\n\t\t\tvar row = {};\n\t\t\t$.each(doctype_data.columns, function(idx, col) {\n\t\t\t\trow[col] = d[idx];\n\t\t\t});\n\t\t\trow.id = row.name;\n\t\t\trow.doctype = doctype;\n\t\t\treturn row;\n\t\t};\n\t\tif(frappe.report_dump.last_modified[doctype]) {\n\t\t\t// partial loading, make a name dict\n\t\t\t$.each(doctype_data.data, function(i, d) {\n\t\t\t\tvar row = make_row(d);\n\t\t\t\treplace_dict[row.name] = row;\n\t\t\t});\n\n\t\t\t// replace old data\n\t\t\t$.each(frappe.report_dump.data[doctype], function(i, d) {\n\t\t\t\tif(replace_dict[d.name]) {\n\t\t\t\t\tdata.push(replace_dict[d.name]);\n\t\t\t\t\tdelete replace_dict[d.name];\n\t\t\t\t} else if(doctype_data.modified_names.indexOf(d.name)!==-1) {\n\t\t\t\t\t// if modified but not in replace_dict, then assume it as cancelled\n\t\t\t\t\t// don't push in data\n\t\t\t\t} else {\n\t\t\t\t\tdata.push(d);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// add new records\n\t\t\t$.each(replace_dict, function(name, d) {\n\t\t\t\tdata.push(d);\n\t\t\t});\n\t\t} else {\n\n\t\t\t// first loading\n\t\t\t$.each(doctype_data.data, function(i, d) {\n\t\t\t\tdata.push(make_row(d));\n\t\t\t});\n\t\t}\n\t\tfrappe.report_dump.last_modified[doctype] = doctype_data.last_modified;\n\t\tfrappe.report_dump.data[doctype] = data;\n\t}\n});\n\nfrappe.provide(\"frappe.views\");\nfrappe.views.GridReport = Class.extend({\n\tinit: function(opts) {\n\t\tthis.filter_inputs = {};\n\t\tthis.preset_checks = [];\n\t\tthis.tree_grid = {show: false};\n\t\t$.extend(this, opts);\n\n\t\tthis.wrapper = $('<div class=\"grid-report\"></div>').appendTo(this.page.main);\n\t\tthis.page.main.find(\".page\").css({\"padding-top\": \"0px\"});\n\n\t\tif(this.filters) {\n\t\t\tthis.make_filters();\n\t\t}\n\t\tthis.make_waiting();\n\n\t\tthis.get_data_and_refresh();\n\t},\n\tbind_show: function() {\n\t\t// bind show event to reset cur_report_grid\n\t\t// and refresh filters from url\n\t\t// this must be called after init\n\t\t// because \"frappe.container.page\" will only be set\n\t\t// once \"load\" event is over.\n\n\t\tvar me = this;\n\t\t$(this.page).bind('show', function() {\n\t\t\t// reapply filters on show\n\t\t\tfrappe.cur_grid_report = me;\n\t\t\tme.get_data_and_refresh();\n\t\t});\n\n\t},\n\tget_data_and_refresh: function() {\n\t\tvar me = this;\n\t\tthis.get_data(function() {\n\t\t\tme.apply_filters_from_route();\n\t\t\tme.refresh();\n\t\t});\n\t},\n\tget_data: function(callback) {\n\t\tvar me = this;\n\n\t\tfrappe.report_dump.with_data(this.doctypes, function() {\n\t\t\tif(!me.setup_filters_done) {\n\t\t\t\tme.setup_filters();\n\t\t\t\tme.setup_filters_done = true;\n\t\t\t}\n\t\t\tcallback();\n\t\t});\n\t},\n\tsetup_filters: function() {\n\t\tvar me = this;\n\t\t$.each(me.filter_inputs, function(i, v) {\n\t\t\tvar opts = v.get(0).opts;\n\t\t\tif(opts.fieldtype == \"Select\" && in_list(me.doctypes, opts.link)) {\n\t\t\t\t$(v).add_options(frappe.report_dump.data[opts.link].map(d => d.name));\n\t\t\t} else if(opts.fieldtype == \"Link\" && in_list(me.doctypes, opts.link)) {\n\t\t\t\topts.list = frappe.report_dump.data[opts.link].map(d => d.name);\n\t\t\t\tme.set_autocomplete(v, opts.list);\n\t\t\t}\n\t\t});\n\n\t\t// refresh\n\t\tthis.page.set_primary_action(__(\"Refresh\"), function() {\n\t\t\tme.get_data(function() {\n\t\t\t\tme.refresh();\n\t\t\t});\n\t\t});\n\n\t\t// reset filters button\n\t\tif (this.filter_inputs) {\n\t\t\tthis.page.add_menu_item(__(\"Reset Filters\"), function() {\n\t\t\t\tme.init_filter_values();\n\t\t\t\tme.refresh();\n\t\t\t}, true);\n\t\t}\n\n\t\tthis.page.add_menu_item(__(\"Print\"), function() {\n\t\t\tfrappe.ui.get_print_settings(false, function(print_settings) {\n\t\t\t\tfrappe.render_grid({grid: me.grid, title: me.page.title, print_settings: print_settings });\n\t\t\t});\n\n\t\t}, true);\n\n\t\t// range\n\t\tthis.filter_inputs.range && this.filter_inputs.range.on(\"change\", function() {\n\t\t\tme.refresh();\n\t\t});\n\t},\n\tset_filter: function(key, value) {\n\t\tvar filters = this.filter_inputs[key];\n\t\tif(filters) {\n\t\t\tvar opts = filters.get(0).opts;\n\t\t\tif(opts.fieldtype === \"Check\") {\n\t\t\t\tfilters.prop(\"checked\", cint(value) ? true : false);\n\t\t\t} if(opts.fieldtype==\"Date\") {\n\t\t\t\tfilters.val(frappe.datetime.str_to_user(value));\n\t\t\t} else {\n\t\t\t\tfilters.val(value);\n\t\t\t}\n\t\t} else {\n\t\t\tfrappe.msgprint(__(\"Invalid Filter: {0}\", [key]));\n\t\t}\n\t},\n\tset_autocomplete: function($filter, list) {\n\t\tvar me = this;\n\t\tnew Awesomplete($filter.get(0), {\n\t\t\tlist: list\n\t\t});\n\t\t$filter.on(\"awesomplete-select\", function(e) {\n\t\t\tvar value = e.originalEvent.text.value;\n\t\t\t$filter.val(value);\n\t\t\tme.refresh();\n\t\t});\n\t},\n\tinit_filter_values: function() {\n\t\t$.each(this.filter_inputs, function(key, filter) {\n\t\t\tvar opts = filter.get(0).opts;\n\t\t\tif(frappe.sys_defaults[key]) {\n\t\t\t\tfilter.val(frappe.sys_defaults[key]);\n\t\t\t} else if(opts.fieldtype=='Select') {\n\t\t\t\tfilter.get(0).selectedIndex = 0;\n\t\t\t} else if(opts.fieldtype=='Data') {\n\t\t\t\tfilter.val(\"\");\n\t\t\t} else if(opts.fieldtype==\"Link\") {\n\t\t\t\tfilter.val(\"\");\n\t\t\t}\n\t\t});\n\n\t\tthis.set_default_values();\n\t},\n\n\tset_default_values: function() {\n\t\tvar values = {\n\t\t\tfrom_date: frappe.datetime.str_to_user(frappe.sys_defaults.year_start_date),\n\t\t\tto_date: frappe.datetime.str_to_user(frappe.sys_defaults.year_end_date)\n\t\t};\n\n\t\tvar me = this;\n\t\t$.each(values, function(i, v) {\n\t\t\tif(me.filter_inputs[i] && !me.filter_inputs[i].val())\n\t\t\t\tme.filter_inputs[i].val(v);\n\t\t});\n\t},\n\n\tmake_filters: function() {\n\t\tvar me = this;\n\t\t$.each(this.filters, function(i, v) {\n\t\t\tv.fieldname = v.fieldname || v.label.replace(/ /g, '_').toLowerCase();\n\t\t\tvar input = null;\n\t\t\tif(v.fieldtype=='Select') {\n\t\t\t\tinput = me.page.add_select(v.label, v.options || [v.default_value]);\n\t\t\t} else if(v.fieldtype==\"Link\") {\n\t\t\t\tinput = me.page.add_data(v.label);\n\t\t\t\tnew Awesomplete(input.get(0), {\n\t\t\t\t\tlist: v.list || []\n\t\t\t\t});\n\t\t\t} else if(v.fieldtype==='Button' && v.label===__(\"Refresh\")) {\n\t\t\t\tinput = me.page.set_primary_action(v.label, null, v.icon);\n\t\t\t} else if(v.fieldtype==='Button') {\n\t\t\t\tinput = me.page.add_menu_item(v.label, null, true);\n\t\t\t} else if(v.fieldtype==='Date') {\n\t\t\t\tinput = me.page.add_date(v.label);\n\t\t\t} else if(v.fieldtype==='Label') {\n\t\t\t\tinput = me.page.add_label(v.label);\n\t\t\t} else if(v.fieldtype==='Data') {\n\t\t\t\tinput = me.page.add_data(v.label);\n\t\t\t} else if(v.fieldtype==='Check') {\n\t\t\t\tinput = me.page.add_check(v.label);\n\t\t\t}\n\n\t\t\tif(input) {\n\t\t\t\tinput && (input.get(0).opts = v);\n\t\t\t\tif(v.cssClass) {\n\t\t\t\t\tinput.addClass(v.cssClass);\n\t\t\t\t}\n\t\t\t\tinput.keypress(function(e) {\n\t\t\t\t\tif(e.which==13) {\n\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tme.filter_inputs[v.fieldname] = input;\n\t\t});\n\t},\n\tmake_waiting: function() {\n\t\tthis.waiting = frappe.messages.waiting(this.wrapper, __(\"Loading Report\")+\"...\");\n\t},\n\tload_filter_values: function() {\n\t\tvar me = this;\n\t\t$.each(this.filter_inputs, function(i, f) {\n\t\t\tvar opts = f.get(0).opts;\n\t\t\tif(opts.fieldtype=='Check') {\n\t\t\t\tme[opts.fieldname] = f.prop('checked') ? 1 : 0;\n\t\t\t} else if(opts.fieldtype!='Button') {\n\t\t\t\tme[opts.fieldname] = f.val();\n\t\t\t\tif(opts.fieldtype==\"Date\") {\n\t\t\t\t\tme[opts.fieldname] = frappe.datetime.user_to_str(me[opts.fieldname]);\n\t\t\t\t} else if (opts.fieldtype == \"Select\") {\n\t\t\t\t\tme[opts.fieldname+'_default'] = opts.default_value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(this.filter_inputs.from_date && this.filter_inputs.to_date && (this.to_date < this.from_date)) {\n\t\t\tfrappe.msgprint(__(\"From Date must be before To Date\"));\n\t\t\treturn;\n\t\t}\n\n\t},\n\n\tmake_name_map: function(data, key) {\n\t\tvar map = {};\n\t\tkey = key || \"name\";\n\t\t$.each(data, function(i, v) {\n\t\t\tmap[v[key]] = v;\n\t\t});\n\t\treturn map;\n\t},\n\n\treset_item_values: function(item) {\n\t\tvar me = this;\n\t\t$.each(this.columns, function(i, col) {\n\t\t\tif (col.formatter==me.currency_formatter) {\n\t\t\t\titem[col.id] = 0.0;\n\t\t\t}\n\t\t});\n\t},\n\n\tround_item_values: function(item) {\n\t\tvar me = this;\n\t\t$.each(this.columns, function(i, col) {\n\t\t\tif (col.formatter==me.currency_formatter) {\n\t\t\t\titem[col.id] = flt(item[col.id], frappe.defaults.get_default(\"float_precision\") || 3);\n\t\t\t}\n\t\t});\n\t},\n\n\tround_off_data: function() {\n\t\tvar me = this;\n\t\t$.each(this.data, function(i, d) {\n\t\t\tme.round_item_values(d);\n\t\t});\n\t},\n\n\trefresh: function() {\n\t\tthis.waiting.toggle(false);\n\t\tif(!this.grid_wrapper)\n\t\t\tthis.make();\n\t\t// this.show_zero = $('.show-zero input:checked').length;\n\t\tthis.load_filter_values();\n\t\tthis.setup_columns();\n\t\tthis.setup_dataview_columns();\n\t\tthis.apply_link_formatters();\n\t\tthis.prepare_data();\n\t\tthis.round_off_data();\n\t\tthis.prepare_data_view();\n\t\t// chart might need prepared data\n\t\tfrappe.show_alert(\"Updated\", 2);\n\t\tthis.render();\n\t\tthis.setup_chart && this.setup_chart();\n\t},\n\tsetup_dataview_columns: function() {\n\t\tthis.columns = this.columns.filter(col => !col.hidden);\n\t\tthis.datatable_columns = this.columns.map(column => {\n\t\t\treturn Object.assign(column, {\n\t\t\t\tformat: (value, row, column, data) => {\n\t\t\t\t\treturn column.formatter ?\n\t\t\t\t\t\tcolumn.formatter(row, {}, value, column, data) :\n\t\t\t\t\t\tvalue || '';\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tmake: function() {\n\t\t// chart wrapper\n\t\tthis.chart_area = $('<div class=\"chart\" style=\"padding-bottom: 1px\"></div>').appendTo(this.wrapper);\n\n\t\tthis.page.add_menu_item(__(\"Export\"), () =>  this.export(), true);\n\n\t\t// grid wrapper\n\t\tthis.grid_wrapper = $(\"<div style='height: 500px;'>\")\n\t\t\t.appendTo(this.wrapper);\n\t\tthis.id = frappe.dom.set_unique_id(this.grid_wrapper.get(0));\n\n\t\tthis.bind_show();\n\n\t\tfrappe.cur_grid_report = this;\n\t\t$(this.wrapper).trigger('make');\n\n\t},\n\tapply_filters_from_route: function() {\n\t\tvar me = this;\n\t\tif(frappe.route_options) {\n\t\t\t$.each(frappe.route_options, function(key, value) {\n\t\t\t\tme.set_filter(key, value);\n\t\t\t});\n\t\t\tfrappe.route_options = null;\n\t\t} else {\n\t\t\tthis.init_filter_values();\n\t\t}\n\t\tthis.set_default_values();\n\n\t\t$(this.wrapper).trigger('apply_filters_from_route');\n\t},\n\toptions: {\n\t\teditable: false,\n\t\tenableColumnReorder: false\n\t},\n\trender: function() {\n\t\tthis.datatable = new DataTable('#' + this.id, {\n\t\t\tcolumns: this.datatable_columns,\n\t\t\tdata: this.data,\n\t\t\tlayout: 'fixed',\n\t\t\tinlineFilters: true,\n\t\t\ttreeView: true,\n\t\t\tcheckboxColumn: true,\n\t\t\tcheckedRowStatus: false,\n\t\t\tevents: {\n\t\t\t\tonCheckRow: (row) => {\n\t\t\t\t\tconst rowIndex = row.meta.rowIndex;\n\t\t\t\t\tconst checked = this.datatable.rowmanager.checkMap[rowIndex];\n\t\t\t\t\tconst data = this.datatable.datamanager.getData(rowIndex);\n\t\t\t\t\tdata.checked = Boolean(checked);\n\n\t\t\t\t\tthis.setup_chart && this.setup_chart();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.data.forEach((d, i) => {\n\t\t\tif (d.checked) {\n\t\t\t\tthis.datatable.rowmanager.checkRow(i, true);\n\t\t\t}\n\t\t});\n\t},\n\tprepare_data_view: function() {\n\t},\n\texport: function() {\n\t\tfrappe.tools.downloadify(frappe.slickgrid_tools.get_view_data(this.columns, this.dataView),\n\t\t\t[\"Report Manager\", \"System Manager\"], this.title);\n\t\treturn false;\n\t},\n\tapply_filters: function(item) {\n\t\t// generic filter: apply filter functiions\n\t\t// from all filter_inputs\n\t\tvar filters = this.filter_inputs;\n\t\tif(item._show) return true;\n\n\t\tfor (var i in filters) {\n\t\t\tif(!this.apply_filter(item, i)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\tapply_filter: function(item, fieldname) {\n\t\tvar filter = this.filter_inputs[fieldname].get(0);\n\t\tif(filter.opts.filter) {\n\t\t\tif(!filter.opts.filter(this[filter.opts.fieldname], item, filter.opts, this)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t},\n\tapply_zero_filter: function(val, item, opts, me) {\n\t\t// show only non-zero values\n\t\tif(!me.show_zero) {\n\t\t\tfor(var i=0, j=me.columns.length; i<j; i++) {\n\t\t\t\tvar col = me.columns[i];\n\t\t\t\tif(col.formatter==me.currency_formatter && !col.hidden) {\n\t\t\t\t\tif(flt(item[col.field]) > 0.001 ||  flt(item[col.field]) < -0.001) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\tshow_zero_check: function() {\n\t\tvar me = this;\n\t\tthis.wrapper.bind('make', function() {\n\t\t\tme.wrapper.find('.show-zero').toggle(true).find('input').click(function(){\n\t\t\t\tme.refresh();\n\t\t\t});\n\t\t});\n\t},\n\tis_default: function(fieldname) {\n\t\treturn this[fieldname]==this[fieldname + \"_default\"];\n\t},\n\tdate_formatter: function(row, cell, value) {\n\t\treturn frappe.datetime.str_to_user(value);\n\t},\n\tcurrency_formatter: function(row, cell, value, columnDef, dataContext) {\n\t\tif (isNaN(value)) value = '';\n\t\treturn repl('<div style=\"text-align: right; %(_style)s\">%(value)s</div>', {\n\t\t\t_style: dataContext._style || \"\",\n\t\t\tvalue: ((value==null || value===\"\") ? \"\" : format_number(value))\n\t\t});\n\t},\n\ttext_formatter: function(row, cell, value, columnDef, dataContext) {\n\t\treturn repl('<span style=\"%(_style)s\" title=\"%(esc_value)s\">%(value)s</span>', {\n\t\t\t_style: dataContext._style || \"\",\n\t\t\tesc_value: cstr(value).replace(/\"/g, '\\\\\"'),\n\t\t\tvalue: cstr(value)\n\t\t});\n\t},\n\tcheck_formatter: function(row, cell, value, columnDef, dataContext) {\n\t\treturn repl('<input type=\"checkbox\" data-id=\"%(id)s\" \\\n\t\t\tclass=\"chart-check\" %(checked)s>', {\n\t\t\t\t\"id\": dataContext.id,\n\t\t\t\t\"checked\": dataContext.checked ? 'checked=\"checked\"' : \"\"\n\t\t\t});\n\t},\n\tapply_link_formatters: function() {\n\t\t$.each(this.columns, function(i, col) {\n\t\t\tif(col.link_formatter) {\n\t\t\t\tcol.formatter = function(row, cell, value, columnDef, dataContext, for_print) {\n\t\t\t\t\t// added link and open button to links\n\t\t\t\t\t// link_formatter must have\n\t\t\t\t\t// filter_input, open_btn (true / false), doctype (will be eval'd)\n\t\t\t\t\tif(!value) return \"\";\n\n\t\t\t\t\tif(for_print) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar me = frappe.cur_grid_report;\n\n\t\t\t\t\tif(dataContext._show) {\n\t\t\t\t\t\treturn repl('<span style=\"%(_style)s\">%(value)s</span>', {\n\t\t\t\t\t\t\t_style: dataContext._style || \"\",\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// make link to add a filter\n\t\t\t\t\tvar html;\n\t\t\t\t\tvar link_formatter = me.dataview_columns[cell].link_formatter;\n\t\t\t\t\tif (link_formatter.filter_input) {\n\t\t\t\t\t\thtml = repl('<a href=\"#\" \\\n\t\t\t\t\t\t\tonclick=\"frappe.cur_grid_report.set_filter(\\'%(col_name)s\\', \\'%(value)s\\'); \\\n\t\t\t\t\t\t\t\tfrappe.cur_grid_report.refresh(); return false;\">\\\n\t\t\t\t\t\t\t%(value)s</a>', {\n\t\t\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\t\t\tcol_name: link_formatter.filter_input,\n\t\t\t\t\t\t\t\tpage_name: frappe.container.page.page_name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\thtml = value;\n\t\t\t\t\t}\n\n\t\t\t\t\t// make icon to open form\n\t\t\t\t\tif(link_formatter.open_btn) {\n\t\t\t\t\t\tvar doctype = link_formatter.doctype\n\t\t\t\t\t\t\t? eval(link_formatter.doctype)\n\t\t\t\t\t\t\t: dataContext.doctype;\n\t\t\t\t\t\thtml += me.get_link_open_icon(doctype, value);\n\t\t\t\t\t}\n\t\t\t\t\treturn html;\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t},\n\tget_link_open_icon: function(doctype, name) {\n\t\treturn repl(' <a href=\"#Form/%(doctype)s/%(name)s\">\\\n\t\t\t<i class=\"fa fa-share\" style=\"cursor: pointer;\"></i></a>', {\n\t\t\t\tdoctype: doctype,\n\t\t\t\tname: encodeURIComponent(name)\n\t\t\t});\n\t},\n\tmake_date_range_columns: function() {\n\t\tthis.columns = [];\n\n\t\tvar me = this;\n\t\tvar range = this.filter_inputs.range.val();\n\t\tthis.from_date = frappe.datetime.user_to_str(this.filter_inputs.from_date.val());\n\t\tthis.to_date = frappe.datetime.user_to_str(this.filter_inputs.to_date.val());\n\t\tvar date_diff = frappe.datetime.get_diff(this.to_date, this.from_date);\n\n\t\tme.column_map = {};\n\t\tme.last_date = null;\n\n\t\tvar add_column = function(date) {\n\t\t\tme.columns.push({\n\t\t\t\tid: date,\n\t\t\t\tname: frappe.datetime.str_to_user(date),\n\t\t\t\tfield: date,\n\t\t\t\tformatter: me.currency_formatter,\n\t\t\t\twidth: 100\n\t\t\t});\n\t\t};\n\n\t\tvar build_columns = function(condition) {\n\t\t\t// add column for each date range\n\t\t\tfor(var i=0; i <= date_diff; i++) {\n\t\t\t\tvar date = frappe.datetime.add_days(me.from_date, i);\n\t\t\t\tif(!condition) condition = () => true;\n\n\t\t\t\tif(condition(date)) add_column(date);\n\t\t\t\tme.last_date = date;\n\n\t\t\t\tif(me.columns.length) {\n\t\t\t\t\tme.column_map[date] = me.columns[me.columns.length-1];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// make columns for all date ranges\n\t\tif(range=='Daily') {\n\t\t\tbuild_columns();\n\t\t} else if(range=='Weekly') {\n\t\t\tbuild_columns(function(date) {\n\t\t\t\tif(!me.last_date) return true;\n\t\t\t\treturn !(frappe.datetime.get_diff(date, me.from_date) % 7);\n\t\t\t});\n\t\t} else if(range=='Monthly') {\n\t\t\tbuild_columns(function(date) {\n\t\t\t\tif(!me.last_date) return true;\n\t\t\t\treturn frappe.datetime.str_to_obj(me.last_date).getMonth() != frappe.datetime.str_to_obj(date).getMonth();\n\t\t\t});\n\t\t} else if(range=='Quarterly') {\n\t\t\tbuild_columns(function(date) {\n\t\t\t\tif(!me.last_date) return true;\n\t\t\t\treturn frappe.datetime.str_to_obj(date).getDate()==1 && in_list([0,3,6,9], frappe.datetime.str_to_obj(date).getMonth());\n\t\t\t});\n\t\t} else if(range=='Yearly') {\n\t\t\tbuild_columns(function(date) {\n\t\t\t\tif(!me.last_date) return true;\n\t\t\t\treturn $.map(frappe.report_dump.data['Fiscal Year'], function(v) {\n\t\t\t\t\treturn date==v.year_start_date ? true : null;\n\t\t\t\t}).length;\n\t\t\t});\n\n\t\t}\n\n\t\t// set label as last date of period\n\t\t$.each(this.columns, function(i, col) {\n\t\t\tcol.name = me.columns[i+1]\n\t\t\t\t? frappe.datetime.str_to_user(frappe.datetime.add_days(me.columns[i+1].id, -1))\n\t\t\t\t: frappe.datetime.str_to_user(me.to_date);\n\t\t});\n\t},\n\ttrigger_refresh_on_change: function(filters) {\n\t\tvar me = this;\n\t\t$.each(filters, function(i, f) {\n\t\t\tme.filter_inputs[f] && me.filter_inputs[f].on(\"change\", function() {\n\t\t\t\tme.refresh();\n\t\t\t});\n\t\t});\n\t}\n});\n\nfrappe.views.GridReportWithPlot = frappe.views.GridReport.extend({\n\tsetup_chart: function() {\n\t\tif (in_list([\"Daily\", \"Weekly\"], this.filter_inputs.range.val())) {\n\t\t\tthis.chart_area.toggle(false);\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.chart_area.toggle(true);\n\t\t}\n\t\tvar chart_data = this.get_chart_data ? this.get_chart_data() : null;\n\n\t\tconst parent = this.wrapper.find('.chart')[0];\n\t\tthis.chart = new Chart(parent, {\n\t\t\theight: 200,\n\t\t\tdata: chart_data,\n\t\t\ttype: 'line'\n\t\t});\n\t},\n\n\tget_chart_data: function() {\n\t\tvar me = this;\n\t\tvar plottable_cols = [];\n\t\t$.each(me.columns, function(idx, col) {\n\t\t\tif(col.formatter==me.currency_formatter && !col.hidden && col.plot!==false) {\n\t\t\t\tplottable_cols.push(col.field);\n\t\t\t}\n\t\t});\n\n\t\tvar data = {\n\t\t\tlabels: plottable_cols,\n\t\t\tdatasets: []\n\t\t};\n\n\t\t$.each(this.data, function(i, item) {\n\t\t\tif (item.checked) {\n\t\t\t\tlet dataset = {};\n\t\t\t\tdataset.name = item.name;\n\t\t\t\tdataset.values = [];\n\t\t\t\t$.each(plottable_cols, function(idx, col) {\n\t\t\t\t\tdataset.values.push(item[col]);\n\t\t\t\t});\n\t\t\t\tdata[\"datasets\"].push(dataset);\n\t\t\t}\n\t\t});\n\t\treturn data;\n\t}\n});\n\n\nfrappe.views.TreeGridReport = frappe.views.GridReportWithPlot.extend({\n\tmake_transaction_list: function(parent_doctype, doctype) {\n\t\tvar me = this;\n\t\tvar tmap = {};\n\t\t$.each(frappe.report_dump.data[doctype], function(i, v) {\n\t\t\tif(!tmap[v.parent]) tmap[v.parent] = [];\n\t\t\ttmap[v.parent].push(v);\n\t\t});\n\t\tif (!this.tl) this.tl = {};\n\t\tif (!this.tl[parent_doctype]) this.tl[parent_doctype] = [];\n\n\t\t$.each(frappe.report_dump.data[parent_doctype], function(i, parent) {\n\t\t\tif(tmap[parent.name]) {\n\t\t\t\t$.each(tmap[parent.name], function(i, d) {\n\t\t\t\t\tme.tl[parent_doctype].push($.extend(copy_dict(parent), d));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\tadd_tree_grid_events: function() {\n\t\tvar me = this;\n\t\tthis.grid.onClick.subscribe(function(e, args) {\n\t\t\tif ($(e.target).hasClass(\"toggle\")) {\n\t\t\t\tvar item = me.dataView.getItem(args.row);\n\t\t\t\tif (item) {\n\t\t\t\t\tif (!item._collapsed) {\n\t\t\t\t\t\titem._collapsed = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem._collapsed = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tme.dataView.updateItem(item.id, item);\n\t\t\t\t}\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t}\n\t\t});\n\t},\n\ttree_formatter: function(row, cell, value, columnDef, dataContext) {\n\t\tvar me = frappe.cur_grid_report;\n\t\tvar data = me.data;\n\t\tvar spacer = \"<span style='display:inline-block;height:1px;width:\" +\n\t\t\t(15 * dataContext[\"indent\"]) + \"px'></span>\";\n\t\tvar idx = me.dataView.getIdxById(dataContext.id);\n\t\tvar link = me.tree_grid.formatter(dataContext);\n\n\t\tif(dataContext.doctype) {\n\t\t\tlink += me.get_link_open_icon(dataContext.doctype, dataContext.name);\n\t\t}\n\n\t\tif (data[idx + 1] && data[idx + 1].indent > data[idx].indent) {\n\t\t\tif (dataContext._collapsed) {\n\t\t\t\treturn spacer + \" <span class='toggle expand'></span>&nbsp;\" + link;\n\t\t\t} else {\n\t\t\t\treturn spacer + \" <span class='toggle collapse'></span>&nbsp;\" + link;\n\t\t\t}\n\t\t} else {\n\t\t\treturn spacer + \" <span class='toggle'></span>&nbsp;\" + link;\n\t\t}\n\t},\n\ttree_dataview_filter: function(item) {\n\t\tvar me = frappe.cur_grid_report;\n\t\tif(!me.apply_filters(item)) return false;\n\n\t\tvar parent = item[me.tree_grid.parent_field];\n\t\twhile (parent) {\n\t\t\tif (me.item_by_name[parent]._collapsed) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tparent = me.parent_map[parent];\n\t\t}\n\t\treturn true;\n\t},\n\tprepare_tree: function(item_dt, group_dt) {\n\t\tvar group_data = frappe.report_dump.data[group_dt];\n\t\tvar item_data = frappe.report_dump.data[item_dt];\n\n\t\t// prepare map with child in respective group\n\t\tvar me = this;\n\t\tvar item_group_map = {};\n\t\tvar group_ids = group_data.map(v => v.id);\n\n\t\t$.each(item_data, function(i, item) {\n\t\t\tvar parent = item[me.tree_grid.parent_field];\n\t\t\tif(!item_group_map[parent]) item_group_map[parent] = [];\n\t\t\tif(group_ids.indexOf(item.name)==-1) {\n\t\t\t\titem_group_map[parent].push(item);\n\t\t\t} else {\n\t\t\t\tfrappe.msgprint(__(\"Ignoring Item {0}, because a group exists with the same name!\", [item.name.bold()]));\n\t\t\t}\n\t\t});\n\n\t\t// arrange items besides their parent item groups\n\t\tvar items = [];\n\t\t$.each(group_data, function(i, group){\n\t\t\tgroup.is_group = true;\n\t\t\titems.push(group);\n\t\t\titems = items.concat(item_group_map[group.name] || []);\n\t\t});\n\t\treturn items;\n\t},\n\tset_indent: function() {\n\t\tvar me = this;\n\t\t$.each(this.data, function(i, d) {\n\t\t\tvar indent = 0;\n\t\t\tvar parent = me.parent_map[d.name];\n\t\t\tif(parent) {\n\t\t\t\twhile(parent) {\n\t\t\t\t\tindent++;\n\t\t\t\t\tparent = me.parent_map[parent];\n\t\t\t\t}\n\t\t\t}\n\t\t\td.indent = indent;\n\t\t});\n\t},\n\n\texport: function() {\n\t\tvar msgbox =\tfrappe.msgprint($.format('<p>{0}</p>\\\n\t\t\t<p><input type=\"checkbox\" name=\"with_groups\" checked=\"checked\"> {1}</p>\\\n\t\t\t<p><input type=\"checkbox\" name=\"with_ledgers\" checked=\"checked\"> {2}</p>\\\n\t\t\t<p><button class=\"btn btn-primary\"> {3}</button>', [\n\t\t\t\t__('Select To Download:'),\n\t\t\t\t__('With Groups'),\n\t\t\t\t__('With Ledgers'),\n\t\t\t\t__('Download')\n\t\t\t]));\n\n\t\tvar me = this;\n\n\t\t$(msgbox.body).find(\"button\").click(function() {\n\t\t\tvar with_groups = $(msgbox.body).find(\"[name='with_groups']\").prop(\"checked\");\n\t\t\tvar with_ledgers = $(msgbox.body).find(\"[name='with_ledgers']\").prop(\"checked\");\n\n\t\t\tvar data = frappe.slickgrid_tools.get_view_data(me.columns, me.dataView,\n\t\t\t\tfunction(row, item) {\n\t\t\t\t\tif(with_groups) {\n\t\t\t\t\t\t// add row\n\t\t\t\t\t\tfor(var i=0; i<item.indent; i++) row[0] = \"   \" + row[0];\n\t\t\t\t\t}\n\t\t\t\t\tif(with_groups && (item.is_group == 1 || item.is_group)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\tif(with_ledgers && (item.is_group != 1 && !item.is_group)) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\tfrappe.tools.downloadify(data, [\"Report Manager\", \"System Manager\"], me.title);\n\t\t\treturn false;\n\t\t});\n\n\t\treturn false;\n\t},\n\n});\n"],"names":["module","q","b","a","c","addEventListener","attachEvent","n","removeEventListener","detachEvent","r","Object","prototype","toString","call","m","window","getComputedStyle","currentStyle","l","document","createElement","all","innerHTML","documentMode","x","navigator","platform","toLowerCase","indexOf","p","this","rows_in_block","blocks_in_cluster","tag","show_no_data_row","no_data_class","no_data_text","keep_parity","callbacks","options","h","d","split","f","getElementById","Error","content_elem","hasAttribute","setAttribute","e","rows","fetchMarkup","g","scroll_elem","scrollTop","insertToDOM","k","t","style","pointerEvents","clearTimeout","setTimeout","getClusterNum","scrollingProgress","getScrollProgress","u","v","refresh","destroy","html","generateEmptyRow","join","getRowsHeight","update","length","item_height","clear","getRowsAmount","scroll_top","w","concat","append","prepend","constructor","getChildNodes","push","shift","outerHTML","exploreEnvironment","content_tag","tagName","match","children","data","cluster_height","Math","floor","offsetHeight","parseInt","max","block_height","rows_in_cluster","createTextNode","className","colSpan","appendChild","generate","top_offset","bottom_offset","rows_above","renderExtraTag","height","checkChanges","clusterWillChange","clusterChanged","lastChild","removeChild","firstChild","frappe","views","ReportFactory","Factory","extend","make","route","const","_route","set_route","factory","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","lastDownEl","scrollEl","scrollParentEl","scrollCustomFn","lastEl","lastCSS","lastParentCSS","oldIndex","newIndex","activeGroup","putSortable","tapEvt","touchEvt","moved","el","autoScroll","R_SPACE","R_FLOAT","expando","Date","getTime","win","$","jQuery","Zepto","Polymer","captureMode","supportDraggable","supportCssPointerEvents","userAgent","cssText","_silent","abs","min","savedInputChecked","touchDragOverListeners","_autoScroll","_throttle","evt","scroll","rect","vx","vy","scrollOffsetX","scrollOffsetY","_this","sens","scrollSensitivity","speed","scrollSpeed","clientX","y","clientY","winWidth","innerWidth","winHeight","innerHeight","scrollFn","offsetWidth","scrollWidth","scrollHeight","parentNode","getBoundingClientRect","right","left","bottom","top","clearInterval","pid","setInterval","scrollTo","pageXOffset","pageYOffset","scrollLeft","_prepareGroup","toFn","value","pull","group","name","to","from","fromGroup","originalGroup","checkPull","checkPut","put","revertClone","defineProperty","get","capture","passive","err","Sortable","nodeType","_extend","defaults","random","sort","disabled","store","handle","draggable","test","nodeName","ghostClass","chosenClass","dragClass","ignore","filter","preventOnFilter","animation","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","fn","charAt","bind","nativeDraggable","_on","_onTapStart","_onDragOver","_cloneHide","sortable","state","lastPullMode","_css","insertBefore","_animate","_closest","selector","ctx","_matches","_getParentOrHost","parent","host","event","_off","_toggleClass","classList","replace","prop","val","defaultView","_find","iterator","list","getElementsByTagName","i","_dispatchEvent","targetEl","toEl","fromEl","startIndex","createEvent","onName","toUpperCase","substr","initEvent","item","clone","dispatchEvent","_onMove","dragRect","targetRect","originalEvt","willInsertAfter","retVal","onMoveFn","onMove","dragged","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_generateId","str","src","href","sum","charCodeAt","_index","index","previousElementSibling","re","RegExp","callback","ms","args","arguments","apply","dst","key","hasOwnProperty","_clone","dom","cloneNode","_nextTick","_cancelNextTick","id","type","touch","touches","target","originalTarget","shadowRoot","path","root","inputs","idx","checked","_saveInputCheckedState","button","isContentEditable","preventDefault","some","criteria","trim","_prepareDragStart","dragStartFn","ownerDocument","nextSibling","_lastX","_lastY","_disableDelayedDrag","_triggerDragStart","forEach","_onDrop","_dragStartTimer","pointerType","_onDragStart","selection","empty","getSelection","removeAllRanges","_dragStarted","active","_nulling","_emulateDragOver","elementFromPoint","_onTouchMove","dx","dy","translate3d","_appendGhost","ghostRect","css","marginTop","marginLeft","width","body","useFallback","_offUpEvents","_cloneId","_loopId","effectAllowed","_dragStartId","revert","activeSortable","isOwner","isMovingBetweenSortable","canSort","stopPropagation","animated","contains","lastElementChild","floating","cssFloat","display","isWide","isLong","halfway","nextElementSibling","after","elTop","offsetTop","tgTop","moveVector","prevRect","currentRect","save","handleEvent","dropEffect","_globalDragOver","toArray","order","getAttribute","items","set","closest","option","Array","querySelectorAll","removeAttribute","splice","utils","on","off","find","is","throttle","toggleClass","nextTick","cancelNextTick","create","version","ie","is_mac","Clusterize","self","elem","elems","isArray","cache","last_cluster","scroll_debounce","pointer_events_set","scrollEv","resize_debounce","resizeEv","clean","force","new_rows","add","where","_new_rows","element","fnc","arr","getStyle","rows_nodes","opts","prev_item_height","nodes","node","marginBottom","td","empty_row","no_data_content","cluster_num","rows_len","items_start","items_end","this_cluster_rows","class_name","clusterize_prefix","this_cluster_content_changed","top_offset_changed","only_bottom_offset_changed","layout","last","div","child_nodes","ii","changed","definition","_interopDefault","ex","require$$0","require$$1","expr","con","querySelector","isObject","each","o","let","ref","keys","map","delegate","handler","delegatedTarget","unbind","fire","properties","j","attrs","dataset","attr","elements","styleMap","removeStyle","styleProps","includes","parseFloat","matches","inViewport","pTop","pLeft","pBottom","pRight","pixels","requestAnimationFrame","scrollbarWidth","scrollDiv","overflow","position","clientWidth","isObject_1","commonjsGlobal","global","freeGlobal","_freeGlobal","freeSelf","Function","_root","now","now_1","Symbol","_Symbol","objectProto","nativeObjectToString","symToStringTag","toStringTag","undefined","getRawTag","isOwn","unmasked","result","_getRawTag","objectProto$1","nativeObjectToString$1","objectToString","_objectToString","nullTag","undefinedTag","symToStringTag$1","baseGetTag","_baseGetTag","isObjectLike","isObjectLike_1","symbolTag","isSymbol","isSymbol_1","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","valueOf","isBinary","slice","toNumber_1","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","leadingEdge","cancel","flush","debounce_1","FUNC_ERROR_TEXT$1","throttle_1","camelCaseToDash","makeDataAttributeString","props","_key","copyTextToClipboard","text","textArea","padding","border","outline","boxShadow","background","select","execCommand","console","log","isNumeric","isNaN","throttle$1","debounce$2","context","Promise","resolve","execute","out","setImmediate","linkProperties","source","reduce","acc","defineProperties","isSet","notSet","isNumber","ensureArray","DataManager","sortRows","switchColumn","removeColumn","filterRows","init","columns","rowCount","prepareColumns","prepareRows","prepareTreeRows","prepareRowView","prepareNumericColumns","prototypeAccessors","currentSort","col","sortOrder","colIndex","validateColumns","prepareDefaultColumns","prepareHeader","checkboxColumn","hasColumnById","cell","content","getCheckboxHTML","editable","resizable","focusable","dropdown","serialNoColumn","align","baseCell","isHeader","format","prepareCell","assign","column","row0","getRow","cellValue","validateData","_getNextRowCount","row","meta","rowIndex","indent","prepareRow","nextRow","isLeaf","rowViewOrder","baseRowCell","DataError","appendRows","getColumns","_sortRows","reverseArray","aIndex","bIndex","aContent","getCell","bContent","srNoColIndex","getColumnIndexById","viewIndex","array","temporary","index1","index2","temp","newCell1","newCell2","updateRow","_row","findIndex","updateCell","newVal","updateColumn","keyValPairs","getColumn","keyword","rowsToHide","rowsToShow","hay","String","needle","_filteredRows","getFilteredRowIndices","getRowCount","getRows","start","end","getRowsForView","skipStandardColumns","getStandardColumnCount","getColumnCount","getColumnById","getChildren","parentRowIndex","parentIndent","getImmediateChildren","childIndent","getData","hasColumn","Boolean","getColumnIndex","ColumnManager","instance","bindEvents","getDropdownHTML","dropdownButton","renderHeader","header","refreshHeader","datamanager","$cols","getHeaderHTML","$filterRow","$col","sortIndicator","$columnMap","rowmanager","getRowHTML","inlineFilters","isFilter","bindDropdown","bindResizeColumn","bindMoveColumn","bindFilter","$activeDropdown","$button","$dropdown","deactivateDropdown","dropdownItems","headerDropdown","remove","$item","action","$resizingCell","startWidth","startX","isDragging","$handle","$cell","pageX","this$1","setColumnWidth","setBodyStyle","finalWidth","getColumnMinWidth","setColumnHeaderWidth","initialize","$parent","onEnd","$draggedCell","bindSortColumn","span","nextSortOrder","sortColumn","freeze","then","refreshRows","unfreeze","fireEvent","removedCol","toggleFilter","flag","showFilter","isFilterShown","focusFilter","focus","$filterCell","hideRows","showRows","_columnWidthMap","columnWidth","styles","setStyle","$column","minWidth","getFirstColumnIndex","getHeaderCell$","getLastColumnIndex","getSerialColumnIndex","CellManager","bindFocusCell","bindEditCell","bindKeyboardSelection","bindCopyCellContents","bindMouseEvents","bindTreeEvents","bindKeyboardNav","$editingCell","bodyScrollable","activateEditing","keyboard","$focusedCell","submitEditing","deactivateEditing","direction","getLeftCell$","getRightCell$","getAboveCell$","getBelowCell$","focusCell","getLeftMostCell$","getRightMostCell$","getTopMostCell$","getBottomMostCell$","focusLastCell","activateFilter","selectArea","$selectionCursor","getSelectionCursor","getNextSelectionCursor","copyCellContents","mouseDown","$toggle","openSingleNode","closeSingleNode","columnmanager","scrollToCell","skipClearSelection","clearSelection","highlightRowColumnHeader","colHeaderSelector","rowHeaderSelector","lastHeaders","colHeader","wrapper","rowHeader","backgroundColor","selectAreaOnClusterChanged","getCell$","fCell","focusCellOnClusterChanged","_selectArea","$cell1","$cell2","cells","getCellsInRange","colIndex1","rowIndex1","colIndex2","rowIndex2","cell1","cell2","isStandardCell","rowIndices","_rowIndex","_colIndex","$editCell","editor","getEditor","currentCellEditor","initValue","getDefaultEditor","$input","class","inside","getValue","setValue","done","oldValue","catch","curr","refreshCell","getCellContent","toggleTreeButton","$aboveRow","parentElement","$belowRow","getFirstRowIndex","getLastRowIndex","getCellAttr","getRowHeight","scrollToRow","getRowCountPerPage","ceil","getViewportHeight","getCellHTML","contentHTML","editCellHTML","getEditCellHTML","resizeColumn","customFormatter","treeView","addToggle","RowManager","prototypeAccessors$1","cellmanager","bindCheckbox","checkMap","$checkbox","checkAll","checkRow","renderBody","setDimensions","refreshRow","getCheckedRows","highlightCheckedRows","toggle","input","highlightRow","showCheckStatus","getTotalRows","highlightAll","checkedRowStatus","count","bodyRenderer","showToastMessage","clearToastMessage","$row","getRow$","_highlightedRows","childIndex","_lastScrollTo","rowsInView","offset","dataAttr","getFilterInput","BodyRenderer","appendRemainingData","render","clusterize","renderBodyWithClusterize","renderBodyHTML","getBodyHTML","restoreState","initialData","getDataForClusterize","scrollElem","contentElem","message","toastMessage","Style","scopeClass","instances","datatableWrapper","styleEl","bindResizeWindow","prototypeAccessors$2","stylesheet","sheet","distributeRemainingWidth","refreshColumnWidth","compensateScrollbarWidth","ruleString","cssRules","deleteRule","insertRule","setHeaderStyle","setupMinWidth","setupNaturalColumnWidth","setupColumnWidth","setColumnStyle","setDefaultCellHeight","margin","nonResizableColumnsSelector","cursor","naturalWidth","getRowIndexColumnWidth","totalWidth","onePart","ratioWidth","lastCol","wrapperWidth","headerWidth","resizableColumns","deltaWidth","getColumnHeaderElement","__cellHeightSet","$firstCell","cellHeight","setCellHeight","text-align","baseWidth","_rowIndexColumnWidthMap","digits","KEYCODES","13","91","16","17","18","37","38","39","40","9","27","67","70","Keyboard","listeners","keyCode","shiftKey","ctrlKey","metaKey","preventBubbling","listener","DEFAULT_OPTIONS","label","events","onRemoveColumn","onSwitchColumn","column1","column2","onSortColumn","onCheckRow","asc","desc","none","freezeMessage","logs","noDataMessage","DataTable","HTMLElement","buildOptions","prepare","prepareDom","freezeContainer","viewportHeight","scrollToLastColumn","updateOptions","eventName","description","main","scripts","build","dev","test:watch","devDependencies","chai","cssnano","deepmerge","eslint","eslint-loader","mocha","postcss-cssnext","postcss-nested","precss","rollup-plugin-commonjs","rollup-plugin-json","rollup-plugin-node-resolve","rollup-plugin-postcss","rollup-plugin-uglify","repository","url","keywords","author","license","bugs","homepage","dependencies","clusterize.js","lodash","sortablejs","packageJson","__version__","provide","ReportView","setup_defaults","super","view_name","page_title","__","menu_items","report_menu_items","get_route","report_name","add_totals_row","view_user_settings","get_report_doc","doc","report_doc","json","JSON","parse","filters","order_by","setup_view","setup_columns","bind_charts_button","setup_result_area","$datatable_wrapper","$charts_wrapper","$result","before_render","save_report_settings","model","user_settings","doctype","save_view_user_settings","fields","filter_area","sort_selector","get_sql_string","update_data","dict","values","chart","refresh_charts","datatable","get_data","setup_datatable","on_update","flash_row","user","session","db","get_doc","update_row","to_refresh","fieldname","cdt_row","cdt","cdoc","_field","new_row","build_row","addClass","removeClass","_flash_row","get_editing_object","remove_column_from_datatable","switch_column","datatabe_col","columns_in_picker","get_columns_for_picker","df","is_column_added","ui","Dialog","title","fieldtype","docfield","bold","primary_action","show_alert","hide","insert_before","add_column_to_datatable","show","list_sidebar","sidebar","toggle_charts","get_chart_data","refresh_charts_sidebar_button","$configure_btn","hasClass","setup_charts","labels","datasets","last_chart_type","chart_type","Chart","colors","format_tooltip_x","format_tooltip_y","field","get_docfield","always_show_decimals","inline","chart_args","get_chart_args","x_field","y_fields","update_values","get_different_chart","cur_list_fields","x_fields","hidden","is_numeric_field","dialog","default","toTitle","y_axes","every","x_axis","y_axis","control","render_editing_input","change","set_focus","set_value","docname","set_control_value","updated_doc","_data","get_value","last_updated_doc","reject","fail","fields_dict","form","make_control","render_input","toggle_label","toggle_description","is_editable","docstatus","std_fields_list","read_only","can_write","build_rows","set_fields","add_field","_add_field","title_field","image_field","in_list_view","in_standard_filter","perm","has_perm","permlevel","is_value_type","report_hide","settings","add_fields","build_fields","get_fields","column_name","get_full_column_name","cdt_name_fields","get_unique_cdt_in_view","uniqBy","col_index","add_currency_column","throw","col1","col2","_fields","standard_fields_filter","in_list","no_value_type","doctype_fields","get_docfields","std_fields","get_table_fields","child_table_fields","get_dialog_fields","dialog_fields","hide_columns","build_column","docfield_map","get_std_field","is_non_std_field","cint","totals_row","cdt_field","get_checked_items","only_docnames","save_report","save_type","_save_report","method","stringify","exc","msgprint","prompt","reqd","with_doc","get_print_settings","print_settings","render_grid","toggle_side_bar","can_export","get_args","selected_items","cmd","file_format_type","page_length","open_url_post","request","tools","downloadify","report","is_report_manager","can_set_user_permissions","add_to_desktop","standard","ListView","standard_pages","container","add_page","make_app_page","single_column","query_report","QueryReport","load","init_promise","tasks","setup_page","setup_report_wrapper","run_serially","page_name","get_route_str","secondary_action","toggle_nothing_to_show","toggle_loading","load_report","refresh_report","get_menu_items","get_report_settings","setup_page_head","toggle_message","setup_filters","set_route_filters","report_settings","onload","get_user_settings","save_user_settings","ref_doctype","query_reports","_load_script","eval","script","after_ajax","html_format","clear_filters","page","set_input","get_query","on_change","onchange","hide_form","show_form","set_filters_by_name","query_report_filters_by_name","route_options","promises","clear_fields","get_filter_values","render_chart","render_report","prepare_columns","prepare_data","tree_report","get_visible_columns","$report","$chart","clear_settings","column_order","for_print","row_obj","raise","missing_mandatory","set_breadcrumbs","get_meta","breadcrumbs","print_report","custom_format","filters_html","get_filters_html_for_print","template","subtitle","get_data_for_print","pdf_report","base_url","urllib","get_base_url","print_css","boot","landscape","orientation","applied_filters","render_template","render_pdf","filter_name","export_report","export_dialog","file_format","column_row","get_data_for_csv","visible_idx","get_columns_for_print","condition","letter_head","can_print","set_title_sub","appendTo","$message","message_div","get_values","BaseList","report_dump","last_modified","with_data","doctypes","pre_loaded","doctype_data","set_data","links","row_idx","link_key","link","replace_dict","make_row","modified_names","GridReport","Class","filter_inputs","preset_checks","tree_grid","padding-top","make_filters","make_waiting","get_data_and_refresh","bind_show","me","cur_grid_report","apply_filters_from_route","setup_filters_done","add_options","set_autocomplete","set_primary_action","add_menu_item","init_filter_values","grid","range","set_filter","datetime","str_to_user","$filter","Awesomplete","originalEvent","sys_defaults","selectedIndex","set_default_values","from_date","year_start_date","to_date","year_end_date","add_select","default_value","add_data","icon","add_date","add_label","add_check","cssClass","keypress","which","waiting","messages","load_filter_values","user_to_str","make_name_map","reset_item_values","formatter","currency_formatter","round_item_values","flt","get_default","round_off_data","grid_wrapper","setup_dataview_columns","apply_link_formatters","prepare_data_view","setup_chart","datatable_columns","chart_area","export","set_unique_id","trigger","enableColumnReorder","slickgrid_tools","get_view_data","dataView","apply_filters","_show","apply_filter","apply_zero_filter","show_zero","show_zero_check","click","is_default","date_formatter","columnDef","dataContext","repl","_style","format_number","text_formatter","esc_value","cstr","check_formatter","link_formatter","dataview_columns","filter_input","col_name","open_btn","get_link_open_icon","encodeURIComponent","make_date_range_columns","date_diff","get_diff","column_map","last_date","add_column","date","build_columns","add_days","str_to_obj","getMonth","getDate","trigger_refresh_on_change","GridReportWithPlot","chart_data","plottable_cols","plot","TreeGridReport","make_transaction_list","parent_doctype","tmap","tl","copy_dict","add_tree_grid_events","onClick","subscribe","getItem","_collapsed","updateItem","stopImmediatePropagation","tree_formatter","spacer","getIdxById","tree_dataview_filter","parent_field","item_by_name","parent_map","prepare_tree","item_dt","group_dt","group_data","item_data","item_group_map","group_ids","is_group","set_indent","msgbox","with_groups","with_ledgers"],"mappings":"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"}